/**
 * Kendo UI v2023.2.718 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("kendo.core.js")):"function"==typeof define&&define.amd?define(["kendo.core.min"],e):((t="undefined"!=typeof globalThis?globalThis:t||self).kendodateinput=t.kendodateinput||{},t.kendodateinput.common=t.kendodateinput.common||{},t.kendodateinput.common.js=e())}(this,(function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}Object.create;Object.create;var i,n=function(t){return t?new Date(t.getTime()):null},r=function(t,e){var i=n(t);return 0===e&&23===i.getHours()&&i.setHours(i.getHours()+2),i},s=function(t,e){var i=n(t);return i.setDate(i.getDate()+e),r(i,t.getHours())},a=function(t,e,i,n,s,a,o){void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=0);var l=new Date(t,e,i,n,s,a,o);return t>-1&&t<100&&l.setFullYear(l.getFullYear()-1900),r(l,n)},o=function(t){var e=a(t.getFullYear(),t.getMonth()+1,1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());return s(e,-1)},l=function(t,e){var i=n(t),s=(12+(i.getMonth()+e)%12)%12;return i.setMonth(i.getMonth()+e),function(t,e){return t.getMonth()!==e?o(l(t,-1)):t}(r(i,t.getHours()),s)};!function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"}(i||(i={}));var h;!function(t){t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday"}(h||(h={}));var u=function(t){return a(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)},c=function(t,e){return!t&&!e||t&&e&&t.getTime()===e.getTime()},d={rules:{},titles:{},zones:{}},p={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},m={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},g=function(t,e,i){var n,r=e[3],s=e[4],a=e[5],o="u"===a[3]?6e4*-i:0;if(isNaN(s)){if(0===s.indexOf("last")){n=new Date(Date.UTC(t,p[r]+1,1,a[0]-24,a[1],a[2])+o);var l=m[s.substr(4,3)],h=n.getUTCDay();n.setUTCDate(n.getUTCDate()+l-h-(l>h?7:0))}else if(s.indexOf(">=")>=0){n=new Date(Date.UTC(t,p[r],s.substr(5),a[0],a[1],a[2],0)+o);l=m[s.substr(0,3)],h=n.getUTCDay();n.setUTCDate(n.getUTCDate()+l-h+(l<h?7:0))}}else n=new Date(Date.UTC(t,p[r],s,a[0],a[1],a[2])+o);return n},f=(new Date).getTime(),v=function(t,e,i){void 0===e&&(e=f),void 0===i&&(i=0);var n=d.rules[t];if(!n){var r=t.split(":"),s=0;return r.length>1&&(s=60*r[0]+Number(r[1])),[-1e6,"max","-","Jan",1,[0,0,0],s,"-"]}var a=new Date(e).getUTCFullYear();(n=n.filter((function(t){var e=t[0],i=t[1];return e<=a&&(i>=a||e===a&&"only"===i||"max"===i)}))).push(e),n.sort((function(t,e){return"number"!=typeof t&&(t=Number(g(a,t,i))),"number"!=typeof e&&(e=Number(g(a,e,i))),t-e}));var o=n[n.indexOf(e)-1]||n[n.length-1];return isNaN(o)?o:null},y="The required {0} timezone information is not provided!",D=/\{(\d+)}?\}/g,E=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},S=function(t){for(var e=arguments,i=[],n=1;n<arguments.length;n++)i[n-1]=e[n];var r=E(i);return t.replace(D,(function(t,e){return r[parseInt(e,10)]}))},b=function(t,e){if(void 0===e&&(e=(new Date).getTime()),"Etc/UTC"===t||"Etc/GMT"===t)return[0,"-","UTC",null];for(var i=function(t){var e=d.zones;if(!e)throw new Error(S(y,t));var i=e[t],n="string"==typeof i?e[i]:i;if(!n)throw new Error(S(y,t));return n}(t),n=i.length-1;n>=0;n--){var r=i[n][3];if(r&&e>r)break}var s=i[n+1];if(!s)throw new Error(S(y,t));return s},M=function(t,e){var i=e.getTime(),n=b(t,i);return{rule:v(n[1],i,n[0]),zone:n}},P=function(t,e){if(void 0===e&&(e=new Date),"Etc/UTC"===t||"Etc/GMT"===t)return 0;if(""===t)return e.getTimezoneOffset();var i=M(t,e),n=i.rule,r=i.zone;return parseFloat(n?r[0]-n[6]:r[0])};var w=function(t,e){return new Date(t.getTime()+6e4*e)},T=function(t,e){return new Date(t.getTime()+36e5*e)},C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dev"],O=function(t,e){return void 0===e&&(e=2),(t<0?"-":"")+new Array(e).concat([Math.abs(t)]).join("0").slice(-e)};function x(t,e){var i=P(e,t),n=T(t,-1);return i<P(e,n)}function F(t,e){var i=x(t,e)?1:0;return T(t,i)}function k(t,e,i){if(e===i)return t;var n=P(e,t),r=P(i,t),s=n-r,a=w(t,s),o=P(i,a);return w(t,s+(r-o))}!function(){function t(t,e){this._utcDate=n(t),this.timezone=e;var i=P(e,t);this.timezoneOffset=i;var r=F(t,e);this._localDate=k(r,e,"Etc/UTC")}Object.defineProperty(t.prototype,"cachedLocalDate",{get:function(){return this._localDate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cachedUTCDate",{get:function(){return this._utcDate},enumerable:!0,configurable:!0}),t.fromLocalDate=function(e,i){void 0===i&&(i="");var n=k(e,"Etc/UTC",i),r=x(n,i),s=P(i,n),a=0;r&&(a=s>0?-1:1);var o=T(n,a);return t.fromUTCDate(o,i)},t.fromUTCDate=function(e,i){return void 0===i&&(i=""),new t(e,i)},t.prototype.toLocalDate=function(){return n(this._localDate)},t.prototype.toUTCDate=function(){return n(this._utcDate)},t.prototype.toTimezone=function(e){if(this.timezone===e)return this.clone();var i=P(this.timezone,this._utcDate),n=w(this._utcDate,i);return t.fromLocalDate(n,e)},t.prototype.clone=function(){return t.fromUTCDate(this._utcDate,this.timezone)},t.prototype.addDays=function(e){var i=new Date(this._utcDate.getTime());return i.setUTCDate(i.getUTCDate()+e),t.fromUTCDate(i,this.timezone)},t.prototype.addTime=function(e){var i=F(new Date(this._utcDate.getTime()),this.timezone);i.setTime(i.getTime()+e);var n=F(i,this.timezone);return t.fromUTCDate(n,this.timezone)},t.prototype.stripTime=function(){var e=this._utcDate,i=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0);return t.fromUTCDate(new Date(i),this.timezone)},t.prototype.getTime=function(){return this._localDate.getTime()},t.prototype.getTimezoneOffset=function(){return this.timezoneOffset},t.prototype.getFullYear=function(){return this._utcDate.getUTCFullYear()},t.prototype.getMonth=function(){return this._utcDate.getUTCMonth()},t.prototype.getDate=function(){return this._utcDate.getUTCDate()},t.prototype.getDay=function(){return this._utcDate.getUTCDay()},t.prototype.getHours=function(){return this._utcDate.getUTCHours()},t.prototype.getMinutes=function(){return this._utcDate.getUTCMinutes()},t.prototype.getSeconds=function(){return this._utcDate.getUTCSeconds()},t.prototype.getMilliseconds=function(){return this._utcDate.getUTCMilliseconds()},t.prototype.getUTCDate=function(){return this._localDate.getUTCDate()},t.prototype.getUTCDay=function(){return this._localDate.getUTCDay()},t.prototype.getUTCFullYear=function(){return this._localDate.getUTCFullYear()},t.prototype.getUTCHours=function(){return this._localDate.getUTCHours()},t.prototype.getUTCMilliseconds=function(){return this._localDate.getUTCMilliseconds()},t.prototype.getUTCMinutes=function(){return this._localDate.getUTCMinutes()},t.prototype.getUTCMonth=function(){return this._localDate.getUTCMonth()},t.prototype.getUTCSeconds=function(){return this._localDate.getUTCSeconds()},t.prototype.setTime=function(t){throw new Error("Method not implemented.")},t.prototype.setMilliseconds=function(t){throw new Error("Method not implemented.")},t.prototype.setUTCMilliseconds=function(t){throw new Error("Method not implemented.")},t.prototype.setSeconds=function(t,e){throw new Error("Method not implemented.")},t.prototype.setUTCSeconds=function(t,e){throw new Error("Method not implemented.")},t.prototype.setMinutes=function(t,e,i){throw new Error("Method not implemented.")},t.prototype.setUTCMinutes=function(t,e,i){throw new Error("Method not implemented.")},t.prototype.setHours=function(t,e,i,n){throw new Error("Method not implemented.")},t.prototype.setUTCHours=function(t,e,i,n){throw new Error("Method not implemented.")},t.prototype.setDate=function(t){throw new Error("Method not implemented.")},t.prototype.setUTCDate=function(t){throw new Error("Method not implemented.")},t.prototype.setMonth=function(t,e){throw new Error("Method not implemented.")},t.prototype.setUTCMonth=function(t,e){throw new Error("Method not implemented.")},t.prototype.setFullYear=function(t,e,i){throw new Error("Method not implemented.")},t.prototype.setUTCFullYear=function(t,e,i){throw new Error("Method not implemented.")},t.prototype.toISOString=function(){return this._localDate.toISOString()},t.prototype.toJSON=function(){return this._localDate.toJSON()},t.prototype.toString=function(){var t,e=(t=this._utcDate,C[t.getUTCDay()]+" "+I[t.getUTCMonth()]),i=this.toTimeString();return e+" "+this.getDate()+" "+this.getFullYear()+" "+i},t.prototype.toDateString=function(){return(t=this._utcDate,new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())).toDateString();var t},t.prototype.toTimeString=function(){var t=O(this.getHours())+":"+O(this.getMinutes())+":"+O(this.getSeconds()),e=function(t){var e=t<=0?"+":"-",i=Math.abs(t);return"GMT"+e+O(Math.floor(i/60))+O(i%60)}(this.timezoneOffset),i=function(t,e){if(void 0===e&&(e=new Date),"Etc/UTC"===t)return"UTC";if("Etc/GMT"===t)return"GMT";if(""===t)return"";var i=M(t,e),n=i.zone,r=i.rule,s=n[2];return s.indexOf("/")>=0?s.split("/")[r&&+r[6]?1:0]:s.indexOf("%s")>=0?s.replace("%s",r&&"-"!==r[7]?r[7]:""):s}(this.timezone,this._utcDate);return i&&(i=" ("+i+")"),t+" "+e+i},t.prototype.toLocaleString=function(t,e){return this._localDate.toLocaleString(t,e)},t.prototype.toLocaleDateString=function(t,e){return this._localDate.toLocaleDateString(t,e)},t.prototype.toLocaleTimeString=function(t,e){return this._localDate.toLocaleTimeString(t,e)},t.prototype.toUTCString=function(){return this.toTimezone("Etc/UTC").toString()},t.prototype[Symbol.toPrimitive]=function(t){return"string"===t||"default"===t?this.toString():this._localDate.getTime()},t.prototype.valueOf=function(){return this.getTime()},t.prototype.getVarDate=function(){throw new Error("Not implemented.")},t.prototype.format=function(t){throw new Error("Not implemented.")},t.prototype.formatUTC=function(t){throw new Error("Not implemented.")}}();var V,U,_,N=function(){this.symbols="",this.partMap=[]},j="_",L=68,A="d",H="en",z="Delete",Y="Backspace",K=" ",W=function(t){return new Array(Math.max(t,0)).fill("0").join("")},B=function(t){return t.replace(/^0*/,"")},Z=function(t,e){return t[e.pattern[0]]=e.type,t},J=function(t){return null!=t},G=function(t){return J(t)&&"number"==typeof t&&!Number.isNaN(t)},q=function(t){return parseInt(t,10)},R=function(t,e,i){return Math.min(i,Math.max(e,t))},Q=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];return Object.assign.apply(Object,e)},X=(V="setFullYear",function(t,e){var i=n(t);return i[V](e),i}),$=function(t,e,i,n,r,s,a,o){return!(!t||t.getFullYear()!==e||t.getMonth()!==i||t.getDate()!==n||t.getHours()!==r||t.getMinutes()!==s||t.getSeconds()!==a||t.getMilliseconds()!==o)},tt=function(t){return J(t)&&t.getTime&&G(t.getTime())},et=/d|M|H|h|m|s/,it=function(){function t(t){var e=t.intlService,i=t.formatPlaceholder,r=t.format,s=t.cycleTime,a=void 0!==s&&s,o=t.twoDigitYearMax,l=void 0===o?L:o,h=t.value,c=void 0===h?null:h,d=t.autoCorrectParts,p=void 0===d||d;if(this.year=!0,this.month=!0,this.date=!0,this.hours=!0,this.minutes=!0,this.seconds=!0,this.milliseconds=!0,this.dayperiod=!0,this.leadingZero=null,this.typedMonthPart="",this.knownParts="adHhmMsEyS",this.symbols={E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y",S:"S"},this._value=u(new Date),this.cycleTime=!1,this._partiallyInvalidDate={startDate:null,invalidDateParts:{E:{value:null,date:null,startDateOffset:0},H:{value:null,date:null,startDateOffset:0},M:{value:null,date:null,startDateOffset:0},a:{value:null,date:null,startDateOffset:0},d:{value:null,date:null,startDateOffset:0},h:{value:null,date:null,startDateOffset:0},m:{value:null,date:null,startDateOffset:0},s:{value:null,date:null,startDateOffset:0},y:{value:null,date:null,startDateOffset:0},S:{value:null,date:null,startDateOffset:0}}},this.setOptions({intlService:e,formatPlaceholder:i,format:r,cycleTime:a,twoDigitYearMax:l,value:c,autoCorrectParts:p}),c)this._value=n(c);else{this._value=u(new Date);for(var m=this.dateFormatString(this.value,this.format).symbols,g=0;g<m.length;g++)this.setExisting(m[g],!1)}}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){(!t||t instanceof Date)&&(this._value=t,this.resetInvalidDate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeId",{get:function(){for(var t=H,e=Object.keys(this.intl.cldr),i=0;i<e.length;i++){var n=e[i],r=this.intl.cldr[n];if(r.name&&r.calendar&&r.numbers&&r.name!==H){t=r.name;break}}return t},enumerable:!0,configurable:!0}),t.prototype.setOptions=function(t){this.intl=t.intlService,this.formatPlaceholder=t.formatPlaceholder||"wide",this.format=t.format,this.cycleTime=t.cycleTime,this.monthNames=this.allFormattedMonths(this.localeId),this.dayPeriods=this.allDayPeriods(this.localeId),this.twoDigitYearMax=t.twoDigitYearMax,this.autoCorrectParts=t.autoCorrectParts},t.prototype.setValue=function(t){t?c(t,this._value)||(this._value=n(t),this.modifyExisting(!0)):(this._value=u(new Date),this.modifyExisting(!1)),this.resetInvalidDate()},t.prototype.hasValue=function(){var t=this;return this.intl.splitDateFormat(this.format,this.localeId).reduce((function(e,i){return e||"literal"!==i.type&&"dayperiod"!==i.type&&t.getExisting(i.pattern[0])}),!1)},t.prototype.getValue=function(){for(var t=0;t<this.knownParts.length;t++)if(!this.getExisting(this.knownParts[t]))return null;return n(this.value)},t.prototype.getFormattedDate=function(t){return this.intl.formatDate(this.getValue(),t,this.localeId)},t.prototype.getTextAndFormat=function(t){void 0===t&&(t="");var e=t||this.format,i=this.intl.formatDate(this.value,e,this.localeId),n=this.dateFormatString(this.value,e);if(!this.autoCorrectParts&&this._partiallyInvalidDate.startDate){for(var r="",s=this.intl.formatDate(this.value,e,this.localeId),a=this.getFormattedInvalidDates(e),o=0;o<s.length;o++){var l=n.symbols[o];if("literal"===n.partMap[o].type)r+=i[o];else if(this.getInvalidDatePartValue(l)){var h=this.getPartsForSegment(n,o);if("M"===l){var u=(q(this.getInvalidDatePartValue(l))+1).toString();if(h.length>2)r+=a[l][o];else if(this.getInvalidDatePartValue(l))r+=W(h.length-u.length)+u,o+=h.length-1;else r+=a[l][o]}else if(this.getInvalidDatePartValue(l)){u=this.getInvalidDatePartValue(l).toString();r+=W(h.length-u.length)+u,o+=h.length-1}else r+=a[l][o]}else r+=i[o]}i=r}return this.merge(i,n)},t.prototype.getFormattedInvalidDates=function(t){var e=this;void 0===t&&(t="");var i=t||this.format,n={E:"",H:"",M:"",a:"",d:"",h:"",m:"",s:"",y:"",S:""};return Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(t){var r=e.getInvalidDatePart(t).date;if(r){var s=e.intl.formatDate(r,i,e.localeId);n[t]=s}})),n},t.prototype.modifyExisting=function(t){for(var e=this.dateFormatString(this.value,this.format).symbols,i=0;i<e.length;i++)this.setExisting(e[i],t)},t.prototype.getExisting=function(t){switch(t){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"t":case"a":return this.dayperiod;case"m":return this.minutes;case"s":return this.seconds;case"S":return this.milliseconds;default:return!0}},t.prototype.setExisting=function(t,e){switch(t){case"y":this.year=e,!1===e&&this._value.setFullYear(2e3);break;case"M":this.month=e,!1===e&&this.autoCorrectParts&&this._value.setMonth(0);break;case"d":this.date=e;break;case"h":case"H":this.hours=e;break;case"t":case"a":this.dayperiod=e;break;case"m":this.minutes=e;break;case"s":this.seconds=e;break;case"S":this.milliseconds=e}this.getValue()&&this.resetInvalidDate()},t.prototype.modifyPart=function(t,e){if(J(t)&&J(e)&&0!==e){var i,r=n(this.value),s=!1,o="M"===t,h="d"===t||"E"===t,u=this.getExisting(t);if(this.autoCorrectParts||!h&&!o)switch(t){case"y":r.setFullYear(r.getFullYear()+e);break;case"M":r=l(this.value,e);break;case"d":case"E":r.setDate(r.getDate()+e);break;case"h":case"H":r.setHours(r.getHours()+e),s=!0;break;case"m":r.setMinutes(r.getMinutes()+e),s=!0;break;case"s":r.setSeconds(r.getSeconds()+e),s=!0;break;case"S":r.setMilliseconds(r.getMilliseconds()+e);break;case"a":r.setHours(r.getHours()+12*e),s=!0}else{var c=this._partiallyInvalidDate.invalidDateParts||{},d=this.getInvalidDatePartValue(t),p=c.y.value||r.getFullYear(),m=c.M.value||r.getMonth(),g=c.d.value||c.E.value||r.getDate(),f=c.h.value||c.H.value||r.getHours(),v=c.m.value||r.getMinutes(),y=c.s.value||r.getSeconds(),D=c.S.value||r.getMilliseconds();switch(t){case"y":p+=e;break;case"M":m+=e;break;case"d":case"E":g+=e}if("M"===t){if((m<0||m>11)&&u)return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t);if(!u){if(m<0)m=R(m%11+1+11,0,11);else{var E=J(d)?m:(e-1)%12;m=R(E,0,11)}m=R(m,0,11)}m=R(m,0,11)}else if("d"===t)if(u){if(g<=0||g>31)return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t)}else if(!u){if(J(d)&&(g<=0||g>31))return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t);if(e<0){var S=J(d)?g:31-Math.abs(e%31)+1;g=R(S,1,31)}else{S=J(d)?g:e%31;g=R(S,1,31)}g=R(g,1,31)}var b=a(p,m,g,f,v,y,D),M=o||h?this.modifyDateSymbolWithValue(r,t,o?m:g):null,P=$(b,p,m,g,f,v,y,D);this.getValue()&&$(b,p,m,g,f,v,y,D)?(r=n(b),this.markDatePartsAsExisting()):o&&M?M.getMonth()===m?this.getExisting("d")?P?(r=n(b),this.resetInvalidDateSymbol(t)):(i=!0,this.setInvalidDatePart(t,{value:m,date:n(M),startDateOffset:e,startDate:n(this.value)}),this.setExisting(t,!1)):P?(this.resetInvalidDateSymbol(t),r=n(b),this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d"))):(this.resetInvalidDateSymbol(t),r=n(M)):(i=!0,this.setInvalidDatePart(t,{value:m,date:n(M),startDateOffset:e,startDate:n(this.value)}),this.setExisting(t,!1)):h&&M&&(M.getDate()===g?this.getExisting("M")?P?(r=n(b),this.resetInvalidDateSymbol(t)):(i=!0,this.setInvalidDatePart(t,{value:g,date:n(M),startDateOffset:e,startDate:n(this.value)}),this.setExisting(t,!1)):P?(r=n(b),this.resetInvalidDateSymbol(t),this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M"))):(this.resetInvalidDateSymbol(t),r=n(M)):(i=!0,this.setInvalidDatePart(t,{value:g,date:n(this.value),startDateOffset:e,startDate:n(this.value)}),this.setExisting(t,!1)))}this.shouldNormalizeCentury()&&(r=this.normalizeCentury(r)),s&&!this.cycleTime&&(r.getDate(),this._value.getDate()),i||(this.setExisting(t,!0),this._value=r,this.getValue()&&this.resetInvalidDate())}},t.prototype.parsePart=function(t){for(var e=t.symbol,i=t.currentChar,r=t.resetSegmentValue,s=t.cycleSegmentValue,h=t.rawTextValue,u=t.isDeleting,c=t.originalFormat,d=!s,p=this.dateFormatString(this.value,this.format),m=p.partMap.filter((function(t){return"literal"===t.type})).map((function(t,e){return{datePartIndex:e,type:t.type,pattern:t.pattern,literal:""}})),g=p.partMap.map((function(t){return{type:t.type,pattern:t.pattern,text:""}})),f=0;f<m.length;f++){for(var v=m[f],y=0;y<v.pattern.length;y++)m[f+y]&&(m[f+y].literal=v.pattern[y]);f+=v.pattern.length-1}for(f=0;f<g.length;f++){for(v=g[f],y=0;y<v.pattern.length;y++)g[f+y]&&(g[f+y].text=v.pattern[y]);f+=v.pattern.length-1}var D={value:null,switchToNext:!1,resetPart:d&&"M"===e&&p.partMap.filter((function(t){return"month"===t.type})).some((function(t){return t.pattern.length>2})),hasInvalidDatePart:!1};if(!i){if(!d)return this.resetLeadingZero(),this.setExisting(e,!1),this.resetInvalidDateSymbol(e),Q(D,{value:null,switchToNext:!1});for(f=0;f<m.length;f++){var E=m[f].literal,S=h.startsWith(E),b=h.endsWith(E),M=h.indexOf(E+E)>=0;if(S||b||M)return this.resetLeadingZero(),this.setExisting(e,!1),this.resetInvalidDateSymbol(e),Q(D,{value:null,switchToNext:!1})}}var P=this.intl.formatDate(this.value,this.format,this.localeId),w=p.symbols,T=!1,C="",I="",O="",x="",F="",k="",V="";for(f=0;f<g.length;f++)V+=g[f].text;var U=this.format===w||this.format===V||this.format===c||this.format.length===c.length,_=(U?V:c).indexOf(e),N=(U?V:c).lastIndexOf(e)-_+1,j=c.length-h.length;if(d||!d&&!this.autoCorrectParts){for(f=0;f<P.length;f++){if(w[f]===e)I+=this.getExisting(e)?P[f]:"0",j>0?O.length+j<N&&(O+=h[f]||""):O+=h[f]||"",T=!0;else T?(k+=P[f],F+=P[f]):(C+=P[f],x+=P[f])}if(U&&(V.length<h.length?O+=i:!u&&(c.length,h.length),O.length>N))return Q(D,{value:null,switchToNext:!1});if(!U||U&&!this.autoCorrectParts){I="",O="",C="",k="",T=!1;for(f=0;f<c.length;f++){if(c[f]===e)I+=this.getExisting(e)?P[f]||"":"0",j>0?O.length+j<N&&(O+=h[f]||""):O+=h[f]||"",T=!0;else T?k+=h[f-j]||"":C+=h[f]||""}c.length<h.length&&(O+=i)}}if(!d)if(this.autoCorrectParts){I="",O="",C="",k="",T=!1;for(f=0;f<P.length;f++){if(w[f]===e)I+=this.getExisting(e)?P[f]:"0",T=!0;else T?k+=P[f]:C+=P[f]}}else I=r?O:I;var L=null,A=this.matchMonth(i),H=this.matchDayPeriod(i,e),z="0"===i,Y=this.leadingZero||{};z?("0"===O&&(O=I),0!==q(r?i:(d?O:I)+i)||this.isAbbrMonth(p.partMap,e)||this.incrementLeadingZero(e)):this.resetLeadingZero();var K=this.partPattern(p.partMap,e),Z=K?K.pattern:null,J=this.patternLength(Z)||Z.length;if(d&&u&&!O)return this.setExisting(e,!1),Q(D,{value:null,switchToNext:!1});var R=I.length-3,X=!0,et=d?O:I;for(f=Math.max(0,R);f<=I.length&&X;f++){et=r?i:d?O:I.substring(f)+i,!d&&this.autoCorrectParts||(X=!1,et=B(et),et=W(J-et.length)+et);var it=parseInt(et,10),nt=C+et+k;L=this.intl.parseDate(nt,this.format,this.localeId);var rt=!1;d&&!tt(L)&&this.autoCorrectParts&&(L=this.intl.parseDate(x+et+F,this.format,this.localeId),rt=!0);var st=!isNaN(parseInt(i,10))||d&&u&&""===i;if(!L&&!isNaN(it)&&st&&this.autoCorrectParts){if("M"===e&&!A){var at=it-1;at>-1&&at<12&&((L=n(this.value)).setMonth(at),L.getMonth()!==at&&(L=o(l(L,-1))))}"y"===e&&(L=a(parseInt(et,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),(d&&tt(L)||!d&&L)&&this.date&&L.getDate()!==this.value.getDate()&&(L=o(l(L,-1))))}if(d&&tt(L)||!d&&L){var ot=this.peek(et,Z),lt=rt?""+x+ot+F:""+C+ot+k,ht=this.intl.parseDate(lt,this.format,this.localeId),ut=((this.leadingZero||{})[e]||0)+B(et).length>=J,ct=null===ht||(Y[e]?Z.length<=et.length:ut);return this.shouldNormalizeCentury()&&(L=this.normalizeCentury(L)),this._value=L,this.setExisting(e,!0),this.resetInvalidDateSymbol(e),this.autoCorrectParts||("M"===e?this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d")):"d"===e&&this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M")),this.hasInvalidDatePart()||this.markDatePartsAsExisting()),Q(D,{value:this.value,switchToNext:ct})}}if(A&&(L=this.intl.parseDate(C+A+k,this.format,this.localeId)))return this._value=L,this.setExisting(e,!0),Q(D,{value:this.value,switchToNext:!1});if(H&&(L=this.intl.parseDate(C+H+k,this.format)))return this._value=L,Q(D,{value:this.value,switchToNext:!0});if(z&&this.setExisting(e,!1),!this.autoCorrectParts){var dt=void 0,pt=d?O:et,mt=q(pt);if(G(mt)){if("d"===e&&(mt<=0||mt>31)||"M"===e&&(mt<0||mt>11))return Q(D,{value:null,switchToNext:!1});dt="M"===e?mt-1:mt;var gt="M"===e,ft="d"===e,vt=n(this._value),yt=this._partiallyInvalidDate.invalidDateParts||{},Dt=yt.y.value||vt.getFullYear(),Et=gt?dt:yt.M.value||vt.getMonth(),St=ft?dt:yt.d.value||yt.E.value||vt.getDate(),bt=yt.h.value||yt.H.value||vt.getHours(),Mt=yt.m.value||vt.getMinutes(),Pt=yt.s.value||vt.getSeconds(),wt=yt.S.value||vt.getMilliseconds(),Tt=a(Dt,Et,St,bt,Mt,Pt,wt),Ct=$(Tt,Dt,Et,St,bt,Mt,Pt,wt),It=gt||ft?this.modifyDateSymbolWithValue(vt,e,gt?Et:St):null,Ot=!1;if(gt&&It?It.getMonth()===Et?this.getExisting("d")?Ct?(vt=n(Tt),this.resetInvalidDateSymbol(e)):(Ot=!0,this.setInvalidDatePart(e,{value:Et,date:n(It),startDate:n(this.value)}),this.setExisting(e,!1)):Ct?(this.resetInvalidDateSymbol(e),vt=n(Tt),this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d"))):(this.resetInvalidDateSymbol(e),vt=n(It)):(Ot=!0,this.setInvalidDatePart(e,{value:Et,date:n(It),startDate:n(this.value)}),this.setExisting(e,!1)):ft&&It&&(It.getDate()===St?this.getExisting("M")?Ct?(vt=n(Tt),this.resetInvalidDateSymbol(e)):(Ot=!0,this.setInvalidDatePart(e,{value:St,date:n(It),startDate:n(this.value)}),this.setExisting(e,!1)):Ct?(vt=n(Tt),this.resetInvalidDateSymbol(e),this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M"))):(this.resetInvalidDateSymbol(e),vt=n(It)):(Ot=!0,this.setInvalidDatePart(e,{value:St,date:n(this.value),startDate:n(this.value)}),this.setExisting(e,!1))),!Ot){if(this.setExisting(e,!0),d&&!tt(L)){var xt=this.intl.parseDate(x+et+F,this.format,this.localeId);tt(xt)&&(this._value=xt)}else this._value=vt;this.getValue()&&this.resetInvalidDate()}ct=!1;return ct="M"===e?mt>=2||pt.length>=2:U?pt.length===N:pt.length>N,Q(D,{value:null,switchToNext:ct,hasInvalidDatePart:Ot})}}return Q(D,{value:null,switchToNext:!1})},t.prototype.symbolMap=function(t){return this.intl.splitDateFormat(this.format,this.localeId).reduce(Z,{})[t]},t.prototype.resetLeadingZero=function(){var t=null!==this.leadingZero;return this.setLeadingZero(null),t},t.prototype.setLeadingZero=function(t){this.leadingZero=t},t.prototype.getLeadingZero=function(){return this.leadingZero||{}},t.prototype.normalizeCentury=function(t){if(!J(t))return t;var e=function(t){return!J(t)||isNaN(t.getTime())?0:Number(t.getFullYear().toString().slice(-2))}(t),i=this.getNormalizedCenturyBase(e);return X(t,i+e)},t.prototype.incrementLeadingZero=function(t){var e=this.leadingZero||{};e[t]=(e[t]||0)+1,this.leadingZero=e},t.prototype.isAbbrMonth=function(t,e){var i=this.partPattern(t,e);return"month"===i.type&&i.names},t.prototype.partPattern=function(t,e){return t.filter((function(t){return-1!==t.pattern.indexOf(e)}))[0]},t.prototype.peek=function(t,e){var i=t.replace(/^0*/,"")+"0";return W(e.length-i.length)+i},t.prototype.matchMonth=function(t){if(this.typedMonthPart+=t.toLowerCase(),0===this.monthNames.length)return"";for(;this.typedMonthPart.length>0;){for(var e=0;e<this.monthNames.length;e++)if(0===this.monthNames[e].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[e];var i=parseInt(this.typedMonthPart,10);if(i>=1&&i<=12&&i.toString()===this.typedMonthPart)return this.monthNames[i-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""},t.prototype.matchDayPeriod=function(t,e){var i=t.toLowerCase();if("a"===e&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(i))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(i))return this.dayPeriods.pm}return""},t.prototype.allFormattedMonths=function(t){void 0===t&&(t="en");for(var e=this.intl.splitDateFormat(this.format,this.localeId),i=0;i<e.length;i++)if("month"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return[]},t.prototype.allDayPeriods=function(t){void 0===t&&(t="en");for(var e=this.intl.splitDateFormat(this.format),i=0;i<e.length;i++)if("dayperiod"===e[i].type&&e[i].names)return this.intl.dateFormatNames(t,e[i].names);return null},t.prototype.patternLength=function(t){return"y"===t[0]?4:et.test(t)?2:0},t.prototype.dateFormatString=function(t,e){for(var i=this.intl.splitDateFormat(e,this.localeId),n=[],r=[],s=0;s<i.length;s++)for(var a=this.intl.formatDate(t,{pattern:i[s].pattern},this.localeId).length;a>0;)n.push(this.symbols[i[s].pattern[0]]||j),r.push(i[s]),a--;var o=new N;return o.symbols=n.join(""),o.partMap=r,o},t.prototype.merge=function(t,e){for(var i="",n="",r=e.symbols,s=!1,a=0,o=this.getFormattedInvalidDates(r),l=r.length-1;l>=0;l--){var h=this.getPartsForSegment(e,l);if(-1===this.knownParts.indexOf(r[l])||this.getExisting(r[l]))this.autoCorrectParts?i=t[l]+i:t.length!==r.length?s?i=t[l]+i:a>0?(i=t[l]+i,--a<=0&&(s=!0)):i=(t[l+t.length-r.length]||"")+i:i=t[l]+i,n=r[l]+n;else{var u=r[l],c=0;if(this.autoCorrectParts||!this.autoCorrectParts&&!this.getInvalidDatePartValue(u)){for(;l>=0&&u===r[l];)l--;l++}if(this.leadingZero&&this.leadingZero[u])i="0"+i;else if(!this.autoCorrectParts&&this.getInvalidDatePartValue(u)){var d=this.getInvalidDatePartValue(u).toString();if("M"===u)if(d=(q(this.getInvalidDatePartValue(u))+1).toString(),h.length>2)i=o[u][l]+i;else d=(q(this.getInvalidDatePartValue(u))+1).toString(),i=W(h.length-d.length)+d+i,c=h.length-1,a=d.length-h.length;else i=W(h.length-d.length)+d+i,c=h.length-1,a=d.length-h.length}else i=this.dateFieldName(e.partMap[l])+i;for(;n.length<i.length;)n=r[l]+n;0!==c&&(l=l-c+(t.length-r.length))}}return{text:i,format:n}},t.prototype.dateFieldName=function(t){var e=this.formatPlaceholder||"wide";return e[t.type]?e[t.type]:"formatPattern"===e?t.pattern:this.intl.dateFieldName(Object.assign(t,{nameType:e}))},t.prototype.getNormalizedCenturyBase=function(t){return t>this.twoDigitYearMax?1900:2e3},t.prototype.shouldNormalizeCentury=function(){return this.intl.splitDateFormat(this.format).some((function(t){return"yy"===t.pattern}))},t.prototype.resetInvalidDate=function(){var t=this;this._partiallyInvalidDate.startDate=null,Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(e){t.resetInvalidDatePart(e)}))},t.prototype.resetInvalidDateSymbol=function(t){var e=this;this.resetInvalidDatePart(t);var i=!0;Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(t){e._partiallyInvalidDate.invalidDateParts[t]&&J(e._partiallyInvalidDate.invalidDateParts[t].value)&&(i=!1)})),i&&this.resetInvalidDate()},t.prototype.resetInvalidDatePart=function(t){this._partiallyInvalidDate.invalidDateParts[t]&&(this._partiallyInvalidDate.invalidDateParts[t]={value:null,date:null,startDateOffset:0})},t.prototype.getInvalidDatePart=function(t){return this._partiallyInvalidDate.invalidDateParts[t]||{}},t.prototype.getInvalidDatePartValue=function(t){return(this._partiallyInvalidDate.invalidDateParts[t]||{}).value},t.prototype.setInvalidDatePart=function(t,e){var i=e.value,n=void 0===i?null:i,r=e.date,s=void 0===r?null:r,a=e.startDateOffset,o=void 0===a?0:a,l=e.startDate,h=void 0===l?null:l;this._partiallyInvalidDate.invalidDateParts[t]&&(this._partiallyInvalidDate.invalidDateParts[t].value=n,this._partiallyInvalidDate.invalidDateParts[t].date=s,this._partiallyInvalidDate.invalidDateParts[t].startDateOffset=o,this._partiallyInvalidDate.startDate=h)},t.prototype.hasInvalidDatePart=function(){var t=this,e=!1;return Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(i){t._partiallyInvalidDate.invalidDateParts[i]&&J(t._partiallyInvalidDate.invalidDateParts[i].value)&&(e=!0)})),e},t.prototype.modifyDateSymbolWithOffset=function(t,e,i){var r=n(t),s=!1;switch(e){case"y":r.setFullYear(r.getFullYear()+i);break;case"M":r=l(this.value,i);break;case"d":case"E":r.setDate(r.getDate()+i);break;case"h":case"H":r.setHours(r.getHours()+i),s=!0;break;case"m":r.setMinutes(r.getMinutes()+i),s=!0;break;case"s":r.setSeconds(r.getSeconds()+i),s=!0;break;case"S":r.setMilliseconds(r.getMilliseconds()+i);break;case"a":r.setHours(r.getHours()+12*i),s=!0}return{date:r,timeModified:s}},t.prototype.modifyDateSymbolWithValue=function(t,e,i){var r=n(t);switch(e){case"y":r.setFullYear(i);break;case"M":r=l(t,i-t.getMonth());break;case"d":case"E":r.setDate(i);break;case"h":case"H":case"a":r.setHours(i);break;case"m":r.setMinutes(i);break;case"s":r.setSeconds(i);break;case"S":r.setMilliseconds(i)}return r},t.prototype.markDatePartsAsExisting=function(){this.modifyExisting(!0)},t.prototype.getPartsForSegment=function(t,e){for(var i=t.partMap[e],n=[],r=e;r<t.partMap.length;r++){var s=t.partMap[r];if(i.type!==s.type||i.pattern!==s.pattern)break;n.push(s)}for(r=e-1;r>=0;r--){s=t.partMap[r];if(i.type!==s.type||i.pattern!==s.pattern)break;n.unshift(s)}return n},t}(),nt=8,rt=46,st=9,at=13,ot=37,lt=38,ht=39,ut=40,ct=35,dt=36,pt={events:{}},mt=function(){function t(t){this.options=Q({},pt,t)}return t.prototype.destroy=function(){},t.prototype.trigger=function(t,e){void 0===e&&(e={});var i={defaultPrevented:!1,preventDefault:function(){i.defaultPrevented=!0}};return"function"==typeof this.options.events[t]&&(this.options.events[t](Q(i,e,{sender:this})),i.defaultPrevented)},t}();!function(t){t.None="none",t.Caret="caret",t.Selection="selection"}(U||(U={}));var gt="dragStart",ft="drop",vt="touchstart",yt="mousedown",Dt="mouseup",Et="click",St="input",bt="keydown",Mt="focus",Pt="blur",wt="paste",Tt="DOMMouseScroll",Ct="mousewheel",It="valueChange",Ot="inputEnd",xt="blurEnd",Ft="focusEnd",kt="change",Vt={format:"d",hasPlaceholder:!1,placeholder:null,cycleTime:!0,locale:null,steps:{millisecond:1,second:1,minute:1,hour:1,day:1,month:1,year:1},formatPlaceholder:null,events:(_={},_.valueChange=null,_.input=null,_.inputEnd=null,_.focus=null,_.focusEnd=null,_.blur=null,_.blurEnd=null,_.keydown=null,_.mousewheel=null,_.change=null,_),selectNearestSegmentOnFocus:!1,selectPreviousSegmentOnBackspace:!1,enableMouseWheel:!1,allowCaretMode:!1,autoSwitchParts:!0,autoSwitchKeys:[],twoDigitYearMax:L,autoCorrectParts:!0},Ut=function(t){function i(e,i){var n=t.call(this,i)||this;return n.dateObject=null,n.currentText="",n.currentFormat="",n.interactionMode=U.None,n.previousElementSelection={start:0,end:0},n.init(e,i),n}return e(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.dateObject&&this.dateObject.getValue()},enumerable:!0,configurable:!0}),i.prototype.init=function(t,e){var i=tt(this.options.value)?n(this.options.value):new Date(e.formattedValue);tt(i)||(i=null),this.element=t,this.options=Q({},Vt,e),this.intl=this.options.intlService,this.dateObject=this.createDateObject(),this.dateObject.setValue(i),this.setTextAndFormat(),this.bindEvents(),this.resetSegmentValue=!0,this.interactionMode=U.None,this.forceUpdate()},i.prototype.destroy=function(){this.unbindEvents(),this.dateObject=null,t.prototype.destroy.call(this)},i.prototype.bindEvents=function(){this.onElementDragStart=this.onElementDragStart.bind(this),this.element.addEventListener(gt,this.onElementDragStart),this.onElementDrop=this.onElementDrop.bind(this),this.element.addEventListener(ft,this.onElementDrop),this.onElementClick=this.onElementClick.bind(this),this.element.addEventListener(Et,this.onElementClick),this.onElementMouseDown=this.onElementMouseDown.bind(this),this.element.addEventListener(yt,this.onElementMouseDown),this.element.addEventListener(vt,this.onElementMouseDown),this.onElementMouseUp=this.onElementMouseUp.bind(this),this.element.addEventListener(Dt,this.onElementMouseUp),this.onElementInput=this.onElementInput.bind(this),this.element.addEventListener(St,this.onElementInput),this.onElementKeyDown=this.onElementKeyDown.bind(this),this.element.addEventListener(bt,this.onElementKeyDown),this.onElementFocus=this.onElementFocus.bind(this),this.element.addEventListener(Mt,this.onElementFocus),this.onElementBlur=this.onElementBlur.bind(this),this.element.addEventListener(Pt,this.onElementBlur),this.onElementChange=this.onElementChange.bind(this),this.element.addEventListener(kt,this.onElementChange),this.onElementPaste=this.onElementPaste.bind(this),this.element.addEventListener(wt,this.onElementPaste),this.onElementMouseWheel=this.onElementMouseWheel.bind(this),this.element.addEventListener(Tt,this.onElementMouseWheel),this.element.addEventListener(Ct,this.onElementMouseWheel)},i.prototype.unbindEvents=function(){this.element.removeEventListener(gt,this.onElementDragStart),this.element.removeEventListener(ft,this.onElementDrop),this.element.removeEventListener(vt,this.onElementMouseDown),this.element.removeEventListener(yt,this.onElementMouseDown),this.element.removeEventListener(Dt,this.onElementMouseUp),this.element.removeEventListener(Et,this.onElementClick),this.element.removeEventListener(St,this.onElementInput),this.element.removeEventListener(bt,this.onElementKeyDown),this.element.removeEventListener(Mt,this.onElementFocus),this.element.removeEventListener(Pt,this.onElementBlur),this.element.removeEventListener(kt,this.onElementChange),this.element.removeEventListener(wt,this.onElementPaste),this.element.removeEventListener(Tt,this.onElementMouseWheel),this.element.removeEventListener(Ct,this.onElementMouseWheel)},i.prototype.setOptions=function(t,e){void 0===e&&(e=!1),this.options=Q(this.options,t),this.setDateObjectOptions(),e&&(this.unbindEvents(),this.init(this.element,this.options))},i.prototype.setDateObjectOptions=function(){if(this.dateObject){var t=this.getDateObjectOptions();this.dateObject.setOptions(t)}},i.prototype.resetLocale=function(){this.unbindEvents(),this.init(this.element,this.options)},i.prototype.isInCaretMode=function(){return this.interactionMode===U.Caret},i.prototype.focus=function(){this.element.focus(),this.options.selectNearestSegmentOnFocus&&this.selectNearestSegment(0)},i.prototype.onElementDragStart=function(t){t.preventDefault()},i.prototype.onElementDrop=function(t){t.preventDefault()},i.prototype.onElementMouseDown=function(){this.mouseDownStarted=!0,this.focusedPriorToMouseDown=this.isActive},i.prototype.onElementMouseUp=function(t){this.mouseDownStarted=!1,t.preventDefault()},i.prototype.onElementClick=function(t){this.mouseDownStarted=!1,this.switchedPartOnPreviousKeyAction=!1;var e=this.selection;if(this.isInCaretMode()&&this.forceUpdate(),3===t.detail);else if(this.isActive&&this.options.selectNearestSegmentOnFocus){var i=this.element.selectionStart!==this.element.selectionEnd,n=J(this.options.placeholder)&&!this.dateObject.hasValue()&&!this.focusedPriorToMouseDown,r=!i&&n?0:this.caret()[0];this.selectNearestSegment(r)}else this.setSelection(this.selectionByIndex(e.start))},i.prototype.onElementInput=function(t){if(this.triggerInput({event:t}),this.element&&this.dateObject){var e=this.switchedPartOnPreviousKeyAction;if(this.isPasteInProgress)return this.options.allowCaretMode&&(this.resetSegmentValue=!1),this.updateOnPaste(t),void(this.isPasteInProgress=!1);var i=this.keyDownEvent||{},n=i.keyCode===nt||i.key===Y,r=i.keyCode===rt||i.key===z,s=this.interactionMode;!this.options.allowCaretMode||s===U.Caret||r||n||(this.resetSegmentValue=!0),this.options.allowCaretMode?this.interactionMode=U.Caret:this.interactionMode=U.Selection;var a=this.isInCaretMode();if(a&&this.keyDownEvent.key===K)this.restorePreviousInputEventState();else{var o=this.dateObject&&this.dateObject.getValue(),l=this.dateObject?this.dateObject.value:null,h=this.dateObject.getTextAndFormat(),u=h.text,d=h.format;this.currentFormat=d;var p=function(t){var e=t.oldText,i=t.newText,n=t.formatPattern,r=t.selectionStart,s=t.isInCaretMode,a=t.keyEvent,o=e[r+e.length-i.length],l=e.substring(0,r+e.length-i.length),h=i.substring(0,r),u=[];if(l===h&&r>0)return u.push([n[r-1],h[r-1]]),u;if(0===l.indexOf(h)&&s&&(a.key===z||a.key===Y)||0===l.indexOf(h)&&!s&&(0===h.length||n[h.length-1]!==n[h.length])){var c="";s||1!==h.length||u.push([n[0],h[0]]);for(var d=h.length;d<l.length;d++)n[d]!==c&&n[d]!==j&&(c=n[d],u.push([c,""]));return u}if(s&&(0===h.indexOf(l)||n[r-1]===j)||!s&&(0===h.indexOf(l)||n[r-1]===j)){var p=n[0];for(d=Math.max(0,l.length-1);d<n.length;d++)if(n[d]!==j){p=n[d];break}return[[p,h[r-1]]]}return" "===h[h.length-1]||h[h.length-1]===o?[[n[r-1],j]]:[[n[r-1],h[r-1]]]}({oldText:a&&(n||r||s===U.Caret)?this.previousElementValue:u,newText:this.elementValue,formatPattern:this.currentFormat,selectionStart:this.selection.start,isInCaretMode:a,keyEvent:this.keyDownEvent});if(p&&p.length&&p[0]&&p[0][1]!==j&&(this.switchedPartOnPreviousKeyAction=!1),!a||p&&0!==p.length){if(a&&1===p.length){if(!p[0]||!p[0][0])return void this.restorePreviousInputEventState();if(a&&p[0]&&(p[0][0]===j||p[0][1]===j))return void this.restorePreviousInputEventState()}var m=1===p.length&&p[0][1]===j,g=[],f=!1,v=null;if(!m)for(var y=0;y<p.length;y++){var D=this.dateObject.parsePart({symbol:p[y][0],currentChar:p[y][1],resetSegmentValue:this.resetSegmentValue,cycleSegmentValue:!this.isInCaretMode(),rawTextValue:this.element.value,isDeleting:n||r,originalFormat:this.currentFormat});g.push(D),D.value||(v={type:"parse"}),f=D.switchToNext}this.options.autoSwitchParts||(f=!1),this.resetSegmentValue=!1;var E,S=this.options.format===this.currentFormat||J(this.options.format)&&this.options.format.length>1,b=g[g.length-1],M=b&&!J(b.value),P=a&&(n||r)&&M,w=!!b&&b.resetPart,T=this.dateObject.getValue(),C=!c(o,T),I=this.dateObject.value,O=this.selection;if(a){var x=p&&p.length>0?p[0][0]:null,F=this.dateObject.getLeadingZero()[x];p.length&&p[0][0]!==j?f?(this.forceUpdateWithSelection(),this.switchDateSegment(1)):w?(E=this.currentFormat[O.start])?(this.forceUpdate(),this.setSelection(this.selectionBySymbol(E))):this.restorePreviousInputEventState():P?(this.forceUpdate(),p.length&&p[0][0]!==j&&this.setSelection(this.selectionBySymbol(p[0][0]))):M?"0"===t.data&&F||(J(o)&&!J(T)?this.restorePreviousInputEventState():!J(o)&&J(T)?this.forceUpdateWithSelection():J(o)&&J(T)?C?this.forceUpdateWithSelection():this.restorePreviousInputEventState():J(o)||J(T)?l!==I||this.restorePreviousInputEventState():this.forceUpdateWithSelection()):M||S||this.forceUpdateWithSelection():(this.options.autoSwitchParts||p[0][1]!==j)&&this.setSelection(this.selectionBySymbol(p[0][0]))}else a||(this.forceUpdate(),p.length&&p[0][0]!==j&&this.setSelection(this.selectionBySymbol(p[0][0])),this.options.autoSwitchParts?m?(this.resetSegmentValue=!0,e||this.switchDateSegment(1),this.switchedPartOnPreviousKeyAction=!0):f&&(this.switchDateSegment(1),this.switchedPartOnPreviousKeyAction=!0):b&&b.switchToNext?this.resetSegmentValue=!0:m&&(this.resetSegmentValue=!0,e||this.switchDateSegment(1),this.switchedPartOnPreviousKeyAction=!0),n&&this.options.selectPreviousSegmentOnBackspace&&this.switchDateSegment(-1));this.tryTriggerValueChange({oldValue:o,event:t}),this.triggerInputEnd({event:t,error:v}),a&&this.setTextAndFormat()}else this.restorePreviousInputEventState()}}},i.prototype.onElementFocus=function(t){this.triggerFocus({event:t})||(this.isActive=!0,this.interactionMode=U.None,this.switchedPartOnPreviousKeyAction=!1,this.refreshElementValue(),this.mouseDownStarted||this.caret(0,this.elementValue.length),this.mouseDownStarted=!1,this.triggerFocusEnd({event:t}))},i.prototype.onElementBlur=function(t){this.resetSegmentValue=!0,this.isActive=!1,this.triggerBlur({event:t})||(this.interactionMode=U.None,this.switchedPartOnPreviousKeyAction=!1,this.refreshElementValue(),this.triggerBlurEnd({event:t}))},i.prototype.onElementChange=function(t){this.triggerChange({event:t})},i.prototype.onElementKeyDown=function(t){if(!this.triggerKeyDown({event:t})){var e=this.selection,i=e.start,n=e.end;if(this.keyDownEvent=t,this.previousElementValue=this.element.value,this.previousElementSelection={start:i,end:n},this.keyEventMatchesAutoSwitchKeys(t)){var r=t.keyCode===st;if(!r)return t.preventDefault(),void this.switchDateSegment(1);var s=this.selection,a=s.start,o=s.end;if(t.shiftKey&&r?this.switchDateSegment(-1):this.switchDateSegment(1),a!==this.selection.start||o!==this.selection.end)return void t.preventDefault()}var l=this.currentFormat[this.selection.start],h=this.getStepFromSymbol(l),u=!1;if(!(t.altKey||t.ctrlKey||t.metaKey||t.keyCode===st)){switch(t.keyCode){case ot:this.switchDateSegment(-1),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case lt:this.modifyDateSegmentValue(h,l,event),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case ht:this.switchDateSegment(1),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case ut:this.modifyDateSegmentValue(-h,l,event),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case at:break;case dt:this.selectNearestSegment(0),u=!0,this.switchedPartOnPreviousKeyAction=!1,this.resetSegmentValue=!0;break;case ct:this.selectNearestSegment(this.elementValue.length),u=!0,this.switchedPartOnPreviousKeyAction=!1,this.resetSegmentValue=!0;break;default:return}u&&t.preventDefault()}}},i.prototype.onElementPaste=function(){this.isPasteInProgress=!0},i.prototype.onElementMouseWheel=function(t){if(this.options.enableMouseWheel&&!this.triggerMouseWheel({event:t})&&this.isActive){var e=t;e.shiftKey?this.switchDateSegment((e.wheelDelta||-e.detail)>0?-1:1):this.modifyDateSegmentValue((e.wheelDelta||-e.detail)>0?1:-1),e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}},i.prototype.updateOnPaste=function(t){var e=this.intl.parseDate(this.elementValue,this.inputFormat)||this.value;J(e)&&this.dateObject.shouldNormalizeCentury()&&(e=this.dateObject.normalizeCentury(e));var i=this.dateObject&&this.dateObject.getValue();this.writeValue(e),this.tryTriggerValueChange({oldValue:i,event:t})},Object.defineProperty(i.prototype,"elementValue",{get:function(){return(this.element||{}).value||""},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputFormat",{get:function(){return this.options.format?"string"==typeof this.options.format?this.options.format:this.options.format.inputFormat:A},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayFormat",{get:function(){return this.options.format?"string"==typeof this.options.format?this.options.format:this.options.format.displayFormat:A},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selection",{get:function(){var t={start:0,end:0};return null!==this.element&&void 0!==this.element.selectionStart&&(t={start:this.element.selectionStart,end:this.element.selectionEnd}),t},enumerable:!0,configurable:!0}),i.prototype.setSelection=function(t){this.element&&document.activeElement===this.element&&(this.element.setSelectionRange(t.start,t.end),t.start!==t.end&&(this.interactionMode=U.Selection))},i.prototype.selectionBySymbol=function(t){for(var e=-1,i=0,n=0;n<this.currentFormat.length;n++)this.currentFormat[n]===t&&(i=n+1,-1===e&&(e=n));return e<0&&(e=0),this.options.autoCorrectParts||this.currentFormat.length===this.currentText.length||(this.currentFormat.length<this.currentText.length?i+=this.currentText.length-this.currentFormat.length:i=Math.max(0,i-(this.currentFormat.length-this.currentText.length))),{start:e,end:i}},i.prototype.selectionByIndex=function(t){for(var e={start:t,end:t},i=t,n=t-1;i<this.currentFormat.length||n>=0;i++,n--){if(i<this.currentFormat.length&&this.currentFormat[i]!==j){e=this.selectionBySymbol(this.currentFormat[i]);break}if(n>=0&&this.currentFormat[n]!==j){e=this.selectionBySymbol(this.currentFormat[n]);break}}return e},i.prototype.switchDateSegment=function(t){var e=this.selection;if(this.isInCaretMode()){var i=e.start,n=this.currentFormat[i-1],r="",s="";if(t<0){for(var a=i+t;a>=0;a--)if((s=this.currentFormat[a])!==j&&s!==n){i=a,r=s;break}}else for(a=i+t;a<this.currentFormat.length;a++)if((s=this.currentFormat[a])!==j&&s!==n){i=a,r=s;break}if(r)return this.forceUpdate(),this.setSelection(this.selectionBySymbol(r)),void(this.interactionMode=U.Selection)}this.interactionMode=U.None;var o=this.selection,l=o.start,h=o.end;if(l<h&&this.currentFormat[l]!==this.currentFormat[h-1])return this.setSelection(this.selectionByIndex(t>0?l:h-1)),this.resetSegmentValue=!0,void(this.interactionMode=U.None);for(var u=this.currentFormat[l],c=l+t;c>0&&c<this.currentFormat.length&&(this.currentFormat[c]===u||this.currentFormat[c]===j);)c+=t;if(this.currentFormat[c]!==j){for(var d=c;d>=0&&d<this.currentFormat.length&&this.currentFormat[d]===this.currentFormat[c];)d+=t;c>d&&(d+1!==l||c+1!==h)?(this.setSelection({start:d+1,end:c+1}),this.resetSegmentValue=!0):c<d&&(c!==l||d!==h)&&(this.setSelection({start:c,end:d}),this.resetSegmentValue=!0),this.interactionMode=U.None}},i.prototype.modifyDateSegmentValue=function(t,e,i){if(void 0===e&&(e=""),void 0===i&&(i={}),this.dateObject){var n,r,s,a=this.value,o=1*t,l=this.caret();if("S"===(e=e||this.currentFormat[l[0]])&&!this.options.steps.millisecond){var h=(r=this.inputFormat,(s=r&&r.match(/S+(\1)/))?s[0].length:0);n=h,o=Math.pow(10,3-n)}this.dateObject.modifyPart(e,o),this.tryTriggerValueChange({oldValue:a,event:i}),this.forceUpdate(),this.setSelection(this.selectionBySymbol(e))}},i.prototype.tryTriggerValueChange=function(t){if(void 0===t&&(t={oldValue:null,event:{}}),!c(this.value,t.oldValue))return this.triggerValueChange(t)},i.prototype.triggerValueChange=function(t){return void 0===t&&(t={oldValue:null,event:{}}),this.trigger(It,Q(t,{value:this.value}))},i.prototype.triggerInput=function(t){return void 0===t&&(t={event:{}}),this.trigger(St,Q(t,{value:this.value}))},i.prototype.triggerInputEnd=function(t){return void 0===t&&(t={event:{},error:null}),this.trigger(Ot,Q(t,{value:this.value}))},i.prototype.triggerFocus=function(t){return void 0===t&&(t={event:{}}),this.trigger(Mt,Q({},t))},i.prototype.triggerFocusEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(Ft,Q({},t))},i.prototype.triggerBlur=function(t){return void 0===t&&(t={event:{}}),this.trigger(Pt,Q({},t))},i.prototype.triggerBlurEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(xt,Q({},t))},i.prototype.triggerChange=function(t){return void 0===t&&(t={event:{}}),this.trigger(kt,Q(t,{value:this.value}))},i.prototype.triggerKeyDown=function(t){return void 0===t&&(t={event:{}}),this.trigger(bt,Q({},t))},i.prototype.triggerMouseWheel=function(t){return void 0===t&&(t={event:{}}),this.trigger(Ct,Q({},t))},i.prototype.forceUpdate=function(){this.setTextAndFormat(),this.refreshElementValue()},i.prototype.forceUpdateWithSelection=function(){var t=this.selection,e=t.start,i=t.end,n=this.elementValue.length;this.forceUpdate();var r=this.elementValue.length-n;this.setSelection({start:e+r,end:i+r})},i.prototype.setTextAndFormat=function(){var t=this.dateObject.getTextAndFormat(),e=t.text,i=t.format;this.currentFormat=i,this.currentText=e},i.prototype.setElementValue=function(t){this.element.value=t},i.prototype.getStepFromSymbol=function(t){switch(t){case"S":return Number(this.options.steps.millisecond);case"s":return Number(this.options.steps.second);case"m":return Number(this.options.steps.minute);case"h":case"H":return Number(this.options.steps.hour);case"M":return Number(this.options.steps.month);case"d":case"E":return Number(this.options.steps.day);case"y":return Number(this.options.steps.year);default:return 1}},i.prototype.restorePreviousInputEventState=function(){this.restorePreviousElementValue(),this.restorePreviousElementSelection()},i.prototype.restorePreviousElementValue=function(){this.setElementValue(this.previousElementValue||"")},i.prototype.restorePreviousElementSelection=function(){var t=this.previousElementSelection,e=t.start,i=t.end;this.setSelection({start:e||0,end:i||0})},i.prototype.writeValue=function(t){this.verifyValue(t),this.dateObject=this.getDateObject(t),this.refreshElementValue()},i.prototype.verifyValue=function(t){if(t&&!tt(t))throw new Error("The 'value' should be a valid JavaScript Date instance.")},i.prototype.refreshElementValue=function(){var t=this.caret()[0],e=this.element,i=this.isActive?this.inputFormat:this.displayFormat,n=this.dateObject.getTextAndFormat(i),r=n.text,s=n.format;this.currentFormat=s,this.currentText=r;var a=this.options.hasPlaceholder||J(this.options.placeholder),o=!this.isActive&&a&&!this.dateObject.hasValue();a&&J(this.options.placeholder)&&(e.placeholder=this.options.placeholder);var l=o?"":r;this.previousElementValue=this.elementValue,this.setElementValue(l),this.isActive&&!this.options.allowCaretMode&&this.options.selectNearestSegmentOnFocus&&this.selectNearestSegment(t)},i.prototype.caret=function(t,e){void 0===e&&(e=t);var i=void 0!==t,n=[t,t],r=this.element;if(!i||!this.options.disabled&&!this.options.readonly){try{void 0!==r.selectionStart&&(i&&(document&&document.activeElement!==r&&r.focus(),r.setSelectionRange(t,e)),n=[r.selectionStart,r.selectionEnd])}catch(t){n=[]}return n}},i.prototype.selectNearestSegment=function(t){for(var e=t,i=t-1;e<this.currentFormat.length||i>=0;e++,i--){if(e<this.currentFormat.length&&"_"!==this.currentFormat[e])return void this.selectDateSegment(this.currentFormat[e]);if(i>=0&&"_"!==this.currentFormat[i])return void this.selectDateSegment(this.currentFormat[i])}},i.prototype.selectDateSegment=function(t){for(var e=-1,i=0,n=0;n<this.currentFormat.length;n++)this.currentFormat[n]===t&&(i=n+1,-1===e&&(e=n));e<0&&(e=0),this.caret(0,0),this.caret(e,i)},i.prototype.getDateObject=function(t){var e=(this.dateObject||{}||null).leadingZero;this.options.value=t;var i=this.createDateObject();return i.setLeadingZero(this.isActive?e:null),i},i.prototype.createDateObject=function(){var t=this.getDateObjectOptions();return new it(Q({},t))},i.prototype.getDateObjectOptions=function(){return{intlService:this.options.intlService,formatPlaceholder:this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern",format:this.inputFormat,cycleTime:this.options.cycleTime,twoDigitYearMax:this.options.twoDigitYearMax,autoCorrectParts:this.options.autoCorrectParts,value:this.options.value}},i.prototype.keyEventMatchesAutoSwitchKeys=function(t){var e=(this.options.autoSwitchKeys||[]).map((function(t){return t.toString().toLowerCase().trim()}));return e.indexOf(t.keyCode.toString())>=0||e.indexOf(t.keyCode)>=0||e.indexOf(t.key.toLowerCase().trim())>=0},i}(mt);return window.kendo.jQuery,kendo.ui.DateInputCommon=Ut,kendo}));
//# sourceMappingURL=kendo.dateinput.common.min.js.map
