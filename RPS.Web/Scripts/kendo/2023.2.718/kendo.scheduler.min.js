/**
 * Kendo UI v2023.2.718 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.dropdownlist.js"),require("kendo.editable.js"),require("kendo.multiselect.js"),require("kendo.window.js"),require("kendo.datetimepicker.js"),require("kendo.scheduler.recurrence.js"),require("kendo.scheduler.view.js"),require("kendo.scheduler.dayview.js"),require("kendo.scheduler.agendaview.js"),require("kendo.scheduler.monthview.js"),require("kendo.scheduler.timelineview.js"),require("kendo.scheduler.yearview.js"),require("kendo.dialog.js"),require("kendo.pane.js"),require("kendo.pdf.js"),require("kendo.switch.js"),require("kendo.toolbar.js"),require("kendo.html.button.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["kendo.dropdownlist.min","kendo.editable.min","kendo.multiselect.min","kendo.window.min","kendo.datetimepicker.min","kendo.scheduler.recurrence.min","kendo.scheduler.view.min","kendo.scheduler.dayview.min","kendo.scheduler.agendaview.min","kendo.scheduler.monthview.min","kendo.scheduler.timelineview.min","kendo.scheduler.yearview.min","kendo.dialog.min","kendo.pane.min","kendo.pdf.min","kendo.switch.min","kendo.toolbar.min","kendo.html.button.min","kendo.icons.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendoscheduler=e.kendoscheduler||{},e.kendoscheduler.js=t())}(this,(function(){return function(e,t){var i=window.kendo,n=i.date,a=n.MS_PER_DAY,r=n.getDate,o=i.date.getMilliseconds,s=i.recurrence,l=i.htmlEncode,d=i.keys,c=i.ui,u=c.Widget,p=c.DataBoundWidget,h="string",v=c.Popup,f=c.Calendar,m=i.data.DataSource,g=e.isPlainObject,_=e.extend,w=Object.prototype.toString,k=Array.isArray,b=".kendoScheduler",y="click",T="mousedown",z=i.support.pointers?"pointerdown":"touchstart",D=i.support.pointers?"pointermove":"touchmove",S=i.support.pointers?"pointerup":"touchend",x=i.support.mousemove,E="change",R="progress",C="error",V="cancel",M="remove",P="resetSeries",H="save",O="edit",F="disabled",I="k-focus",A=/(?:value:start|value:end)(?:,|$)/,B="(min-width: 1024px)",N=r(new Date),W=",",L=/\;/g,q="recurrenceException",j="Do you want to edit only this event occurrence or the whole series?",U=function(e){var t=e.className,n=e.attr,a=e.text,r=e.icon,o=e.fillMode,s=e.themeColor;return i.html.renderButton('<button type="button" class="'+t+'" '+n+">"+a+"</button>",{icon:r,fillMode:o,themeColor:s})},K=i.template((function(e){var t=e.label,i=e.views;return'<select aria-label="'+t+'" class="k-picker k-dropdown-list k-dropdown '+e.type+'">'+Object.keys(i).map((function(e){return'<option value="'+e+'">'+i[e].title+"</option>"})).join("")+"</select>"})),Y={pdf:{name:"pdf",type:"button",icon:"file-pdf",attributes:{class:"k-pdf"}},pdfMobile:{name:"pdf",type:"button",icon:"file-pdf",showText:"overflow",attributes:{class:"k-pdf"}},today:{name:"today",type:"button",attributes:{class:"k-nav-today"}},previous:{name:"previous",type:"button",icon:"caret-alt-left",showText:"overflow",attributes:{class:"k-nav-prev"}},next:{name:"next",type:"button",icon:"caret-alt-right",showText:"overflow",attributes:{class:"k-nav-next"}},current:{name:"current",type:"button",icon:"calendar",fillMode:"flat",text:"placeholder",attributes:{"aria-live":"polite",class:"k-nav-current"}},search:{template:'<span class="k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid"><input tabindex="-1" autocomplete="off" class="k-input-inner k-scheduler-search-input k-input-inner" /><span class="k-input-suffix">'+i.ui.icon("search")+"</span></span>"},refresh:{name:"refresh",type:"button",icon:"arrow-rotate-cw",showText:"overflow",attributes:{class:"k-scheduler-refresh"}},create:{name:"create",type:"button",icon:"plus",attributes:{class:"k-create-event"}},calendar:{name:"calendar",type:"button",icon:"calendar",attributes:{class:"k-nav-calendar"}},previousMobile:{name:"previous",type:"button",icon:"chevron-left",showText:"overflow",attributes:{class:"k-nav-prev"}},nextMobile:{name:"next",type:"button",icon:"chevron-right",showText:"overflow",attributes:{class:"k-nav-next"}},currentMobile:{template:'<span class="k-scheduler-navigation"><span class="k-nav-current"><span class="k-m-date-format"></span><span class="k-y-date-format"></span></span></span>'},view:{name:"view",type:"button",togglable:!0,group:"views"}},Q=[["today","previous","next"],"current",{type:"spacer"}],J=[["calendar"],{type:"spacer"}],X=["previousMobile",{type:"spacer"},"currentMobile",{type:"spacer"},"nextMobile"];function G(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function Z(e,t){var n=t.timezone;n&&(e[i.attr("timezone")]=n)}function $(e,t){var n=t.model.fields[t.field].validation;if(n){var a=n.validDateValidator;a&&g(a)&&a.message&&(e[i.attr("validDate-msg")]=a.message)}}function ee(e,t){var n=t.model.fields[t.field].validation;if(n){var a=n.dateCompare;a&&g(a)&&a.message&&(e[i.attr("dateCompare-msg")]=a.message)}}function te(e,t,n,a){var r,o,s,l,d;for(o=0,s=(e=e||[]).length;o<s;o++)l=(r=e[o]).start?r.start.getTimezoneOffset():null,d=r.start?r.end.getTimezoneOffset():null,a?r.startTimezone||r.endTimezone?n?(r.start=i.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=i.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=i.timezone[t](r.start,n),r.end=i.timezone[t](r.end,n)):(r.start=i.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=i.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=i.timezone[t](r.start,n),r.end=i.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=i.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=i.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=i.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=i.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=i.timezone[t](r.start,n),r.end=i.timezone[t](r.end,n)),a&&delete r.uid,"remove"===t&&r.start&&l&&l!==r.start.getTimezoneOffset()&&(r.start=new Date(r.start.getTime()+6e4*(l-r.start.getTimezoneOffset()))),"remove"===t&&r.end&&d&&d!==r.end.getTimezoneOffset()&&(r.end=new Date(r.end.getTime()+6e4*(d-r.end.getTimezoneOffset())));return e}function ie(e,t){for(var i,n=e.length,a=0;a<n;a++)if((i=e[a]).uid===t)return i}var ne=i.Class.extend({init:function(e,t){var n=e.timezone;this.reader=t,t.model&&(this.model=t.model),this.timezone=n,this.data=function(e,t){return function(i){return te(i=e(i),"apply",t),i||[]}}(this.data.bind(this),n),this.serialize=function(e,t){return function(n){return n&&("[object Array]"===w.call(n)||n instanceof i.data.ObservableArray||(n=[n])),te(n,"remove",t,!0),(n=e(n))||[]}}(this.serialize.bind(this),n)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}});function ae(e,t,n){return e=n?i.timezone.convert(e,t,n):i.timezone.remove(e,t)}function re(e){if(e.filter("[name=start]").length&&e.filter("[title=Start]").length||e.filter("[name=end]").length&&e.filter("[title=End]").length||e.filter(".k-recur-until").length){var t=i.widgetInstance(e,i.ui);return t?!!i.parseDate(e.val(),t.options.format)&&t.value():!!i.parseDate(e.val())}return!0}var oe=i.data.Model.define({init:function(e){var t=this;i.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n="_"+e+"Time";return this[n]?this[n]-i.date.toUtcTime(i.date.getDate(t)):o(t)},_date:function(e){var t="_"+e+"Time";return this[t]?this[t]-this._time(e):i.date.getDate(this[e])},clone:function(t,i){var n=this.uid,a=new this.constructor(e.extend({},this.toJSON(),t));return i||(a.uid=n),a},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*i.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,i){return s?s.expand(this,e,t,i):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this._startTime&&this.set("_startTime",i.date.toUtcTime(this.start)),this._endTime&&this.set("_endTime",i.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=i.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return(t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}))[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=i.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e._startTime,delete e._endTime,e},shouldSerialize:function(e){return i.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n=this.isAllDay||!1;if(i.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=n){var r=i.date.getDate(this.start),o=new Date(this.end),s=i.date.getMilliseconds(o);0===s&&t&&(s=a),this.set("start",r),!0===t?(i.date.setTime(o,-s),o<r&&(o=r)):i.date.setTime(o,a-s),this.set("end",o)}},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0,validDate:{value:re}}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,validDate:{value:re},dateCompare:{value:function(e){if(e.filter("[name=end]").length){var t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),a=t.find("[name=end]:visible");if(a[0]&&n[0]){var r,o,s=i.widgetInstance(n,i.ui),l=i.widgetInstance(a,i.ui),d=t.data("kendoEditable"),c=d?d.options.model:null;if(s&&l?(r=s.value(),o=l.value()):(r=i.parseDate(n.val()),o=i.parseDate(a.val())),r&&o){if(c){var u=n.attr(i.attr("timezone")),p=c.startTimezone,h=c.endTimezone;p=p||h,h=h||p,p&&(r=ae(r,p,u),o=ae(o,h,u))}return r<=o}}}return!0}}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string",validation:{validDate:{value:re},untilDateCompare:{value:function(e){var t,n,a,r;return!(e.filter(".k-recur-until").length&&(t=i.widgetInstance(e,i.ui).value(),(n=e.closest(".k-scheduler-edit-form").find("[name=start]:visible"))[0]&&(a=(r=i.widgetInstance(n,i.ui))?r.value():i.parseDate(n.val()))&&t))||a<=t}}}},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),se=m.extend({init:function(e){m.fn.init.call(this,_(!0,{},{schema:{modelBase:oe,model:oe}},e)),this.reader=new ne(this.options.schema,this.reader)},expand:function(e,t){var n,r=this.view(),o={};return e&&t&&(n=t.getTimezoneOffset(),(t=new Date(t.getTime()+a-1)).getTimezoneOffset()!==n&&(t=i.timezone.apply(t,n)),o={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+a-1)},{field:"end",operator:"gte",value:e}]}]},r=new i.data.Query(function(e,t,i,n){for(var a=e.length,r=[],o=0;o<a;o++)r=r.concat(e[o].expand(t,i,n));return r}(r,e,t,this.reader.timezone)).filter(o).toArray()),r},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),m.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof oe)){var i=t;(t=this._createNewModel()).accept(i)}return(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),m.fn.insert.call(this,e,t)}},pushCreate:function(e){this._pushCreated=!0,m.fn.pushCreate.call(this,e),this._pushCreated=!1},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),m.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),i=t.shift(),n=e.id;i;)i.recurrenceId===n&&m.fn.remove.call(this,i),i=t.shift();e.set(q,"")},_removeExceptionDate:function(e){if(e.recurrenceId){var t=this.get(e.recurrenceId);if(t){var i=e.defaults.start,n=new RegExp("(\\,?)"+s.toExceptionString(i,this.reader.timezone)),a=(t.recurrenceException||"").replace(L,W).replace(/\,$/,"");n.test(a)||(i=e.start,n=new RegExp("(\\,?)"+s.toExceptionString(i,this.reader.timezone))),t.set(q,a.replace(n,""))}}},_addExceptionDate:function(e){var t=e.start,i=this.reader.timezone,n=this.get(e.recurrenceId),a=(n.recurrenceException||"").replace(L,W).replace(/\,$/,"");if(!s.isException(a,t,i)){var r=s.toExceptionString(t,i);e.defaults.start=t,n.set(q,a+(a&&r?W:"")+r)}}});se.create=function(e){(k(e)||e instanceof i.data.ObservableArray)&&(e={data:e});var t=e||{},n=t.data;if(t.data=n,!(t instanceof se)&&t instanceof i.data.DataSource)throw new Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof se?t:new se(t)},_(!0,i.data,{SchedulerDataSource:se,SchedulerDataReader:ne,SchedulerEvent:oe});var le={update:{text:"Save",className:"k-button-solid-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",icon:"trash",imageClass:"k-i-trash",className:"k-button-solid-primary k-scheduler-delete",iconClass:"k-icon"}};function de(t){var i=ce(t.model,t.field);return function(t,n){e('<textarea name="description" class="k-input-inner" title="'+n.title+'"/>').attr(i).appendTo(t).wrap('<span class="k-input k-textarea k-input-solid k-input-md k-rounded-md"></span>')}}function ce(t,n){var a,r,o=(t.fields||t)[n],s=["url","email","number","date","boolean"],l=o?o.validation:{},d=i.attr("type"),c=e.inArray,u={};for(a in l)r=l[a],c(a,s)>=0?u[d]=a:i.isFunction(r)||(u[a]=g(r)?r.value||a:r),u[i.attr(a+"-msg")]=r.message;return u}function ue(e,i,n,a){var r,o=e.value(),s=Array.isArray(o);r=s?JSON.parse(JSON.stringify(o)):[o.toString()],e.dataSource.data().forEach((function(o){if(null===o[n]||o[n]===t||o[n]==i)o.set(F,!1);else{var l=o.get(a);o.set(F,!0),(r.indexOf(l)>=0||r.indexOf(l.toString())>=0)&&(s?r.splice(r.indexOf(l),1):(e.value(null),e.trigger(E)))}})),s&&r.length<o.length&&(e.value(r),e.trigger(E))}function pe(e,t,n,a){var r=e.closest(".k-edit-form-container").find("[data-"+i.ns+"bind='value:"+a+"']"),o=r.getKendoDropDownList();o?o.bind(E,(function(e){var i=e.sender.value();ue(t,i,n.dataParentValueField,n.dataValueField)})):r.on(E,(function(e){var i=e.target.value;ue(t,i,n.dataParentValueField,n.dataValueField)}))}function he(e,n,a){var r,o=n.find("option"),s=n.val(),l=Array.isArray(s);r=l?JSON.parse(JSON.stringify(s)):[s],e.dataSource.view().forEach((function(s,d){var c=i.getter(e.dataParentValueField)(s);if(null===c||c===t||c==a)o[d].removeAttribute(F);else{o[d].setAttribute(F,F);var u=""+s.get(e.dataValueField);r.indexOf(u)>=0&&(l?r.splice(r.indexOf(u),1):(n.val(null),n.trigger(E)))}})),l&&r.length<s.length&&(n.val(r),n.trigger(E))}function ve(e,t){var n=e.end.getTime()-e.start.getTime(),a=new Date(e.start.getTime());i.date.setTime(a,t);var r=new Date(a.getTime());return i.date.setTime(r,n,!0),{start:a,end:r}}var fe={mobile:{dateRange:function(t,n){var a={name:n.field,title:n.title},r=n.model.isAllDay,o=i.attr("validate")+"='"+!r+"'",s=i.attr("validate")+"='"+!!r+"'";Z(a,n),$(a,n),ee(a,n),e('<input type="datetime-local" required '+i.attr("type")+'="datetime-local" '+i.attr("bind")+'="value:'+n.field+', invisible:isAllDay" '+o+"/>").attr(a).appendTo(t),e('<input type="date" required '+i.attr("type")+'="date" '+i.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+s+"/>").attr(a).appendTo(t),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,n){var a=G(n.model,n.messages.noTimezone);e('<span class="k-timezone-label"></span>').text(a).appendTo(t),e(i.ui.icon("arrow-chevron-right")).appendTo(t),t.closest("li.k-item label").on(y,n.click)},timezone:function(t,n){e('<div class="k-mobiletimezoneeditor" '+i.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},recurrence:function(t,n){e("<div "+i.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},description:de,multipleResources:function(t,n,a){var r=ce(n,t.field);return function(o){for(var s="",l=t.dataSource.view(),d=0,c=l.length;d<c;d++)s+=i.format('<option value="{0}">{1}</option>',i.getter(t.dataValueField)(l[d]),i.getter(t.dataTextField)(l[d]));var u=e(i.format('<select aria-labelledby="'+t.field+'_label" data-{0}bind="value:{1}" multiple="multiple">{2}</select>',i.ns,t.field,s)).appendTo(o).attr(r);a&&setTimeout((function(){var e=o.closest(".k-stretched-view").find("[data-"+i.ns+"bind='value:"+a+"']"),r=n[a];he(t,u,r),e.on(E,(function(e){var i=e.target.value;he(t,u,i)}))}))}},resources:function(t,n,a){var r=ce(n,t.field);return function(o){for(var s="",l=t.dataSource.view(),d=0,c=l.length;d<c;d++)s+=i.format('<option value="{0}">{1}</option>',i.getter(t.dataValueField)(l[d]),i.getter(t.dataTextField)(l[d]));var u=e(i.format('<select aria-labelledby="'+t.field+'_label" data-{0}bind="value:{1}">{2}</select>',i.ns,t.field,s)).appendTo(o).attr(r);a&&setTimeout((function(){var e=o.closest(".k-stretched-view").find("[data-"+i.ns+"bind='value:"+a+"']"),r=n[a];he(t,u,r),e.on(E,(function(e){var i=e.target.value;he(t,u,i)}))}))}},isAllDay:function(t,n){e('<input type="checkbox" data-role="switch"'+i.attr("bind")+'="value:'+n.field+'" />').appendTo(t)}},desktop:{dateRange:function(t,n){var a={name:n.field,title:n.title},r=n.model.isAllDay,o=i.attr("validate")+"='"+!r+"' ",s=i.attr("validate")+"='"+!!r+"' ";Z(a,n),$(a,n),ee(a,n),e('<input type="text" required '+i.attr("type")+'="date" '+i.attr("role")+'="datetimepicker" '+i.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+o+"/>").attr(a).appendTo(t),e('<input type="text" required '+i.attr("type")+'="date" '+i.attr("role")+'="datepicker" '+i.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+s+"/>").attr(a).appendTo(t),e("<span "+i.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+i.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,i){e('<a href="#" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base" data-bind="invisible:isAllDay"><span class="k-button-text">'+i.messages.timezoneEditorButton+"</span></a>").on(y,i.click).appendTo(t)},timezone:function(n,a){var r=a.visible||a.visible===t;e("<div "+i.attr("bind")+'="value:'+a.field+'" />').attr({name:a.field}).toggle(r).appendTo(n).kendoTimezoneEditor({optionLabel:a.noTimezone,title:a.title})},recurrence:function(t,n){e("<div "+i.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},description:de,multipleResources:function(t,n,a){var r=ce(n,t.field);return function(o){var s;a&&setTimeout((function(){ue(s,n[a],t.dataParentValueField,t.dataValueField),pe(o,s,t,a)})),s=e(i.format('<select aria-labelledby="'+t.field+'_label" data-{0}bind="value:{1}">',i.ns,t.field)).appendTo(o).attr(r).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource.data(),valuePrimitive:t.valuePrimitive,itemTemplate:function(e){return"<span "+(e.disabled?"data-disabled":"")+'><span class="k-scheduler-mark" style="background-color:'+(e[t.dataColorField]||"none")+'"></span>'+e[t.dataTextField]+"</span>"},tagTemplate:function(e){return'<span class="k-scheduler-mark" style="background-color:'+(e[t.dataColorField]||"none")+'"></span>'+e[t.dataTextField]},select:function(e){e.dataItem&&e.dataItem.disabled&&e.preventDefault()},dataBound:function(t){t.sender.list.find("li").each((function(t,i){var n=e(i);n.find("[data-disabled]").length>0&&n.addClass("k-disabled")}))}}).data("kendoMultiSelect")}},resources:function(t,n,a){var r=ce(n,t.field);return function(o){var s;a&&setTimeout((function(){ue(s,n[a],t.dataParentValueField,t.dataValueField),pe(o,s,t,a)})),s=e(i.format('<select aria-labelledby="'+t.field+'_label" data-{0}bind="value:{1}" title="'+n.title+'">',i.ns,t.field)).appendTo(o).attr(r).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource.data(),valuePrimitive:t.valuePrimitive,optionLabel:"None",template:function(e){return"<span "+(e.disabled?"data-disabled":"")+'><span class="k-scheduler-mark" style="background-color:'+(e[t.dataColorField]||"none")+'"></span>'+e[t.dataTextField]+"</span>"},select:function(e){e.dataItem&&e.dataItem.disabled&&e.preventDefault()},dataBound:function(t){t.sender.list.find("li").each((function(t,i){var n=e(i);n.find("[data-disabled]").length>0&&n.addClass("k-disabled")}))}}).data("kendoDropDownList")}},isAllDay:function(t,n){e('<input type="checkbox" data-role="checkbox"'+i.attr("bind")+'="value:'+n.field+'" data-label="'+n.title+'" />').attr({id:n.field,name:n.field,title:n.title?n.title:n.field}).appendTo(t)}}},me=i.Observable.extend({init:function(e,t){i.Observable.fn.init.call(this),this.element=e,this.options=_(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=this._toggleDateValidation.bind(this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,a,r,o=this.container,s=this.editable.options.model.isAllDay,l=i.attr("bind");o.find("["+l+"*=end],["+l+"*=start]").each((function(){n=e(this),A.test(n.attr(l))&&(a=n.is("["+i.attr("role")+"=datetimepicker],[type*=datetime]"),r=s!==a,n.attr(i.attr("validate"),r))}))}},fields:function(e,t){var n=this,a=n.options.messages,r=n.options.timezone,o=[{field:"title",title:a.editor.title},{field:"start",title:a.editor.start,editor:e.dateRange,timezone:r},{field:"end",title:a.editor.end,editor:e.dateRange,timezone:r},{field:"isAllDay",title:a.editor.allDayEvent,editor:e.isAllDay}],s=function(e){return!!e[u.dataParentValueField]};i.timezone.windows_zones&&(o.push({field:"timezone",title:a.editor.timezone,editor:e.timezonePopUp,click:function(e){e.preventDefault(),n._initTimezoneEditor(t,this)},messages:a.editor,model:t}),o.push({field:"startTimezone",title:a.editor.startTimezone,editor:e.timezone,noTimezone:a.editor.noTimezone}),o.push({field:"endTimezone",title:a.editor.endTimezone,editor:e.timezone,noTimezone:a.editor.noTimezone})),t.recurrenceId||o.push({field:"recurrenceRule",title:a.editor.repeat,editor:e.recurrence,timezone:r,messages:a.recurrenceEditor,pane:this.pane}),"description"in t&&o.push({field:"description",title:a.editor.description,editor:e.description({model:t,field:"description"})});for(var l=0;l<this.options.resources.length;l++){var d,c,u=this.options.resources[l];u.dataSource.view().some(s)&&(d=this.options.resources[l-1])&&(c=d.field),o.push({field:u.field,title:u.title,editor:u.multiple?e.multipleResources(u,t,c):e.resources(u,t,c)})}return o},end:function(){return this.editable.end()},_buildDesktopEditTemplate:function(t,n,a){var r=this,o=this.options.messages,s='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none"><div class="k-form"><div class="k-form-field"><div class="k-form-field-wrap">'+i.html.renderCheckBox(e('<input class="k-timezone-toggle"/>'),{label:o.editor.separateTimezones})+"</div></div>",l=function(e){return!t.editable||t.editable(e)?"<div "+i.attr("container-for")+'="'+e+'" class="k-form-field-wrap"></div>':'<div class="k-form-field-wrap">'+(e&&i.getter(e)(t)||"")+"</div>"};return'<div class="k-form">'+n.map((function(e){var i=e.field,n=e.title,o=t.fields[i];return(!t.editable||t.editable(i))&&a.push(e),("startTimezone"===i?s:"")+(o&&"boolean"===o.type?'<div class="k-form-field">'+l(i)+"</div>":'<div class="k-form-field"><label class="k-label k-form-label" for="'+i+'" id="'+i+'_label">'+(n||i||"")+"</label>"+l(i)+"</div>")+("endTimezone"===i?r._createEndTimezoneButton():"")})).join("")+"</div>"},_buildMobileEditTemplate:function(e,t,n){var a=this.options.messages,r='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none"><ul class="k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><label class="k-label k-listgroup-form-row"><span class="k-item-title k-listgroup-form-row">'+l(a.editor.separateTimezones)+'</span><span class="k-listgroup-form-field-wrapper"><input class="k-timezone-toggle" data-role="switch" type="checkbox" /></span></label></li>';return'<ul class="k-listgroup k-listgroup-flush">'+t.map((function(t){var a=t.field;return(!e.editable||e.editable(a))&&n.push(t),("timezone"===a||"recurrenceRule"===a?'</ul><ul class="k-listgroup k-listgroup-flush">':"")+("startTimezone"===a?r:"")+function(t){var n=t.field,a=t.title;return'<li class="k-item k-listgroup-item">'+(!e.editable||e.editable(n)?("timezone"===n?'<label class="k-label k-listgroup-form-row" data-bind="css: { k-disabled: isAllDay }">':'<label class="k-label k-listgroup-form-row">')+'<span class="k-item-title k-listgroup-form-field-label">'+(a||n||"")+'</span><div class="k-listgroup-form-field-wrapper" '+i.attr("container-for")+'="'+n+'"></div>':'<li class="k-item k-listgroup-item"><label class="k-label k-no-click k-listgroup-form-row"><span class="k-item-title k-listgroup-form-field-label">'+(a||n||"")+'</span><span class="k-no-editor k-listgroup-form-field-wrapper">'+(n&&i.getter(n)(e)||"")+"</span>")+"</label></li>"}(t)+("recurrenceRule"===a?'</ul><ul class="k-listgroup k-listgroup-flush">':"")+("endTimezone"===a?"</ul></div>":"")})).join("")+"</ul>"},_buildEditTemplate:function(e,t,n,a){var r=_({},i.Template,this.options.templateSettings),o=this.options.editable.template,s="";return o?(typeof o===h&&(o=i.unescape(o)),s+=i.template(o,r)(e)):s+=a?'<div data-role="content">'+this._buildMobileEditTemplate(e,t,n)+"</div>":this._buildDesktopEditTemplate(e,t,n),s},_createEndTimezoneButton:function(){return"</ul></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),ge=me.extend({init:function(){me.fn.init.apply(this,arguments),this.pane=i.Pane.wrap(this.element,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}}),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view()},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var n=this,a=n.pane,r=n.options.messages,o=n.timezoneView,s=o?o.content.find(".k-scheduler-timezones"):n.container.find(".k-scheduler-timezones"),d=s.find("input.k-timezone-toggle").data("kendoSwitch"),c=s.find("li.k-item:not(.k-zonepicker)").last();if(n._startTimezone=t.startTimezone||"",n._endTimezone=t.endTimezone||"",!o){var u='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"><div data-role="header" class="k-header"><a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+r.cancel+'"aria-label="'+r.cancel+'">'+i.ui.icon("chevron-left")+"</a>"+l(r.editor.timezoneTitle)+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+r.save+'" aria-label="'+r.save+'">'+i.ui.icon("check")+'</a></div><div data-role="content"></div>';this.timezoneView=o=a.append(u),o.contentElement.append(s.show()),o.element.on(y+b,".k-scheduler-cancel, .k-scheduler-update",(function(i){i.preventDefault(),i.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&n._revertTimezones(t);var o=n._editPane,s=G(t,r.editor.noTimezone);o.content.find(".k-timezone-label").text(s),a.navigate(o,n.options.animations.right)})),d.bind(E,(function(e){c.toggle(e.checked),t.set("endTimezone","")})),t.bind(E,(function(e){if("startTimezone"===e.field){var i=t.startTimezone;d.enable(i),i||(c.hide(),t.set("endTimezone",""),d.value(!1))}}))}d.value(!!t.endTimezone),d.enable(!!t.startTimezone),t.endTimezone?c.show():c.hide(),a.navigate(o,n.options.animations.left)},showDialog:function(t){var i=t.buttons.map((function(e){return{text:e.text,action:e.click}}));i.push({text:this.options.messages.cancel,primary:!0}),e("<div />").appendTo(document.body).kendoDialog({close:function(){this.destroy()},modal:{preventScroll:!0},closable:!1,title:!1,content:t.text,actions:i})},editEvent:function(t){var n=this.pane,a="",r=this.options.messages,o=r.save,s=r.destroy,d=r.cancel,c=r.editor.editorTitle,u=r.resetSeries;a+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"'+i.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-header-cancel k-scheduler-cancel k-link" title="'+d+'"aria-label="'+d+'">'+i.ui.icon("chevron-left")+"</a>"+l(c)+'<a href="#" class="k-header-done k-scheduler-update k-link" title="'+o+'" aria-label="'+o+'">'+i.ui.icon("check")+"</a></div>";var p=this.fields(fe.mobile,t),h=this,v=[];a+=this._buildEditTemplate(t,p,v,!0),a+="</div>";var f=n.append(a);if(!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy&&t.isRecurrenceHead()&&t.recurrenceException){var m='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-resetSeries k-link k-label" aria-label="'+u+'">'+u+"</span></li></ul>";f.contentElement.append(m)}if(!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy){var g='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-delete k-link k-label" aria-label="'+s+'">'+s+"</span></li></ul>";f.contentElement.append(g)}this._editPane=f;var _=this.container=f.element;return this.editable=_.kendoEditable({fields:v,model:t,clearContainer:!1,target:h.options.target,validateOnBlur:!0}).data("kendoEditable"),this.trigger("edit",{container:_,model:t})?this.trigger("cancel",{container:_,model:t}):(_.on(y+b,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries",(function(i){i.preventDefault(),i.stopPropagation();var a=e(this);if(a.hasClass("k-scheduler-edit"))n.navigate(this._editPane,h.options.animations.right);else{var r="cancel";a.hasClass("k-scheduler-update")?r="save":a.hasClass("k-scheduler-delete")?r="remove":a.hasClass("k-scheduler-resetSeries")&&(r=P),h.trigger(r,{container:_,model:t})}})),n.navigate(f,h.options.animations.left),t.bind(E,h.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(i.roleSelector("view")).not(this.view.element)},close:function(){if(this.container){this.pane.navigate("",this.options.animations.right);for(var e,t=this._views(),i=0,n=t.length;i<n;i++)(e=t.eq(i).data("kendoView"))&&e.purge();t.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind(E,this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),_e=me.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,a,r=this,o=r.options.editable,s="<div "+i.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=r.options.messages,d=l.save,c=l.cancel,u=l.destroy,p=l.resetSeries,h=this.fields(fe.desktop,t),v=[];s+=this._buildEditTemplate(t,h,v,!1);var f=g(o)?o.window:{};s+='<div class="k-edit-buttons">',s+=this.createButton({name:"update",text:d,attr:a,icon:"save"})+this.createButton({name:"canceledit",text:c,attr:a,icon:"cancel-outline"}),!t.isNew()&&!1!==o.destroy&&t.isRecurrenceHead()&&t.recurrenceException&&(s+=this.createButton({name:"resetSeries",text:p,attr:a})),t.isNew()&&!t.isRecurring()||!1===o.destroy||(s+='<span class="k-spacer"></span>'+this.createButton({name:"delete",text:u,attr:a,icon:"trash",fillMode:"flat",themeColor:"primary"})),s+="</div></div></div>";var m=this.container=e(s).appendTo(r.element).eq(0).kendoWindow(_({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger(V,{container:m,model:t})&&e.preventDefault()}},f));for(var w in r.editable=m.kendoEditable({fields:v,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),v)"recurrenceRule"!==v[w].field&&(n=v[w].field,m.find("[name='"+n+"']").attr("aria-labelledby",n+"_label")),"isAllDay"===v[w].field&&m.find("label[for='"+n+"']").attr("id",n+"_label");return r.trigger(O,{container:m,model:t})?r.trigger(V,{container:m,model:t}):(o.window&&o.window.position?m.data("kendoWindow").open():m.data("kendoWindow").center().open(),m.on(y+b,"button.k-scheduler-cancel",(function(e){e.preventDefault(),e.stopPropagation(),r.trigger(V,{container:m,model:t})})),m.on(y+b,"button.k-scheduler-update",(function(e){e.preventDefault(),e.stopPropagation(),r.trigger("save",{container:m,model:t})})),m.on(y+b,"button.k-scheduler-delete",(function(e){e.preventDefault(),e.stopPropagation(),r.trigger(M,{container:m,model:t})})),m.on(y+b,"button.k-scheduler-resetSeries",(function(e){e.preventDefault(),e.stopPropagation(),r.trigger(P,{container:m,model:t})})),i.cycleForm(m),t.bind(E,r.toggleDateValidationHandler)),r.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind(E,e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons">',t+=this.createButton({name:"savetimezone",icon:"save",themeColor:"primary",text:e.save})+this.createButton({name:"canceltimezone",icon:"cancel-outline",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var n=i.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);n+='<div class="k-edit-buttons">';for(var a=0;a<t.buttons.length;a++)n+=this.createButton(t.buttons[a]);n+="</div></div></div>";var r=this.element;this.popup&&this.popup.destroy();var o=this.popup=e(n).appendTo(r).eq(0).on(y,".k-button",(function(i){i.preventDefault(),o.close();var n=e(i.currentTarget).index();t.buttons[n].click()})).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.trigger("focus")}}).getKendoWindow();o.center().open()},_initTimezoneEditor:function(e,t){var i,n=this,a=n.container.find(".k-scheduler-timezones"),r=a.find("input.k-timezone-toggle"),o=a.find(".k-form-field").last(),s=a.find(".k-scheduler-savetimezone"),l=a.find(".k-scheduler-canceltimezone"),d=n._timezonePopup,c=function(t){if("startTimezone"===t.field){var i=e.startTimezone;r.prop(F,!i),i||(o.hide(),e.set("endTimezone",""),r.prop("checked",!1))}};n._startTimezone=e.startTimezone,n._endTimezone=e.endTimezone,d||(n._timezonePopup=d=a.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:n.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(i){e.unbind(E,c),i.userTriggered&&n._revertTimezones(e),t&&t.focus()}}),r.on(y,(function(){o.toggle(r.prop("checked")),e.set("endTimezone","")})),s.on(y,(function(e){e.preventDefault(),i.close()})),l.on(y,(function(t){t.preventDefault(),n._revertTimezones(e),i.close()})),e.bind(E,c)),r.prop("checked",e.endTimezone).prop(F,!e.startTimezone),e.endTimezone?o.show():o.hide(),(i=d.data("kendoWindow")).center().open()}}),we=p.extend({init:function(t,n){var a=this;u.fn.init.call(a,t,n),a.options.views&&a.options.views.length||(a.options.views=["day","week"]),a.resources=[],a._initModel(),a._wrapper(),a.options.selectable&&a._tabindex(),a._views(),a._toolbar(),a._dataSource(),a._resources(),a._resizeHandler=function(){a.resize()},a.wrapper.on(T+b+" selectstart"+b,(function(t){var i=e(t.target);i.is(":kendoFocusable")||0!==i.closest(".k-button").length||t.preventDefault()})),a.options.editable&&!1!==a.options.editable.resize&&a._resizable(),a._movable(),a._bindResize(),a.options.messages&&a.options.messages.recurrence&&(s.options=a.options.messages.recurrence),a._navigation(),a._selectable(),a._touchHandlers(),a._ariaId=i.guid(),a._createEditor(),a.mediaQueryList=window.matchMedia(B),a.mediaQueryList.addEventListener("change",a._onMediaChange.bind(a))},_onMediaChange:function(e){var t=this,i=t._selectedView,n=t.toolbar,a=n.getKendoToolBar();e.matches?(a.hide(n.find(".k-views-dropdown")),a.show(n.find(".k-views-dropdown").parent().next(".k-button-group"))):(a.show(n.find(".k-views-dropdown")),a.hide(n.find(".k-views-dropdown").parent().next(".k-button-group"))),t._model.set("formattedDate",e.matches?i.dateForTitle():i.shortDateForTitle())},_bindResize:function(){e(window).on("resize"+b,this._resizeHandler)},_unbindResize:function(){e(window).off("resize"+b,this._resizeHandler)},dataItems:function(){var i,n,a=this.items(),r=this._data,o=e.map(a,(function(t){return e(t).attr("data-uid")})),s={},l=o.length;for(i=0;i<l;i++)s[o[i]]=null;var d=r.length;for(i=0;i<d;i++){var c=r[i];s[c.uid]!==t&&(s[c.uid]=c)}var u=[];for(n in s)u.push(s[n]);return u},_isMobile:function(){var e=this.options;return!0===e.mobile&&i.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isTouch:function(e){return/touch/.test(e.type)||e.originalEvent&&/touch/.test(e.originalEvent.pointerType)},_isInverseColor:function(e){return e.hasClass("k-event-inverse")},_groupsByResource:function(e,t,n,a,r){n||(n=[]);var o=e[0];if(o){for(var s,l=o.dataSource.view(),d=0,c=0;c<l.length;c++){var u=i.getter(o.dataValueField)(l[c]),p=t+d+c;(s=this._groupsByResource(e.slice(1),p,n,u,o.field))[o.field]=u,d=s.groupIndex,r&&a&&(s[r]=a),1===e.length&&(s.groupIndex=t+c,n.push(s))}return s}return{}},data:function(){return this._data},select:function(e){var n,a=this,o=a.view(),s=a._selection,l=o.groups;if(e===t){var d,c=o._selectedSlots;return s?(s&&s.events&&(d=a._selectedEvents()),{start:s.start,end:s.end,events:d,slots:c,resources:o._resourceBySlot(s)}):[]}if(!e)return a._selection=null,a._old=null,void o.clearSelection();if(Array.isArray(e)&&(e={events:e.splice(0)}),e.resources){var u,p=[],h=[];for(u in o.groupedResources&&a._groupsByResource(o.groupedResources,0,h),e.resources)p.push({field:u,operator:"eq",value:e.resources[u]});n=new i.data.Query(h).filter(p).toArray()}if(e.events&&e.events.length)return a._selectEvents(e.events,n),void a._select();if(l&&e.start&&e.end){var v,f,m=r(o._startDate),g=i.date.addDays(r(o._endDate),1);e.start<g&&m<=e.end&&((v=n&&n.length?l[n[0].groupIndex]:l[0]).timeSlotCollectionCount()||(e.isAllDay=!0),(f=v.ranges(e.start,e.end,e.isAllDay,!1)).length&&(a._selection={start:i.timezone.toLocalDate(f[0].start.start),end:i.timezone.toLocalDate(f[f.length-1].end.end),groupIndex:f[0].start.groupIndex,index:f[0].start.index,isAllDay:f[0].start.isDaySlot,events:[]},a._select()))}},_selectEvents:function(e,t){var n,a=this,r=a.view(),o=r.groups,s=e.length,l=t&&t.length,d=a._ctrlKey;for(a._ctrlKey=!0,n=0;n<s;n++)if(o&&l){for(var c=o[t[0].groupIndex],u=[],p=c.timeSlotCollectionCount(),h=c.daySlotCollectionCount(),v=0;v<p;v++)u=u.concat(c.getTimeSlotCollection(v).events());for(var f=0;f<h;f++)u=u.concat(c.getDaySlotCollection(f).events());(u=new i.data.Query(u).filter({field:function(e){return e.element[0].getAttribute("data-uid")},operator:"eq",value:e[n]}).toArray())[0]&&a._createSelection(u[0].element)}else{var m=r.element.find(i.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[n]));m.length&&a._createSelection(m[0])}a._ctrlKey=d},_touchHandlers:function(){var e,t,n,a,r,o=this,s=o.wrapper,l=o._touchMove.bind(o);s.on(z+b,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",(function(i){var n=o.wrapper.find(".k-scheduler-content");o._isTouch(i)&&(n.stop(!0,!1),o._touchPosX=e=o._tapPosition(i,"X"),o._touchPosY=t=o._tapPosition(i,"Y"),o._userTouched=!0,o.view()._scrolling=!1,r=Date.now(),s.on(D+b,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",l))})),s.on("contextmenu"+b,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",(function(e){o._preventFocus=!0})),s.on(S+b,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",(function(d){if(o._isTouch(d)){var c=Date.now()-r,u=o.wrapper.find(".k-scheduler-content"),p=-o._amplitude*(3e3/c);n=o._tapPosition(d,"X"),a=o._tapPosition(d,"Y"),o._dragging||(o.options.selectable&&(Math.abs(n-e)<=10||Math.abs(a-t)<=10)&&o._mouseDownSelection(d),!i.support.kineticScrollNeeded&&c<200&&Math.abs(n-e)>10&&u.animate({scrollTop:u[0].scrollTop+p}),s.off(D+b,".k-scheduler-header-all-day td, .k-scheduler-content td",l))}}))},_navigation:function(){var e=this,t=e.wrapper;t.on("focus"+b,(function(){var i=e._selection;setTimeout((function(){e._preventFocus?e._preventFocus=!1:(i&&!(i.events.length>0&&0===t.find("[data-uid='"+i.events[0]+"']").length)||e._userTouched||e._mouseDown?e._mouseDown=!1:e._initialFocus(),e._select())}),300)})),t.on("focusout"+b,(function(){e._ctrlKey=e._shiftKey=!1})),t.on("keydown"+b,e._keydown.bind(e)),t.on("keyup"+b,(function(t){e._ctrlKey=t.ctrlKey,e._shiftKey=t.shiftKey}))},_selectable:function(){var e=this,t=e.wrapper;if(e.options.selectable){t.on(T+b,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link",(function(t){e._isTouch(t)||e._mouseDownSelection(t)}));var i=e._mouseMove.bind(e);t.on(T+b,".k-scheduler-header-all-day td, .k-scheduler-content td",(function(n){var a=n.which,r=n.button,o=a&&3===a||r&&2==r;e._isTouch(n)||o||t.on(x+b,".k-scheduler-header-all-day td, .k-scheduler-content td",i)})),t.on("mouseup"+b+" mousecancel"+b,(function(){t.off(x+b,".k-scheduler-header-all-day td, .k-scheduler-content td",i)}))}},_mouseDownSelection:function(t){var n=t.which,a=t.button;n&&3===n||a&&2==a||(t.ctrlKey&&(this._ctrlKey=t.ctrlKey),t.shiftKey&&(this._shiftKey=t.shiftKey),this._mouseDown=!0,this._createSelection(t.currentTarget),e(t.currentTarget).hasClass("k-event")&&(this._selection.eventElement=t.currentTarget)),"year"!==this.view().name&&i._activeElement()!==this.wrapper.get(0)?i.focusElement(this.wrapper):this._select(),this.toolbar&&this.toolbar.find(".k-focus").removeClass(I)},_selectFirstSlot:function(){var e,t=this.wrapper.find(".k-scheduler-header-all-day").find("td").first(),i=this.wrapper.find(".k-scheduler-content").find("td").first();e=t.length>0?t:i.length>0?i:this.wrapper.find(".k-scheduler-body").find(".k-link").first(),this._createSelection(e)},_firstEvent:function(){var e,t,i,n=this.wrapper.find(".k-scheduler-header-wrap .k-event, .k-task").first(),a=this.wrapper.find(".k-scheduler-content .k-event").first();return n.length>0?a.length>0?(t=this.occurrenceByUid(n.data("uid")),i=this.occurrenceByUid(a.data("uid")),e=t.start<=i.start?n:a):e=n:a&&(e=a),e},_initialFocus:function(){var e=this._firstEvent();this.options.selectable?e&&e.length>0?(this._createSelection(e),this._selection.eventElement=e[0]):this._selectFirstSlot():this.toolbar&&0===this.toolbar.find(".k-focus").length?this._focusToolbar():this.toolbar&&this.toolbar.find(".k-focus").removeClass(I)},_select:function(){var t=this,i=t.view(),n=t.wrapper,a=i.current(),r=t._selection,o=t._old?t._old.selection:null,s=t._old?t._old.eventsLength:null;if(r&&(a&&(a.removeAttribute("id"),n.removeAttr("aria-activedescendant")),i.select(r),t._selection.eventElement=null,(a=i.current())&&(a.setAttribute("id",t._ariaId),n.attr("aria-activedescendant",t._ariaId),o!==a||r.events&&s!==r.events.length))){var l=e(a).data("uid");if(t._old&&l&&l===e(t._old.selection).data("uid")&&r.events&&t._old.eventsLength===r.events.length)return;var d=t._selectedEvents(),c=i._selectedSlots;t._old={selection:a,eventsLength:d.length},t.trigger(E,{start:r.start,end:r.end,events:d,slots:c,resources:i._resourceBySlot(r)})}},_selectedEvents:function(){for(var e,t=this._selection.events,i=t.length,n=0,a=[];n<i;n++)(e=this.occurrenceByUid(t[n]))&&a.push(e);return a},_tapPosition:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]},_touchMove:function(e){var t=this,n=t.wrapper.find(".k-scheduler-content"),a=n[0].scrollHeight>n[0].clientHeight,r=n[0].scrollWidth>n[0].clientWidth,o=t._tapPosition(e,"Y"),s=t._tapPosition(e,"X"),l=n[0].scrollTop-Math.round(o-t._touchPosY),d=n[0].scrollLeft-Math.round(s-t._touchPosX),c=a&&Math.abs(o-t._touchPosY)>10,u=r&&Math.abs(o-t._touchPosY)>10;t._dragging||i.support.kineticScrollNeeded||!t._isTouch(e)||(c||u)&&(t._amplitude=Math.round(o-t._touchPosY),t._touchPosY=o,t._touchPosX=s,n.animate({scrollTop:l,scrollLeft:d},0),t.view()._scrolling=!0)},_mouseMove:function(t){var i=this;clearTimeout(i._moveTimer),i._isTouch(t)||(i._moveTimer=setTimeout((function(){var n=i.view(),a=i._selection;if(a){var r=n.selectionByElement(e(t.currentTarget));if(r&&a.groupIndex===r.groupIndex){var o=r.startDate(),s=r.endDate();o>=a.end?a.backward=!1:s<=a.start&&(a.backward=!0),a.backward?a.start=o:a.end=s,i._select()}}}),5))},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_keydownToolbar:function(e){var t=e.keyCode;return e.altKey&&t===d.DOWN&&this.toolbar.find(".k-nav-current").hasClass(I)?(this._showCalendar(),void e.preventDefault()):t===d.DOWN?("year"===this._selectedViewName?this.view().calendar.focus():document.activeElement!==this.element[0]&&this.element.focus(),void e.preventDefault()):void 0},_keydownView:function(e){var t,n,a,r=e.keyCode,o=16===r||18===r||17===r||91===r||92===r,s=this._selection,l=this.view(),c=l.options.editable,u=[d.LEFT,d.RIGHT,d.UP,d.DOWN],p=i.support.isRtl(this.element);o||s&&(r===d.ENTER?s.events.length&&c&&!1!==c.update&&this.editEvent(s.events[0]):r!==d.DELETE&&r!==d.BACKSPACE||!1===c||!1===c.destroy?u.indexOf(r)>-1?(t=r===d.UP||r===d.LEFT&&!p||r===d.RIGHT&&p,l.moveToEvent(s,t)&&(this._select(),document.activeElement!==this.element[0]&&this.element.focus(),e.preventDefault())):r!==d.HOME&&r!==d.END||(e.preventDefault(),n=this.view().content.eq(0),a=r===d.HOME?n.find(".k-scheduler-table td").first():n.find(".k-scheduler-table td").last(),this.view()._scrollTo(a[0],n[0])):this.removeEvent(s.events[0]))},_keydownShortcut:function(e){var t=new Date,a=this.options.timezone,r=this.view().options.editable;if(66===e&&this.view().toggleFullDay)this.view().toggleFullDay();else if(67===e&&r&&!1!==r.create)this.addEvent(_({},{start:this.date(),end:this.date()}));else if(84===e){if(a){var o=i.timezone.offset(t,a);n=i.timezone.convert(t,t.getTimezoneOffset(),o)}else n=t;this.trigger("navigate",{view:this._selectedViewName,action:"today",date:n})||this.date(n)}},_keydownYearView:function(e){var t=this.view(),i=this._selection,n=e.keyCode;n!==d.TAB&&(n===d.F10?(this._focusToolbar(),e.preventDefault()):(this.toolbar.find(".k-focus").removeClass(I),t.calendar.focus()),i&&this._adjustSelectedDate(),e.preventDefault())},_keydownAgendaView:function(e){var t,i,n=e.keyCode,a=this.view(),r=this._selection;a.move(r,n)?(e.preventDefault(),this.toolbar.find(".k-focus").removeClass(I),this._select()):n!==d.HOME&&n!==d.END||(e.preventDefault(),t=this.view().content.eq(0),i=n===d.HOME?t.find(".k-scheduler-table td").first():t.find(".k-scheduler-table td").last(),this.view()._scrollTo(i[0],t[0]))},_keydownChangeView:function(e){var t,i=e-49;-1===i&&(i=9),(t=this._viewByIndex(i))&&!this.trigger("navigate",{view:t,action:"changeView",date:this.date()})&&this.view(t)},_keydownChangeDate:function(e){var t=i.support.isRtl(this.element),a=t&&e===d.LEFT||!t&&e===d.RIGHT?"next":"previous";n="next"===a?this.view().nextDate():this.view().previousDate(),this.trigger("navigate",{view:this._selectedViewName,action:a,date:n})||(this.date(n),this._initialFocus(),this._select())},_keydown:function(t){var i=t.keyCode,n=e(t.target).closest(".k-toolbar").length>0,a=t.altKey;if(this._ctrlKey=t.ctrlKey,this._shiftKey=t.shiftKey,i===d.ESC&&this.popup&&this.popup.visible())return this.popup.close(),void t.preventDefault();if(i!==d.LEFT&&i!==d.RIGHT||!this._shiftKey)if(a&&i>=48&&i<=57)this._keydownChangeView(i);else if([66,67,84].indexOf(i)>-1)e(t.target).hasClass("k-scheduler-search-input")||this._keydownShortcut(i);else if(n)this._keydownToolbar(t);else{if("year"===this._selectedViewName)return void this._keydownYearView(t);if(i===d.F10)return this._focusToolbar(),void t.preventDefault();if("agenda"===this._selectedViewName)return void this._keydownAgendaView(t);this._keydownView(t)}else this._keydownChangeDate(i)},_focusToolbar:function(){this.toolbar.find("[tabindex=0]").first().trigger("focus").addClass(I)},_createSelection:function(t){var n,a,r=this._selection;(t=e(t)).is(".k-event")&&(n=t.attr(i.attr("uid")),r&&-1!==r.events.indexOf(n)&&!this._ctrlKey)||(r&&(this._ctrlKey||this._shiftKey)||(r=this._selection={events:[],groupIndex:0}),(a=this.view().selectionByElement(t))&&(r.groupIndex=a.groupIndex||0),n&&(a=ie(this._data,n)),a&&a.uid&&(n=[a.uid]),this._updateSelection(a,n),this._adjustSelectedDate())},_updateSelection:function(e,n,a){var r=this._selection;if(e&&r){var o=this.view();if(e.uid&&(e=o._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end){var s=e.end<r.end;r.end=e.endDate?e.endDate():e.end,s&&o._timeSlotInterval&&i.date.setTime(r.end,-o._timeSlotInterval())}else r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end;if(r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,null!==a&&a!==t&&(r.groupIndex=a),r.index=e.index,this._ctrlKey){var l=n&&n.length?r.events.indexOf(n[0]):-1;l>-1?r.events.splice(l,1):r.events=r.events.concat(n||[])}else r.events=n||[]}},options:{name:"Scheduler",date:N,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,workWeekStart:1,workWeekEnd:5,workDays:null,showWorkHours:!1,startTime:N,endTime:N,currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},ongoingEvents:{cssClass:"k-event-ongoing",enabled:!1,updateInterval:6e4,useLocalTimezone:!0},footer:{},messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",resetSeries:"Reset Series",deleteWindowTitle:"Delete event",next:"Next",previous:"Previous",refresh:"Refresh",selectView:"Select view",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:{on:"on",at:"at",to:"to",allDay:"(all day)",prefix:""},search:"Search...",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",year:"Year"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",resetSeriesWindowTitle:"Reset Series",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:"Are you sure you want to delete this event?"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:"Timezone",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],orientation:"horizontal"},views:[],selectable:!1},events:[M,O,V,H,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate",E],destroy:function(){var t=this;if(u.fn.destroy.call(t),t.dataSource&&(t.dataSource.unbind(E,t._refreshHandler),t.dataSource.unbind(R,t._progressHandler),t.dataSource.unbind(C,t._errorHandler)),t._resourceRefreshHandler)for(var n=0;n<t.resources.length;n++){var a=t.resources[n].dataSource;a.unbind(E,t._resourceRefreshHandler),a.unbind(R,t._resourceProgressHandler),a.unbind(C,t._resourceErrorHandler)}t.calendar&&(t.calendar.destroy(),t.popup.destroy()),t.view()&&t.view().destroy(),t._editor&&t._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t.element.add(t.wrapper).add(t.toolbar).add(t.popup).off(b),clearTimeout(t._moveTimer),t._model=null,t.toolbar=null,t.element=null,e(window).off("resize"+b,t._resizeHandler),i.destroy(t.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch?e.fetch():k(e)&&this.view(this._selectedView)},items:function(){var e=this.wrapper.find(".k-scheduler-content"),t=this.view();return t&&"agenda"===t.options.name?e.find(".k-task"):e.find(".k-event").add(this.wrapper.find(".k-scheduler-header-wrap").find(".k-scheduler-header-all-day").siblings())},_movable:function(){var t,n,a,r,o,s,l,d,c,u=this,p=0,h=[],v=[],f=u._isMobile(),m=u.options.editable&&!1!==u.options.editable.move,g=u.options.editable&&!1!==u.options.editable.resize;(m||g&&f)&&(u._dragging=!1,f&&i.support.mobileOS.android&&(p=5),u._moveDraggable=new i.ui.Draggable(u.element,{distance:p,filter:".k-event",ignore:".k-resize-handle",holdToDrag:f,autoScroll:!0}),m&&u._moveDraggable.bind("dragstart",(function(e){var o=u.view(),p=e.currentTarget,v=u._isTouch(e);if(u._dragging=!0,!o.options.editable||!1===o.options.editable.move)return u._dragging=!1,void e.preventDefault();if(v&&!p.hasClass("k-event-active"))return u._dragging=!1,u.element.find(".k-event-active").removeClass("k-event-active"),void e.preventDefault();if(s=u.occurrenceByUid(p.attr(i.attr("uid"))),l=s.clone(),s.clone(),l.update(o._eventOptionsForMove(l)),l.inverseColor=u._isInverseColor(p),h=[],u._selection)for(var f=u._selection.events,m=0;m<f.length;m++){var g=u.occurrenceByUid(f[m]).clone(),_=this.element.find('div.k-event[data-uid="'+g.uid+'"]').eq(0);g.update(o._eventOptionsForMove(g)),_.length&&(g.inverseColor=u._isInverseColor(_)),h.push(g)}else h.push(l);t=o._slotByPosition(e.x.startLocation,e.y.startLocation),a=o._resourceBySlot(t),c=r=t.startOffset(e.x.startLocation,e.y.startLocation,u.options.snap),n=t,d=t,t&&!u.trigger("moveStart",{event:s})||e.preventDefault()})).bind("drag",(function(a){var p,f,m,g=u.view(),_=g._slotByPosition(a.x.location,a.y.location);if(_){if(o=_.startOffset(a.x.location,a.y.location,u.options.snap),_.isDaySlot!==t.isDaySlot)if(_.isDaySlot!==d.isDaySlot){var w=e(t.element).index(),k=e(_.element).parent().children().eq(w);for(t=g._slotByPosition(k.offset().left,k.offset().top),r=t.startOffset(a.x.location,a.y.location,!0),v=h.map((function(e){return e.clone()})),m=0;m<h.length;m++)h[m].isAllDay!=_.isDaySlot&&(h[m].isAllDay=_.isDaySlot,h[m].end=i.date.getDate(h[m].start),h[m].start=i.date.getDate(h[m].start),_.isDaySlot||(i.date.setTime(h[m].start,i.date.getMilliseconds(g.startTime())),i.date.setTime(h[m].end,i.date.getMilliseconds(g.startTime())+g._timeSlotInterval())))}else t=e.extend(!0,{},d),r=c,h=v;for(p=o-r,m=0;m<h.length;m++)g._updateMoveHint(h[m],_.groupIndex,p);if(f=ve(l,p),u.trigger("move",{event:s,slot:{element:_.element,start:_.startDate(),end:_.endDate(),isDaySlot:_.isDaySlot},resources:g._resourceBySlot(_),start:f.start,end:f.end}))for(m=0;m<h.length;m++)g._updateMoveHint(h[m],_.groupIndex,p);else n=_}})).bind("dragend",(function(t){u.view()._removeMoveHint();var c=o-r,p=ve(l,c),f=p.start,m=p.end;u._dragging=!1;var g=u.view()._resourceBySlot(n);if(!u.trigger("moveEnd",{event:s,slot:{element:n.element,start:n.startDate(),end:n.endDate()},start:f,end:m,resources:g})&&(s.start.getTime()!==f.getTime()||s.end.getTime()!==m.getTime()||d.isDaySlot!==n.isDaySlot||i.stringify(g)!==i.stringify(a))){u._isMultiDrag=h.length>1;for(var _=0;_<h.length;_++){var w=h[_];p=ve(w,c);var k=u.view()._eventOptionsForMove(w),b=e.extend({isAllDay:w.isAllDay,start:p.start,end:p.end},k,g);u._updateEvent(null,w,b)}u._isMultiDrag&&(u.dataSource.sync(),u._isMultiDrag=!1)}t.currentTarget.removeClass("k-event-active"),this.cancelHold(),h=[],v=[]})).bind("dragcancel",(function(){u.view()._removeMoveHint(),this.cancelHold(),h=[],v=[]})),u._moveDraggable.bind("hold",(function(e){u._isTouch(e)&&(u.element.find(".k-event-active").removeClass("k-event-active"),u.options.selectable&&u._createSelection(e.currentTarget),e.currentTarget.addClass("k-event-active"))})))},_resizable:function(){var t,n,a,r,o,s=this,l=0;function d(e){var t={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(var i in t)if(e.hasClass(i))return t[i]}s._isMobile()&&i.support.mobileOS.android&&(l=5),s._resizeDraggable=new i.ui.Draggable(s.element,{distance:l,filter:".k-resize-handle",autoScroll:!0,dragstart:function(l){var d=e(l.currentTarget).closest(".k-event").attr(i.attr("uid")),c=s.view();s._dragging=!0,a=s.occurrenceByUid(d),r=a.clone(),c._updateEventForResize(r),o=c._slotByPosition(l.x.startLocation,l.y.startLocation),s.trigger("resizeStart",{event:a})&&l.preventDefault(),t=i.date.toUtcTime(r.start),n=i.date.toUtcTime(r.end)},drag:function(l){if(o){var c=d(e(l.currentTarget)),u=s.view(),p=u._slotByPosition(l.x.location,l.y.location);if(p&&o.groupIndex==p.groupIndex){o=p;var h=t,v=n;"south"==c?!o.isDaySlot&&o.end-i.date.toUtcTime(r.start)>=u._timeSlotInterval()&&(n=r.isAllDay?o.startOffset(l.x.location,l.y.location,s.options.snap):o.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==c?!o.isDaySlot&&i.date.toUtcTime(r.end)-o.start>=u._timeSlotInterval()&&(t=o.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==c?o.isDaySlot&&i.date.toUtcTime(i.date.getDate(o.endDate()))>=i.date.toUtcTime(i.date.getDate(r.start))?n=r.isAllDay?o.startOffset(l.x.location,l.y.location,s.options.snap):o.endOffset(l.x.location,l.y.location,s.options.snap):!o.isDaySlot&&o.end-i.date.toUtcTime(r.start)>=u._timeSlotInterval()&&(n=o.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==c&&(o.isDaySlot&&i.date.toUtcTime(i.date.getDate(r.end))>=i.date.toUtcTime(i.date.getDate(o.startDate()))||!o.isDaySlot&&i.date.toUtcTime(r.end)-o.start>=u._timeSlotInterval())&&(t=o.startOffset(l.x.location,l.y.location,s.options.snap)),s.trigger("resize",{event:a,slot:{element:o.element,start:o.startDate(),end:o.endDate()},start:i.timezone.toLocalDate(t),end:i.timezone.toLocalDate(n),resources:u._resourceBySlot(o)})?(t=h,n=v):u._updateResizeHint(r,o.groupIndex,t,n)}}},dragend:function(l){var c=e(l.currentTarget),u=new Date(r.start.getTime()),p=new Date(r.end.getTime()),h=d(c);s._dragging=!1,s.view()._removeResizeHint(),"south"==h?p=i.timezone.toLocalDate(n):"north"==h?u=i.timezone.toLocalDate(t):"east"==h?p=o.isDaySlot?i.date.getDate(i.timezone.toLocalDate(n)):i.timezone.toLocalDate(n):"west"==h&&(o.isDaySlot?((u=new Date(i.timezone.toLocalDate(t))).setHours(0),u.setMinutes(0)):u=i.timezone.toLocalDate(t)),!s.trigger("resizeEnd",{event:a,slot:{element:o.element,start:o.startDate(),end:o.endDate()},start:u,end:p,resources:s.view()._resourceBySlot(o)})&&p.getTime()>=u.getTime()&&(r.start.getTime()==u.getTime()&&r.end.getTime()==p.getTime()||(s.view()._updateEventForResize(a),s._updateEvent(h,a,{start:u,end:p}))),o=null,a=null},dragcancel:function(){s._dragging=!1,s.view()._removeResizeHint(),o=null,a=null}})},_updateEvent:function(e,t,n){var r=this,s=function(t,i){var o;try{r._preventRefresh=!0,t.update(n),r._convertDates(t),o=t.start,e&&t.duration()%a==0&&0===o.getHours()&&0===o.getMinutes()&&0===o.getSeconds()&&0===o.getMilliseconds()&&t.set("isAllDay",!0)}finally{r._preventRefresh=!1}r.trigger(H,{event:t})||(i&&i(),r._isMultiDrag||r.dataSource.sync())},l=function(e){return e.recurrenceRule?r.dataSource.getByUid(e.uid):r.dataSource.get(e.recurrenceId)};if(t.recurrenceRule||t.isOccurrence()){var d=r.options.messages.recurrenceMessages;r._showRecurringDialog(t,(function(){var e,i=l(t),n=i.toOccurrence({start:t.start,end:t.end});e=n.uid,s(r.dataSource.add(n),(function(){r._convertDates(i),r._selection&&r._selection.events.push(e)}))}),(function(){var a=l(t);if("south"==e||"north"==e){if(n.start){var d=i.date.getDate(a.start);i.date.setTime(d,o(n.start)),n.start=d}if(n.end){var c=i.date.getDate(a.end);i.date.setTime(c,o(n.end)),n.end=c}}r.dataSource._removeExceptions(a),s(a)}),{title:d.editWindowTitle,text:d.editRecurring?d.editRecurring:j,occurrenceText:d.editWindowOccurrence,seriesText:d.editWindowSeries})}else s(r.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+i.attr("uid")+"]"),this.dataSource.getByUid(t.attr(i.attr("uid")))},showDialog:function(e){this.toolbar.find(".k-focus").removeClass(I),this._editor.showDialog(e)},focus:function(){this.wrapper.trigger("focus")},_confirmation:function(e,t,n){var a=this.options.editable;if(!0===a||!1!==a.confirmation){var r=this.options.messages,o=r.deleteWindowTitle,s=typeof a.confirmation===h?a.confirmation:r.editable.confirmation;if(this._isEditorOpened()&&t.isRecurring()){var l=this.options.messages.recurrenceMessages;o=l.deleteWindowTitle,s=t.isException()||t.isNew()?l.deleteRecurringConfirmation?l.deleteRecurringConfirmation:"Are you sure you want to delete this event occurrence?":l.deleteSeriesConfirmation?l.deleteSeriesConfirmation:"Are you sure you want to delete the whole series?",n&&(o=l.resetSeriesWindowTitle,s=l.resetSeriesConfirmation?l.resetSeriesConfirmation:"Are you sure you want to reset the whole series?")}var d=[{name:"destroy",text:n?r.resetSeries:r.destroy,click:function(){e()}}];this._isMobile()&&i.Pane||d.push({name:"canceledit",text:r.cancel,click:function(){e(!0)}}),this._unbindResize(),this.showDialog({model:t,text:s,title:o,buttons:d}),this._bindResize()}else e()},addEvent:function(e){var t,i=this._editor.editable,n=this.dataSource;e=e||{},!this.trigger("add",{event:e})&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),(t=n.add(e))&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e=this,t=e._editor,i=e.dataSource;if(t){var n,a,r,o=t.editable,s=t.container,l=e._modelForContainer(s);if(s&&o&&o.end()&&!e.trigger(H,{container:s,event:l})){if(!l.isOccurrence()&&l.recurrenceException&&!l.recurrenceRule){for(a=(n=i.data()).length-1;a>=0;a-=1)(r=n[a])&&r.recurrenceId===l.id&&i.remove(r);l.set("recurrenceException","")}l.dirty||l.isOccurrence()||e._convertDates(l,"remove"),i.sync()}}},cancelEvent:function(){var e,t=this._editor,i=t.container;i&&((e=this._modelForContainer(i))&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._preventRefresh=!0,this._unbindResize(),this._createPopupEditor(e),this.toolbar.find(".k-focus").removeClass(I),this._bindResize()},_editRecurringDialog:function(e){var t=this,i=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,(function(){e.isException()?t._editEvent(e):t.addEvent(e)}),(function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)}),{title:i.editWindowTitle,text:i.editRecurring?i.editRecurring:j,occurrenceText:i.editWindowOccurrence,seriesText:i.editWindowSeries})},_showRecurringDialog:function(e,t,i,n){var a=this.options.editable,r=g(a)?a.editRecurringMode:"dialog";"occurrence"===r||this._isMultiDrag?t():"series"===r?i():(this._unbindResize(),this.showDialog({model:e,title:n.title,text:n.text,buttons:[{text:n.occurrenceText,click:t},{text:n.seriesText,click:i}]}),this._bindResize())},_createButton:function(e){var t=e.template||U,n=typeof e===h?e:e.name||e.text,a={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||g(e)&&e.template))throw new Error("Custom commands should have name specified");return g(e)?(e.className&&(e.className+=" "+a.className),"edit"===n&&g(e.text)&&((e=_(!0,{},e)).text=e.text.edit),a=_(!0,a,le[n],e)):a=_(!0,a,le[n]),a.className?-1===a.className.indexOf("k-button-solid-primary")&&(a.className+=" k-button-solid-base"):a.className="k-button-solid-base",i.template(t)(a)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,a=e.startTimezone,r=e.endTimezone,o=e.start,s=e.start;t=t||"apply",a=a||r,r=r||a,a&&(n?"apply"===t?(o=i.timezone.convert(e.start,n,a),s=i.timezone.convert(e.end,n,r)):(o=i.timezone.convert(e.start,a,n),s=i.timezone.convert(e.end,r,n)):(o=i.timezone[t](e.start,a),s=i.timezone[t](e.end,r)),e._set("start",o),e._set("end",s))},_createEditor:function(){var e,t=this;(e=this._isMobile()&&i.Pane?t._editor=new ge(this.wrapper,_({},this.options,{target:this,timezone:t.dataSource.reader.timezone,resources:t.resources,createButton:this._createButton.bind(this)})):t._editor=new _e(this.wrapper,_({},this.options,{target:this,createButton:this._createButton.bind(this),timezone:t.dataSource.reader.timezone,resources:t.resources}))).bind("cancel",(function(e){t.trigger("cancel",{container:e.container,event:e.model})?e.preventDefault():(t._preventRefresh=!1,t.cancelEvent(),t._attemptRefresh&&t.refresh(),t.focus())})),e.bind("edit",(function(e){t.trigger(O,{container:e.container,event:e.model})&&e.preventDefault()})),e.bind("save",(function(){t._preventRefresh=!1,t.saveEvent()})),e.bind("remove",(function(e){t._preventRefresh=!1,t.removeEvent(e.model)})),e.bind("resetSeries",(function(e){t._confirmation((function(i){t._preventRefresh=!1,i||(t.dataSource._removeExceptions(e.model),t.saveEvent())}),e.model,!0)}))},_createPopupEditor:function(e){var t=this._editor;e.isNew()&&!e.isOccurrence()||(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,i="string"==typeof e?t.occurrenceByUid(e):e;i&&(i.isRecurring()?t._deleteRecurringDialog(i):t._confirmation((function(e){e||t._removeEvent(i)}),i))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=ie(this._data,e)),t},occurrencesInRange:function(e,t){return new i.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(M,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t,i,n,a,r,o,s=this,l=e,d=s.options.editable,c=g(d)?d.editRecurringMode:"dialog";t=function(){var e=l.recurrenceId?l:l.toOccurrence(),t=s.dataSource.get(e.recurrenceId);s._convertDates(t),s._removeEvent(e)},i=function(){l.recurrenceId&&(l=s.dataSource.get(l.recurrenceId)),s._removeEvent(l)},n=function(){s.dataSource.remove(l),s.dataSource.sync()},("dialog"!=c||s._isEditorOpened())&&(a=function(){s._confirmation((function(e){e||t()}),l)},r=function(){s._confirmation((function(e){e||i()}),l)},o=function(){s._confirmation((function(e){e||n()}),l)});var u=r||i,p=a||t,h=o||n;if(s._isEditorOpened())e.isException()?p():e.isNew()?h():u();else{var v=s.options.messages.recurrenceMessages;s._showRecurringDialog(e,p,u,{title:v.deleteWindowTitle,text:v.deleteRecurring?v.deleteRecurring:"Do you want to delete only this event occurrence or the whole series?",occurrenceText:v.deleteWindowOccurrence,seriesText:v.deleteWindowSeries})}},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",(function(){return{elements:t.items()}})),e.destroy()},_bindView:function(t){var i=this;i.options.editable&&(i._viewRemoveHandler&&t.unbind(M,i._viewRemoveHandler),i._viewRemoveHandler=function(e){i.removeEvent(e.uid)},t.bind(M,i._viewRemoveHandler),i._viewAddHandler&&t.unbind("add",i._viewAddHandler),i._viewAddHandler=function(e){i.addEvent(e.eventInfo)},t.bind("add",this._viewAddHandler),i._viewEditHandler&&t.unbind(O,i._viewEditHandler),i._viewEditHandler=function(e){i.editEvent(e.uid)},t.bind(O,this._viewEditHandler)),i._viewNavigateHandler&&t.unbind("navigate",i._viewNavigateHandler),i._viewNavigateHandler=function(e){if(e.action)i.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:e.action,date:e.date})||i.date(e.date);else if(e.view){var t="isWorkDay"in e,n=t?"changeWorkDay":"changeView";i.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:n,date:e.date})||(t&&(i._workDayMode=e.isWorkDay),i._selectView(e.view),i.date(e.date))}},t.bind("navigate",i._viewNavigateHandler),i._viewActivateHandler&&t.unbind("activate",i._viewActivateHandler),i._viewActivateHandler=function(){i._selection&&(this.constrainSelection(i._selection),0===e(document.activeElement).closest(".k-scheduler-toolbar").length&&(document.activeElement!==i.wrapper[0]?i.element.focus():i._select()),i._adjustSelectedDate())},t.bind("activate",i._viewActivateHandler)},_selectView:function(e){var t=this;if(e&&t.views[e])if(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,this._initialSize&&(this._initialSize=!1,this._onMediaChange(window.matchMedia(B))),t._viewsCount>1&&!t._isMobile()){var n=t.toolbar.find("["+i.attr("name")+"="+e+"]"),a=t.toolbar.find(".k-views-dropdown"),r=n.closest(".k-button-group").data("kendoButtonGroup");a.val(e),r&&r.select(n)}else if(t._viewsCount>1){t.toolbar.find(".k-scheduler-mobile-views").find("[value="+e.replace(/\./g,"\\.")+"]").prop("selected","selected")}},view:function(e){var t=this;return e?("year"===e?t.wrapper.removeAttr("tabindex"):t.wrapper.attr("tabindex",0),t._selectView(e),void t.rebind()):t._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),(i.support.mouseAndTouchPresent||i.support.pointers)&&(t.content.css("-ms-touch-action","pinch-zoom"),t.content.css("touch-action","pinch-zoom")),this._model.set("formattedDate",t.dateForTitle()),this._model.set("formattedShortDate",t.shortDateForTitle()),this._model.set("formattedMobileDate",t.mobileDateForTitle?t.mobileDateForTitle():t.shortDateForTitle()),this._model.set("formattedYear",i.format("{0:yyyy}",t.startDate())),t},resize:function(e){var t=this.getSize(),i=this._size,n=this.view();n&&n.groups&&(!e&&i&&t.width===i.width&&t.height===i.height||(this.refresh({action:"resize"}),this._size=t))},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!i.date.isInDateRange(e,r(n),r(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t=this.views[e];if(t){var n=g(t),a={},r=t.type;if(typeof r===h&&(r=i.getter(t.type)(window)),n&&t.workDays&&t.workDays.length&&(a.workDays=t.workDays),!r)throw new Error("There is no such view");t=new r(this.wrapper,function(e,t){for(var i in delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,t)e[i]=t[i];return e}(_(!0,{},this.options,n?t:{},{resources:this.resources,date:this.date(),startTime:i.parseDate(t.startTime)||i.parseDate(this.options.startTime),endTime:i.parseDate(t.endTime)||i.parseDate(this.options.endTime),showWorkHours:this._workDayMode}),a))}return t},_views:function(){var e,t,i,n,a,r,o,s=this.options.views;for(this.views={},this._viewsCount=0,r=0,o=s.length;r<o;r++){var l=!1;e=s[r],(n=g(e))?typeof(a=e.type?e.type:e)!==h&&(a=e.name||e.title,l=!0):(a=e,e={}),(t=ke[a])&&!l&&(e.type=t.type,t.title=this.options.messages.views[a],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=_({title:a},t,n?e:{}),a&&(this.views[a]=e,this._viewsCount++,i&&!e.selected||(i=a))}i&&(this._selectedViewName=i)},rebind:function(){var t=this,i=t.resources,n=[];t._preventRebind?t._preventRebind=!1:!1===t.options.autoBind&&i&&i.length>0?(i.forEach((function(e){0===e.dataSource.data().length&&(t._preventRebind=!0,n.push(e.dataSource.fetch()))})),e.when.apply(null,n).then((function(){t.dataSource.fetch(),t._preventRebind=!1}))):t.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=k(n)?{data:n}:n,!t.timezone||n instanceof se?n instanceof se&&(t.timezone=n.options.schema?n.options.schema.timezone:""):n=_(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(E,e._refreshHandler).unbind(R,e._progressHandler).unbind(C,e._errorHandler):(e._refreshHandler=e.refresh.bind(e),e._progressHandler=e._requestStart.bind(e),e._errorHandler=e._error.bind(e)),e.dataSource=i.data.SchedulerDataSource.create(n).bind(E,e._refreshHandler).bind(R,e._progressHandler).bind(C,e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");i.ui.progress(t,e)},_resources:function(){for(var t=this,i=t.options.resources,n=[],a=0;a<i.length;a++){var r=i[a],o=r.field,s=r.name||o,l=r.dataSource;if(!o||!l)throw new Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');t.resources.push({field:o,name:s,title:r.title||o,dataTextField:r.dataTextField||"text",dataValueField:r.dataValueField||"value",dataColorField:r.dataColorField||"color",dataParentValueField:r.dataParentValueField||"parentValue",valuePrimitive:null==r.valuePrimitive||r.valuePrimitive,multiple:r.multiple||!1,dataSource:t._resourceDataSource(l,s,n)})}t.options.autoBind?e.when.apply(null,n).then((function(){t.view(t._selectedViewName)})):t._selectView(t._selectedViewName)},_resourceDataSource:function(e,t,n){var a=this,r=k(e)?{data:e}:e,o=i.data.DataSource.create(r);return a.options.autoBind?n.push(o.fetch((function(){a._bindResourceEvents(this,t)}))):a._bindResourceEvents(o,t),o},_bindResourceEvents:function(e,t){var i=this,n=i.options.group&&i.options.group.resources.length&&i.options.group.resources.indexOf(t)>-1;!i._resourceRefreshHandler&&n&&(i._resourceRefreshHandler=i._refreshResource.bind(i),i._resourceErrorHandler=i._error.bind(i)),n&&e.bind(E,i._resourceRefreshHandler).bind(C,i._resourceErrorHandler)},_refreshResource:function(){var e=this;e._editor&&e._editor.editable||e._preventRefresh||e.view(e._selectedViewName)},_initModel:function(){var e=this;e._model=i.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),e._model.bind(E,(function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)}))},_wrapper:function(){var e=this,t=e.options,i=t.height,n=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap"),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),i&&e.wrapper.height(i),n&&e.wrapper.width(n)},date:function(e){return null!=e&&r(e)>=r(this.options.min)&&r(e)<=r(this.options.max)&&this._model.set("selectedDate",e),r(this._model.get("selectedDate"))},_processHandlers:function(e){var t=this;t._pdfClickHandler=function(e){e.preventDefault(),t.saveAsPDF()},t._createClickHandler=function(e){e.preventDefault(),t.addEvent()},t._calendarClickHandler=t._currentClickHandler=function(e){e.preventDefault(),t._showCalendar(e.target)},t._todayClickHandler=function(e){e.preventDefault();var n,a=t.options.timezone,r=new Date;if(a){var o=i.timezone.offset(r,a);n=i.timezone.convert(r,r.getTimezoneOffset(),o)}else n=r;t.trigger("navigate",{view:t._selectedViewName,action:"today",date:n})||t.date(n)},t._previousClickHandler=function(e){e.preventDefault();var i=t.view().previousDate();t.trigger("navigate",{view:t._selectedViewName,action:"previous",date:i})||t.date(i)},t._nextClickHandler=function(e){e.preventDefault();var i=t.view().nextDate();t.trigger("navigate",{view:t._selectedViewName,action:"next",date:i})||t.date(i)},t._refreshClickHandler=function(e){e.preventDefault();var i=t.view().name;t.trigger("navigate",{view:i,action:"changeView",date:t.date()})||t.view(i)},t._viewClickHandler=function(e){var n=e.target.attr(i.attr("name"));t.trigger("navigate",{view:n,action:"changeView",date:t.date()})||t.view(n)},Object.values(e).map((function(e){e.name&&(e.click=t["_"+e.name+"ClickHandler"])}))},_processDefaults:function(){var t,n,a=this.views,r=e.extend(!0,{},Y),o=[],s=i.support.isRtl(this.wrapper);return Object.keys(a).map((function(t){var i=e.extend(!0,{},r.view);i.text=a[t].title,i.attributes={class:"k-view-"+t.toLowerCase(),"data-name":t},r[t]=i,o.push(t)})),o.length>1&&(t=K({views:this.views,label:this.options.messages.selectView,type:"k-views-dropdown"}),n=K({views:this.views,label:this.options.messages.selectView,type:"k-scheduler-mobile-views"})),r.viewsDdl={template:t},r.viewsMobile={template:n},this._viewsButtons=o,s&&(r.previous.icon="k-i-arrow-right",r.next.icon="k-i-arrow-left"),r},_processToolbarArray:function(){var t,i,n,a=this.options,r=a.toolbar,o=[],s=this._isMobile();return r&&(o=Array.isArray(r)?r:[r]),i=e.grep(o,(function(e){return"pdf"==e||"pdf"==e.name})).length>0,n=e.grep(o,(function(e){return"search"==e||"search"==e.name})).length>0,s?(t=[].concat(J),a.editable&&t[0].push("create")):t=[].concat(Q),n&&t.push("search"),i&&(s?t[0].unshift("pdfMobile"):t.unshift("pdf")),1===this._viewsCount?t.push("refresh"):this._viewsCount>1&&(s?t.push("viewsMobile"):(t.push("viewsDdl"),t.push(this._viewsButtons))),t},_processViewTools:function(e){var t=e,i=-1;return e.some((function(e,t){return("views"===e||"views"===e.name)&&(i=t,!0)})),i>-1&&t.splice(i,1,"viewsDdl",this._viewsButtons),t},_processToolbarItems:function(){var e=this.options.toolbar.items.desktop||this.options.toolbar.items,t=this.options.toolbar.items.mobile||this.options.toolbar.items;return this._isMobile()?Array.isArray(t)?{tools:this._processViewTools(t),navigation:[]}:{tools:this._processViewTools(t.main),navigation:this._processViewTools(t.navigation)}:(e.main&&(e=e.navigation?e.main.concat(e.navigation):e.main),{tools:this._processViewTools(e)})},_processTools:function(){var e=this.options.toolbar;return e&&e.items?this._processToolbarItems():{tools:this._processToolbarArray()}},_toolbar:function(){var t,n=this,a=n.options,r=n._processDefaults(),o=n._processTools(),s=o.tools,l=o.navigation,d=e("<div class='k-scheduler-toolbar'>");n._processHandlers(r),n.wrapper.append(d),n.toolbar=d,d.kendoToolBar({resizable:!1,tools:s,defaultTools:r,parentMessages:a.messages}),!n._isMobile()||l&&0===l.length||(t=e("<div class='k-scheduler-toolbar'>"),n.wrapper.append(t),n.toolbar=n.toolbar.add(t),t.kendoToolBar({resizable:!1,tools:l||[].concat(X),defaultTools:r,parentMessages:a.messages})),n.toolbar.find(".k-nav-current .k-button-text").attr("data-"+i.ns+"bind","text: formattedDate"),n.toolbar.find(".k-m-date-format").attr("data-"+i.ns+"bind","text: formattedMobileDate"),n.toolbar.find(".k-y-date-format").attr("data-"+i.ns+"bind","text: formattedYear"),i.bind(n.toolbar,n._model),n.toolbar.find(".k-scheduler-search-input").attr({placeholder:a.messages.search,title:a.messages.search}),d.on("input"+b,".k-scheduler-search-input",i.throttle((function(e){n.dataSource.filter({logic:"or",filters:[{field:"title",operator:"contains",value:e.target.value},{field:"description",operator:"contains",value:e.target.value}]})}),250)),d.on(E+b,".k-views-dropdown, .k-scheduler-mobile-views",(function(){var e=this.value;n.trigger("navigate",{view:e,action:"changeView",date:n.date()})||n.view(e)})),n._initialSize=!0},_showCalendar:function(t){var i=this,n=t||i.toolbar.find(".k-nav-current"),a=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"></div></div>');i.popup||(i.popup=new v(a,{anchor:n,activate:function(){i.popup&&i.calendar&&(i.popup._toggleResize(!1),i.calendar.element.find("table").trigger("focus"),i.popup._toggleResize(!0))},open:function(){i.calendar||(i.calendar=new f(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();i.trigger("navigate",{view:i._selectedViewName,action:"changeDate",date:e})||(i.date(e),i.popup.close()),i._isMobile()||(i._selectedView.element.trigger("focus"),i.toolbar.find(".k-nav-current").trigger("focus").addClass(I))},min:i.options.min,max:i.options.max})),i.calendar.element.on("keydown"+b,(function(e){e.keyCode!==d.ESC&&e.keyCode!==d.TAB||(i.popup.close(),i._selectedView.element.trigger("focus"),i.toolbar.find(".k-nav-current").trigger("focus").addClass(I))})),i.calendar.setOptions({start:"year"===i._selectedViewName?"decade":"month",depth:"year"===i._selectedViewName?"decade":"month"}),i.calendar.value(i.date())},copyAnchorStyles:!1})),i.popup.open()},refresh:function(e){var t=this,i=this.view(),n=e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||"signalr"===this.dataSource.options.type&&this._preventRefresh;this._progress(!1),this.angular("cleanup",(function(){return{elements:t.items()}})),e=e||{},i&&(n?this._attemptRefresh="signalr"===this.dataSource.options.type:this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(i.startDate(),i.visibleEndDate()),i.refreshLayout(),i.render(this._data),this.trigger("dataBound"),this._attemptRefresh=!1))},slotByPosition:function(e,t){var i=this.view();if(!i._slotByPosition)return null;var n=i._slotByPosition(e,t);return n?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null},slotByElement:function(t){var i=e(t),n=i.offset(),a=i.width(),r=i.height(),o=n.left+a/2,s=n.top+r/2;n=e(t).offset();return this.slotByPosition(o,s)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),ke={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"},year:{type:"kendo.ui.YearView"}};if(c.plugin(we),i.PDFMixin){i.PDFMixin.extend(we.prototype);var be="k-scheduler-pdf-export";we.fn._drawPDF=function(t){var i=this.wrapper,n=i[0].style.cssText;i.css({width:i.width(),height:i.height()}),i.addClass(be);var a=this,r=new e.Deferred,o=i.find(".k-scheduler-content").find("table").css("table-layout","auto");return setTimeout((function(){o.css("table-layout","fixed"),a.resize(!0),a._drawPDFShadow({},{avoidLinks:a.options.pdf.avoidLinks}).done((function(e){var i={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(i),r.resolve(i.page)})).fail((function(e){r.reject(e)})).always((function(){i[0].style.cssText=n,i.removeClass(be),a.resize(!0),a.resize(!0)}))})),r}}var ye=u.extend({init:function(e,t){var n=this,a=i.timezone.windows_zones;if(!a||!i.timezone.zones_titles)throw new Error("kendo.timezones.min.js is not included.");u.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new i.data.Query(a),n._zoneTitleId=i.guid(),n._zoneTitlePicker(),n._zonePicker(),n._zoneTitle.bind("cascade",(function(){this.value()||n._zone.wrapper.hide()})),n._zone.bind("cascade",(function(){n._value=this.value(),n.trigger(E)})),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:[E],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'" aria-label="'+t.options.title+'"/>').appendTo(t.wrapper);t._zoneTitle=new i.ui.DropDownList(n,{dataSource:i.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel})},_zonePicker:function(){var t=this,n=e('<input aria-label="'+t.options.title+'"/>').appendTo(this.wrapper);t._zone=new i.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){u.fn.destroy.call(this),i.destroy(this.wrapper)},value:function(e){var i,n=this;if(e===t)return n._value;(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])?(n._zoneTitle.value(i.other_zone),n._zone.value(i.zone)):n._zoneTitle.select(0)}});c.plugin(ye);var Te=i.template((function(e){var t=e.name;return'<option value="'+e.other_zone+'">'+t+"</option>"})),ze=i.template((function(e){return'<option value="'+e.zone+'">'+e.territory+"</option>"})),De=u.extend({init:function(e,t){var n=this,a=i.timezone.windows_zones;if(!a||!i.timezone.zones_titles)throw new Error("kendo.timezones.min.js is not included.");u.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new i.data.Query(a),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:[E],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,ze))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,i){var n=0,a="",r=e.length;for(i&&(a+=t({other_zone:"",name:i}));n<r;n++)a+=t(e[n]);return a},_zoneTitlePicker:function(){var t=this,n=t._options(i.timezone.zones_titles,Te,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).on("change",(function(){var e=this.value,i=t._zonePickerLabel,n=i.find("select");t._bindZones(e),e&&n.children().length>1?i.show():i.hide(),t._value=t._zone[0].value,t.trigger(E)}))},_zonePicker:function(){var t=this;t._zonePickerLabel=e("<li class='k-item k-listgroup-item k-zonepicker' style='display:none'><label class='k-label k-listgroup-form-row'><span class='k-item-title k-listgroup-form-field-label'></span><div class='k-listgroup-form-field-wrapper'></div></label></li>"),t._zone=e("<select></select>").appendTo(t._zonePickerLabel.find("div")).on("change",(function(){t._value=this.value,t.trigger(E)})),this.wrapper.closest(".k-item").after(t._zonePickerLabel),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){u.fn.destroy.call(this),i.destroy(this.wrapper)},value:function(e){var i,n=this,a=n._zone,r="",o="";if(e===t)return n._value;(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])&&(o=i.zone,r=i.other_zone),n._zoneTitle.val(r),n._bindZones(r),a.val(o),(o=a[0].value)&&a.children.length>1?n._zonePickerLabel.show():n._zonePickerLabel.hide(),n._value=o}});c.plugin(De)}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.scheduler.min.js.map
