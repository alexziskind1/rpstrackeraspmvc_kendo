/**
 * Kendo UI v2023.2.718 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.core.js"),require("kendo.listview.js"),require("kendo.treeview.js"),require("kendo.icons.js"),require("kendo.data.js"),require("kendo.menu.js"),require("kendo.toolbar.js"),require("kendo.breadcrumb.js"),require("kendo.upload.js"),require("kendo.dialog.js"),require("kendo.resizable.js"),require("kendo.switch.js"),require("kendo.textbox.js")):"function"==typeof define&&define.amd?define(["kendo.core.min","kendo.listview.min","kendo.treeview.min","kendo.icons.min","kendo.data.min","kendo.menu.min","kendo.toolbar.min","kendo.breadcrumb.min","kendo.upload.min","kendo.dialog.min","kendo.resizable.min","kendo.switch.min","kendo.textbox.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendofilemanager=e.kendofilemanager||{},e.kendofilemanager.js=t())}(this,(function(){!function(e,t){var i=window.kendo,n=e.extend,a=e.Deferred,o=i.Class,r=o.extend({init:function(e){this.options=e,this.filemanager=e.filemanager}}),d=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t._viewDataSource||t.dataSource,a=e._remove.bind(e);e._item=n._createNewModel(),i.push({item:e._item.toJSON()}).fail(a),n.add(e._item)},_remove:function(){var e=this.filemanager;(e._viewDataSource||e.dataSource).pushDestroy(this._item)}}),s=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this,t=e.options.target,i=e.filemanager,n=i._commandStack,a=i._view.widgetComponent.dataItem(t);t&&a?(n.push({target:t,item:a}),e.filemanager._view.edit(t)):e._renameTreeViewItem(t)},_renameTreeViewItem:function(e){var t=this,i=t.filemanager._commandStack,n=e.data("uid"),a=t.filemanager.treeView.widgetComponent.dataSource.getByUid(n),o=t.filemanager.dataSource.get(a.id);t.filemanager._prompt({type:"rename",defaultInput:o.name,target:e}).done((function(t){i.push({target:e,item:o}),o.set("name",t)}))}}),l=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e,t=this,i=t.options.target,n=t.filemanager,a=n.getSelected(),o=t.filemanager._view.widgetComponent.dataItem(i);if(i&&i.is(".k-selected")&&a&&a.length)e=a;else if(i&&o)e=o;else if(i){var r=i.data("uid"),d=t.filemanager.treeView.widgetComponent.dataSource.getByUid(r),s=t.filemanager.dataSource.get(d.id);e=s}n._confirm({type:"delete",target:i}).done((function(){t.removeItems(e)}))},removeItems:function(e){this._itemsToRemove=Array.isArray(e)?e:[e],this._removeItem()},_removeItem:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,a=!!e._itemsToRemove.length&&e._itemsToRemove.splice(0,1)[0];a&&(i.push({item:a}).then(e._removeItem.bind(e),e._removeItem.bind(e)),n.remove(a))}}),c=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){for(var e=this,t=e.filemanager,i=t.dataSource,n=t._commandStack,a=e.options.items,o=i.get(e.options.target),r=o.children,d=0;d<a.length;d++){var s=i.get(a[d]).toJSON();s.fileManagerNewItem=!0,n.push({item:s,target:o}),r.add(s)}}}),u=r.extend({init:function(e){r.fn.init.call(this,e),this._itemsToRemove=[]},exec:function(){for(var e=this,t=e.filemanager,n=t._commandStack,a=t.dataSource,o=e.options.items,r=a.get(e.options.target),d=r.children,s=[],l=0;l<o.length;l++){var c=a.get(o[l]),u=c.toJSON();u.fileManagerNewItem=!0;var m=n.push({item:c,target:r}).then(e._delete.bind(e));s.push(m),d.add(u)}i.whenAll(s).always(e._removeItem.bind(e))},_delete:function(e){this._itemsToRemove.push(e.item)},_removeItem:function(){var e=this,t=e.filemanager,i=t._commandStack,n=t.dataSource,a=!!e._itemsToRemove.length&&e._itemsToRemove.splice(0,1)[0];a&&(i.push({item:a}).then(e._removeItem.bind(e),e._removeItem.bind(e)),n.remove(a))}}),m=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.filemanager,i=t.defaultSortOption;n(i,{dir:e.dir,field:e.field}),t._view.widgetComponent.dataSource.sort([t.folderSortOption,i])}}),p=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.filemanager,i={field:e.field,operator:e.operator,value:e.value||""};t._view.widgetComponent.dataSource.filter(i)}}),g=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this.options,t=this.filemanager;t.view(e.value),t.resize(!0)}}),f=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager[e.options.type];t?t.open():window.console.warn(i.format("The {0} dialog is not available!",e.options.type))}}),h=r.extend({init:function(e){r.fn.init.call(this,e)},exec:function(){var e=this,t=e.filemanager,i=t[e.options.type],n=e.getResizable();i&&(i.toggle(),n&&t.wrapper.find(n.options.handle).toggle())},getResizable:function(){var e=this.filemanager,t=this.options.type;if(e._resizeDraggable)return e._resizeDraggable[t]}}),v=o.extend({init:function(){this._stack={},this._keys=[]},push:function(e){var t=this,n=i.guid();return t._keys.push(n),t._stack[n]={guid:n,data:e,deferred:a()},t._stack[n].deferred},next:function(){var e=this.keys().splice(0,1);return this._stack[e]},resolve:function(e){delete this._stack[e.guid],e.deferred.resolve(e.data)},reject:function(e){delete this._stack[e.guid],e.deferred.reject(e.data)},keys:function(){return this._keys},empty:function(){return 0===this.keys().length}});n(i.ui,{filemanager:{FileManagerCommand:r,CommandStack:v,commands:{CreateFolderCommand:d,RenameCommand:s,DeleteCommand:l,MoveCommand:u,CopyCommand:c,SortCommand:m,SearchCommand:p,ChangeViewCommand:g,OpenDialogCommand:f,TogglePaneCommand:h}}})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,a=i.Observable,o=e.extend,r=i.htmlEncode,d=i.keys,s="select",l="change",c="open",u="keydown",m="keydownAction",p=".kendoFileManagerViewComponent",g=[],f=null,h=a.extend({init:function(e,t,i){var n=this;if(n.element=t,n.options=i,!e)throw new Error("The widget for the ViewComponent is not available! Please add the corresponding scripts!");n.widgetComponent=new e(t,i),a.fn.init.call(n)},_bindEvents:function(){this.widgetComponent.bind("dataBinding",this._binding.bind(this)),this.widgetComponent.bind("dataBound",this._bound.bind(this))},_binding:function(e){this.trigger("dataBinding",e)&&e.preventDefault()},_bound:function(){this.trigger("dataBound")},_setDSOptions:function(e,t){!e.dataSource&&t&&(e.dataSource=t)},_initDragAndDrop:function(e,t){var i=this;t=t||i.options.dropFilter,e=e||i.element,i.draggable=e.kendoDraggable({filter:t,hint:i._hint.bind(i),cursorOffset:{top:-10,left:-50},holdToDrag:!0,ignore:"input, .k-focusable",hold:i._hold.bind(i)}).data("kendoDraggable"),i.draggable.userEvents.minHold=150,i.droptarget=e.kendoDropTargetArea({filter:t,drop:i._onDrop.bind(i),dragenter:function(e){e.dropTarget.addClass("k-filemanager-drop-target")},dragleave:function(e){e.dropTarget.removeClass("k-filemanager-drop-target")}}).data("kendoDraggable")},_hold:function(e){var t=this,i=e.currentTarget;i.is(".k-selected")||(t.widgetComponent.selectable&&t.widgetComponent.selectable.clear(),t.widgetComponent.select(i)),t.widgetComponent.selectable&&t.widgetComponent.selectable.userEvents.cancel()},_hint:function(e){var t=this,n=t.widgetComponent.dataItem(e),a=t.widgetComponent.select();return f=t.widgetComponent,g=a,a.length>1?"<div class='k-filemanager-drag-hint'>"+i.ui.icon("file")+" <span>"+a.length+" "+t.options.messages.items+"</span></div>":"<div class='k-filemanager-drag-hint'>"+i.ui.icon(n.isDirectory?"folder":"file")+" <span>"+n.name+"</span></div>"},_onDrop:function(e){var t=this.widgetComponent.dataItem(e.dropTarget),i=t.id,n=[];if(t.isDirectory){for(var a=0;a<g.length;a++){var o=f.dataItem(g[a]).id;n.push(o)}this.trigger("drop",{target:i,items:n})}},getSelected:function(){throw new Error("Not Implemented!")},refresh:function(e){this.widgetComponent.setDataSource(e)},destroy:function(){i.destroy(this.element)}});o(i.ui.filemanager,{ViewComponent:h,ViewComponents:{},registerViewComponent:function(e,t){n.filemanager.ViewComponents[e]=t},getViewComponent:function(e){return n.filemanager.ViewComponents[e]||null}});var v=h.extend({init:function(e,t,i){var a=this,r=i.dataSource,d=i.messages;t=o({},a.defaultOptions,t,{messages:d,ariaLabel:i.ariaLabel}),a._setDSOptions(t,r),t.kendoKeydown=t.kendoKeydown||a._kendoKeydown.bind(a),h.fn.init.call(this,n.ListView,e,t),a.listView=a.widgetComponent,a._bindEvents(),!1===i.draggable||r.isLocalBinding||a._initDragAndDrop()},defaultOptions:{layout:"flex",flex:{direction:"row",wrap:"wrap"},selectable:i.support.mobileOS?"row":"multiple",template:function(e){var t=e.name,n=e.extension,a=e.isDirectory;return"<div class='k-listview-item' title='"+r(t)+r(n)+"'><div class='k-file-preview'>"+i.ui.icon({icon:a?"folder":i.getFileGroup(n,!0),iconClass:"k-file-icon",size:"xxxlarge"})+"</div><div class='k-file-name file-name'>"+r(t)+r(n)+"</div></div>"},editTemplate:function(e){var t=e.extension,n=e.isDirectory;return"<div class='k-listview-item'><div class='k-file-preview'>"+i.ui.icon({icon:n?"folder":i.getFileGroup(t,!0),iconClass:"k-file-icon",size:"xxxlarge"})+"</div><div class='k-file-name'><span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input type='text' class='k-input-inner' data-bind='value:name' name='name' required='required' /><span></div></div>"},dropFilter:".k-listview-item",navigatable:!0},_bindEvents:function(){var e=this,t=e.listView;t.bind(l,e._select.bind(e)),t.element.on("dblclick"+p,e._dblClick.bind(e)),t.element.on("mousedown"+p,".k-listview-item:not(.k-edit-item)",e._mousedown.bind(e)),t.element.on(u+p,".k-edit-item",e._keydown.bind(e)),t.element.on(u+p,e._keydownAction.bind(e)),t.bind("edit",(function(t){var i=t.sender;t.item.find("input").on("blur",(function(){var t=i._modelFromElement(i.editable.element).dirty;i._closeEditable(),t||e.trigger("cancel")}))})),t.bind("cancel",(function(){e.trigger("cancel")})),h.fn._bindEvents.call(this)},_select:function(){var e=this.getSelected();this.trigger(s,{entries:e})},_keydown:function(e){e.keyCode===i.keys.ESC&&(this.listView._closeEditable(),this.trigger("cancel"))},_keydownAction:function(t){var i=e(t.target).find(".k-focus");i.length&&!i.is(".k-edit-item")&&this.trigger(m,{target:i,keyCode:t.keyCode})},_mousedown:function(t){var i=e(t.target).closest(".k-listview-item");3!==t.which||i.is(".k-selected")||(this.listView.selectable.clear(),this.listView.select(i))},_kendoKeydown:function(e){e.keyCode!==d.ENTER||e.preventKendoKeydown||this._handleEnterKey(e)},_handleEnterKey:function(t){var i=this,n=e(t.target),a=i.listView.current();i.widgetComponent.editable&&n.is("input")?n.trigger("blur"):i.widgetComponent.editable||i._triggerOpen(a),t.preventKendoKeydown=!0},_dblClick:function(t){var i=e(t.target).closest(".k-listview-item");this._triggerOpen(i)},_triggerOpen:function(e){if(!e.is(".k-edit-item")){var t=this.listView.dataItem(e);t&&this.trigger(c,{entry:t})}},addFolder:function(){this.listView.add()},edit:function(e){var t=this.listView.select();this.listView.edit(e||t)},getSelected:function(){for(var e=this.listView.select(),t=[],i=0;i<e.length;i++){var n=this.listView.dataItem(e[i]);n&&t.push(n)}return t},destroy:function(){this.listView.element.off(p),h.fn.destroy.call(this)}});n.filemanager.registerViewComponent("list",v);var w=h.extend({init:function(e,t,i){var a=this,r=i.messages;t=o({},a.defaultOptions,t,{messages:r}),h.fn.init.call(this,n.TreeView,e,t),a.treeView=a.widgetComponent,a._bindEvents(),!1===i.draggable||i.isLocalBinding||a._initDragAndDrop()},defaultOptions:{dataTextField:"name",dropFilter:".k-item"},_refreshDataSource:function(t){var n=this,a=n.treeView,r=t.action,d=t.node,s=null,l=a.element,c=l.attr("aria-activedescendant"),u=t.items.filter((function(e){return e.isDirectory})).map((function(e){return o({},e.toJSON(),{id:e.id||i.guid(),hasChildren:e.hasChildren,items:[]})}));if(d&&(s=a.findByUid(a.dataSource.get(d.id).uid),a._progress(s,!1)),u.length){if("itemloaded"==r||s&&"sync"===r)s.find(".k-item").each((function(e,t){a.remove(t)})),a.append(u,s),n._shouldFocus&&(a.current(s),a.focus());else if("remove"==r)this._remove(u[0].id);else if("itemchange"==r){var m=a.dataSource.get(u[0].id);m?m.set(t.field,u[0][t.field]):a.append(u[0],s)}else a.dataSource.data().length?("sync"===r||undefined===r&&!s)&&(a.items().each((function(e,t){a.remove(t)})),a.append(u),n._shouldFocus&&(a.current(a._nextVisible(e())),a.focus())):a.append(u);c&&0===l.find("#"+c).length&&l.removeAttr("aria-activedescendant")}},_remove:function(e){var t,i=this.treeView,n=i.dataSource.get(e);n&&(t=i.findByUid(n.uid),i.remove(t))},_bindEvents:function(){var e=this;e.treeView.bind(s,e._navigate.bind(e)),e.treeView.bind("expand",e._expand.bind(e)),e.treeView.element.on(u,e._keydownAction.bind(e))},_keydownAction:function(t){var i=e(t.target).find(".k-focus").closest(".k-item");this.trigger(m,{target:i,keyCode:t.keyCode})},_expand:function(e){var t=this.treeView.dataItem(e.node);e.preventDefault(),this.trigger("load",{entryId:t.id})},_navigate:function(e){var t=e.node,i=this.treeView.dataItem(t),n=i.id;e.preventDefault(),this.trigger("navigate",{path:n,entry:i.toJSON()})},_hold:e.noop,getSelected:function(){var e=this.treeView.element.find(".k-selected").closest(".k-item");return this.treeView.dataItem(e)},refresh:function(e){var t=this.treeView,i=t.dataSource.get(e),n=i&&t.findByUid(i.uid);i&&n&&(t.element.find(".k-selected").removeClass("k-selected"),n.find("> div .k-in").removeClass("k-hover").addClass("k-selected"))},reload:function(){this.treeView.dataSource.read()}});if(n.filemanager.registerViewComponent("tree",w),i.ui.Grid){var b=h.extend({init:function(e,t,i){var a=this,r=i.dataSource,d=i.messages;t=o({},a.defaultOptions,t,{messages:d}),a._setDSOptions(t,r),a._setupColumns(t,d),t.kendoKeydown=t.kendoKeydown||a._kendoKeydown.bind(a),h.fn.init.call(this,n.Grid,e,t),a.grid=a.widgetComponent,a._bindEvents(),!1===i.draggable||r.isLocalBinding||a._initDragAndDrop(),i.ariaLabel&&a.element.find("[role=grid]").attr("aria-label",i.ariaLabel)},defaultOptions:{selectable:i.support.mobileOS?"row":"multiple",editable:{mode:"inline",confirmation:!1},sortable:!0,dropFilter:"tr:not(.k-grid-edit-row)",navigatable:!0},_setupColumns:function(e,t){e.columns||(e.columns=[{field:"name",title:t.nameField||"Name",template:function(e){var t=e.isDirectory?"folder":i.getFileGroup(e.extension,!0);return"<div class='file-group-icon'>"+i.ui.icon(t)+"</div><div class='file-name'>"+i.htmlEncode(e.name+e.extension)+"<div>"}},{field:"created",title:t.dateCreatedField,format:"{0:G}"},{field:"size",title:t.sizeField,template:function(e){return e.size>0?i.getFileSizeMessage(e.size):""}}])},_bindEvents:function(){var t=this,i=t.grid;i.bind(l,t._select.bind(t)),i.table.on("dblclick"+p,t._dblClick.bind(t)),i.table.on("mousedown"+p,"tr:not(.k-grid-edit-row)",t._mousedown.bind(t)),i.table.on(u+p,".k-grid-edit-row",t._keydown.bind(t)),i.table.on(u+p,t._keydownAction.bind(t)),i.bind("edit",(function(){t._toggleFocusable(!0)})),i.bind("cancel",(function(){t.trigger("cancel")})),i.saveRow=e.noop,h.fn._bindEvents.call(this)},_kendoKeydown:function(e){var t=this.grid.current(),i=t?t.closest("tr[data-uid]"):null;i&&e.keyCode===d.ENTER&&!e.preventKendoKeydown&&(this._triggerOpen(i),e.preventKendoKeydown=!0),e.keyCode===d.F2&&(e.preventKendoKeydown=!0)},_keydownAction:function(t){var i=e(t.target).find(".k-focus").closest("tr");i.length&&!i.is(".k-grid-edit-row")&&this.trigger(m,{target:i,keyCode:t.keyCode})},_keydown:function(t){var n=this,a=n.grid;e(t.target).closest(".k-grid-edit-row").length&&(t.keyCode===i.keys.ENTER&&(setTimeout((function(){(n.grid._editContainer||e()).find("input").trigger("blur"),n._closeEditable()})),n._tryCancel()),t.keyCode===i.keys.ESC&&(a.cancelChanges(),n.trigger("cancel")))},_mousedown:function(t){var i=this,n=e(t.target).closest("tr[data-uid]");1===t.which&&i.grid.editable&&(setTimeout((function(){i._closeEditable()})),i._tryCancel()),3!==t.which||n.is(".k-selected")||(i.grid.selectable.clear(),i.grid.select(n))},_tryCancel:function(){var e=this,t=e.grid;t.editable&&(t._editContainer.find("input").val()||t.cancelChanges()),setTimeout((function(){e._toggleFocusable(!1)}))},_toggleFocusable:function(e){this.grid.table.find("tr,td").children().addBack().toggleClass("k-focusable",e)},_closeEditable:function(){var e,t=this;t.grid.editable&&!t.grid.editable.options.model.dirty&&(e=t.grid._editContainer,t.grid._destroyEditable(),t.grid._displayRow(e),t.trigger("cancel"))},_select:function(){var e=this.getSelected();this.trigger(s,{entries:e})},_dblClick:function(t){var i=e(t.target).closest("tr[data-uid]");this._triggerOpen(i)},_triggerOpen:function(e){if(!e.is(".k-grid-edit-row")){var t=this.grid.dataItem(e);t&&this.trigger(c,{entry:t})}},getSelected:function(){for(var e=this.grid.select(),t=[],i=0;i<e.length;i++)t.push(this.grid.dataItem(e[i]));return t},addFolder:function(){this.grid.addRow()},edit:function(e){var t=this.grid.select();this.grid.editRow(e||t)},destroy:function(){this.grid.table.off(p),this.grid.element.off(p),h.fn.destroy.call(this)}});n.filemanager.registerViewComponent("grid",b)}}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=e.extend,a=i.data,o=a.Node,r=a.HierarchicalDataSource,d=a.DataSource;n(!0,i.data,{schemas:{filemanager:{data:function(e){return e.items||e||[]},model:{id:"path",hasChildren:"hasDirectories",fields:{name:{editable:!0,type:"string",defaultValue:"New Folder"},size:{editable:!1,type:"number"},path:{editable:!1,type:"string"},extension:{editable:!1,type:"string"},isDirectory:{editable:!1,defaultValue:!0,type:"boolean"},hasDirectories:{editable:!1,defaultValue:!1,type:"boolean"},created:{type:"date",editable:!1},createdUtc:{type:"date",editable:!1},modified:{type:"date",editable:!1},modifiedUtc:{type:"date",editable:!1}}}}}});var s=o.define({init:function(e){var t=this,n=this.isDirectory;if(o.fn.init.call(this,e),"string"==typeof n&&(n=i.getter(n)),i.isFunction(n)){var a=n.call(t,t);a&&0===a.length?t.isDirectory=!1:t.isDirectory=!!a}t.isDirectory&&t._initChildren()},_initChildren:function(){var e,t,n,a=this;a.children instanceof i.data.FileManagerDataSource||(t=(e=a.children=new i.data.FileManagerDataSource(a._childrenOptions)).transport,n=t.parameterMap,t.parameterMap=function(e,t){return"read"!==t&&"create"!==t||(e.target=a.id),n&&(e=n.call(a,e,t)),e},e.parent=function(){return a},e.bind("change",(function(e){e.node=e.node||a,a.trigger("change",e)})),e.bind("error",(function(e){var t=a.parent();t&&(e.node=e.node||a,t.trigger("error",e))})),a._updateChildrenField())},isNew:function(){return this.fileManagerNewItem?(delete this.fileManagerNewItem,!0):this.id===this._defaultId}}),l=r.extend({init:function(t){var n=s.define({children:t});t.filter&&!t.serverFiltering&&(this._hierarchicalFilter=t.filter,t.filter=null),d.fn.init.call(this,e.extend(!0,{},{schema:{modelBase:n,model:n}},t)),this.isLocalBinding=this.transport instanceof i.data.LocalTransport,this._attachBubbleHandlers()},insert:function(e,t){var i=this.parent();return i&&i._initChildren&&(t&&t.isDirectory&&(i.hasDirectories=!0),i.hasChildren=!0,i._initChildren()),d.fn.insert.call(this,e,t)},remove:function(e){var t,i=e.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),this._cleanDestroyed(e),t=d.fn.remove.call(n,e),i&&n.data()&&!n.data().length?i.hasChildren=!1:i&&!this._hasDirectories(i)&&(i.hasDirectories=!1),t},_cleanDestroyed:function(e){var t=this;e.parentNode&&e.parentNode()?((t=(e=e.parentNode()).children)._destroyed=[],this._cleanDestroyed(e)):t._destroyed=[]},_hasDirectories:function(e){return!!e.children.data()&&!!e.children.data().filter((function(e){return e.isDirectory})).length}});l.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},i=t.data;return i&&i._dataSource?i._dataSource:(t.data=i,t instanceof l?t:new l(t))},i.observableFileManagerData=function(e){var t=l.create({data:e,schema:i.data.schemas.filemanager});return t.fetch(),t._data._dataSource=t,t._data},n(i.data,{FileManagerDataSource:l,FileEntry:s})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=e.extend,a=i.template,o=i.ui.ContextMenu,r="action",d=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t),i._overrideTemplates(),i._restrictDefaultItems(),i._extendItems(),i.bind("select",i._onSelect.bind(i)),i.bind("open",i._onOpen.bind(i))},_overrideTemplates:function(){this.templates.sprite=a((function(e){var t=e.spriteCssClass,n=e.icon;return t?'<span class="'+t+'"></span>':n?i.ui.icon(n):""}))},_restrictDefaultItems:function(){this.options.isLocalBinding&&(this.defaultItems={})},defaultItems:{rename:{text:"Rename",icon:"pencil",command:"RenameCommand"},delete:{text:"Delete",icon:"trash",command:"DeleteCommand"}},events:o.fn.events.concat([r]),_extendItems:function(){var t,i=this,n=i.options.items;if(n&&n.length)for(var a=0;a<n.length;a++)t=n[a],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?(i._extendItem(t),i.append(t)):i.defaultItems[t]&&(t=i.defaultItems[t],i._extendItem(t),i.append(t));else for(var o in i.defaultItems)t=i.defaultItems[o],i._extendItem(t),i.append(t)},_extendItem:function(e){var t=this.options.messages;n(e,{text:t[e.text],spriteCssClass:e.spriteCssClass||"",attr:{"data-command":e.command}})},_onSelect:function(t){var i=e(t.item).data("command"),n=e(t.target);i&&this.action({command:i,options:{target:n}})},_onOpen:function(t){!t.sender.options.items&&e.isEmptyObject(this.defaultItems)&&t.preventDefault()},action:function(e){this.trigger(r,e)}});n(i.ui.filemanager,{ContextMenu:d})}(window.kendo.jQuery);var e,t,i,n,a,o,r,d,s,l,c,u,m,p,g,f,h,v,w,b,_,k,C,y,S;return e=window.kendo.jQuery,t=kendo.ui,i=e.extend,n=kendo.htmlEncode,a=e.isPlainObject,o=Array.isArray,r=t.DataBoundWidget,d=kendo.template,s=kendo._outerHeight,l="navigate",c="select",u="open",m="error",p="change",g="close",f="dataBinding",h="dataBound",v="drop",w="execute",b="command",_="keydownAction",k=".",C={wrapper:"k-widget k-filemanager",header:"k-filemanager-header",navigation:"k-filemanager-navigation",contentContainer:"k-filemanager-content-container",content:"k-filemanager-content",preview:"k-filemanager-preview",toolbar:"k-filemanager-toolbar",treeview:"k-filemanager-treeview",breadcrumb:"k-filemanager-breadcrumb",view:"k-filemanager-view",grid:"k-filemanager-grid",list:"k-filemanager-listview",upload:"k-filemanager-upload",uploadDialog:"k-filemanager-upload-dialog",splitBar:"k-splitbar",splitBarHorizontal:"k-splitbar-horizontal k-splitbar-draggable-horizontal",splitBarHover:"k-splitbar-horizontal-hover",splitBarIcon:"k-icon k-resize-handle",splitBarNavigation:"k-filemanager-splitbar-navigation",splitBarPreview:"k-filemanager-splitbar-preview",resizable:"k-filemanager-resizable"},y={filePreview:"k-file-preview",fileInfo:"k-file-info",fileName:"k-file-name",fileMeta:"k-file-meta",metaLabel:"k-file-meta-label",metaValue:"k-file-meta-value",extension:"k-file-type",size:"k-file-size",created:"k-file-created",modified:"k-file-modified"},S=r.extend({init:function(e,i){var n=this;r.fn.init.call(n,e,i),n.options=kendo.deepExtend({},n.options,i),n.defaultSortOption={field:"name",dir:"asc"},n.folderSortOption={field:"isDirectory",dir:"desc"},n._commandStack=new t.filemanager.CommandStack,n._dataSource(),n._wrapper(),n._renderHeader(),n._renderContentContainer(),n._initContextMenu(),n._renderNavigation(),n._renderContent(),n._renderPreview(),n._initUploadDialog(),n._resizable(),n._attachKeyDown(),n.resize(),kendo.notify(n,kendo.ui)},options:{name:"FileManager",height:500,resizable:!0,initialView:"list",toolbar:{resizable:!0},contextMenu:{},upload:{},uploadUrl:"",views:{},breadcrumb:{},draggable:!0,dialogs:{upload:{width:530},moveConfirm:{width:350,closable:!0},deleteConfirm:{width:360,closable:!0},renamePrompt:{width:350,closable:!0}},previewPane:{metaFields:["extension","size","created","modified"],noFileTemplate:function(e){var t=e.styles,i=e.messages;return'<div class="'+n(t.fileInfo)+'"><div class="'+n(t.filePreview)+'"><span class="k-file-icon k-icon k-i-none"></span></div><span class="'+n(t.fileName)+'" k-no-file-selected>'+n(i.noFileSelected)+"</span></div>"},singleFileTemplate:function(e){var t=e.styles,i=e.selection,a=e.metaFields,o=e.messages,r="";if(r+='<div class="'+n(t.fileInfo)+'"><div class="'+n(t.filePreview)+'">'+kendo.ui.icon({icon:i[0].isDirectory?"folder":n(kendo.getFileGroup(i[0].extension,!0)),iconClass:"k-file-icon",size:"xxxlarge"})+'</div><span class="'+n(t.fileName)+'">'+n(i[0].name)+"</span>",a){r+='<dl class="'+n(t.fileMeta)+'">';for(var d=0;d<a.length;d+=1){var s=a[d];r+='<dt class="'+n(t.metaLabel)+'">'+n(o[s])+': </dt><dd class="'+n(t.metaValue)+" "+n(t[s])+'">',"size"==s?r+=" "+n(kendo.getFileSizeMessage(i[0][s])):i[0][s]instanceof Date?r+=" "+n(kendo.toString(i[0][s],"G")):r+="extension"==s?" "+n(i[0].isDirectory?"folder":kendo.getFileGroup(i[0].extension)):" "+n(i[0][s]),r+='</dd><dd class="k-line-break"></dd>'}r+="</dl>"}return r+="</div>"},multipleFilesTemplate:function(e){var t=e.styles,i=e.selection,a=e.messages;return'<div class="'+n(t.fileInfo)+'"><div class="'+n(t.filePreview)+'">'+kendo.ui.icon({icon:"file",iconClass:"k-file-icon",size:"xxxlarge"})+'</div>span class="'+n(t.fileName)+'">'+n(i.length)+" "+n(a.items)+"</span></div>"}},messages:{toolbar:{createFolder:"New Folder",upload:"Upload",sortDirection:"Sort Direction",sortDirectionAsc:"Sort Direction Ascending",sortDirectionDesc:"Sort Direction Descending",sortField:"Sort By",nameField:"Name",sizeField:"File Size",typeField:"Type",dateModifiedField:"Date Modified",dateCreatedField:"Date Created",listView:"List View",gridView:"Grid View",search:"Search",details:"View Details",detailsChecked:"On",detailsUnchecked:"Off",delete:"Delete",rename:"Rename"},views:{nameField:"Name",sizeField:"File Size",typeField:"Type",dateModifiedField:"Date Modified",dateCreatedField:"Date Created",items:"items",listLabel:"FileManager ListView",gridLabel:"FileManager Grid",treeLabel:"FileManager TreeView"},dialogs:{upload:{title:"Upload Files",clear:"Clear List",done:"Done"},moveConfirm:{title:"Confirm",content:"<p style='text-align: center;'>Do you want to move or copy?</p>",okText:"Copy",cancel:"Move",close:"close"},deleteConfirm:{title:"Confirm",content:"<p style='text-align: center;'>Are you sure you want to delete the selected file(s)?</br>You cannot undo this action.</p>",okText:"Delete",cancel:"Cancel",close:"close"},renamePrompt:{title:"Prompt",content:"<p style='text-align: center;'>Enter new name for the file.</p>",okText:"Rename",cancel:"Cancel",close:"close"}},previewPane:{noFileSelected:"No File Selected",extension:"Type",size:"Size",created:"Date Created",createdUtc:"Date Created UTC",modified:"Date Modified",modifiedUtc:"Date Modified UTC",items:"items"}}},events:[l,c,u,f,h,m,v,w,b],defaultTools:{createFolder:{type:"button",name:"createFolder",command:"CreateFolderCommand",rules:{remote:!0}},upload:{type:"button",name:"upload",command:"OpenDialogCommand",options:'{ "type": "uploadDialog" }',rules:{remote:!0}},sortDirection:{type:"buttonGroup",buttons:[{name:"sortDirectionAsc",showText:"overflow",icon:"sort-asc-small",togglable:!0,group:"sortDirection",command:"SortCommand",options:'{ "dir": "asc" }',selected:!0},{name:"sortDirectionDesc",showText:"overflow",icon:"sort-desc-small",togglable:!0,group:"sortDirection",command:"SortCommand",options:'{ "dir": "desc" }'}]},sortField:{type:"splitButton",name:"sortField",command:"SortCommand",menuButtons:[{name:"nameField",options:'{"field": "name"}',command:"SortCommand"},{name:"typeField",options:'{"field": "extension"}',command:"SortCommand"},{name:"sizeField",options:'{"field": "size"}',command:"SortCommand"},{name:"dateCreatedField",options:'{"field": "createdUtc"}',command:"SortCommand"},{name:"dateModifiedField",options:'{"field": "modifiedUtc"}',command:"SortCommand"}]},changeView:{type:"buttonGroup",buttons:[{name:"gridView",showText:"overflow",icon:"grid-layout",togglable:!0,group:"changeView",command:"ChangeViewCommand",options:"grid"},{name:"listView",showText:"overflow",icon:"grid",togglable:!0,group:"changeView",command:"ChangeViewCommand",options:"list"}]},spacer:{type:"spacer"},details:{type:"component",name:"details",items:[{template:function(e){return"<label for='details-toggle'>"+n(e.componentOptions.messages.text)+"</label>"},overflow:"never",componentOptions:{messages:{text:"details"}}},{name:"details",command:"TogglePaneCommand",options:'{ "type": "preview" }',overflow:"never",element:"<input id='details-toggle' class='k-filemanager-details-toggle' />",component:"Switch",componentOptions:{messages:{checked:"detailsChecked",unchecked:"detailsUnchecked"},commandOn:"change"}}]},search:{type:"component",name:"search",command:"SearchCommand",options:'{ "field": "name", "operator": "startswith" }',overflow:"never",component:"TextBox",componentOptions:{placeholder:"Search",icon:"search",commandOn:"input"}}},_attachKeyDown:function(){var e=this;e.wrapper.on("keydown.kendoFileManager",(function(t){t.keyCode===kendo.keys.F10&&(t.preventDefault(),e.toolbar.element.find("[tabindex=0]").first().trigger("focus"))}))},_dataSource:function(){var e,t=this,n=t.options.dataSource||{},r=t.folderSortOption,d=t.defaultSortOption;n instanceof kendo.data.FileManagerDataSource?e=n:(e=o(n)?{data:n,autoSync:!1,sort:[r,d]}:i(!0,n,{autoSync:!1,sort:[r,d]}),n&&a(n.schema)?e.schema=n.schema:a(kendo.data.schemas.filemanager)&&(e.schema=kendo.data.schemas.filemanager)),t.dataSource&&t._errorHandler?(t.dataSource.unbind(m,t._errorHandler),t.dataSource.unbind(p,t._changeHandler)):(t._errorHandler=t._error.bind(t),t._changeHandler=t._change.bind(t)),t.dataSource=kendo.data.FileManagerDataSource.create(e).bind(m,t._errorHandler).bind(p,t._changeHandler)},_error:function(e){this.trigger(m,e)||window.console.warn("Error! The requested URL returned "+e.xhr.status+" - "+e.xhr.statusText)},_wrapper:function(){var e=this,t=e.options,i=t.width,n=t.height;e.wrapper=e.element.addClass(C.wrapper),i&&e.wrapper.width(i),n&&e.wrapper.height(n),e._resizeHandler=kendo.onResize((function(){e.resize(!0)}))},_renderHeader:function(){var t=this,i=t.options;i.toolbar&&(t.header=e("<div />").addClass(C.header)),t.wrapper.append(t.header),i.toolbar&&(t._initToolbar(),t.toolbar._tabIndex())},_renderContentContainer:function(){var t=this,i=e("<div />").addClass(C.contentContainer);t.contentContainer=i,t.wrapper.append(t.contentContainer)},_initContextMenu:function(){var e=this,n=e.options,a=i({},n.contextMenu,{filemanager:e,messages:n.messages.toolbar,target:e.contentContainer,filter:"[data-uid]",action:e.executeCommand.bind(e),isLocalBinding:e.dataSource.isLocalBinding});!1!==n.contextMenu&&(e.contextMenu=new t.filemanager.ContextMenu("<ul></ul>",a),e.contextMenu.bind(u,e._cacheFocus.bind(e)))},_renderNavigation:function(){var t=this;t.navigation=e("<div />").addClass(C.navigation),t.navigation.append(t._initTreeView().element),t.contentContainer.append(t.navigation)},_renderContent:function(){var t=this,i=t.options,n=t.toolbar;t.content=e("<div />").addClass(C.content),i.breadcrumb&&t.content.append(t._initBreadcrumb().element),t.content.append(t._initView()),n&&t._isToolEnabled(t.defaultTools.upload.name)||t.content.append(t._initUpload().wrapper.hide()),t.contentContainer.append(t.content)},_renderPreview:function(){var t=this;t.options.previewPane&&(t.preview=e("<div tabindex='0' />").addClass(C.preview),t.previewContainer=e("<div />").addClass(C.previewContainer),t.preview.append(t.previewContainer),t._setPreviewPaneContent(),t.contentContainer.append(t.preview.hide()))},_setPreviewPaneContent:function(){var e,t=this,i=t.options,n=i.messages.previewPane,a=i.previewPane,o=t.getSelected();if(!o)return e=d(a.noFileTemplate)({styles:y,messages:n}),void t.previewContainer.html(e);e=1===o.length?a.singleFileTemplate:a.multipleFilesTemplate,e=d(e)({styles:y,messages:n,selection:o,metaFields:a.metaFields}),t.previewContainer.html(e)},_initToolbar:function(){var t=this,n=t.options,a=e("<div />").addClass(C.toolbar),o=i({},n.toolbar),r=o.items?o.items:Object.keys(t.defaultTools);return r=t._processTools(r),o.tools=r,o.defaultTools=t.defaultTools,o.parentMessages=t.options.messages.toolbar,t.header.append(a),t.toolbar=new kendo.ui.ToolBar(a,o),t.options.toolbar=t.toolbar.options,t.toolbar.bind("toggle",t._toolbarClick.bind(t)),t.toolbar.bind(g,t._toolbarClick.bind(t)),t.toolbar.bind("click",t._toolbarClick.bind(t)),t.toolbar.bind(p,t._toolbarClick.bind(t)),t.toolbar},_processTools:function(e){var t=this;return e.forEach((function(e){var i=e.rules||t.defaultTools[e]?t.defaultTools[e].rules:null;i&&i.remote&&t.dataSource.isLocalBinding&&(e.rules?e.hidden=!0:t.defaultTools[e].hidden=!0),"changeView"===e.name?t.defaultTools[e.name].buttons.forEach((function(i,n){i.options===t.options.initialView&&(t.defaultTools[e.name].buttons[n].selected=!0)})):e.buttons&&"changeView"===e.buttons[0].group&&e.buttons.forEach((function(i,n){i.options===t.options.initialView&&(e.buttons[n].selected=!0)}))})),e},_toolbarClick:function(t){var n=e(t.target).data("command"),a=e(t.target).data("options");e(t.target).val()&&(a=i({},a,{value:e(t.target).val()})),n&&this.executeCommand({command:n,options:a})},_isToolEnabled:function(e){for(var t=this.options.toolbar.items||this.defaultTools,i=!1,n=0;n<t.length;n++)if(t[n].name==e){i=!0;break}return t[e]||i},_initTreeView:function(){var n=this,a=e("<div />").addClass(C.treeview),o=n.options.views.tree,r=i(!0,{},{dataSource:n.options.dataSource,messages:n.options.messages.views,draggable:n.options.draggable,isLocalBinding:n.dataSource.isLocalBinding});return n.treeView=new t.filemanager.ViewComponents.tree(a,o,r),n.treeView.bind(l,n._navigate.bind(n)).bind("load",n._load.bind(n)).bind(v,n._drop.bind(n)).bind(_,n._keydownAction.bind(n)),n.treeView},_drop:function(e){var t=this;!t.trigger(v,e)&&e.items.indexOf(e.target)<0&&t._confirm({type:"move",target:e.target}).done((function(){t.executeCommand({command:"CopyCommand",options:e})})).fail((function(){t.executeCommand({command:"MoveCommand",options:e})}))},_keydownAction:function(e){var t=e.keyCode,i=kendo.keys;t===i.DELETE&&this.executeCommand({command:"DeleteCommand",options:{target:e.target}}),t===i.F2&&this.executeCommand({command:"RenameCommand",options:{target:e.target}})},_confirm:function(t){var n=this,a=n.options.messages.dialogs[t.type+"Confirm"],o=e("<div></div>").kendoConfirm(i({},{title:a.title,content:a.content,messages:a},n.options.dialogs[t.type+"Confirm"])).data("kendoConfirm");return o.bind(u,n._cacheFocus.bind(n)),o.bind("hide",n._restoreFocus.bind(n,t.target)),o.open(),o.wrapper.removeClass("k-confirm"),o.result},_prompt:function(t){var n=this,a=this.options.messages.dialogs[t.type+"Prompt"],o=e("<div></div>").kendoPrompt(i({},{title:a.title,content:a.content,messages:a,value:t.defaultInput},this.options.dialogs[t.type+"Prompt"])).data("kendoPrompt");return o.bind(u,n._cacheFocus.bind(n)),o.bind(g,n._restoreFocus.bind(n,t.target)),o.open(),o.wrapper.removeClass("k-prompt"),o.result},_cacheFocus:function(){var t=this,i=e(document.activeElement),n=t.view(),a=t.treeView.widgetComponent;if(!t.contextMenu||!t.contextMenu.popup.visible()){if(t.treeView._shouldFocus=!1,a.current()&&a.current().find(".k-focus").length||i.hasClass(C.treeview))return t.treeView._shouldFocus=!0,void(n._focusElement=i);n._focusElement=i.hasClass(C[t._viewType])?i:null}},_restoreFocus:function(e){var t=this.view();e&&(t._focusElement?t._focusElement.trigger("focus"):e.closest&&e.closest(":kendoFocusable").length&&e.closest(":kendoFocusable").trigger("focus"))},_initView:function(){var t=this,i=e("<div />").addClass(C.view),n=t.options.initialView;return t.viewWrapper=i,t.viewWrapper.append(t.view(n)),i},_initBreadcrumb:function(){var n=this,a=n.options,o=e("<nav />").addClass(C.breadcrumb),r=i({},{items:[{type:"rootitem",text:""}],change:n._breadcrumbChange.bind(n)},a.breadcrumb);return n.breadcrumb=new t.Breadcrumb(o,r),n.breadcrumb},_breadcrumbChange:function(e){var t=e.sender.items().filter((function(t){return t.path===e.value.substring(1)})).shift();this._navigate({path:t?t.id:""})},_initUploadDialog:function(){var n,a=this,o=a.options,r=o.messages.dialogs.upload,d=e("<div />"),s=i({},{title:r.title,modal:!0,visible:!1,width:500,actions:[{text:function(){return r.done},primary:!0},{text:function(){return r.clear},action:a._clearUploadFilesList.bind(a)}],messages:r},o.dialogs.upload);if(a._shouldInitUpload())return n=a._initUpload(),a.uploadDialog=new t.Dialog(d,s),a.uploadDialog.wrapper.addClass(C.uploadDialog),a.uploadDialog.element.append(n.wrapper),a.uploadDialog.bind(u,a._toggleUploadDropZone.bind(a,"")),a.uploadDialog.bind(g,a._toggleUploadDropZone.bind(a,a.viewWrapper)),a.uploadDialog},_shouldInitUpload:function(){var e=this.options,t=!1;return(e.uploadUrl||e.upload.async&&e.upload.async.saveUrl)&&!1!==e.upload&&(t=!0),t},_initUpload:function(){var n=this,a=n.options,o=e("<input type='file' name='file'/>").addClass(C.upload),r=i(!0,{async:{autoUpload:!0,saveUrl:a.uploadUrl},dropZone:n.viewWrapper},a.upload);return n.upload=new t.Upload(o[0],r),n.upload.bind("upload",n._sendUploadPathParameter.bind(n)),n.upload.bind("success",n._success.bind(n)),n.upload},_sendUploadPathParameter:function(e){e.data=i(e.data,{path:this.path()})},_success:function(){this._view.widgetComponent.dataSource.read()},_clearUploadFilesList:function(){var e=this.upload;e&&e.clearAllFiles()},_toggleUploadDropZone:function(e){var t=this.upload;t&&t.setOptions({dropZone:e})},_binding:function(e){this.trigger(f,{source:"view",action:e.action,items:e.items,index:e.index})&&e.preventDefault()},_bound:function(){this.options.previewPane&&this._setPreviewPaneContent(),this.trigger(h)},_createResizableSplitBar:function(t){var i=e("<div />").addClass(C.splitBar).addClass(C.splitBarHorizontal).addClass(t),n=e("<span />").addClass(C.splitBarIcon);return i.append(n),i.hover((function(){e(this).toggleClass(C.splitBarHover)})),i},_initResizableNavigation:function(){var e,t,i=this,n=i.wrapper,a=i._createResizableSplitBar(C.splitBarNavigation),o=n.find(k+C.content),r=n.find(k+C.navigation);a.insertAfter(r),i._resizeDraggable.navigation=i.wrapper.find(a).end().kendoResizable({handle:k+C.splitBarNavigation,start:function(){e=o.width(),t=r.width()},resize:function(i){var a=i.x.initialDelta;kendo.support.isRtl(n)&&(a*=-1),t+a<-2||e-a<-2||r.width(t+a)}}).getKendoResizable()},_initResizablePreview:function(){var e,t,i=this,n=i.wrapper,a=i._createResizableSplitBar(C.splitBarPreview),o=n.find(k+C.content),r=n.find(k+C.preview);i.options.previewPane&&(a.insertBefore(r).hide(),i._resizeDraggable.preview=n.find(a).end().kendoResizable({handle:k+C.splitBarPreview,start:function(){e=o.width(),t=r.width()},resize:function(i){var a=i.x.initialDelta;kendo.support.isRtl(n)&&(a*=-1),t-a<-2||e+a<-2||r.width(t-a)}}).getKendoResizable())},_resizable:function(){var e=this,t=e.options;e._resizeDraggable={},t.resizable&&(e.wrapper.addClass(C.resizable),e._initResizableNavigation(),e._initResizablePreview())},view:function(n){var a=this,o=e("<div></div>"),r=a.options.views[n],d=i(!0,{},{dataSource:a._viewDataSource||a.dataSource,messages:a.options.messages.views,draggable:a.options.draggable,ariaLabel:a.options.messages.views[n+"Label"]});if(void 0===n)return a._view;if(!t.filemanager.ViewComponents[n])throw new Error(kendo.format("There is no {0} ViewComponent registered!",n));a._view&&a._view.destroy&&(a._view.destroy(),a.viewWrapper.empty()),a._viewType=n,a._view=new t.filemanager.ViewComponents[n](o,r,d),a._view.bind(c,a._select.bind(a)),a._view.bind(u,a._open.bind(a)),a._view.bind(f,a._binding.bind(a)),a._view.bind(h,a._bound.bind(a)),a._view.bind(v,a._drop.bind(a)),a._view.bind(_,a._keydownAction.bind(a)),a._view.bind("cancel",a._cancel.bind(a)),a._view.element.addClass(C[n]),a.viewWrapper.removeClass(Object.keys(t.filemanager.ViewComponents).map((function(e){return C.view+"-"+e})).join(" ")).addClass(C.view+"-"+n),a.viewWrapper.append(a._view.element)},executeCommand:function(e){var n=e.command,o=i({filemanager:this},a(e.options)?e.options:{value:e.options}),r=new t.filemanager.commands[n](o);if(!this.trigger(w,e))return r.exec()},_navigate:function(e){var t=e.path;this.trigger(l,{path:t})||this.navigate(t)},_load:function(e){this.dataSource.get(e.entryId).load()},_select:function(e){this.options.previewPane&&this._setPreviewPaneContent(),this.trigger(c,{entries:e.entries})},_open:function(e){var t=e.entry;this.trigger(u,{entry:t}),t.isDirectory&&this._navigate({path:t.id})},_cancel:function(){var e=this._commandStack,t=e.next();e.reject(t),this.trigger(b,{status:"cancel",action:"itemchange",data:t.data})},_change:function(e){var t=this,i=t._commandStack,n=e.node?e.node.children:t.dataSource;if(!t.trigger(f,{source:"tree",action:e.action,items:e.items,index:e.index})){if(t.treeView._refreshDataSource(e),"remove"===e.action||"itemchange"===e.action||"add"===e.action)if(i.empty())n.sync();else{var a=i.next();n.sync().then((function(n){i.resolve(a),t.trigger(b,{status:"success",action:e.action,data:a.data,response:n})})).fail((function(n){i.reject(a),t.trigger(b,{status:"fail",action:e.action,data:a.data,response:n})}))}"remove"===e.action&&t._viewDataSource&&t._viewDataSource.parent()&&e.items[0]===t._viewDataSource.parent()&&t._navigateToParent(e.items[0]),"itemchange"==e.action&&t._viewDataSource&&t._viewDataSource.parent()&&t.path().indexOf(e.items[0].id)>=0&&t._navigateToParent(e.items[0]),"itemchange"===e.action&&e.items[0].loaded(!1)}},_navigateToParent:function(e){var t=e.parentNode(),i=t?t.id:"";this._navigate({path:i})},_buildBreadcrumbPath:function(e){for(var t=this.breadcrumb,i=[];e;)i.push({id:e.id,text:e.name,path:e.path}),e=e.parentNode&&e.parentNode();i.push({type:"rootItem",id:"",text:""}),t.items(i.reverse())},_adjustDimensions:function(){var e=this,t=e.wrapper,i=k+C.grid,n=k+C.list,a=k+C.contentContainer,o=t.height(),r=0,d=0;e.toolbar&&(r=s(e.toolbar.wrapper)),e.breadcrumb&&(d=s(e.breadcrumb.wrapper)),"auto"!==e.options.height&&(t.find([i].join(",")).height(o-(r+d+1)),t.find(n).parent().height(o-(r+d+1)),t.find(a).height(o-r))},_resize:function(){this._adjustDimensions(),kendo.resize(this.element.children())},setDataSource:function(e){var t=this;t.options.dataSource=e,t._dataSource(),t.toolbar&&(t.toolbar.destroy(),t.header.empty(),t._initToolbar(),t.toolbar._tabIndex()),t.treeView&&(t.treeView.destroy(),t.navigation.empty(),t.navigation.append(t._initTreeView().element)),t._view&&t.view(t._viewType||t.options.initialView),t._initContextMenu()},refresh:function(){(this._viewDataSource||this.dataSource).read()},getSize:function(){return kendo.dimensions(this.wrapper)},getSelected:function(){var e=this,t=e._view.getSelected(),i=e.treeView;if(t&&t.length)return t;var n=i.getSelected();return n?[e.dataSource.get(n.id)]:void 0},path:function(){return this._path||""},navigate:function(t){var i=this,n=i.dataSource,a=n.get(t.replace(/^\//,"")),o=i._view,r=i.treeView,d=i.breadcrumb,s=""===t||"/"===t;if(a||s){if(i._path=t,!i.trigger(f,{source:"navigation",action:"rebind",items:[a]})){if(d&&i._buildBreadcrumbPath(a),s)return n.sort([i.folderSortOption,i.defaultSortOption]),i._viewDataSource=n,o.refresh(i._viewDataSource),r.treeView.select(e()),void(i.options.previewPane&&i._setPreviewPaneContent());a.loaded&&!a.loaded()&&a.load(),o&&(i._viewDataSource=a.children,i._viewDataSource._sort=[i.folderSortOption,i.defaultSortOption],o.refresh(i._viewDataSource)),r&&r.refresh(a.id),i.options.previewPane&&i._setPreviewPaneContent()}}else window.console.warn("Error! Could not navigate to the folder at the requested path("+t+"). Make sure that the parent folder of the target folder has already been loaded.")},items:function(){return this.treeView.widgetComponent.items().add(this._view.widgetComponent.items())},destroy:function(){var e=this;r.fn.destroy.call(e),e.dataSource.unbind(m,e._errorHandler).unbind(p,e._changeHandler),e._resizeDraggable.navigation&&(e._resizeDraggable.navigation.destroy(),e._resizeDraggable.navigation=null),e._resizeDraggable.preview&&(e._resizeDraggable.preview.destroy(),e._resizeDraggable.preview=null),e.uploadDialog&&(e.uploadDialog.destroy(),e.uploadDialog=null),e.upload&&(e.upload.destroy(),e.upload=null),e.contextMenu&&(e.contextMenu.destroy(),e.contextMenu=null),kendo.unbindResize(e._resizeHandler),e.dataSource=null,e._viewDataSource=null,kendo.destroy(e.element)}}),t.plugin(S),kendo}));
//# sourceMappingURL=kendo.filemanager.min.js.map
