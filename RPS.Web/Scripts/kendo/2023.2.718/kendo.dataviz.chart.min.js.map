{"version":3,"file":"kendo.dataviz.chart.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendodataviz","chart","js","this","$","window","kendo","dataviz","Class","isNumber","datavizConstants","constants","MAX_VALUE","MIN_VALUE","VALUE","CENTER","TOP","BOTTOM","LEFT","WHITE","CIRCLE","X","Y","RIGHT","BLACK","DATE","DEFAULT_PRECISION","ARC","defined","getter","isArray","ChartElement","Point","Box","alignPathToPixel","setDefaultOptions","inArray","isFunction","valueOrDefault","isObject","deepExtend","last","eventElement","getTemplate","TextBox","ShapeElement","getSpacing","CurveProcessor","append","isString","parseDate","styleValue","CategoryAxis","BoxElement","Title","round","limitValue","grep","elementStyles","bindEvents","services","unbindEvents","support","drawing","Path","Animation","AnimationFactory","Group","Color","geometry","GeometryPoint","transform","ChartAxis","extend","init","axis","_axis","options","value","point","getCategory","getValue","slot","from","to","limit","range","valueRange","findAxisByName","name","axes","idx","length","prepareUserOptions","ChartPane","pane","visual","chartsVisual","chartContainer","_pane","ChartPlotArea","plotArea","_plotArea","backgroundVisual","_bgVisual","countNumbers","values","count","i","num","Aggregates","min","Math","max","sum","sumOrNull","result","avg","first","getField","field","row","get","SeriesBinder","_valueFields","_otherFields","_nullValue","_undefinedValue","register","seriesTypes","valueFields","otherFields","this$1$1","type","_makeValue","undefined","canonicalFields","series","concat","bindPoint","pointIx","item","fields","data","pointData","Array","fieldData","slice","_bindFromArray","srcValueFields","sourceFields","srcPointFields","_bindFromObject","initialValue","array","object","srcFields","fieldName","srcFieldName","sourceFieldName","push","current","percentRegex","standardDeviationRegex","RegExp","ErrorRangeCalculator","errorValue","initGlobalRanges","deviationMatch","exec","valueGetter","createValueGetter","average","getAverage","deviation","getStandardDeviation","multiple","parseFloat","errorRange","low","high","globalRange","indexOf","standardError","getStandardError","binder","index","OBJECT","getErrorRange","pointValue","Error","percentValue","abs","sqrt","isSample","total","squareDifferenceSum","pow","browser","INITIAL_ANIMATION_DURATION","FADEIN","BORDER_BRIGHTNESS","START_SCALE","msie","ERROR_LOW_FIELD","ERROR_HIGH_FIELD","X_ERROR_LOW_FIELD","X_ERROR_HIGH_FIELD","Y_ERROR_LOW_FIELD","Y_ERROR_HIGH_FIELD","ZERO","INTERPOLATE","GAP","ABOVE","BELOW","SMOOTH","STEP","AREA","BAR","BOX_PLOT","BUBBLE","BULLET","CANDLESTICK","COLUMN","DONUT","FUNNEL","HEATMAP","HORIZONTAL_WATERFALL","LINE","OHLC","PIE","POLAR_AREA","POLAR_LINE","POLAR_SCATTER","RADAR_AREA","RADAR_COLUMN","RADAR_LINE","RANGE_AREA","RANGE_BAR","RANGE_COLUMN","SCATTER","SCATTER_LINE","VERTICAL_AREA","VERTICAL_BOX_PLOT","VERTICAL_BULLET","VERTICAL_LINE","VERTICAL_RANGE_AREA","WATERFALL","EQUALLY_SPACED_SERIES","LEGEND_ITEM_CLICK","LEGEND_ITEM_HOVER","LEGEND_ITEM_LEAVE","SERIES_CLICK","SERIES_HOVER","SERIES_OVER","SERIES_LEAVE","PLOT_AREA_CLICK","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","DRAG","DRAG_END","DRAG_START","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","RENDER","SHOW_TOOLTIP","HIDE_TOOLTIP","PANE_RENDER","LOGARITHMIC","CATEGORY","INSIDE_END","INSIDE_BASE","OUTSIDE_END","MOUSEWHEEL","MOUSEWHEEL_DELAY","DRILLDOWN","DRILLDOWN_FIELD","GLASS","TOOLTIP_OFFSET","LINE_MARKER_SIZE","MOUSEWHEEL_ZOOM_RATE","ErrorBarBase","isVertical","fn","call","reflow","targetBox","linePoints","endCaps","valueBox","getAxis","getSlot","centerBox","center","capsWidth","getCapsWidth","capValue","x","y","capStart","capEnd","y1","y2","box","x1","x2","boxSize","width","height","floor","createVisual","rect","toRect","sender","getSender","color","line","createDefaultVisual","defaultVisual","lineOptions","stroke","dashType","moveTo","lineTo","animation","delay","zIndex","CategoricalErrorBar","seriesValueAxis","evalOptions","context","state","dryRun","defaults","depth","needsEval","excluded","property","hasOwnProperty","propValue","categoriesCount","seriesCount","categories","CategoricalChart","chartService","categoryAxis","seriesCategoryAxis","valueAxisRanges","points","categoryPoints","seriesPoints","seriesOptions","_evalSeries","render","traverseDataPoints","addValue","bind","pointOptions","seriesIx","pointType","prototype","vertical","invertAxes","plotValue","isStacked100","categoryIx","otherValues","categorySum","other","stack","otherStack","group","plotRange","startValue","isStacked","positive","prevValue","isStackedBar","STRING","otherValue","valueAxis","axisCrossingValue","categoryAxisCrossingValue","convertableToNumber","stackLimits","axisName","stackName","pIx","isFinite","updateStackRange","ref","chartSeries","limitsCache","key","limits","errorTotals","negative","sparseArrayLimits","addErrorBar","errorBars","lowValue","highValue","seriesErrorRanges","addPointErrorBar","stackedErrorRange","updateRange","errorBar","createPoint","owner","noteText","dataItem","evalPointOptions","category","_defaults","doEval","axisRange","namedValueAxes","categorySlots","chartPoints","currentSeries","categorySlot","valueSlot","pointSlot","aboveAxis","stackValue","percentage","reflowPoint","visible","reflowCategories","clip","limitPoints","limitPoint","limittedSlot","limitSlot","equals","reverse","axisCrossingValues","axisIndex","slotX","slotY","callback","_outOfRangeCallback","seriesIx$1","currentCategory","categoryAt","_bindPoint","seriesIx$2","outOfRangePoint","_bindCache","bindCache","formatPointValue","format","auto","PointEventsMixin","click","e","trigger","eventArgs","hover","over","out","runningTotal","element","originalEvent","NoteMixin","createNote","notes","text","label","note","Note","LinePoint","tooltipTracking","markers","labels","_rendered","size","marker","createMarker","labelTemplate","labelText","formatValue","align","vAlign","margin","left","right","markerBorder","background","border","brightness","toHex","rotation","opacity","markerBox","_childBox","childBox","clone","reflowLabel","noteTargetBox","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","paddingBox","halfSize","Rect","tooltipAnchor","clipBox","overlaps","verticalAlign","horizontalAlign","horizontal","overlapsBox","unclipElements","noclip","padding","HIGHLIGHT_ZINDEX","LineSegment","toGeometryPoints","customVisual","segmentVisual","fromPoints","closed","close","aliasFor","coords","parent","getNearestPoint","StepLineMixin","calculateStepPoints","justified","stepAxis","stepDir","dir","previousPoint","toGeometryPoint","stepPoint","lintPoint","StepLineSegment","SplineSegment","segments","process","curve","apply","LineChartMixin","renderSegments","lastSegment","_segments","sortedPoints","sortPoints","pointCount","seriesMissingValues","createSegment","_addSegment","children","unshift","segment","missingValues","nearestPoint","target","allPoints","nearestPointDistance","pointDistance","distanceTo","ClipAnimation","setup","_setEnd","step","pos","interpolateValue","topRight","bottomRight","suspend","setX","resume","anyHasZIndex","elements","duration","ClipAnimationMixin","createAnimation","root","getRoot","transitions","clipPath","fromRect","_setChildrenAnimation","animationPoints","LineChart","style","supportsPointInactiveOpacity","AreaSegment","prevSegment","stackPoints","createFill","fill","createStroke","lineCap","strokeSegments","_strokeSegments","createStrokeSegments","segmentsFromPoints","stackSegments","createStackSegments","map","Segment","hasStackSegment","fillSegments","hasStackSegments","fillToAxes","fillPath","crossingValue","endSlot","firstPoint","lastPoint","end","StepAreaSegment","SplineAreaSegment","curveProcessor","controlOut","controlIn","AreaChart","previousSegment","_gapStackPoints","_stackPoints","stackPoint","startIdx","endIdx","pointOffset","_outOfRangeMinPoint","currentSeriesIx","_previousSegmentPoint","gapStackPoint","_createGapStackPoint","segmentIx","seriesIdx","AxisGroupRangeTracker","axisRanges","update","chartAxisRanges","chartRange","reset","query","BarLabel","content","textBox","textOptions","labelBox","contentBox","top","bottom","alignToClipBox","start","parentBox","hasGradientOverlay","overlay","gradient","Bar","createLabel","rectVisual","createRect","strokeOpacity","path","getBorderColor","lineJoin","createGradientOverlay","baseColor","_brightness","borderColor","forEach","forEachReverse","ClusterLayout","rtl","gap","spacing","slots","slotSize","child","StackWrap","positionAxis","childrenCount","currentChild","snapTo","wrap","BarChart","clusterType","stackType","labelOptions","negativeColor","cluster","getStackWrap","stackWrap","stackGroup","wraps","_stackGroup","zeroSlot","stackAxis","childrenLength","_setAnimationOptions","pointVisual","origin","Candlestick","ocSlot","open","lhSlot","realBody","mid","lines","reflowNote","_mainVisual","mainVisual","createOverlay","createBody","createLines","container","body","set","drawLines","lineStyle","normalColor","areNumbers","tooltip","CandlestickChart","hasValue","splitValue","downColor","parts","BoxPlot","whiskerSlot","boxSlot","q1","q3","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","meanPoints","calcMeanPoints","whiskerPoints","calcWhiskerPoints","medianPoints","calcMedianPoints","renderOutliers","outliers","outerFence","outlierValue","extremes","markersBorder","shape","reflowOutliers","move","whiskers","CROSS","VerticalBoxPlot","BoxPlotChart","filterOutliers","items","ScatterErrorBar","seriesAxes","ScatterChart","_initFields","xAxisRanges","yAxisRanges","valueErrorField","lowField","highField","createMissingValue","intlService","intl","xAxisName","xAxis","yAxisName","yAxis","xAxisRange","yAxisRange","namedXAxes","axisX","namedYAxes","axisY","ref$1","Bubble","radius","highlightGroup","Circle","createGradient","stops","offset","BubbleChart","_maxSize","negativeValues","updateBubblesSize","pointsCount","animationOptions","minR","minSize","maxR","maxSize","minArea","PI","areaRatio","area","Target","Bullet","targetValueSlot","targetSlotX","targetSlotY","targetSlot","bodyVisual","create","BulletChart","seriesItem","wrapData","bulletOptions","bullet","isNaN","BaseTooltip","getStyle","pointColor","backgroundColor","font","borderWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","show","tooltipOptions","isDark","className","notify","hide","destroy","CrosshairTooltip","crosshair","formatService","initAxisName","showAt","stickyMode","formattedValue","dateFormats","baseUnit","getAnchor","ref_options","lineBox","bbox","bottomLeft","translate","topLeft","Crosshair","moveLine","lineEnd","getBox","dim","lineStart","pointCategoryIndex","axisLineBox","currentAxis","ChartContainer","shouldClip","_clipBox","chartsBox","clipRect","unclipLabels","stackRoot","charts","j","isStackRoot","Pane","id","ID","createTitle","titleOptions","title","buildTitle","appendAxis","appendAxisAt","splice","appendChart","empty","removeAxis","i$1","removeChart","pop","visualStyle","renderComplete","createGridLines","clipRoot","allAxes","vGridLines","hGridLines","gridLines","altAxis","refresh","clear","renderVisual","notifyRender","axisValueField","length$1","idx$1","axis$1","lineBox$1","service","getService","paneIndex","appendIfNotNull","segmentVisible","pointVisibility","bindSegments","equalsIgnoreCase","a","b","toLowerCase","filterSeriesByType","types","getDateField","isDateAxis","axisOptions","sampleCategory","dateCategory","Date","singleItemOrArray","shrinkToFit","AREA_REGEX","hasValue$1","findNext","pointHasValue","outPoint","getter$$1","hasItem","createOutOfRangePoints","hasMinPoint","hasMaxPoint","minPoint","maxPoint","test","_outOfRangeMaxPoint","PlotAreaBase","initFields","initSeries","legend","crosshairs","originalOptions","createPanes","createCrosshairs","paneDefaults","paneOptions","panes","panesLength","currentPane","crosshairOptions","currentCrosshair","removeCrosshairs","hideCrosshairs","findPane","matchingPane","findPointPane","containsPoint","axisToRemove","filteredAxes","chartToRemove","filteredCharts","addToLegend","inactiveItems","inactiveItemsLabels","seriesVisible","visibleInLegend","itemLabelOptions","markerColor","active","groupAxes","xAxes","yAxes","paneIx","paneAxes","axisIx","any","groupSeriesByPane","seriesByPane","seriesPaneName","filterVisibleSeries","unpad","reflowPanes","detachLabels","reflowAxes","reflowCharts","redraw","panesArray","cleanGradients","crossingAxes","crossingValues","valuesToAdd","defaultValue","alignAxisTo","targetAxis","targetCrossingValue","slotEdge","targetEdge","axisBox","alignAxes","xAnchor","yAnchor","xAnchorCrossings","yAnchorCrossings","leftAnchors","rightAnchors","topAnchors","bottomAnchors","paneId","paneAnchor","anchorCrossings","_overlap","_mirrored","mirror","pane$1","paneId$1","visible$1","anchor$1","anchorCrossings$1","COORD_PRECISION","shrinkAxisWidth","axisGroupBox","overflowX","shrink","shrinkAxisHeight","shrinked","overflowY","fitAxes","offsetX","paneBox","offsetY","currentAxis$1","reflowPaneAxes","autoRotateAxisLabels","groupedAxes","rotated","allPaneAxes","autoRotateLabels","chartPane","remainingHeight","autoHeightPanes","percents","parseInt","currentPane$1","i$2","currentPane$2","backgroundBox","axesCount","axisA","axisB","chartsBoxes","boxes","addBackgroundPaths","multipath","paths","backgroundContainsPoint","bg","MultiPath","appendVisual","pointsByCategoryIndex","categoryIndex","pointsBySeriesIndex","seriesIndex","filterPoints","pointsBySeriesName","findPoint","paneByPoint","detachAxisGroupLabels","labelAxisCount","labelAxis","createLabelAxis","onAxis","END","START","edge","plotBands","isSingleAxis","some","reduce","acc","PlotAreaEventsMixin","_dispatchEvent","SeriesAggregator","defaultAggregates","seriesFields","_seriesFields","rootAggregate","aggregate","_series","_binder","fieldAggregate","canonicalName","aggregatePoints","srcPoints","_bindPoints","firstDataItem","dataItems","srcValues","_bindField","setValue","parentObj","split","shift","DefaultAggregates","aggregates","seriesType","RangeBar","fromOptions","toOptions","labelFrom","_createLabel","labelTo","RangeBarChart","plotLimits","RangeLinePoint","AUTO","RangeAreaPoint","initLabelsFormat","fromPoint","toPoint","copyFields","fromBox","toBox","positionLabels","fromLabelPosition","toLabelPosition","RangeAreaSegment","toPoints","fromSegments","toPath","fromPath","SplineRangeAreaSegment","createCurveSegments","StepRangeAreaSegment","RangeAreaChart","fromSlot","toSlot","OHLCPoint","oPoints","cPoints","lhPoints","oSlot","cSlot","OHLCChart","WaterfallSegment","WaterfallChart","createSegments","totalCategories","summary","prevPoint","AREA_SERIES","OUT_OF_RANGE_SERIES","CategoricalPlotArea","namedCategoryAxes","valueAxisRangeTracker","stack100","createCategoryAxes","aggregateCategories","createCategoryAxesLabels","createCharts","createValueAxes","paneSeries","visibleSeries","groups","groupSeriesByCategoryAxis","groupIx","createChartGroup","createAreaChart","createRangeAreaChart","createBarChart","createRangeBarChart","createBulletChart","createCandlestickChart","createBoxPlotChart","createOHLCChart","createWaterfallChart","createLineChart","srcSeries","processedSeries","_currentPointsCache","_seriesPointsCache","axisPane","categoryField","aggregateSeries","filterSeries","dataLength","_seriesMax","currentRangeIndices","outOfRangePoints","clearSeriesPointsCache","seriesSourcePoints","categoriesHash","srcCategories","dateAxis","srcData","getFn","mapCategories","totalIndex","aggregator","categoryItem","categoryIdx","totalCount","categoriesToAdd","defaultPaneName","stackableChartOptions","firstSeries","categoryAxes","unique","axisSeries","groupSeries","barChart","rangeColumnChart","bulletChart","lineChart","areaChart","rangeAreaChart","waterfallChart","axisRequiresRounding","categoryAxisName","categoryAxisIndex","centeredSeries","seriesAxis","aggregatedAxis","createLabels","definitions","isJustified","DateCategoryAxis","primaryAxis","tracker","defaultRange","baseOptions","roundToMajorUnit","defaultAxisRange","LogarithmicAxis","NumericAxis","eventType","_eventCoordinates","pointPane","updateAxisOptions","targetOptions","axesOptions","s","Highlight","_points","arrayPoints","toggleHighlight","hasHighlight","togglePointHighlight","toggleHandler","toggle","preventDefault","_defaultPrevented","isHighlighted","acceptKey","mouseKey","event","ctrlKey","shiftKey","altKey","toChartAxisRanges","ranges","Pannable","_active","_panAxes","pan","delta","lock","updatedAxes","limitRange","ZoomSelection","createElement","marquee","_marquee","document","marqueeColor","appendChild","removeElement","parentNode","removeChild","setStyles","styles","zoomPane","_zoomPane","_elementOffset","_zoomPaneClipBox","pageX","pageY","chartElement","elementOffset","_selectionPosition","elementOffset$$1","selectionPosition","_updateAxisRanges","zoom","pointsRange","startLocation","location","limitValue$1","util","MousewheelZoom","rate","updateRanges","zoomRange","LegendLayout","Layout","lineSpacing","orientation","alignItems","legendItem","clippedBBox","rectToBox","addVisual","LegendItem","createContainer","FloatElement","markerOptions","cursor","eventSink","_itemOverlay","widget","args","_legendItemHover","pointIndex","_unsetActivePoint","renderChildren","HORIZONTAL","CUSTOM","Legend","createContainers","createLegendTitle","createItems","userAlign","hasTitle","itemsContainer","innerElement","hasItems","legendBox","containerCustomReflow","containerReflow","alignTarget","containerBox","createTitleLayout","appendTitleLayoutContent","layout","Boolean","PlotAreaFactory","_registry","registry","match","entry","createDiv","classNames","closestHandle","hasClasses","Selection","observer","_dateAxis","initOptions","offsetHeight","createElements","_index","onPane","wrapper","direction","selection","leftMask","rightMask","leftHandle","rightHandle","selectionStyles","leftHandleHeight","rightHandleHeight","borderLeftWidth","borderRightWidth","cssText","obj","mousewheel","_mousewheelHandler","_mousewheel","_domEvents","DomEventsBuilder","stopPropagation","_start","_move","_end","tap","_tap","press","_press","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","clearTimeout","_mwTimeout","_state","_rangeEventArgs","_value","_pointInPane","modelCoords","_toModelCoordinates","eventCoordinates","handle","bodyRect","getBoundingClientRect","inBody","moveTarget","addClass","oldRange","span","scale","removeClass","rightClick","which","mousewheelDelta","expand","setTimeout","touch","touches","p0","p1","_slot","leftMaskWidth","rightMaskWidth","distance","fromValue","toValue","zDir","relative","minDelta","maxDelta","Tooltip","_current","SharedTooltip","tooltipPoints","_slotAnchor","_defaultAnchor","shared","categoryText","categoryFormat","slotCenter","BarChartAnimation","fromScale","abort","scaleX","scaleY","BubbleAnimation","easing","FadeInAnimation","fadeTo","PieAnimation","ScatterLineChart","missingValue","XYPlotArea","xAxisRangeTracker","yAxisRangeTracker","filteredSeries","createScatterChart","createScatterLineChart","createBubbleChart","createAxes","xAxisOptions","yAxisOptions","createXYAxis","inferredDate","namedAxes","isLog","typeSamples","seriesAxisName","firstPointValue","DateValueAxis","xAxesOptions","yAxesOptions","axisPane$1","xValues","yValues","currentValue","updateAxisOptions$1","PieSegment","sector","autoTextColor","themeLabels","theme","seriesDefaults","animationDelay","labelsOptions","labelsDistance","angle","middle","lp","labelHeight","labelWidth","startAngle","innerRadius","endAngle","createSegmentVisual","borderOptions","fallbackFill","userSpace","singleSegment","ShapeBuilder","createRing","midAndle","tooltipAlignment","RAD_30","rad","RAD_60","radians","sine","sin","cosine","cos","DEFAULT_FONT","PieChartMixin","createLegendItem","legendOptions","pointVisible","legendItems","PieChart","seriesColors","colorsCount","anglePerValue","constantAngle","currentAngle","explode","Ring","evalSegmentOptions","segmentOptions","seriesConfigs","minWidth","halfMinWidth","defaultPadding","newBox","newBoxCenter","boxCenter","leftSideLabels","rightSideLabels","seriesConfig","setRadius","sort","labelComparator","leftLabelsReflow","rightLabelsReflow","distances","distanceBetweenLabels","distributeLabels","lr","firstBox","secondBox","remaining","_takeDistance","reflowLabels","amount","available","boxX","labelsCount","labelDistance","boxY","hAlignLabel","connectors","_connectorLines","connectorsColor","connectorLine","centerPoint","sr","crossing","intersection","pointInCircle","space","find","autoFit","pieCenter","bboxBottom","reverseValue","originalX","sector_center","cx","cy","t","a1","a2","b1","b2","uat","ub","ua","PiePlotArea","createPieChart","pieChart","DonutSegment","DonutChart","holeSize","totalSize","seriesWithoutSize","currentSeries$1","DonutPlotArea","createDonutChart","donutChart","PolarPlotAreaBase","createPolarAxis","createValueAxis","polarAxis","axisType","axisDefaultRange","valueAxisOptions","RadarLogarithmicAxis","RadarNumericAxis","valueAxisBox","heightDiff","PolarScatterChart","valueRadius","onCircle","PolarLineChart","SplinePolarAreaSegment","_polarAxisCenter","PolarAreaSegment","centerSegment","PolarAreaChart","_hasMissingValuesGap","xComparer","PolarPlotArea","PolarAxis","majorGridLines","minorGridLines","scatterChart","xValue","yValue","RadarLineChart","seriesSegments","groupBySeriesIx","isFirstDataPoint","isLastDataPoint","SplineRadarAreaSegment","RadarAreaSegment","RadarAreaChart","RadarSegment","RadarClusterLayout","slotAngle","slotSector","RadarStackLayout","childSector","RadarBarChart","RadarPlotArea","RadarCategoryAxis","_hasBarCharts","_isStacked100","chartOptions","FunnelSegment","chartBox","createPath","FunnelChart","labelPadding","dynamicSlopeReflow","totalHeight","firstSegment","maxSegment","lastUpperSide","previousOffset","previousHeight","nextSegment","nextPercentage","segmentSpacing","constantSlopeReflow","decreasingWidth","neckRatio","finalNarrow","dynamicSlope","dynamicHeight","FunnelPlotArea","createFunnelChart","funnelChart","HeatmapPoint","labelColor","isRoundRect","ROUNDED_RECT","halfBorderWidth","borderRadius","HeatmapChart","setRange","minLightnessOffset","parseColor","hsl","toHSL","l","toCss","colorScale","indexX","indexY","xRange","yRange","ref$2","xIndex","yIndex","xIn","yIn","HeatmapPlotArea","bindCategories","createAxisLabels","xCategories","createHashSet","yCategories","has","add","createHeatmapChart","firstCategory","updateAxisOptions$2","COLOR","FIRST","MAX","MIN","NOTE_TEXT","errorLow","errorHigh","AXIS_NAMES","Chart","userOptions","themeOptions","observers","addObserver","ChartService","_initElement","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","FontLoader","preloadFonts","fontLoaded","_destroyed","_redraw","_attachEvents","_setElementClass","firstChild","seriesCopies","aliases","alias","resolveAxisAliases","applyDefaults","applySeriesColors","getSize","chartArea","offsetWidth","resize","force","currentSize","_size","hasSize","_resize","_selections","_destroySelections","_setupSelection","_noTransitionsRedraw","paneName","_model","findPaneByName","findPaneByIndex","filter","seriesName","categoryName","pointByCategoryName","togglePointsHighlight","_highlight","showTooltip","_sharedTooltip","_tooltip","hideTooltip","surface","_surfaceWrap","elementSize","renderAs","_destroySurface","Surface","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","model","_getModel","_destroyView","traverse","draw","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","_zoomSelection","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","domEvents","toggleDrag","toggleZoom","_createSharedTooltip","axisDefaults","themeAxisDefaults","mapAxisOptions","axisColor","applyAxisDefaults","seriesLength","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","applySeriesDefaults","colors","seriesColor","_createPlotArea","RootElement","_modelOptions","subtitle","orderTitles","DEFAULT_WIDTH","DEFAULT_HEIGHT","skipSeries","selections","select","_selectStart","_select","_selectEnd","_clickHandler","_click","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","throttle","removeObserver","eventNames","_toDocumentCoordinates","_updateDrilldownPoint","_resetDrilldownPoint","_startDrilldown","isDefaultPrevented","obj$1","_shouldAttachMouseMove","_hoveredPoint","_plotAreaHovered","cancel","_stopChartHandlers","_gestureDistance","suspendTracking","_zooming","resumeTracking","mousewheelZoom","previousGestureDistance","scaleDelta","_drawingChartElement","leave","_startNavigation","_suppressHover","panning","ranges$1","translateRange","_endNavigation","_mousewheelZoomRate","totalDelta","scaleRange","chartEvent","_getChartElement","eventTarget","closest","coordinates","_elementPadding","_padding","clientX","clientY","inverseTransform","elementScale","invert","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","_showInactiveOpacity","_displayTooltip","_displayInactiveOpacity","activePoint","multipleSeries","highlightPoints","chartInstance","_activeChartInstance","_chartInstanceFromPoint","_updateSeriesOpacity","_applySeriesOpacity","inactivePoints","_getInactivePoints","_getInactiveOpacityForSeries","_getAllPointsOfType","constructor","_updateHoveredPoint","hoveredPoint","drilldown","_drilldownState","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","activeSeries","_activePoint","hasInactiveOpacity","_hasInactiveOpacity","_hideInactiveOpacity","hasDefaultInactiveOpacity","defaultInactiveOpacity","DEFAULT_SERIES_OPACITY","_mouseMoveTrackHandler","_mouseMoveTracking","seriesPoint","_trackCrosshairs","overPlotArea","_tooltipCategoryIx","_sharedHighlight","pointArgs","hoverArgs","hideElements","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","autoBind","bindCategoryAxisFromSeries","uniqueCategories","HashMap","bindable","dataIx","dataRow","srcDates","comparer","dateComparer","dates","sortDates","uniqueDates","rows","rowCount","rowIx","colCount","colIx","transpose","_isBindable","transitionsState","updateMouseMoveHandler","applyOptions","setOptions","setDirection","setIntlService","noTransitionsRedraw","unbind","bar","column","rangeColumn","verticalLine","pie","donut","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","DATA_FIELDS","fieldValue","originalValue","nullValue","jQuery","undefined$1","Widget","ui","ChartBreadcrumb","_attachChartEvents","_renderBreadcrumb","events","rootItem","icon","showIcon","breadcrumb","_onChartDrilldown","_onChartDrilldownLevelChange","deferred","resetDrilldownLevel","getKendoChart","breadcrumbElement","Breadcrumb","_onBreadcrumbClick","level","findIndex","plugin","NS","outerWidth","_outerWidth","outerHeight","_outerHeight","KendoChart","DataSource","InstanceObserver","template","encode","htmlEncode","MOUSELEAVE_NS","AXIS_LABEL_CLICK","DRILLDOWN_LEVEL_CHANGE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","DOCUMENT_ELEMENT","documentElement","CHANGE","DATABOUND","LEAVE","Observable","UserEvents","multiTouch","fastTap","ChartInstanceObserver","handlerMap","legendItemClick","dataSource","_seriesVisibility","SeriesVisibilityState","_initDataSource","instance","_instance","_bindSeries","_bindCategories","dimensions","_setEvents","_getThemeOptions","_sourceSeries","setDataSource","_hasDataSource","_onDataChanged","_dataChangeHandler","_hasData","fetch","off","_destroyCrosshairTooltips","findSeries","ChartSeries","findSeriesByName","_createSeries","findSeriesByIndex","originalChartArea","_seriesOptions","on","relatedTarget","autoHide","themeName","SASS_THEMES","autoTheme","themes","_initChart","_createChart","_isRtl","_onInit","_initTooltip","tooltips","_crosshairTooltips","_getCrosshairTooltip","_showTooltip","_hideTooltip","_onRender","_copyMembers","names","_events","_tooltipleave","_onLegendItemClick","_legendItemClick","save","_onDrilldown","drilldownSeriesFactory","Promise","then","resolved","_onDrilldownData","drilldownSeries","Object","assign","_bindData","groupedSeries","view","grouped","seriesVisibility","read","applyByGroup","applyByIndex","seriesData","_groupIx","categoriesData","_bindCategoryAxis","isRtl","css","proxyMembers","createProxyMember","arguments","nameTemplate","seriesClone","legacyTemplate","groupNameTemplate","logToConsole","_groupValue","ExportMixin","PDFMixin","action","persistSeriesVisibility","saveState","geom","mobileScrollerSelector","attr","_mobileScroller","downEvent","applyEventMap","guid","_closeTooltipHandler","_closeTooltip","_clearShowTimeout","remove","sharedTemplate","colspan","colorMarker","nameColumn","sharedTemplateIterator","_offset","_ensureElement","stop","animate","showTimeout","_measure","zoomLevel","viewport","scrollTop","pageYOffset","scrollLeft","pageXOffset","movable","_fit","normalizeStyle","toggleClass","_sharedContent","_pointContent","html","forceHide","_hideElement","is","appendTo","contains","fadeOut","always","toString","tooltipTemplate","xLow","xHigh","yLow","yHigh","viewPortSize","output","_chart","_options","_filterPoints","_clearFields","toggleVisibility","_filterData"],"sources":["kendo.dataviz.chart.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.color.js'), require('kendo.drawing.js'), require('kendo.dataviz.core.js'), require('kendo.breadcrumb.js'), require('kendo.data.js'), require('kendo.dataviz.themes.js'), require('kendo.userevents.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.color', 'kendo.drawing', 'kendo.dataviz.core', 'kendo.breadcrumb', 'kendo.data', 'kendo.dataviz.themes', 'kendo.userevents', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendodataviz = global.kendodataviz || {}, global.kendodataviz.chart = global.kendodataviz.chart || {}, global.kendodataviz.chart.js = factory()));\n})(this, (function () {\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-charts` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\n    window.kendo.dataviz = window.kendo.dataviz || {};\n    var dataviz = kendo.dataviz;\n    var Class = dataviz.Class;\n    var isNumber = dataviz.isNumber;\n    var datavizConstants = dataviz.constants;\n    var MAX_VALUE = datavizConstants.MAX_VALUE;\n    var MIN_VALUE = datavizConstants.MIN_VALUE;\n    var VALUE = datavizConstants.VALUE;\n    var CENTER = datavizConstants.CENTER;\n    var TOP = datavizConstants.TOP;\n    var BOTTOM = datavizConstants.BOTTOM;\n    var LEFT = datavizConstants.LEFT;\n    var WHITE = datavizConstants.WHITE;\n    var CIRCLE = datavizConstants.CIRCLE;\n    var X = datavizConstants.X;\n    var Y = datavizConstants.Y;\n    var RIGHT = datavizConstants.RIGHT;\n    var BLACK = datavizConstants.BLACK;\n    var DATE = datavizConstants.DATE;\n    var DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\n    var ARC = datavizConstants.ARC;\n    var defined = dataviz.defined;\n    var getter = dataviz.getter;\n    var isArray = dataviz.isArray;\n    var ChartElement = dataviz.ChartElement;\n    var Point = dataviz.Point;\n    var Box = dataviz.Box;\n    var alignPathToPixel = dataviz.alignPathToPixel;\n    var setDefaultOptions = dataviz.setDefaultOptions;\n    var inArray = dataviz.inArray;\n    var isFunction = dataviz.isFunction;\n    var valueOrDefault = dataviz.valueOrDefault;\n    var isObject = dataviz.isObject;\n    var deepExtend = dataviz.deepExtend;\n    var last = dataviz.last;\n    var eventElement = dataviz.eventElement;\n    var getTemplate = dataviz.getTemplate;\n    var TextBox = dataviz.TextBox;\n    var ShapeElement = dataviz.ShapeElement;\n    var getSpacing = dataviz.getSpacing;\n    var CurveProcessor = dataviz.CurveProcessor;\n    var append = dataviz.append;\n    var isString = dataviz.isString;\n    var parseDate = dataviz.parseDate;\n    var styleValue = dataviz.styleValue;\n    var CategoryAxis = dataviz.CategoryAxis;\n    var BoxElement = dataviz.BoxElement;\n    var Title = dataviz.Title;\n    var round = dataviz.round;\n    var limitValue = dataviz.limitValue;\n    var grep = dataviz.grep;\n    var elementStyles = dataviz.elementStyles;\n    var bindEvents = dataviz.bindEvents;\n    var services = dataviz.services;\n    var unbindEvents = dataviz.unbindEvents;\n    var support = kendo.support;\n    var drawing = kendo.drawing;\n    var Path = drawing.Path;\n    var Animation = drawing.Animation;\n    var AnimationFactory = drawing.AnimationFactory;\n    var Group = drawing.Group;\n    var Color = kendo.Color;\n    var geometry = kendo.geometry;\n    var GeometryPoint = geometry.Point;\n    var transform = geometry.transform;\n\n    var ChartAxis = Class.extend({\n        init: function(axis) {\n\n            this._axis = axis;\n            this.options = axis.options;\n        },\n\n        value: function(point) {\n            var axis = this._axis;\n            var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n\n            return value;\n        },\n\n        slot: function(from, to, limit) {\n            if (limit === void 0) { limit = true; }\n\n            return this._axis.slot(from, to, limit);\n        },\n\n        range: function() {\n            return this._axis.range();\n        },\n\n        valueRange: function() {\n            return this._axis.valueRange();\n        }\n    });\n\n    function findAxisByName(name, axes) {\n        for (var idx = 0; idx < axes.length; idx++) {\n            if (axes[idx].options.name === name) {\n                axes[idx].prepareUserOptions();\n                return new ChartAxis(axes[idx]);\n            }\n        }\n    }\n\n    var ChartPane = kendo.Class.extend({\n        init: function(pane) {\n            this.visual = pane.visual;\n            this.chartsVisual = pane.chartContainer.visual;\n            this._pane = pane;\n        },\n\n        findAxisByName: function(name) {\n            return findAxisByName(name, this._pane.axes);\n        }\n    });\n\n    var ChartPlotArea = Class.extend({\n        init: function(plotArea) {\n\n            this._plotArea = plotArea;\n            this.visual = plotArea.visual;\n            this.backgroundVisual = plotArea._bgVisual;\n        }\n    });\n\n    function countNumbers(values) {\n        var length = values.length;\n        var count = 0;\n\n        for (var i = 0; i < length; i++) {\n            var num = values[i];\n            if (isNumber(num)) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    var Aggregates = {\n        min: function(values) {\n            var length = values.length;\n            var min = MAX_VALUE;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (isNumber(value)) {\n                    min = Math.min(min, value);\n                }\n            }\n\n            return min === MAX_VALUE ? values[0] : min;\n        },\n\n        max: function(values) {\n            var length = values.length;\n            var max = MIN_VALUE;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (isNumber(value)) {\n                    max = Math.max(max, value);\n                }\n            }\n\n            return max === MIN_VALUE ? values[0] : max;\n        },\n\n        sum: function(values) {\n            var length = values.length;\n            var sum = 0;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (isNumber(value)) {\n                    sum += value;\n                }\n            }\n\n            return sum;\n        },\n\n        sumOrNull: function(values) {\n            var result = null;\n\n            if (countNumbers(values)) {\n                result = Aggregates.sum(values);\n            }\n\n            return result;\n        },\n\n        count: function(values) {\n            var length = values.length;\n            var count = 0;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (value !== null && defined(value)) {\n                    count++;\n                }\n            }\n\n            return count;\n        },\n\n        avg: function(values) {\n            var count = countNumbers(values);\n            var result = values[0];\n\n            if (count > 0) {\n                result = Aggregates.sum(values) / count;\n            }\n\n            return result;\n        },\n\n        first: function(values) {\n            var length = values.length;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (value !== null && defined(value)) {\n                    return value;\n                }\n            }\n\n            return values[0];\n        }\n    };\n\n    function getField(field, row) {\n        if (row === null) {\n            return row;\n        }\n\n        var get = getter(field, true);\n        return get(row);\n    }\n\n    var SeriesBinder = Class.extend({\n        init: function() {\n\n            this._valueFields = {};\n            this._otherFields = {};\n            this._nullValue = {};\n            this._undefinedValue = {};\n        },\n\n        register: function(seriesTypes, valueFields, otherFields) {\n            var this$1$1 = this;\n            if (valueFields === void 0) { valueFields = [ VALUE ]; }\n            if (otherFields === void 0) { otherFields = {}; }\n\n            for (var i = 0; i < seriesTypes.length; i++) {\n                var type = seriesTypes[i];\n\n                this$1$1._valueFields[type] = valueFields;\n                this$1$1._otherFields[type] = otherFields;\n                this$1$1._nullValue[type] = this$1$1._makeValue(valueFields, null);\n                this$1$1._undefinedValue[type] = this$1$1._makeValue(valueFields, undefined);\n            }\n        },\n\n        canonicalFields: function(series) {\n            return this.valueFields(series).concat(this.otherFields(series));\n        },\n\n        valueFields: function(series) {\n            return this._valueFields[series.type] || [ VALUE ];\n        },\n\n        otherFields: function(series) {\n            return this._otherFields[series.type] || [ VALUE ];\n        },\n\n        bindPoint: function(series, pointIx, item) {\n            var data = series.data;\n            var pointData = defined(item) ? item : data[pointIx];\n            var result = { valueFields: { value: pointData } };\n            var valueFields = this.valueFields(series);\n            var otherFields = this._otherFields[series.type];\n            var fields, value;\n\n            if (pointData === null) {\n                value = this._nullValue[series.type];\n            } else if (!defined(pointData)) {\n                value = this._undefinedValue[series.type];\n            } else if (Array.isArray(pointData)) {\n                var fieldData = pointData.slice(valueFields.length);\n                value = this._bindFromArray(pointData, valueFields);\n                fields = this._bindFromArray(fieldData, otherFields);\n            } else if (typeof pointData === \"object\") {\n                var srcValueFields = this.sourceFields(series, valueFields);\n                var srcPointFields = this.sourceFields(series, otherFields);\n\n                value = this._bindFromObject(pointData, valueFields, srcValueFields);\n                fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n            }\n\n            if (defined(value)) {\n                if (valueFields.length === 1) {\n                    result.valueFields.value = value[valueFields[0]];\n                } else {\n                    result.valueFields = value;\n                }\n            }\n\n            result.fields = fields || {};\n\n            return result;\n        },\n\n        _makeValue: function(fields, initialValue) {\n            var value = {};\n            var length = fields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                value[fieldName] = initialValue;\n            }\n\n            return value;\n        },\n\n        _bindFromArray: function(array, fields) {\n            var value = {};\n\n            if (fields) {\n                var length = Math.min(fields.length, array.length);\n\n                for (var i = 0; i < length; i++) {\n                    value[fields[i]] = array[i];\n                }\n            }\n\n            return value;\n        },\n\n        _bindFromObject: function(object, fields, srcFields) {\n            if (srcFields === void 0) { srcFields = fields; }\n\n            var value = {};\n\n            if (fields) {\n                var length = fields.length;\n\n                for (var i = 0; i < length; i++) {\n                    var fieldName = fields[i];\n                    var srcFieldName = srcFields[i];\n                    if (srcFieldName !== null) {\n                        value[fieldName] = getField(srcFieldName, object);\n                    }\n                }\n            }\n\n            return value;\n        },\n\n        sourceFields: function(series, canonicalFields) {\n            var sourceFields = [];\n\n            if (canonicalFields) {\n                var length = canonicalFields.length;\n\n                for (var i = 0; i < length; i++) {\n                    var fieldName = canonicalFields[i];\n                    var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n\n                    sourceFields.push(series[sourceFieldName] !== null ? (series[sourceFieldName] || fieldName) : null);\n                }\n            }\n\n            return sourceFields;\n        }\n    });\n\n    SeriesBinder.current = new SeriesBinder();\n\n    var STD_ERR = \"stderr\";\n    var STD_DEV = \"stddev\";\n    var percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\n    var standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n\n    var ErrorRangeCalculator = Class.extend({\n        init: function(errorValue, series, field) {\n\n            this.initGlobalRanges(errorValue, series, field);\n        },\n\n        initGlobalRanges: function(errorValue, series, field) {\n            var data = series.data;\n            var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n            if (deviationMatch) {\n                this.valueGetter = this.createValueGetter(series, field);\n\n                var average = this.getAverage(data);\n                var deviation = this.getStandardDeviation(data, average, false);\n                var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n                var errorRange = { low: average.value - deviation * multiple, high: average.value + deviation * multiple };\n\n                this.globalRange = function() {\n                    return errorRange;\n                };\n            } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n                this.valueGetter = this.createValueGetter(series, field);\n                var standardError = this.getStandardError(data, this.getAverage(data));\n\n                this.globalRange = function(value) {\n                    return { low: value - standardError, high: value + standardError };\n                };\n            }\n        },\n\n        createValueGetter: function(series, field) {\n            var data = series.data;\n            var binder = SeriesBinder.current;\n            var valueFields = binder.valueFields(series);\n            var item = defined(data[0]) ? data[0] : {};\n            var valueGetter;\n\n            if (isArray(item)) {\n                var index = field ? valueFields.indexOf(field) : 0;\n                valueGetter = getter(\"[\" + index + \"]\");\n            } else if (isNumber(item)) {\n                valueGetter = getter();\n            } else if (typeof item === datavizConstants.OBJECT) {\n                var srcValueFields = binder.sourceFields(series, valueFields);\n                valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n            }\n\n            return valueGetter;\n        },\n\n        getErrorRange: function(pointValue, errorValue) {\n            var low, high, value;\n\n            if (!defined(errorValue)) {\n                return null;\n            }\n\n            if (this.globalRange) {\n                return this.globalRange(pointValue);\n            }\n\n            if (isArray(errorValue)) {\n                low = pointValue - errorValue[0];\n                high = pointValue + errorValue[1];\n            } else if (isNumber(value = parseFloat(errorValue))) {\n                low = pointValue - value;\n                high = pointValue + value;\n            } else if ((value = percentRegex.exec(errorValue))) {\n                var percentValue = pointValue * (parseFloat(value[1]) / 100);\n                low = pointValue - Math.abs(percentValue);\n                high = pointValue + Math.abs(percentValue);\n            } else {\n                throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n            }\n\n            return { low: low, high: high };\n        },\n\n        getStandardError: function(data, average) {\n            return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n        },\n\n        getStandardDeviation: function(data, average, isSample) {\n            var this$1$1 = this;\n\n            var length = data.length;\n            var total = isSample ? average.count - 1 : average.count;\n            var squareDifferenceSum = 0;\n\n            for (var idx = 0; idx < length; idx++) {\n                var value = this$1$1.valueGetter(data[idx]);\n                if (isNumber(value)) {\n                    squareDifferenceSum += Math.pow(value - average.value, 2);\n                }\n            }\n\n            return Math.sqrt(squareDifferenceSum / total);\n        },\n\n        getAverage: function(data) {\n            var this$1$1 = this;\n\n            var length = data.length;\n            var sum = 0;\n            var count = 0;\n\n            for (var idx = 0; idx < length; idx++) {\n                var value = this$1$1.valueGetter(data[idx]);\n                if (isNumber(value)) {\n                    sum += value;\n                    count++;\n                }\n            }\n\n            return {\n                value: sum / count,\n                count: count\n            };\n        }\n    });\n\n    var browser = support.browser || {};\n\n    var INITIAL_ANIMATION_DURATION = 600;\n    var FADEIN = \"fadeIn\";\n\n    var GLASS = \"glass\";\n    var BORDER_BRIGHTNESS = 0.8;\n    var TOOLTIP_OFFSET = 5;\n    var START_SCALE = browser.msie ? 0.001 : 0;\n    var ERROR_LOW_FIELD = \"errorLow\";\n    var ERROR_HIGH_FIELD = \"errorHigh\";\n    var X_ERROR_LOW_FIELD = \"xErrorLow\";\n    var X_ERROR_HIGH_FIELD = \"xErrorHigh\";\n    var Y_ERROR_LOW_FIELD = \"yErrorLow\";\n    var Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\n    var LINE_MARKER_SIZE = 8;\n    var ZERO = \"zero\";\n    var INTERPOLATE = \"interpolate\";\n    var GAP = \"gap\";\n    var ABOVE = \"above\";\n    var BELOW = \"below\";\n\n    var SMOOTH = \"smooth\";\n    var STEP = \"step\";\n\n    var AREA = \"area\";\n    var BAR = \"bar\";\n    var BOX_PLOT = \"boxPlot\";\n    var BUBBLE = \"bubble\";\n    var BULLET = \"bullet\";\n    var CANDLESTICK = \"candlestick\";\n    var COLUMN = \"column\";\n    var DONUT = \"donut\";\n    var FUNNEL = \"funnel\";\n    var HEATMAP = \"heatmap\";\n    var HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\n    var LINE = \"line\";\n    var OHLC = \"ohlc\";\n    var PIE = \"pie\";\n    var POLAR_AREA = \"polarArea\";\n    var POLAR_LINE = \"polarLine\";\n    var POLAR_SCATTER = \"polarScatter\";\n    var RADAR_AREA = \"radarArea\";\n    var RADAR_COLUMN = \"radarColumn\";\n    var RADAR_LINE = \"radarLine\";\n    var RANGE_AREA = \"rangeArea\";\n    var RANGE_BAR = \"rangeBar\";\n    var RANGE_COLUMN = \"rangeColumn\";\n    var SCATTER = \"scatter\";\n    var SCATTER_LINE = \"scatterLine\";\n    var VERTICAL_AREA = \"verticalArea\";\n    var VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\n    var VERTICAL_BULLET = \"verticalBullet\";\n    var VERTICAL_LINE = \"verticalLine\";\n    var VERTICAL_RANGE_AREA = \"verticalRangeArea\";\n    var WATERFALL = \"waterfall\";\n    var EQUALLY_SPACED_SERIES = [\n        BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT,\n        BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL\n    ];\n\n    var LEGEND_ITEM_CLICK = \"legendItemClick\";\n    var LEGEND_ITEM_HOVER = \"legendItemHover\";\n    var LEGEND_ITEM_LEAVE = \"legendItemLeave\";\n    var SERIES_CLICK = \"seriesClick\";\n    var SERIES_HOVER = \"seriesHover\";\n    var SERIES_OVER = \"seriesOver\";\n    var SERIES_LEAVE = \"seriesLeave\";\n    var PLOT_AREA_CLICK = \"plotAreaClick\";\n    var PLOT_AREA_HOVER = \"plotAreaHover\";\n    var PLOT_AREA_LEAVE = \"plotAreaLeave\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var DRAG_START = \"dragStart\";\n    var ZOOM_START = \"zoomStart\";\n    var ZOOM = \"zoom\";\n    var ZOOM_END = \"zoomEnd\";\n    var SELECT_START = \"selectStart\";\n    var SELECT = \"select\";\n    var SELECT_END = \"selectEnd\";\n    var RENDER = \"render\";\n    var SHOW_TOOLTIP = \"showTooltip\";\n    var HIDE_TOOLTIP = \"hideTooltip\";\n    var PANE_RENDER = \"paneRender\";\n\n    var LOGARITHMIC = \"log\";\n    var CATEGORY = \"category\";\n\n    var INSIDE_END = \"insideEnd\";\n    var INSIDE_BASE = \"insideBase\";\n    var OUTSIDE_END = \"outsideEnd\";\n\n    var MOUSEWHEEL = \"wheel\";\n    var MOUSEWHEEL_DELAY = 150;\n    var MOUSEWHEEL_ZOOM_RATE = 0.3;\n\n    var DRILLDOWN = \"drilldown\";\n    var DRILLDOWN_FIELD = \"drilldown\";\n\n    var constants = {\n    \tINITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n    \tFADEIN: FADEIN,\n    \tLEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n    \tLEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n    \tLEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n    \tSERIES_CLICK: SERIES_CLICK,\n    \tSERIES_HOVER: SERIES_HOVER,\n    \tSERIES_OVER: SERIES_OVER,\n    \tSERIES_LEAVE: SERIES_LEAVE,\n    \tGLASS: GLASS,\n    \tBORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n    \tTOOLTIP_OFFSET: TOOLTIP_OFFSET,\n    \tSTART_SCALE: START_SCALE,\n    \tERROR_LOW_FIELD: ERROR_LOW_FIELD,\n    \tERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n    \tX_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n    \tX_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n    \tY_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n    \tY_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n    \tLINE_MARKER_SIZE: LINE_MARKER_SIZE,\n    \tINTERPOLATE: INTERPOLATE,\n    \tZERO: ZERO,\n    \tSMOOTH: SMOOTH,\n    \tSTEP: STEP,\n    \tCATEGORY: CATEGORY,\n    \tFUNNEL: FUNNEL,\n    \tBAR: BAR,\n    \tCANDLESTICK: CANDLESTICK,\n    \tPIE: PIE,\n    \tCOLUMN: COLUMN,\n    \tAREA: AREA,\n    \tVERTICAL_BULLET: VERTICAL_BULLET,\n    \tBOX_PLOT: BOX_PLOT,\n    \tOHLC: OHLC,\n    \tWATERFALL: WATERFALL,\n    \tLINE: LINE,\n    \tBULLET: BULLET,\n    \tVERTICAL_LINE: VERTICAL_LINE,\n    \tVERTICAL_AREA: VERTICAL_AREA,\n    \tRANGE_AREA: RANGE_AREA,\n    \tVERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n    \tRANGE_COLUMN: RANGE_COLUMN,\n    \tVERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n    \tRANGE_BAR: RANGE_BAR,\n    \tHORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n    \tSCATTER: SCATTER,\n    \tSCATTER_LINE: SCATTER_LINE,\n    \tBUBBLE: BUBBLE,\n    \tRADAR_AREA: RADAR_AREA,\n    \tRADAR_LINE: RADAR_LINE,\n    \tRADAR_COLUMN: RADAR_COLUMN,\n    \tPOLAR_LINE: POLAR_LINE,\n    \tPOLAR_AREA: POLAR_AREA,\n    \tPOLAR_SCATTER: POLAR_SCATTER,\n    \tRENDER: RENDER,\n    \tPLOT_AREA_CLICK: PLOT_AREA_CLICK,\n    \tPLOT_AREA_HOVER: PLOT_AREA_HOVER,\n    \tPLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n    \tLOGARITHMIC: LOGARITHMIC,\n    \tDRAG: DRAG,\n    \tDRAG_START: DRAG_START,\n    \tDRAG_END: DRAG_END,\n    \tZOOM_START: ZOOM_START,\n    \tZOOM: ZOOM,\n    \tZOOM_END: ZOOM_END,\n    \tSELECT_START: SELECT_START,\n    \tSELECT: SELECT,\n    \tSELECT_END: SELECT_END,\n    \tPANE_RENDER: PANE_RENDER,\n    \tGAP: GAP,\n    \tDONUT: DONUT,\n    \tINSIDE_END: INSIDE_END,\n    \tINSIDE_BASE: INSIDE_BASE,\n    \tOUTSIDE_END: OUTSIDE_END,\n    \tMOUSEWHEEL: MOUSEWHEEL,\n    \tMOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n    \tMOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n    \tSHOW_TOOLTIP: SHOW_TOOLTIP,\n    \tHIDE_TOOLTIP: HIDE_TOOLTIP,\n    \tEQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n    \tABOVE: ABOVE,\n    \tBELOW: BELOW,\n    \tHEATMAP: HEATMAP,\n    \tDRILLDOWN: DRILLDOWN,\n    \tDRILLDOWN_FIELD: DRILLDOWN_FIELD\n    };\n\n    var DEFAULT_ERROR_BAR_WIDTH = 4;\n\n    var ErrorBarBase = ChartElement.extend({\n        init: function(low, high, isVertical, chart, series, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.low = low;\n            this.high = high;\n            this.isVertical = isVertical;\n            this.chart = chart;\n            this.series = series;\n        },\n\n        reflow: function(targetBox) {\n            var endCaps = this.options.endCaps;\n            var isVertical = this.isVertical;\n            var axis = this.getAxis();\n            var valueBox = axis.getSlot(this.low, this.high);\n            var centerBox = targetBox.center();\n            var capsWidth = this.getCapsWidth(targetBox, isVertical);\n            var capValue = isVertical ? centerBox.x : centerBox.y;\n            var capStart = capValue - capsWidth;\n            var capEnd = capValue + capsWidth;\n            var linePoints;\n\n            if (isVertical) {\n                linePoints = [\n                    new Point(centerBox.x, valueBox.y1),\n                    new Point(centerBox.x, valueBox.y2)\n                ];\n                if (endCaps) {\n                    linePoints.push(new Point(capStart, valueBox.y1),\n                        new Point(capEnd, valueBox.y1),\n                        new Point(capStart, valueBox.y2),\n                        new Point(capEnd, valueBox.y2));\n                }\n                this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n            } else {\n                linePoints = [\n                    new Point(valueBox.x1, centerBox.y),\n                    new Point(valueBox.x2, centerBox.y)\n                ];\n                if (endCaps) {\n                    linePoints.push(new Point(valueBox.x1, capStart),\n                        new Point(valueBox.x1, capEnd),\n                        new Point(valueBox.x2, capStart),\n                        new Point(valueBox.x2, capEnd));\n                }\n                this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n            }\n\n            this.linePoints = linePoints;\n        },\n\n        getCapsWidth: function(box, isVertical) {\n            var boxSize = isVertical ? box.width() : box.height();\n            var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n\n            return capsWidth;\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var visual = options.visual;\n\n            if (visual) {\n                this.visual = visual({\n                    low: this.low,\n                    high: this.high,\n                    rect: this.box.toRect(),\n                    sender: this.getSender(),\n                    options: {\n                        endCaps: options.endCaps,\n                        color: options.color,\n                        line: options.line\n                    },\n                    createVisual: function () {\n                        this$1$1.createDefaultVisual();\n                        var defaultVisual = this$1$1.visual;\n                        delete this$1$1.visual;\n                        return defaultVisual;\n                    }\n                });\n            } else {\n                this.createDefaultVisual();\n            }\n        },\n\n        createDefaultVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var linePoints = ref.linePoints;\n            var lineOptions = {\n                stroke: {\n                    color: options.color,\n                    width: options.line.width,\n                    dashType: options.line.dashType\n                }\n            };\n\n            ChartElement.fn.createVisual.call(this);\n\n            for (var idx = 0; idx < linePoints.length; idx += 2) {\n                var line = new Path(lineOptions)\n                    .moveTo(linePoints[idx].x, linePoints[idx].y)\n                    .lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n\n                alignPathToPixel(line);\n                this$1$1.visual.append(line);\n            }\n        }\n    });\n\n    setDefaultOptions(ErrorBarBase, {\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        endCaps: true,\n        line: {\n            width: 2\n        },\n        zIndex: 1\n    });\n\n    var CategoricalErrorBar = ErrorBarBase.extend({\n        getAxis: function() {\n            var axis = this.chart.seriesValueAxis(this.series);\n\n            return axis;\n        }\n    });\n\n    var MAX_EXPAND_DEPTH = 5;\n\n    function evalOptions(options, context, state, dryRun) {\n        if (state === void 0) { state = {}; }\n        if (dryRun === void 0) { dryRun = false; }\n\n        var defaults = state.defaults = state.defaults || {};\n        var depth = state.depth = state.depth || 0;\n        var needsEval = false;\n\n        state.excluded = state.excluded || [];\n\n        if (depth > MAX_EXPAND_DEPTH) {\n            return null;\n        }\n\n        for (var property in options) {\n            if (!inArray(property, state.excluded) && options.hasOwnProperty(property)) {\n                var propValue = options[property];\n                if (isFunction(propValue)) {\n                    needsEval = true;\n                    if (!dryRun) {\n                        options[property] = valueOrDefault(propValue(context), defaults[property]);\n                    }\n                } else if (isObject(propValue)) {\n                    if (!dryRun) {\n                        state.defaults = defaults[property];\n                    }\n                    state.depth++;\n                    needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                    state.depth--;\n                }\n            }\n        }\n\n        return needsEval;\n    }\n\n    function categoriesCount(series) {\n        var seriesCount = series.length;\n        var categories = 0;\n\n        for (var i = 0; i < seriesCount; i++) {\n            categories = Math.max(categories, series[i].data.length);\n        }\n\n        return categories;\n    }\n\n    var CategoricalChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]);\n\n            // Value axis ranges grouped by axis name, e.g.:\n            // primary: { min: 0, max: 1 }\n            this.valueAxisRanges = {};\n\n            this.points = [];\n            this.categoryPoints = [];\n            this.seriesPoints = [];\n            this.seriesOptions = [];\n            this._evalSeries = [];\n\n            this.render();\n        },\n\n        render: function() {\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        pointOptions: function(series, seriesIx) {\n            var options = this.seriesOptions[seriesIx];\n            if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({ }, defaults, {\n                    vertical: !this.options.invertAxes\n                }, series);\n            }\n\n            return options;\n        },\n\n        plotValue: function(point) {\n            if (!point) {\n                return 0;\n            }\n\n            if (this.options.isStacked100 && isNumber(point.value)) {\n                var categoryIx = point.categoryIx;\n                var categoryPoints = this.categoryPoints[categoryIx];\n                var otherValues = [];\n                var categorySum = 0;\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n                    if (other) {\n                        var stack = point.series.stack;\n                        var otherStack = other.series.stack;\n\n                        if ((stack && otherStack) && stack.group !== otherStack.group) {\n                            continue;\n                        }\n\n                        if (isNumber(other.value)) {\n                            categorySum += Math.abs(other.value);\n                            otherValues.push(Math.abs(other.value));\n                        }\n                    }\n                }\n\n                if (categorySum > 0) {\n                    return point.value / categorySum;\n                }\n            }\n\n            return point.value;\n        },\n\n        plotRange: function(point, startValue) {\n            var this$1$1 = this;\n            if (startValue === void 0) { startValue = 0; }\n\n            var categoryPoints = this.categoryPoints[point.categoryIx];\n\n            if (this.options.isStacked) {\n                var plotValue = this.plotValue(point);\n                var positive = plotValue >= 0;\n                var prevValue = startValue;\n                var isStackedBar = false;\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n\n                    if (point === other) {\n                        break;\n                    }\n\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n                    if (stack && otherStack) {\n                        if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                            continue;\n                        }\n\n                        if (stack.group && stack.group !== otherStack.group) {\n                            continue;\n                        }\n                    }\n\n                    var otherValue = this$1$1.plotValue(other);\n                    if ((otherValue >= 0 && positive) ||\n                        (otherValue < 0 && !positive)) {\n                        prevValue += otherValue;\n                        plotValue += otherValue;\n                        isStackedBar = true;\n\n                        if (this$1$1.options.isStacked100) {\n                            plotValue = Math.min(plotValue, 1);\n                        }\n                    }\n                }\n\n                if (isStackedBar) {\n                    prevValue -= startValue;\n                }\n\n                return [ prevValue, plotValue ];\n            }\n\n            var series = point.series;\n            var valueAxis = this.seriesValueAxis(series);\n            var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n            return [ axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue ];\n        },\n\n        stackLimits: function(axisName, stackName) {\n            var this$1$1 = this;\n\n            var min = MAX_VALUE;\n            var max = MIN_VALUE;\n\n            for (var i = 0; i < this.categoryPoints.length; i++) {\n                var categoryPoints = this$1$1.categoryPoints[i];\n                if (!categoryPoints) {\n                    continue;\n                }\n\n                for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                    var point = categoryPoints[pIx];\n                    if (point) {\n                        if (point.series.stack === stackName || point.series.axis === axisName) {\n                            var to = this$1$1.plotRange(point, 0)[1];\n                            if (defined(to) && isFinite(to)) {\n                                max = Math.max(max, to);\n                                min = Math.min(min, to);\n                            }\n                        }\n                    }\n                }\n            }\n\n            return { min: min, max: max };\n        },\n\n        updateStackRange: function() {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var isStacked = ref.isStacked;\n            var chartSeries = ref.series;\n            var limitsCache = {};\n\n            if (isStacked) {\n                for (var i = 0; i < chartSeries.length; i++) {\n                    var series = chartSeries[i];\n                    var axisName = series.axis;\n                    var key = axisName + series.stack;\n\n                    var limits = limitsCache[key];\n                    if (!limits) {\n                        limits = this$1$1.stackLimits(axisName, series.stack);\n\n                        var errorTotals = this$1$1.errorTotals;\n                        if (errorTotals) {\n                            if (errorTotals.negative.length) {\n                                limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                            }\n                            if (errorTotals.positive.length) {\n                                limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                            }\n                        }\n\n                        if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                            limitsCache[key] = limits;\n                        } else {\n                            limits = null;\n                        }\n                    }\n\n                    if (limits) {\n                        this$1$1.valueAxisRanges[axisName] = limits;\n                    }\n                }\n            }\n        },\n\n        addErrorBar: function(point, data, categoryIx) {\n            var value = point.value;\n            var series = point.series;\n            var seriesIx = point.seriesIx;\n            var errorBars = point.options.errorBars;\n            var lowValue = data.fields[ERROR_LOW_FIELD];\n            var highValue = data.fields[ERROR_HIGH_FIELD];\n            var errorRange;\n\n            if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = { low: lowValue, high: highValue };\n            } else if (errorBars && defined(errorBars.value)) {\n                this.seriesErrorRanges = this.seriesErrorRanges || [];\n                this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] ||\n                    new ErrorRangeCalculator(errorBars.value, series, VALUE);\n\n                errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n            }\n\n            if (errorRange) {\n                point.low = errorRange.low;\n                point.high = errorRange.high;\n                this.addPointErrorBar(point, categoryIx);\n            }\n        },\n\n        addPointErrorBar: function(point, categoryIx) {\n            var isVertical = !this.options.invertAxes;\n            var options = point.options.errorBars;\n            var series = point.series;\n            var low = point.low;\n            var high = point.high;\n\n            if (this.options.isStacked) {\n                var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n                low = stackedErrorRange.low;\n                high = stackedErrorRange.high;\n            } else {\n                var fields = { categoryIx: categoryIx, series: series };\n                this.updateRange({ value: low }, fields);\n                this.updateRange({ value: high }, fields);\n            }\n\n            var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n            point.errorBars = [ errorBar ];\n            point.append(errorBar);\n        },\n\n        stackedErrorRange: function(point, categoryIx) {\n            var plotValue = this.plotRange(point, 0)[1] - point.value;\n            var low = point.low + plotValue;\n            var high = point.high + plotValue;\n\n            this.errorTotals = this.errorTotals || { positive: [], negative: [] };\n\n            if (low < 0) {\n                this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n            }\n\n            if (high > 0) {\n                this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n            }\n\n            return { low: low, high: high };\n        },\n\n        addValue: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n\n            var categoryPoints = this.categoryPoints[categoryIx];\n            if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n            }\n\n            var seriesPoints = this.seriesPoints[seriesIx];\n            if (!seriesPoints) {\n                this.seriesPoints[seriesIx] = seriesPoints = [];\n            }\n\n            var point = this.createPoint(data, fields);\n            if (point) {\n                $.extend(point, fields);\n\n                point.owner = this;\n                point.noteText = data.fields.noteText;\n                if (!defined(point.dataItem)) {\n                    point.dataItem = series.data[categoryIx];\n                }\n                this.addErrorBar(point, data, categoryIx);\n            }\n\n            this.points.push(point);\n            seriesPoints.push(point);\n            categoryPoints.push(point);\n\n            this.updateRange(data.valueFields, fields);\n        },\n\n        evalPointOptions: function(options, value, fields) {\n            var categoryIx = fields.categoryIx;\n            var category = fields.category;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var state = {\n                defaults: series._defaults,\n                excluded: [\n                    \"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\",\n                    \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                    \"drilldownSeriesFactory\"\n                ]\n            };\n\n            var doEval = this._evalSeries[seriesIx];\n            if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n            }\n\n            var pointOptions = options;\n            if (doEval) {\n                pointOptions = deepExtend({}, pointOptions);\n                evalOptions(pointOptions, {\n                    value: value,\n                    category: category,\n                    index: categoryIx,\n                    series: series,\n                    dataItem: series.data[categoryIx]\n                }, state);\n            }\n\n            return pointOptions;\n        },\n\n        updateRange: function(data, fields) {\n            var axisName = fields.series.axis;\n            var value = data.value;\n            var axisRange = this.valueAxisRanges[axisName];\n\n            if (isFinite(value) && value !== null) {\n                axisRange = this.valueAxisRanges[axisName] =\n                    axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                axisRange.min = Math.min(axisRange.min, value);\n                axisRange.max = Math.max(axisRange.max, value);\n            }\n        },\n\n        seriesValueAxis: function(series) {\n            var plotArea = this.plotArea;\n            var axisName = series.axis;\n            var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n            if (!axis) {\n                throw new Error(\"Unable to locate value axis with name \" + axisName);\n            }\n\n            return axis;\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var categorySlots = this.categorySlots = [];\n            var chartPoints = this.points;\n            var categoryAxis = this.categoryAxis;\n            var pointIx = 0;\n\n            this.traverseDataPoints(function (data, fields) {\n                var categoryIx = fields.categoryIx;\n                var currentSeries = fields.series;\n\n                var valueAxis = this$1$1.seriesValueAxis(currentSeries);\n                var point = chartPoints[pointIx++];\n\n                var categorySlot = categorySlots[categoryIx];\n                if (!categorySlot) {\n                    categorySlots[categoryIx] = categorySlot =\n                        this$1$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n                }\n\n                if (point) {\n                    var plotRange = this$1$1.plotRange(point, valueAxis.startValue());\n                    var valueSlot = this$1$1.valueSlot(valueAxis, plotRange);\n                    if (valueSlot) {\n                        var pointSlot = this$1$1.pointSlot(categorySlot, valueSlot);\n\n                        point.aboveAxis = this$1$1.aboveAxis(point, valueAxis);\n                        point.stackValue = plotRange[1];\n\n                        if (this$1$1.options.isStacked100) {\n                            point.percentage = this$1$1.plotValue(point);\n                        }\n\n                        this$1$1.reflowPoint(point, pointSlot);\n                    } else {\n                        point.visible = false;\n                    }\n                }\n            });\n\n            this.reflowCategories(categorySlots);\n            if (!this.options.clip && this.options.limitPoints && this.points.length) {\n                this.limitPoints();\n            }\n\n            this.box = targetBox;\n        },\n\n        valueSlot: function(valueAxis, plotRange) {\n            return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n        },\n\n        limitPoints: function() {\n            var this$1$1 = this;\n\n            var categoryPoints = this.categoryPoints;\n            var points = categoryPoints[0].concat(last(categoryPoints));\n            for (var idx = 0; idx < points.length; idx++) {\n                if (points[idx]) {\n                    this$1$1.limitPoint(points[idx]);\n                }\n            }\n        },\n\n        limitPoint: function(point) {\n            var limittedSlot = this.categoryAxis.limitSlot(point.box);\n            if (!limittedSlot.equals(point.box)) {\n                point.reflow(limittedSlot);\n            }\n        },\n\n        aboveAxis: function(point, valueAxis) {\n            var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n            var value = point.value;\n\n            return valueAxis.options.reverse ?\n                value < axisCrossingValue : value >= axisCrossingValue;\n        },\n\n        categoryAxisCrossingValue: function(valueAxis) {\n            var categoryAxis = this.categoryAxis;\n            var options = valueAxis.options;\n            var crossingValues = [].concat(\n                options.axisCrossingValues || options.axisCrossingValue\n            );\n\n            return crossingValues[categoryAxis.axisIndex || 0] || 0;\n        },\n\n        reflowPoint: function(point, pointSlot) {\n            point.reflow(pointSlot);\n        },\n\n        reflowCategories: function() { },\n\n        pointSlot: function(categorySlot, valueSlot) {\n            var options = this.options;\n            var invertAxes = options.invertAxes;\n            var slotX = invertAxes ? valueSlot : categorySlot;\n            var slotY = invertAxes ? categorySlot : valueSlot;\n\n            return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n        },\n\n        categorySlot: function(categoryAxis, categoryIx) {\n            return categoryAxis.getSlot(categoryIx);\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var count = categoriesCount(series);\n            var seriesCount = series.length;\n\n            for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                this$1$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n            }\n\n            for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n                for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                    var currentSeries = series[seriesIx$1];\n                    var currentCategory = this$1$1.categoryAxis.categoryAt(categoryIx);\n                    var pointData = this$1$1._bindPoint(currentSeries, seriesIx$1, categoryIx);\n\n                    callback(pointData, {\n                        category: currentCategory,\n                        categoryIx: categoryIx,\n                        categoriesCount: count,\n                        series: currentSeries,\n                        seriesIx: seriesIx$1\n                    });\n                }\n            }\n\n            for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n                this$1$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n            }\n        },\n\n        _outOfRangeCallback: function(series, field, seriesIx, callback) {\n            var outOfRangePoint = series[field];\n            if (outOfRangePoint) {\n                var categoryIx = outOfRangePoint.categoryIx;\n                var pointData = this._bindPoint(series, seriesIx, categoryIx, outOfRangePoint.item);\n\n                callback(pointData, {\n                    category: outOfRangePoint.category,\n                    categoryIx: categoryIx,\n                    series: series,\n                    seriesIx: seriesIx,\n                    dataItem: outOfRangePoint.item\n                });\n            }\n        },\n\n        _bindPoint: function(series, seriesIx, categoryIx, item) {\n            if (!this._bindCache) {\n                this._bindCache = [];\n            }\n\n            var bindCache = this._bindCache[seriesIx];\n            if (!bindCache) {\n                bindCache = this._bindCache[seriesIx] = [];\n            }\n\n            var data = bindCache[categoryIx];\n            if (!data) {\n                data = bindCache[categoryIx] = SeriesBinder.current.bindPoint(series, categoryIx, item);\n            }\n\n            return data;\n        },\n\n        formatPointValue: function(point, format) {\n            if (point.value === null) {\n                return \"\";\n            }\n\n            return this.chartService.format.auto(format, point.value);\n        },\n\n        pointValue: function(data) {\n            return data.valueFields.value;\n        }\n    });\n\n    setDefaultOptions(CategoricalChart, {\n        series: [],\n        invertAxes: false,\n        isStacked: false,\n        clip: true,\n        limitPoints: true\n    });\n\n    var PointEventsMixin = {\n        click: function(chart, e) {\n            return chart.trigger(\n                SERIES_CLICK,\n                this.eventArgs(e)\n            );\n        },\n\n        hover: function(chart, e) {\n            return chart.trigger(\n                SERIES_HOVER,\n                this.eventArgs(e)\n            );\n        },\n\n        over: function(chart, e) {\n            return chart.trigger(\n                SERIES_OVER,\n                this.eventArgs(e)\n            );\n        },\n\n        out: function(chart, e) {\n            return chart.trigger(\n                SERIES_LEAVE,\n                this.eventArgs(e)\n            );\n        },\n\n        eventArgs: function(e) {\n            return {\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                category: this.category,\n                series: this.series,\n                dataItem: this.dataItem,\n                runningTotal: this.runningTotal,\n                total: this.total,\n                element: eventElement(e),\n                originalEvent: e,\n                point: this\n            };\n        }\n    };\n\n    var NoteMixin = {\n        createNote: function() {\n            var options = this.options.notes;\n            var text = this.noteText || options.label.text;\n\n            if (options.visible !== false && defined(text) && text !== null) {\n                this.note = new dataviz.Note({\n                    value: this.value,\n                    text: text,\n                    dataItem: this.dataItem,\n                    category: this.category,\n                    series: this.series\n                }, this.options.notes, this.owner.chartService);\n\n                this.append(this.note);\n            }\n        }\n    };\n\n    var LinePoint = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.value = value;\n            this.options = options;\n            this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n            this.tooltipTracking = true;\n        },\n\n        render: function() {\n            var ref = this.options;\n            var markers = ref.markers;\n            var labels = ref.labels;\n\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            if (markers.visible && markers.size) {\n                this.marker = this.createMarker();\n                this.append(this.marker);\n            }\n\n            if (labels.visible) {\n                var labelTemplate = getTemplate(labels);\n                var pointData = this.pointData();\n                var labelText = this.value;\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else if (labels.format) {\n                    labelText = this.formatValue(labels.format);\n                }\n                this.label = new TextBox(labelText,\n                    deepExtend({\n                        align: CENTER,\n                        vAlign: CENTER,\n                        margin: {\n                            left: 5,\n                            right: 5\n                        },\n                        zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                    }, labels),\n                    pointData\n                );\n                this.append(this.label);\n            }\n\n            this.createNote();\n\n            if (this.errorBar) {\n                this.append(this.errorBar);\n            }\n        },\n\n        markerBorder: function() {\n            var options = this.options.markers;\n            var background = options.background;\n            var border = deepExtend({ color: this.color }, options.border);\n\n            if (!defined(border.color)) {\n                border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n            }\n\n            return border;\n        },\n\n        createVisual: function() {},\n\n        createMarker: function() {\n            var options = this.options.markers;\n            var marker = new ShapeElement({\n                type: options.type,\n                width: options.size,\n                height: options.size,\n                rotation: options.rotation,\n                background: options.background,\n                border: this.markerBorder(),\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n                animation: options.animation,\n                visual: options.visual\n            }, {\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                category: this.category\n            });\n\n            return marker;\n        },\n\n        markerBox: function() {\n            if (!this.marker) {\n                this.marker = this.createMarker();\n                this.marker.reflow(this._childBox);\n            }\n\n            return this.marker.box;\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var aboveAxis = ref.aboveAxis;\n            var vertical = options.vertical;\n\n            this.render();\n\n            this.box = targetBox;\n            var childBox = targetBox.clone();\n\n            if (vertical) {\n                if (aboveAxis) {\n                    childBox.y1 -= childBox.height();\n                } else {\n                    childBox.y2 += childBox.height();\n                }\n            } else {\n                if (aboveAxis) {\n                    childBox.x1 += childBox.width();\n                } else {\n                    childBox.x2 -= childBox.width();\n                }\n            }\n\n            this._childBox = childBox;\n            if (this.marker) {\n                this.marker.reflow(childBox);\n            }\n\n            this.reflowLabel(childBox);\n\n            if (this.errorBars) {\n                for (var i = 0; i < this.errorBars.length; i++) {\n                    this$1$1.errorBars[i].reflow(childBox);\n                }\n            }\n\n            if (this.note) {\n                var noteTargetBox = this.markerBox();\n\n                if (!(options.markers.visible && options.markers.size)) {\n                    var center = noteTargetBox.center();\n                    noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n                }\n\n                this.note.reflow(noteTargetBox);\n            }\n        },\n\n        reflowLabel: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var label = ref.label;\n            var anchor = options.labels.position;\n\n            if (label) {\n                anchor = anchor === ABOVE ? TOP : anchor;\n                anchor = anchor === BELOW ? BOTTOM : anchor;\n\n                label.reflow(box);\n                label.box.alignTo(this.markerBox(), anchor);\n                label.reflow(label.box);\n            }\n        },\n\n        createHighlight: function() {\n            var markers = this.options.highlight.markers;\n            var defaultColor = this.markerBorder().color;\n            var options = this.options.markers;\n            var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n            var shadow = new ShapeElement({\n                type: options.type,\n                width: size,\n                height: size,\n                rotation: options.rotation,\n                background: markers.color || defaultColor,\n                border: {\n                    color: markers.border.color,\n                    width: markers.border.width,\n                    opacity: valueOrDefault(markers.border.opacity, 1)\n                },\n                opacity: valueOrDefault(markers.opacity, 1)\n            });\n            shadow.reflow(this._childBox);\n\n            return shadow.getElement();\n        },\n\n        highlightVisual: function() {\n            return (this.marker || {}).visual;\n        },\n\n        highlightVisualArgs: function() {\n            var marker = this.marker;\n            var visual, rect;\n\n            if (marker) {\n                rect = marker.paddingBox.toRect();\n                visual = marker.visual;\n            } else {\n                var size = this.options.markers.size;\n                var halfSize = size / 2;\n                var center = this.box.center();\n                rect = new geometry.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n            }\n\n            return {\n                options: this.options,\n                rect: rect,\n                visual: visual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var markerBox = this.markerBox();\n            var clipBox = this.owner.pane.clipBox();\n            var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n            if (showTooltip) {\n                var x = markerBox.x2 + TOOLTIP_OFFSET;\n                var horizontalAlign = LEFT;\n                var y, verticalAlign;\n\n                if (this.aboveAxis) {\n                    y = markerBox.y1;\n                    verticalAlign = BOTTOM;\n                } else {\n                    y = markerBox.y2;\n                    verticalAlign = TOP;\n                }\n\n                return {\n                    point: new Point(x, y),\n                    align: {\n                        horizontal: horizontalAlign,\n                        vertical: verticalAlign\n                    }\n                };\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        overlapsBox: function(box) {\n            var markerBox = this.markerBox();\n            return markerBox.overlaps(box);\n        },\n\n        unclipElements: function() {\n            if (this.label) {\n                this.label.options.noclip = true;\n            }\n\n            if (this.note) {\n                this.note.options.noclip = true;\n            }\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                series: this.series\n            };\n        }\n    });\n\n    LinePoint.prototype.defaults = {\n        vertical: true,\n        markers: {\n            visible: true,\n            background: WHITE,\n            size: LINE_MARKER_SIZE,\n            type: CIRCLE,\n            border: {\n                width: 2\n            },\n            opacity: 1\n        },\n        labels: {\n            visible: false,\n            position: ABOVE,\n            margin: getSpacing(3),\n            padding: getSpacing(4),\n            animation: {\n                type: FADEIN,\n                delay: INITIAL_ANIMATION_DURATION\n            }\n        },\n        notes: {\n            label: {}\n        },\n        highlight: {\n            markers: {\n                border: {\n                    color: \"#fff\",\n                    width: 2\n                }\n            },\n            zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n        },\n        errorBars: {\n            line: {\n                width: 1\n            }\n        }\n    };\n\n    deepExtend(LinePoint.prototype, PointEventsMixin);\n    deepExtend(LinePoint.prototype, NoteMixin);\n\n    var LineSegment = ChartElement.extend({\n        init: function(linePoints, series, seriesIx) {\n            ChartElement.fn.init.call(this);\n\n            this.linePoints = linePoints;\n            this.series = series;\n            this.seriesIx = seriesIx;\n        },\n\n        points: function() {\n            return this.toGeometryPoints(this.linePoints);\n        },\n\n        toGeometryPoints: function(points) {\n            var result = [];\n            for (var i = 0, length = points.length; i < length; i++) {\n                if (points[i] && points[i].visible !== false) {\n                    result.push(points[i]._childBox.toRect().center());\n                }\n            }\n\n            return result;\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var customVisual = this.series.visual;\n            if (customVisual) {\n                this.visual = customVisual({\n                    points: this.toGeometryPoints(this.linePoints),\n                    series: this.series,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                        this$1$1.segmentVisual();\n\n                        return this$1$1.visual;\n                    }\n                });\n                if (this.visual && !defined(this.visual.options.zIndex)) {\n                    this.visual.options.zIndex = this.series.zIndex;\n                }\n            } else {\n                this.segmentVisual();\n            }\n        },\n\n        segmentVisual: function() {\n            var ref = this;\n            var options = ref.options;\n            var series = ref.series;\n            var color = series.color;\n            var defaults = series._defaults;\n\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var line = Path.fromPoints(this.points(), {\n                stroke: {\n                    color: color,\n                    width: series.width,\n                    opacity: series.opacity,\n                    dashType: series.dashType\n                },\n                zIndex: series.zIndex\n            });\n\n            if (options.closed) {\n                line.close();\n            }\n\n            this.visual = line;\n        },\n\n        aliasFor: function(e, coords) {\n            return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n        }\n    });\n\n    setDefaultOptions(LineSegment, {\n        closed: false\n    });\n\n    var StepLineMixin = {\n        calculateStepPoints: function(points) {\n            var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n            var ref = categoryAxis.options;\n            var justified = ref.justified;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n\n            var stepAxis = vertical ? X : Y;\n            var axis = vertical ? Y : X;\n            var stepDir = reverse ? 2 : 1;\n            var dir = stepDir;\n\n            var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n            var result = [ previousPoint ];\n\n            for (var idx = 1; idx < points.length; idx++) {\n                var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n                if (previousPoint[stepAxis] !== point[stepAxis]) {\n                    var stepPoint = new GeometryPoint();\n                    stepPoint[stepAxis] = previousPoint[stepAxis];\n                    stepPoint[axis] = point[axis];\n\n                    result.push(stepPoint, point);\n                }\n\n                previousPoint = point;\n            }\n\n            if (!justified) {\n                result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n            } else if (previousPoint !== last(result)) {\n                result.push(previousPoint);\n            }\n\n            return result;\n\n        }\n    };\n\n    function toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n        var box = lintPoint.box;\n        var result = new GeometryPoint();\n\n        result[stepAxis] = box[stepAxis + stepDir];\n        result[axis] = box[axis + dir];\n\n        return result;\n    }\n\n    var StepLineSegment = LineSegment.extend({\n        points: function() {\n            return this.calculateStepPoints(this.linePoints);\n        }\n    });\n\n    deepExtend(StepLineSegment.prototype, StepLineMixin);\n\n    var SplineSegment = LineSegment.extend({\n        segmentVisual: function() {\n            var series = this.series;\n            var defaults = series._defaults;\n            var color = series.color;\n\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var curveProcessor = new CurveProcessor(this.options.closed);\n            var segments = curveProcessor.process(this.points());\n            var curve = new Path({\n                stroke: {\n                    color: color,\n                    width: series.width,\n                    opacity: series.opacity,\n                    dashType: series.dashType\n                },\n                zIndex: series.zIndex\n            });\n\n            curve.segments.push.apply(curve.segments, segments);\n\n            this.visual = curve;\n        }\n    });\n\n    var LineChartMixin = {\n        renderSegments: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var seriesPoints = ref.seriesPoints;\n            var series = options.series;\n            var seriesCount = seriesPoints.length;\n            var lastSegment;\n\n            this._segments = [];\n\n            for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var sortedPoints = this$1$1.sortPoints(seriesPoints[seriesIx]);\n                var pointCount = sortedPoints.length;\n                var linePoints = [];\n\n                for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                    var point = sortedPoints[pointIx];\n                    if (point) {\n                        linePoints.push(point);\n                    } else if (this$1$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                        if (linePoints.length > 1) {\n                            lastSegment = this$1$1.createSegment(\n                                linePoints, currentSeries, seriesIx, lastSegment\n                            );\n                            this$1$1._addSegment(lastSegment);\n                        }\n                        linePoints = [];\n                    }\n                }\n\n                if (linePoints.length > 1) {\n                    lastSegment = this$1$1.createSegment(\n                        linePoints, currentSeries, seriesIx, lastSegment\n                    );\n                    this$1$1._addSegment(lastSegment);\n                }\n            }\n\n            this.children.unshift.apply(this.children, this._segments);\n        },\n\n        _addSegment: function(segment) {\n            this._segments.push(segment);\n            segment.parent = this;\n        },\n\n        sortPoints: function(points) {\n            return points;\n        },\n\n        seriesMissingValues: function(series) {\n            var missingValues = series.missingValues;\n            var assumeZero = !missingValues && this.options.isStacked;\n\n            return assumeZero ? ZERO : missingValues || INTERPOLATE;\n        },\n\n        getNearestPoint: function(x, y, seriesIx) {\n            var target = new Point(x, y);\n            var allPoints = this.seriesPoints[seriesIx];\n            var nearestPointDistance = MAX_VALUE;\n            var nearestPoint;\n\n            for (var i = 0; i < allPoints.length; i++) {\n                var point = allPoints[i];\n\n                if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                    var pointBox = point.box;\n                    var pointDistance = pointBox.center().distanceTo(target);\n\n                    if (pointDistance < nearestPointDistance) {\n                        nearestPoint = point;\n                        nearestPointDistance = pointDistance;\n                    }\n                }\n            }\n\n            return nearestPoint;\n        }\n    };\n\n    var ClipAnimation = Animation.extend({\n        setup: function() {\n            this._setEnd(this.options.box.x1);\n        },\n\n        step: function(pos) {\n            var box = this.options.box;\n            this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n        },\n\n        _setEnd: function(x) {\n            var element = this.element;\n            var segments = element.segments;\n            var topRight = segments[1].anchor();\n            var bottomRight = segments[2].anchor();\n\n            element.suspend();\n            topRight.setX(x);\n            element.resume();\n            bottomRight.setX(x);\n        }\n    });\n\n    setDefaultOptions(ClipAnimation, {\n        duration: INITIAL_ANIMATION_DURATION\n    });\n\n    AnimationFactory.current.register(\"clip\", ClipAnimation);\n\n    function anyHasZIndex(elements) {\n        for (var idx = 0; idx < elements.length; idx++) {\n            if (defined(elements[idx].zIndex)) {\n                return true;\n            }\n        }\n    }\n\n    var ClipAnimationMixin = {\n        createAnimation: function() {\n            var root = this.getRoot();\n            if (root && (root.options || {}).transitions !== false) {\n                var box = root.size();\n                var clipPath = Path.fromRect(box.toRect());\n                this.visual.clip(clipPath);\n                this.animation = new ClipAnimation(clipPath, {\n                    box: box\n                });\n                if (anyHasZIndex(this.options.series)) {\n                    this._setChildrenAnimation(clipPath);\n                }\n            }\n        },\n\n        _setChildrenAnimation: function(clipPath) {\n            var points = this.animationPoints();\n\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point && point.visual && defined(point.visual.options.zIndex)) {\n                    point.visual.clip(clipPath);\n                }\n            }\n        }\n    };\n\n    var LineChart = CategoricalChart.extend({\n        render: function() {\n\n            CategoricalChart.fn.render.call(this);\n\n            this.updateStackRange();\n            this.renderSegments();\n        },\n\n        pointType: function() {\n            return LinePoint;\n        },\n\n        createPoint: function(data, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var missingValues = this.seriesMissingValues(series);\n            var value = data.valueFields.value;\n\n            if (!defined(value) || value === null) {\n                if (missingValues === ZERO) {\n                    value = 0;\n                } else {\n                    return null;\n                }\n            }\n\n            var pointOptions = this.pointOptions(series, seriesIx);\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            var color = data.fields.color || series.color;\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var point = new LinePoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        plotRange: function(point) {\n            var this$1$1 = this;\n\n            var plotValue = this.plotValue(point);\n\n            if (this.options.isStacked) {\n                var categoryIx = point.categoryIx;\n                var categoryPoints = this.categoryPoints[categoryIx];\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n\n                    if (point === other) {\n                        break;\n                    }\n\n                    plotValue += this$1$1.plotValue(other);\n\n                    if (this$1$1.options.isStacked100) {\n                        plotValue = Math.min(plotValue, 1);\n                    }\n                }\n\n            }\n\n            return [ plotValue, plotValue ];\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = currentSeries.style;\n            var pointType;\n\n            if (style === STEP) {\n                pointType = StepLineSegment;\n            } else if (style === SMOOTH) {\n                pointType = SplineSegment;\n            } else {\n                pointType = LineSegment;\n            }\n\n            return new pointType(linePoints, currentSeries, seriesIx);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n            }\n            return result.concat(this._segments);\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return false;\n        }\n    });\n\n    deepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n\n    var AreaSegment = LineSegment.extend({\n        init: function(linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n            LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n\n            this.prevSegment = prevSegment;\n            this.stackPoints = stackPoints;\n        },\n\n        createVisual: function() {\n            var series = this.series;\n            var defaults = series._defaults;\n            var lineOptions = series.line || {};\n            var color = series.color;\n\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            this.visual = new Group({\n                zIndex: series.zIndex\n            });\n\n            this.createFill({\n                fill: {\n                    color: color,\n                    opacity: series.opacity\n                },\n                stroke: null\n            });\n\n            if (lineOptions.width > 0 && lineOptions.visible !== false) {\n                this.createStroke({\n                    stroke: deepExtend({\n                        color: color,\n                        opacity: series.opacity,\n                        lineCap: \"butt\"\n                    }, lineOptions)\n                });\n            }\n        },\n\n        strokeSegments: function() {\n            var segments = this._strokeSegments;\n\n            if (!segments) {\n                segments = this._strokeSegments = this.createStrokeSegments();\n            }\n\n            return segments;\n        },\n\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.points());\n        },\n\n        stackSegments: function() {\n            if (this.prevSegment) {\n                return this.prevSegment.createStackSegments(this.stackPoints);\n            }\n\n            return this.createStackSegments(this.stackPoints);\n        },\n\n        createStackSegments: function(stackPoints) {\n            return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n        },\n\n        segmentsFromPoints: function(points) {\n            return points.map(function (point) { return new geometry.Segment(point); });\n        },\n\n        createStroke: function(style) {\n            var stroke = new Path(style);\n            stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n\n            this.visual.append(stroke);\n        },\n\n        hasStackSegment: function() {\n            return this.prevSegment || (this.stackPoints && this.stackPoints.length);\n        },\n\n        createFill: function(style) {\n            var strokeSegments = this.strokeSegments();\n            var fillSegments = strokeSegments.slice(0);\n            var hasStackSegments = this.hasStackSegment();\n\n            if (hasStackSegments) {\n                var stackSegments = this.stackSegments();\n\n                append(fillSegments, stackSegments);\n            }\n\n            var fill = new Path(style);\n            fill.segments.push.apply(fill.segments, fillSegments);\n\n            if (!hasStackSegments && strokeSegments.length > 1) {\n                this.fillToAxes(fill);\n            }\n\n            this.visual.append(fill);\n        },\n\n        fillToAxes: function(fillPath) {\n            var chart = this.parent;\n            var invertAxes = chart.options.invertAxes;\n            var valueAxis = chart.seriesValueAxis(this.series);\n            var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n            var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n            var segments = this.strokeSegments();\n            var firstPoint = segments[0].anchor();\n            var lastPoint = last(segments).anchor();\n            var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n            if (invertAxes) {\n                fillPath.lineTo(end, lastPoint.y)\n                        .lineTo(end, firstPoint.y);\n            } else {\n                fillPath.lineTo(lastPoint.x, end)\n                        .lineTo(firstPoint.x, end);\n            }\n        }\n    });\n\n    var StepAreaSegment = AreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n        },\n\n        createStackSegments: function(stackPoints) {\n            return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n        }\n    });\n\n    deepExtend(StepAreaSegment.prototype, StepLineMixin);\n\n    var SplineAreaSegment = AreaSegment.extend({\n        createStrokeSegments: function() {\n            var curveProcessor = new CurveProcessor(this.options.closed);\n            var linePoints = this.points();\n\n            return curveProcessor.process(linePoints);\n        },\n\n        createStackSegments: function() {\n            var strokeSegments = this.strokeSegments();\n            var stackSegments = [];\n            for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n                var segment = strokeSegments[idx];\n                stackSegments.push(new geometry.Segment(\n                    segment.anchor(),\n                    segment.controlOut(),\n                    segment.controlIn()\n                ));\n            }\n\n            return stackSegments;\n        }\n    });\n\n    var AreaChart = LineChart.extend({\n        createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n            var isStacked = this.options.isStacked;\n            var style = (currentSeries.line || {}).style;\n            var previousSegment;\n\n            var stackPoints;\n            if (isStacked && seriesIx > 0 && prevSegment) {\n                var missingValues = this.seriesMissingValues(currentSeries);\n                if (missingValues !== \"gap\") {\n                    stackPoints = prevSegment.linePoints;\n                    previousSegment = prevSegment;\n                } else {\n                    stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n                }\n            }\n\n            var pointType;\n            if (style === STEP) {\n                pointType = StepAreaSegment;\n            } else if (style === SMOOTH) {\n                pointType = SplineAreaSegment;\n            } else {\n                pointType = AreaSegment;\n            }\n\n            return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            LineChart.fn.reflow.call(this, targetBox);\n\n            var stackPoints = this._stackPoints;\n            if (stackPoints) {\n                for (var idx = 0; idx < stackPoints.length; idx++) {\n                    var stackPoint = stackPoints[idx];\n                    var pointSlot = this$1$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                    stackPoint.reflow(pointSlot);\n                }\n            }\n        },\n\n        _gapStackPoints: function(linePoints, seriesIx, style) {\n            var this$1$1 = this;\n\n            var seriesPoints = this.seriesPoints;\n            var startIdx = linePoints[0].categoryIx;\n            var length = linePoints.length;\n            if (startIdx < 0) {\n                startIdx = 0;\n                length--;\n            }\n\n            var endIdx = startIdx + length;\n            var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n            var stackPoints = [];\n\n            this._stackPoints = this._stackPoints || [];\n            for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n                var pointIx = categoryIx + pointOffset;\n                var currentSeriesIx = seriesIx;\n                var point = (void 0);\n\n                do {\n                    currentSeriesIx--;\n                    point = seriesPoints[currentSeriesIx][pointIx];\n                } while (currentSeriesIx > 0 && !point);\n\n                if (point) {\n                    if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                        stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                    }\n\n                    stackPoints.push(point);\n\n                    if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                        stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                    }\n                } else {\n                    var gapStackPoint = this$1$1._createGapStackPoint(categoryIx);\n                    this$1$1._stackPoints.push(gapStackPoint);\n                    stackPoints.push(gapStackPoint);\n                }\n            }\n\n            return stackPoints;\n        },\n\n        _previousSegmentPoint: function(categoryIx, pointIx, segmentIx, seriesIdx) {\n            var seriesPoints = this.seriesPoints;\n            var index = seriesIdx;\n            var point;\n\n            while (index > 0 && !point) {\n                index--;\n                point = seriesPoints[index][segmentIx];\n            }\n\n            if (!point) {\n                point = this._createGapStackPoint(categoryIx);\n                this._stackPoints.push(point);\n            } else {\n                point = seriesPoints[index][pointIx];\n            }\n\n            return point;\n        },\n\n        _createGapStackPoint: function(categoryIx) {\n            var options = this.pointOptions({}, 0);\n            var point = new LinePoint(0, options);\n            point.categoryIx = categoryIx;\n            point.series = {};\n\n            return point;\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues || ZERO;\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return false;\n        }\n    });\n\n    var AxisGroupRangeTracker = Class.extend({\n        init: function() {\n\n            this.axisRanges = {};\n        },\n\n        update: function(chartAxisRanges) {\n            var axisRanges = this.axisRanges;\n\n            for (var axisName in chartAxisRanges) {\n                var chartRange = chartAxisRanges[axisName];\n                var range = axisRanges[axisName];\n                axisRanges[axisName] = range = range || { min: MAX_VALUE, max: MIN_VALUE };\n\n                range.min = Math.min(range.min, chartRange.min);\n                range.max = Math.max(range.max, chartRange.max);\n            }\n        },\n\n        reset: function(axisName) {\n            this.axisRanges[axisName] = undefined;\n        },\n\n        query: function(axisName) {\n            return this.axisRanges[axisName];\n        }\n    });\n\n    var BarLabel = ChartElement.extend({\n        init: function(content, options, pointData) {\n            ChartElement.fn.init.call(this, options);\n\n            this.textBox = new TextBox(content, this.options, pointData);\n            this.append(this.textBox);\n        },\n\n        createVisual: function() {\n            this.textBox.options.noclip = this.options.noclip;\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var vertical = options.vertical;\n            var aboveAxis = options.aboveAxis;\n            var text = this.children[0];\n            var textOptions = text.options;\n            var box = text.box;\n            var padding = text.options.padding;\n            var labelBox = targetBox;\n\n            textOptions.align = vertical ? CENTER : LEFT;\n            textOptions.vAlign = vertical ? TOP : CENTER;\n\n            if (options.position === INSIDE_END) {\n                if (vertical) {\n                    textOptions.vAlign = TOP;\n\n                    if (!aboveAxis && box.height() < targetBox.height()) {\n                        textOptions.vAlign = BOTTOM;\n                    }\n                } else {\n                    textOptions.align = aboveAxis ? RIGHT : LEFT;\n                }\n            } else if (options.position === CENTER) {\n                textOptions.vAlign = CENTER;\n                textOptions.align = CENTER;\n            } else if (options.position === INSIDE_BASE) {\n                if (vertical) {\n                    textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n                } else {\n                    textOptions.align = aboveAxis ? LEFT : RIGHT;\n                }\n            } else if (options.position === OUTSIDE_END) {\n                if (vertical) {\n                    if (aboveAxis) {\n                        labelBox = new Box(\n                            targetBox.x1, targetBox.y1 - box.height(),\n                            targetBox.x2, targetBox.y1\n                        );\n                    } else {\n                        labelBox = new Box(\n                            targetBox.x1, targetBox.y2,\n                            targetBox.x2, targetBox.y2 + box.height()\n                        );\n                    }\n                } else {\n                    textOptions.align = CENTER;\n                    if (aboveAxis) {\n                        labelBox = new Box(\n                            targetBox.x2, targetBox.y1,\n                            targetBox.x2 + box.width(), targetBox.y2\n                        );\n                    } else {\n                        labelBox = new Box(\n                            targetBox.x1 - box.width(), targetBox.y1,\n                            targetBox.x1, targetBox.y2\n                        );\n                    }\n                }\n            }\n\n            if (!options.rotation) {\n                if (vertical) {\n                    padding.left = padding.right =\n                        (labelBox.width() - text.contentBox.width()) / 2;\n                } else {\n                    padding.top = padding.bottom =\n                        (labelBox.height() - text.contentBox.height()) / 2;\n                }\n            }\n\n            text.reflow(labelBox);\n        },\n\n        alignToClipBox: function(clipBox) {\n            var vertical = this.options.vertical;\n            var field = vertical ? Y : X;\n            var start = field + \"1\";\n            var end = field + \"2\";\n            var text = this.children[0];\n            var parentBox = this.parent.box;\n\n            if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n                var targetBox = text.paddingBox.clone();\n                targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n                targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n\n                this.reflow(targetBox);\n            }\n        }\n    });\n\n    setDefaultOptions(BarLabel, {\n        position: OUTSIDE_END,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        color: BLACK,\n        background: \"\",\n        border: {\n            width: 1,\n            color: \"\"\n        },\n        aboveAxis: true,\n        vertical: false,\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        zIndex: 2\n    });\n\n    function hasGradientOverlay(options) {\n        var overlay = options.overlay;\n\n        return overlay && overlay.gradient && overlay.gradient !== \"none\";\n    }\n\n    var BAR_ALIGN_MIN_WIDTH = 6;\n\n    var Bar = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.options = options;\n            this.color = options.color || WHITE;\n            this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n            this.value = value;\n        },\n\n        render: function() {\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            this.createLabel();\n            this.createNote();\n\n            if (this.errorBar) {\n                this.append(this.errorBar);\n            }\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labels = options.labels;\n\n            if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else {\n                    labelText = this.formatValue(labels.format);\n                }\n\n                this.label = new BarLabel(labelText,\n                    deepExtend({\n                        vertical: options.vertical\n                    },\n                    labels\n                ), pointData);\n                this.append(this.label);\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            this.render();\n\n            var label = this.label;\n\n            this.box = targetBox;\n\n            if (label) {\n                label.options.aboveAxis = this.aboveAxis;\n                label.reflow(targetBox);\n            }\n\n            if (this.note) {\n                this.note.reflow(targetBox);\n            }\n\n            if (this.errorBars) {\n                for (var i = 0; i < this.errorBars.length; i++) {\n                    this$1$1.errorBars[i].reflow(targetBox);\n                }\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var box = ref.box;\n            var options = ref.options;\n            var customVisual = options.visual;\n\n            if (this.visible !== false) {\n                ChartElement.fn.createVisual.call(this);\n\n                if (customVisual) {\n                    var visual = this.rectVisual = customVisual({\n                        category: this.category,\n                        dataItem: this.dataItem,\n                        value: this.value,\n                        sender: this.getSender(),\n                        series: this.series,\n                        percentage: this.percentage,\n                        stackValue: this.stackValue,\n                        runningTotal: this.runningTotal,\n                        total: this.total,\n                        rect: box.toRect(),\n                        createVisual: function () {\n                            var group = new Group();\n                            this$1$1.createRect(group);\n                            return group;\n                        },\n                        options: options\n                    });\n\n                    if (visual) {\n                        this.visual.append(visual);\n                    }\n                } else if (box.width() > 0 && box.height() > 0) {\n                    this.createRect(this.visual);\n                }\n            }\n        },\n\n        createRect: function(visual) {\n            var options = this.options;\n            var border = options.border;\n            var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n            var rect = this.box.toRect();\n\n            rect.size.width = Math.round(rect.size.width);\n\n            var path = this.rectVisual = Path.fromRect(rect, {\n                fill: {\n                    color: this.color,\n                    opacity: options.opacity\n                },\n                stroke: {\n                    color: this.getBorderColor(),\n                    width: border.width,\n                    opacity: strokeOpacity,\n                    dashType: border.dashType\n                }\n            });\n\n            var width = this.box.width();\n            var height = this.box.height();\n\n            var size = options.vertical ? width : height;\n\n            if (size > BAR_ALIGN_MIN_WIDTH) {\n                alignPathToPixel(path);\n\n                // Fixes lineJoin issue in firefox when the joined lines are parallel\n                if (width < 1 || height < 1) {\n                    path.options.stroke.lineJoin = \"round\";\n                }\n            }\n\n            visual.append(path);\n\n            if (hasGradientOverlay(options)) {\n                var overlay = this.createGradientOverlay(path, { baseColor: this.color }, deepExtend({\n                    end: !options.vertical ? [ 0, 1 ] : undefined\n                }, options.overlay));\n\n                visual.append(overlay);\n            }\n        },\n\n        createHighlight: function(style) {\n            var highlight = Path.fromRect(this.box.toRect(), style);\n\n            return alignPathToPixel(highlight);\n        },\n\n        highlightVisual: function() {\n            return this.rectVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this.rectVisual\n            };\n        },\n\n        getBorderColor: function() {\n            var color = this.color;\n            var border = this.options.border;\n            var brightness = border._brightness || BORDER_BRIGHTNESS;\n            var borderColor = border.color;\n\n            if (!defined(borderColor)) {\n                borderColor = new Color(color).brightness(brightness).toHex();\n            }\n\n            return borderColor;\n        },\n\n        tooltipAnchor: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var aboveAxis = ref.aboveAxis;\n            var clipBox = this.owner.pane.clipBox() || box;\n            var horizontalAlign = LEFT;\n            var verticalAlign = TOP;\n            var x, y;\n\n            if (options.vertical) {\n                x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n                if (aboveAxis) {\n                    y = Math.max(box.y1, clipBox.y1);\n                } else {\n                    y = Math.min(box.y2, clipBox.y2);\n                    verticalAlign = BOTTOM;\n                }\n            } else {\n                var x1 = Math.max(box.x1, clipBox.x1);\n                var x2 = Math.min(box.x2, clipBox.x2);\n\n                if (options.isStacked) {\n                    verticalAlign = BOTTOM;\n                    if (aboveAxis) {\n                        horizontalAlign = RIGHT;\n                        x = x2;\n                    } else {\n                        x = x1;\n                    }\n                    y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n                } else {\n                    if (aboveAxis) {\n                        x = x2 + TOOLTIP_OFFSET;\n                    } else {\n                        x = x1 - TOOLTIP_OFFSET;\n                        horizontalAlign = RIGHT;\n                    }\n                    y = Math.max(box.y1, clipBox.y1);\n                }\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                runningTotal: this.runningTotal,\n                total: this.total,\n                series: this.series\n            };\n        }\n    });\n\n    deepExtend(Bar.prototype, PointEventsMixin);\n    deepExtend(Bar.prototype, NoteMixin);\n\n    Bar.prototype.defaults = {\n        border: {\n            width: 1\n        },\n        vertical: true,\n        overlay: {\n            gradient: \"glass\"\n        },\n        labels: {\n            visible: false,\n            format: \"{0}\"\n        },\n        opacity: 1,\n        notes: {\n            label: {}\n        }\n    };\n\n    function forEach(elements, callback) {\n        elements.forEach(callback);\n    }\n\n    function forEachReverse(elements, callback) {\n        var length = elements.length;\n\n        for (var idx = length - 1; idx >= 0; idx--) {\n            callback(elements[idx], idx - length - 1);\n        }\n    }\n\n    var ClusterLayout = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.forEach = options.rtl ? forEachReverse : forEach;\n        },\n\n        reflow: function(box) {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var gap = ref.gap;\n            var spacing = ref.spacing;\n            var children = this.children;\n            var count = children.length;\n            var axis = vertical ? Y : X;\n            var slots = count + gap + (spacing * (count - 1));\n            var slotSize = (vertical ? box.height() : box.width()) / slots;\n            var position = box[axis + 1] + slotSize * (gap / 2);\n\n            this.forEach(children, function (child, idx) {\n                var childBox = (child.box || box).clone();\n\n                childBox[axis + 1] = position;\n                childBox[axis + 2] = position + slotSize;\n\n                child.reflow(childBox);\n                if (idx < count - 1) {\n                    position += (slotSize * spacing);\n                }\n\n                position += slotSize;\n            });\n        }\n    });\n\n    setDefaultOptions(ClusterLayout, {\n        vertical: false,\n        gap: 0,\n        spacing: 0\n    });\n\n    var StackWrap = ChartElement.extend({\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var positionAxis = this.options.vertical ? X : Y;\n            var children = this.children;\n            var childrenCount = children.length;\n            var box = this.box = new Box();\n\n            for (var i = 0; i < childrenCount; i++) {\n                var currentChild = children[i];\n\n                if (currentChild.visible !== false) {\n                    var childBox = currentChild.box.clone();\n                    childBox.snapTo(targetBox, positionAxis);\n\n                    if (i === 0) {\n                        box = this$1$1.box = childBox.clone();\n                    }\n\n                    currentChild.reflow(childBox);\n                    box.wrap(childBox);\n                }\n            }\n        }\n    });\n\n    setDefaultOptions(StackWrap, {\n        vertical: true\n    });\n\n    var BarChart = CategoricalChart.extend({\n        render: function() {\n            CategoricalChart.fn.render.call(this);\n            this.updateStackRange();\n        },\n\n        pointType: function() {\n            return Bar;\n        },\n\n        clusterType: function() {\n            return ClusterLayout;\n        },\n\n        stackType: function() {\n            return StackWrap;\n        },\n\n        stackLimits: function(axisName, stackName) {\n            var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n\n            return limits;\n        },\n\n        createPoint: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var isStacked = options.isStacked;\n            var value = this.pointValue(data);\n            var pointOptions = this.pointOptions(series, seriesIx);\n\n            var labelOptions = pointOptions.labels;\n            if (isStacked) {\n                if (labelOptions.position === OUTSIDE_END) {\n                    labelOptions.position = INSIDE_END;\n                }\n            }\n\n            pointOptions.isStacked = isStacked;\n\n            var color = data.fields.color || series.color;\n            if (value < 0 && pointOptions.negativeColor) {\n                color = pointOptions.negativeColor;\n            }\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var pointType = this.pointType();\n            var point = new pointType(value, pointOptions);\n            point.color = color;\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                var clusterType = this.clusterType();\n                cluster = new clusterType({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            if (isStacked) {\n                var stackWrap = this.getStackWrap(series, cluster);\n                stackWrap.append(point);\n            } else {\n                cluster.append(point);\n            }\n\n            return point;\n        },\n\n        getStackWrap: function(series, cluster) {\n            var stack = series.stack;\n            var stackGroup = stack ? stack.group || stack : stack;\n            var wraps = cluster.children;\n            var stackWrap;\n\n            if (typeof stackGroup === datavizConstants.STRING) {\n                for (var i = 0; i < wraps.length; i++) {\n                    if (wraps[i]._stackGroup === stackGroup) {\n                        stackWrap = wraps[i];\n                        break;\n                    }\n                }\n            } else {\n                stackWrap = wraps[0];\n            }\n\n            if (!stackWrap) {\n                var stackType = this.stackType();\n                stackWrap = new stackType({\n                    vertical: !this.options.invertAxes\n                });\n                stackWrap._stackGroup = stackGroup;\n                cluster.append(stackWrap);\n            }\n\n            return stackWrap;\n        },\n\n        categorySlot: function(categoryAxis, categoryIx, valueAxis) {\n            var options = this.options;\n            var categorySlot = categoryAxis.getSlot(categoryIx);\n            var startValue = valueAxis.startValue();\n\n            if (options.isStacked) {\n                var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n                var stackAxis = options.invertAxes ? X : Y;\n                categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n            }\n\n            return categorySlot;\n        },\n\n        reflowCategories: function(categorySlots) {\n            var children = this.children;\n            var childrenLength = children.length;\n\n            for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n            }\n        },\n\n        createAnimation: function() {\n            this._setAnimationOptions();\n            CategoricalChart.fn.createAnimation.call(this);\n\n            if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation();\n            }\n        },\n\n        _setChildrenAnimation: function() {\n            var this$1$1 = this;\n\n            var points = this.points;\n\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                var pointVisual = point.visual;\n                if (pointVisual && defined(pointVisual.options.zIndex)) {\n                    point.options.animation = this$1$1.options.animation;\n                    point.createAnimation();\n                }\n            }\n        },\n\n        _setAnimationOptions: function() {\n            var options = this.options;\n            var animation = options.animation || {};\n            var origin;\n\n            if (options.isStacked) {\n                var valueAxis = this.seriesValueAxis(options.series[0]);\n                origin = valueAxis.getSlot(valueAxis.startValue());\n            } else {\n                origin = this.categoryAxis.getSlot(0);\n            }\n\n            animation.origin = new GeometryPoint(origin.x1, origin.y1);\n            animation.vertical = !options.invertAxes;\n        }\n    });\n\n    setDefaultOptions(BarChart, {\n        animation: {\n            type: BAR\n        }\n    });\n\n    var Candlestick = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this, options);\n            this.value = value;\n        },\n\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var value = ref.value;\n            var chart = ref.owner;\n            var valueAxis = chart.seriesValueAxis(options);\n            var ocSlot = valueAxis.getSlot(value.open, value.close);\n            var lhSlot = valueAxis.getSlot(value.low, value.high);\n\n            ocSlot.x1 = lhSlot.x1 = box.x1;\n            ocSlot.x2 = lhSlot.x2 = box.x2;\n\n            this.realBody = ocSlot;\n\n            var mid = lhSlot.center().x;\n            var points = [];\n\n            points.push([ [ mid, lhSlot.y1 ], [ mid, ocSlot.y1 ] ]);\n            points.push([ [ mid, ocSlot.y2 ], [ mid, lhSlot.y2 ] ]);\n\n            this.lines = points;\n\n            this.box = lhSlot.clone().wrap(ocSlot);\n\n            if (!this._rendered) {\n                this._rendered = true;\n                this.createNote();\n            }\n\n            this.reflowNote();\n        },\n\n        reflowNote: function() {\n            if (this.note) {\n                this.note.reflow(this.box);\n            }\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n            this._mainVisual = this.mainVisual(this.options);\n            this.visual.append(\n                this._mainVisual\n            );\n\n            this.createOverlay();\n        },\n\n        mainVisual: function(options) {\n            var group = new Group();\n\n            this.createBody(group, options);\n            this.createLines(group, options);\n\n            return group;\n        },\n\n        createBody: function(container, options) {\n            var body = Path.fromRect(this.realBody.toRect(), {\n                fill: {\n                    color: this.color,\n                    opacity: options.opacity\n                },\n                stroke: null\n            });\n\n            if (options.border.width > 0) {\n                body.options.set(\"stroke\", {\n                    color: this.getBorderColor(),\n                    width: options.border.width,\n                    dashType: options.border.dashType,\n                    opacity: valueOrDefault(options.border.opacity, options.opacity)\n                });\n            }\n\n            alignPathToPixel(body);\n            container.append(body);\n\n            if (hasGradientOverlay(options)) {\n                container.append(this.createGradientOverlay(body, { baseColor: this.color }, deepExtend({\n                    end: !options.vertical ? [ 0, 1 ] : undefined\n                }, options.overlay)));\n            }\n        },\n\n        createLines: function(container, options) {\n            this.drawLines(container, options, this.lines, options.line);\n        },\n\n        drawLines: function(container, options, lines, lineOptions) {\n            if (!lines) {\n                return;\n            }\n\n            var lineStyle = {\n                stroke: {\n                    color: lineOptions.color || this.color,\n                    opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                    width: lineOptions.width,\n                    dashType: lineOptions.dashType,\n                    lineCap: \"butt\"\n                }\n            };\n\n            for (var i = 0; i < lines.length; i++) {\n                var line = Path.fromPoints(lines[i], lineStyle);\n                alignPathToPixel(line);\n                container.append(line);\n            }\n        },\n\n        getBorderColor: function() {\n            var border = this.options.border;\n            var borderColor = border.color;\n\n            if (!defined(borderColor)) {\n                borderColor = new Color(this.color).brightness(border._brightness).toHex();\n            }\n\n            return borderColor;\n        },\n\n        createOverlay: function() {\n            var overlay = Path.fromRect(this.box.toRect(), {\n                fill: {\n                    color: WHITE,\n                    opacity: 0\n                },\n                stroke: null\n            });\n\n            this.visual.append(overlay);\n        },\n\n        createHighlight: function() {\n            var highlight = this.options.highlight;\n            var normalColor = this.color;\n\n            this.color = highlight.color || this.color;\n            var overlay = this.mainVisual(\n                deepExtend({}, this.options, {\n                    line: {\n                        color: this.getBorderColor()\n                    }\n                }, highlight)\n            );\n            this.color = normalColor;\n\n            return overlay;\n        },\n\n        highlightVisual: function() {\n            return this._mainVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this._mainVisual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var box = this.box;\n            var clipBox = this.owner.pane.clipBox() || box;\n\n            return {\n                point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n                align: {\n                    horizontal: LEFT,\n                    vertical: TOP\n                }\n            };\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        }\n    });\n\n    setDefaultOptions(Candlestick, {\n        vertical: true,\n        border: {\n            _brightness: 0.8\n        },\n        line: {\n            width: 2\n        },\n        overlay: {\n            gradient: \"glass\"\n        },\n        tooltip: {\n            format: \"<table>\" +\n                        \"<tr><th colspan='2'>{4:d}</th></tr>\" +\n                        \"<tr><td>Open:</td><td>{0:C}</td></tr>\" +\n                        \"<tr><td>High:</td><td>{1:C}</td></tr>\" +\n                        \"<tr><td>Low:</td><td>{2:C}</td></tr>\" +\n                        \"<tr><td>Close:</td><td>{3:C}</td></tr>\" +\n                    \"</table>\"\n        },\n        highlight: {\n            opacity: 1,\n            border: {\n                width: 1,\n                opacity: 1\n            },\n            line: {\n                width: 1,\n                opacity: 1\n            }\n        },\n        notes: {\n            visible: true,\n            label: {}\n        }\n    });\n\n    deepExtend(Candlestick.prototype, PointEventsMixin);\n    deepExtend(Candlestick.prototype, NoteMixin);\n\n    function areNumbers(values) {\n        return countNumbers(values) === values.length;\n    }\n\n    var CandlestickChart = CategoricalChart.extend({\n        reflowCategories: function(categorySlots) {\n            var children = this.children;\n            var childrenLength = children.length;\n\n            for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n            }\n        },\n\n        addValue: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var category = fields.category;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var ref = this;\n            var children = ref.children;\n            var options = ref.options;\n            var value = data.valueFields;\n            var valueParts = this.splitValue(value);\n            var hasValue = areNumbers(valueParts);\n            var dataItem = series.data[categoryIx];\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var point;\n\n            if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n            }\n\n            if (hasValue) {\n                point = this.createPoint(data, fields);\n            }\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                cluster = new ClusterLayout({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            if (point) {\n                this.updateRange(value, fields);\n\n                cluster.append(point);\n\n                point.categoryIx = categoryIx;\n                point.category = category;\n                point.series = series;\n                point.seriesIx = seriesIx;\n                point.owner = this;\n                point.dataItem = dataItem;\n                point.noteText = data.fields.noteText;\n            }\n\n            this.points.push(point);\n            categoryPoints.push(point);\n        },\n\n        pointType: function() {\n            return Candlestick;\n        },\n\n        createPoint: function(data, fields) {\n            var series = fields.series;\n            var pointType = this.pointType();\n            var value = data.valueFields;\n            var pointOptions = deepExtend({}, series);\n            var color = data.fields.color || series.color;\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            if (series.type === CANDLESTICK) {\n                if (value.open > value.close) {\n                    color = data.fields.downColor || series.downColor || series.color;\n                }\n            }\n\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            pointOptions.vertical = !this.options.invertAxes;\n\n            var point = new pointType(value, pointOptions);\n            point.color = color;\n\n            return point;\n        },\n\n        splitValue: function(value) {\n            return [ value.low, value.open, value.close, value.high ];\n        },\n\n        updateRange: function(value, fields) {\n            var axisName = fields.series.axis;\n            var parts = this.splitValue(value);\n            var axisRange = this.valueAxisRanges[axisName];\n\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange = this.valueAxisRanges[axisName] = {\n                min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n                max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n            };\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n\n            return this.chartService.format.auto(format,\n                value.open, value.high,\n                value.low, value.close, point.category\n            );\n        },\n\n        animationPoints: function() {\n            return this.points;\n        }\n    });\n\n    deepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n\n    var BoxPlot = Candlestick.extend({\n        init: function(value, options) {\n            Candlestick.fn.init.call(this, value, options);\n\n            this.createNote();\n        },\n\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var value = ref.value;\n            var chart = ref.owner;\n            var valueAxis = chart.seriesValueAxis(options);\n            var whiskerSlot, boxSlot;\n\n            this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n            this.realBody = boxSlot;\n            this.reflowBoxSlot(box);\n\n            this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n            this.reflowWhiskerSlot(box);\n\n            var medianSlot = valueAxis.getSlot(value.median);\n\n            if (value.mean) {\n                var meanSlot = valueAxis.getSlot(value.mean);\n                this.meanPoints = this.calcMeanPoints(box, meanSlot);\n            }\n\n            this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n            this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n            this.box = whiskerSlot.clone().wrap(boxSlot);\n            this.reflowNote();\n        },\n\n        reflowBoxSlot: function(box) {\n            this.boxSlot.x1 = box.x1;\n            this.boxSlot.x2 = box.x2;\n        },\n\n        reflowWhiskerSlot: function(box) {\n            this.whiskerSlot.x1 = box.x1;\n            this.whiskerSlot.x2 = box.x2;\n        },\n\n        calcMeanPoints: function(box, meanSlot) {\n            return [\n                [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n            ];\n        },\n\n        calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n            var mid = whiskerSlot.center().x;\n            return [ [\n                [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n                [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n            ], [\n                [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n                [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n            ] ];\n        },\n\n        calcMedianPoints: function(box, medianSlot) {\n            return [\n                [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n            ];\n        },\n\n        renderOutliers: function(options) {\n            var this$1$1 = this;\n\n            var value = this.value;\n            var outliers = value.outliers || [];\n            var outerFence = Math.abs(value.q3 - value.q1) * 3;\n            var elements = [];\n            var markers = options.markers || {};\n\n            for (var i = 0; i < outliers.length; i++) {\n                var outlierValue = outliers[i];\n                if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                    markers = options.outliers;\n                } else {\n                    markers = options.extremes;\n                }\n                var markersBorder = deepExtend({}, markers.border);\n\n                if (!defined(markersBorder.color)) {\n                    if (defined(this$1$1.color)) {\n                        markersBorder.color = this$1$1.color;\n                    } else {\n                        markersBorder.color =\n                            new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                    }\n                }\n\n                var shape = new ShapeElement({\n                    type: markers.type,\n                    width: markers.size,\n                    height: markers.size,\n                    rotation: markers.rotation,\n                    background: markers.background,\n                    border: markersBorder,\n                    opacity: markers.opacity\n                });\n\n                shape.value = outlierValue;\n\n                elements.push(shape);\n            }\n\n            this.reflowOutliers(elements);\n            return elements;\n        },\n\n        reflowOutliers: function(outliers) {\n            var this$1$1 = this;\n\n            var valueAxis = this.owner.seriesValueAxis(this.options);\n            var center = this.box.center();\n\n            for (var i = 0; i < outliers.length; i++) {\n                var outlierValue = outliers[i].value;\n                var markerBox = valueAxis.getSlot(outlierValue);\n\n                if (this$1$1.options.vertical) {\n                    markerBox.move(center.x);\n                } else {\n                    markerBox.move(undefined, center.y);\n                }\n\n                this$1$1.box = this$1$1.box.wrap(markerBox);\n                outliers[i].reflow(markerBox);\n            }\n        },\n\n        mainVisual: function(options) {\n            var group = Candlestick.fn.mainVisual.call(this, options);\n            var outliers = this.renderOutliers(options);\n\n            for (var i = 0; i < outliers.length; i++) {\n                var element = outliers[i].getElement();\n                if (element) {\n                    group.append(element);\n                }\n            }\n\n            return group;\n        },\n\n        createLines: function(container, options) {\n            this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n            this.drawLines(container, options, this.medianPoints, options.median);\n            this.drawLines(container, options, this.meanPoints, options.mean);\n        },\n\n        getBorderColor: function() {\n            if ((this.options.border || {}).color) {\n                return this.options.border.color;\n            }\n\n            if (this.color) {\n                return this.color;\n            }\n\n            return Candlestick.fn.getBorderColor.call(this);\n        }\n    });\n\n    setDefaultOptions(BoxPlot, {\n        border: {\n            _brightness: 0.8\n        },\n        line: {\n            width: 2\n        },\n        median: {\n            color: \"#f6f6f6\"\n        },\n        mean: {\n            width: 2,\n            dashType: \"dash\",\n            color: \"#f6f6f6\"\n        },\n        overlay: {\n            gradient: \"glass\"\n        },\n        tooltip: {\n            format: \"<table>\" +\n                        \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                        \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                        \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                        \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                        \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                        \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                        \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                    \"</table>\"\n        },\n        highlight: {\n            opacity: 1,\n            border: {\n                width: 1,\n                opacity: 1\n            },\n            line: {\n                width: 1,\n                opacity: 1\n            }\n        },\n        notes: {\n            visible: true,\n            label: {}\n        },\n        outliers: {\n            visible: true,\n            size: LINE_MARKER_SIZE,\n            type: datavizConstants.CROSS,\n            background: WHITE,\n            border: {\n                width: 2,\n                opacity: 1\n            },\n            opacity: 0\n        },\n        extremes: {\n            visible: true,\n            size: LINE_MARKER_SIZE,\n            type: CIRCLE,\n            background: WHITE,\n            border: {\n                width: 2,\n                opacity: 1\n            },\n            opacity: 0\n        }\n    });\n\n    deepExtend(BoxPlot.prototype, PointEventsMixin);\n\n    var VerticalBoxPlot = BoxPlot.extend({\n        reflowBoxSlot: function(box) {\n            this.boxSlot.y1 = box.y1;\n            this.boxSlot.y2 = box.y2;\n        },\n\n        reflowWhiskerSlot: function(box) {\n            this.whiskerSlot.y1 = box.y1;\n            this.whiskerSlot.y2 = box.y2;\n        },\n\n        calcMeanPoints: function(box, meanSlot) {\n            return [\n                [ [ meanSlot.x1, box.y1 ], [ meanSlot.x1, box.y2 ] ]\n            ];\n        },\n\n        calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n            var mid = whiskerSlot.center().y;\n            return [ [\n                [ whiskerSlot.x1, mid - 5 ], [ whiskerSlot.x1, mid + 5 ],\n                [ whiskerSlot.x1, mid ], [ boxSlot.x1, mid ]\n            ], [\n                [ whiskerSlot.x2, mid - 5 ], [ whiskerSlot.x2, mid + 5 ],\n                [ whiskerSlot.x2, mid ], [ boxSlot.x2, mid ]\n            ] ];\n        },\n\n        calcMedianPoints: function(box, medianSlot) {\n            return [\n                [ [ medianSlot.x1, box.y1 ], [ medianSlot.x1, box.y2 ] ]\n            ];\n        }\n    });\n\n    var BoxPlotChart = CandlestickChart.extend({\n        addValue: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var category = fields.category;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var ref = this;\n            var children = ref.children;\n            var options = ref.options;\n            var value = data.valueFields;\n            var valueParts = this.splitValue(value);\n            var hasValue = areNumbers(valueParts);\n            var dataItem = series.data[categoryIx];\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var point;\n\n            if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n            }\n\n            if (hasValue) {\n                point = this.createPoint(data, fields);\n            }\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                cluster = new ClusterLayout({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            if (point) {\n                this.updateRange(value, fields);\n\n                cluster.append(point);\n\n                point.categoryIx = categoryIx;\n                point.category = category;\n                point.series = series;\n                point.seriesIx = seriesIx;\n                point.owner = this;\n                point.dataItem = dataItem;\n            }\n\n            this.points.push(point);\n            categoryPoints.push(point);\n        },\n\n        pointType: function() {\n            if (this.options.invertAxes) {\n                return VerticalBoxPlot;\n            }\n\n            return BoxPlot;\n        },\n\n        splitValue: function(value) {\n            return [\n                value.lower, value.q1, value.median,\n                value.q3, value.upper\n            ];\n        },\n\n        updateRange: function(value, fields) {\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName];\n            var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n            if (defined(value.mean)) {\n                parts = parts.concat(value.mean);\n            }\n\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange = this.valueAxisRanges[axisName] = {\n                min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n                max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n            };\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n\n            return this.chartService.format.auto(format,\n                value.lower, value.q1, value.median,\n                value.q3, value.upper, value.mean, point.category\n            );\n        },\n\n        filterOutliers: function(items) {\n            var length = (items || []).length;\n            var result = [];\n\n            for (var i = 0; i < length; i++) {\n                var item = items[i];\n                if (defined(item) && item !== null) {\n                    result.push(item);\n                }\n            }\n\n            return result;\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return false;\n        }\n    });\n\n    var ScatterErrorBar = ErrorBarBase.extend({\n        getAxis: function() {\n            var axes = this.chart.seriesAxes(this.series);\n            var axis = this.isVertical ? axes.y : axes.x;\n\n            return axis;\n        }\n    });\n\n    function hasValue(value) {\n        return defined(value) && value !== null;\n    }\n\n    var ScatterChart = ChartElement.extend({\n        init: function(plotArea, options) {\n\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this._initFields();\n\n            this.render();\n        },\n\n        _initFields: function() {\n            // X and Y axis ranges grouped by name, e.g.:\n            // primary: { min: 0, max: 1 }\n            this.xAxisRanges = {};\n            this.yAxisRanges = {};\n\n            this.points = [];\n            this.seriesPoints = [];\n            this.seriesOptions = [];\n            this._evalSeries = [];\n        },\n\n        render: function() {\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        addErrorBar: function(point, field, fields) {\n            var value = point.value[field];\n            var valueErrorField = field + \"Value\";\n            var lowField = field + \"ErrorLow\";\n            var highField = field + \"ErrorHigh\";\n            var seriesIx = fields.seriesIx;\n            var series = fields.series;\n            var errorBars = point.options.errorBars;\n            var lowValue = fields[lowField];\n            var highValue = fields[highField];\n\n            if (isNumber(value)) {\n                var errorRange;\n                if (isNumber(lowValue) && isNumber(highValue)) {\n                    errorRange = { low: lowValue, high: highValue };\n                }\n\n                if (errorBars && defined(errorBars[valueErrorField])) {\n                    this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] };\n                    this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] ||\n                        new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n\n                    errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n                }\n\n                if (errorRange) {\n                    this.addPointErrorBar(errorRange, point, field);\n                }\n            }\n        },\n\n        addPointErrorBar: function(errorRange, point, field) {\n            var low = errorRange.low;\n            var high = errorRange.high;\n            var series = point.series;\n            var options = point.options.errorBars;\n            var isVertical = field === Y;\n            var item = {};\n\n            point[field + \"Low\"] = low;\n            point[field + \"High\"] = high;\n\n            point.errorBars = point.errorBars || [];\n            var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n            point.errorBars.push(errorBar);\n            point.append(errorBar);\n\n            item[field] = low;\n            this.updateRange(item, series);\n            item[field] = high;\n            this.updateRange(item, series);\n        },\n\n        addValue: function(value, fields) {\n            var x = value.x;\n            var y = value.y;\n            var seriesIx = fields.seriesIx;\n            var series = this.options.series[seriesIx];\n            var missingValues = this.seriesMissingValues(series);\n            var seriesPoints = this.seriesPoints[seriesIx];\n\n            var pointValue = value;\n            if (!(hasValue(x) && hasValue(y))) {\n                pointValue = this.createMissingValue(pointValue, missingValues);\n            }\n\n            var point;\n            if (pointValue) {\n                point = this.createPoint(pointValue, fields);\n                if (point) {\n                    $.extend(point, fields);\n                    this.addErrorBar(point, X, fields);\n                    this.addErrorBar(point, Y, fields);\n                }\n                this.updateRange(pointValue, fields.series);\n            }\n\n            this.points.push(point);\n            seriesPoints.push(point);\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues;\n        },\n\n        createMissingValue: function() {},\n\n        updateRange: function(value, series) {\n            var intlService = this.chartService.intl;\n            var xAxisName = series.xAxis;\n            var yAxisName = series.yAxis;\n            var x = value.x;\n            var y = value.y;\n            var xAxisRange = this.xAxisRanges[xAxisName];\n            var yAxisRange = this.yAxisRanges[yAxisName];\n\n            if (hasValue(x)) {\n                xAxisRange = this.xAxisRanges[xAxisName] =\n                    xAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                if (isString(x)) {\n                    x = parseDate(intlService, x);\n                }\n\n                xAxisRange.min = Math.min(xAxisRange.min, x);\n                xAxisRange.max = Math.max(xAxisRange.max, x);\n            }\n\n            if (hasValue(y)) {\n                yAxisRange = this.yAxisRanges[yAxisName] =\n                    yAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                if (isString(y)) {\n                    y = parseDate(intlService, y);\n                }\n\n                yAxisRange.min = Math.min(yAxisRange.min, y);\n                yAxisRange.max = Math.max(yAxisRange.max, y);\n            }\n        },\n\n        evalPointOptions: function(options, value, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var state = {\n                defaults: series._defaults,\n                excluded: [\n                    \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\",\n                    \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                    \"drilldownSeriesFactory\"\n                ]\n            };\n\n            var doEval = this._evalSeries[seriesIx];\n            if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n            }\n\n            var pointOptions = options;\n            if (doEval) {\n                pointOptions = deepExtend({}, options);\n                evalOptions(pointOptions, {\n                    value: value,\n                    series: series,\n                    dataItem: fields.dataItem\n                }, state);\n            }\n\n            return pointOptions;\n        },\n\n        pointType: function() {\n            return LinePoint;\n        },\n\n        pointOptions: function(series, seriesIx) {\n            var options = this.seriesOptions[seriesIx];\n            if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                    markers: {\n                        opacity: series.opacity\n                    },\n                    tooltip: {\n                        format: this.options.tooltip.format\n                    },\n                    labels: {\n                        format: this.options.labels.format\n                    }\n                }, series);\n            }\n\n            return options;\n        },\n\n        createPoint: function(value, fields) {\n            var series = fields.series;\n            var pointOptions = this.pointOptions(series, fields.seriesIx);\n            var color = fields.color || series.color;\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var point = new LinePoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        seriesAxes: function(series) {\n            var xAxisName = series.xAxis;\n            var yAxisName = series.yAxis;\n            var plotArea = this.plotArea;\n            var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n            var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n            if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n            }\n\n            if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n            }\n\n            return {\n                x: xAxis,\n                y: yAxis\n            };\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var chartPoints = this.points;\n            var limit = !this.options.clip;\n            var pointIx = 0;\n\n            this.traverseDataPoints(function (value, fields) {\n                var point = chartPoints[pointIx++];\n                var seriesAxes = this$1$1.seriesAxes(fields.series);\n                var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n                var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n                if (point) {\n                    if (slotX && slotY) {\n                        var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                        point.reflow(pointSlot);\n                    } else {\n                        point.visible = false;\n                    }\n                }\n            });\n\n            this.box = targetBox;\n        },\n\n        pointSlot: function(slotX, slotY) {\n            return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n            var seriesPoints = ref.seriesPoints;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var currentSeriesPoints = seriesPoints[seriesIx];\n                if (!currentSeriesPoints) {\n                    seriesPoints[seriesIx] = [];\n                }\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                    var ref$1 = this$1$1._bindPoint(currentSeries, seriesIx, pointIx);\n                    var value = ref$1.valueFields;\n                    var fields = ref$1.fields;\n\n                    callback(value, deepExtend({\n                        pointIx: pointIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: currentSeries.data[pointIx],\n                        owner: this$1$1\n                    }, fields));\n                }\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n            return this.chartService.format.auto(format, value.x, value.y);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n            }\n            return result;\n        }\n    });\n    setDefaultOptions(ScatterChart, {\n        series: [],\n        tooltip: {\n            format: \"{0}, {1}\"\n        },\n        labels: {\n            format: \"{0}, {1}\"\n        },\n        clip: true\n    });\n    deepExtend(ScatterChart.prototype, ClipAnimationMixin, {\n        _bindPoint: CategoricalChart.prototype._bindPoint\n    });\n\n    var Bubble = LinePoint.extend({\n        init: function(value, options) {\n            LinePoint.fn.init.call(this, value, options);\n\n            this.category = value.category;\n        },\n\n        createHighlight: function() {\n            var highlight = this.options.highlight;\n            var border = highlight.border;\n            var markers = this.options.markers;\n            var center = this.box.center();\n            var radius = (markers.size + markers.border.width + border.width) / 2;\n            var highlightGroup = new Group();\n            var shadow = new drawing.Circle(new geometry.Circle([ center.x, center.y + radius / 5 + border.width / 2 ], radius + border.width / 2), {\n                stroke: {\n                    color: 'none'\n                },\n                fill: this.createGradient({\n                    gradient: 'bubbleShadow',\n                    color: markers.background,\n                    stops: [ {\n                        offset: 0,\n                        color: markers.background,\n                        opacity: 0.3\n                    }, {\n                        offset: 1,\n                        color: markers.background,\n                        opacity: 0\n                    } ]\n                })\n            });\n            var overlay = new drawing.Circle(new geometry.Circle([ center.x, center.y ], radius), {\n                stroke: {\n                    color: border.color ||\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                    width: border.width,\n                    opacity: border.opacity\n                },\n                fill: {\n                    color: markers.background,\n                    opacity: highlight.opacity\n                }\n            });\n\n            highlightGroup.append(shadow, overlay);\n\n            return highlightGroup;\n        }\n    });\n\n    Bubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n        labels: {\n            position: CENTER\n        },\n        highlight: {\n            opacity: 1,\n            border: {\n                color: \"#fff\",\n                width: 2,\n                opacity: 1\n            }\n        }\n    });\n\n    Bubble.prototype.defaults.highlight.zIndex = undefined;\n\n    var BubbleChart = ScatterChart.extend({\n        _initFields: function() {\n            this._maxSize = MIN_VALUE;\n            ScatterChart.fn._initFields.call(this);\n        },\n\n        addValue: function(value, fields) {\n            if (value.size !== null && (value.size > 0 || (value.size < 0 && fields.series.negativeValues.visible))) {\n                this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n                ScatterChart.fn.addValue.call(this, value, fields);\n            } else {\n                this.points.push(null);\n                this.seriesPoints[fields.seriesIx].push(null);\n            }\n        },\n\n        reflow: function(box) {\n            this.updateBubblesSize(box);\n            ScatterChart.fn.reflow.call(this, box);\n        },\n\n        pointType: function() {\n            return Bubble;\n        },\n\n        createPoint: function(value, fields) {\n            var series = fields.series;\n            var pointsCount = series.data.length;\n            var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n            var animationOptions = {\n                delay: delay,\n                duration: INITIAL_ANIMATION_DURATION - delay,\n                type: BUBBLE\n            };\n\n            var color = fields.color || series.color;\n            if (value.size < 0 && series.negativeValues.visible) {\n                color = valueOrDefault(\n                    series.negativeValues.color, color\n                );\n            }\n\n            var pointOptions = deepExtend({\n                labels: {\n                    animation: {\n                        delay: delay,\n                        duration: INITIAL_ANIMATION_DURATION - delay\n                    }\n                }\n            }, this.pointOptions(series, fields.seriesIx), {\n                markers: {\n                    type: CIRCLE,\n                    border: series.border,\n                    opacity: series.opacity,\n                    animation: animationOptions\n                }\n            });\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            pointOptions.markers.background = color;\n\n            var point = new Bubble(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        updateBubblesSize: function(box) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n            var boxSize = Math.min(box.width(), box.height());\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesPoints = this$1$1.seriesPoints[seriesIx];\n                var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n                var maxSize = currentSeries.maxSize || boxSize * 0.2;\n                var minR = minSize / 2;\n                var maxR = maxSize / 2;\n                var minArea = Math.PI * minR * minR;\n                var maxArea = Math.PI * maxR * maxR;\n                var areaRange = maxArea - minArea;\n                var areaRatio = areaRange / this$1$1._maxSize;\n\n                for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                    var point = seriesPoints[pointIx];\n                    if (point) {\n                        var area = Math.abs(point.value.size) * areaRatio;\n                        var radius = Math.sqrt((minArea + area) / Math.PI);\n                        var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                        var zIndex = baseZIndex + (1 - radius / maxR);\n\n                        deepExtend(point.options, {\n                            zIndex: zIndex,\n                            markers: {\n                                size: radius * 2,\n                                zIndex: zIndex\n                            },\n                            labels: {\n                                zIndex: zIndex + 1\n                            }\n                        });\n                    }\n                }\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n            return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n        },\n\n        createAnimation: function() {},\n\n        createVisual: function() {}\n    });\n\n    setDefaultOptions(BubbleChart, {\n        tooltip: {\n            format: \"{3}\"\n        },\n        labels: {\n            format: \"{3}\"\n        }\n    });\n\n    var Target = ShapeElement.extend({\n\n    });\n\n    deepExtend(Target.prototype, PointEventsMixin);\n\n    var Bullet = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.aboveAxis = this.options.aboveAxis;\n            this.color = options.color || WHITE;\n            this.value = value;\n        },\n\n        render: function() {\n            var options = this.options;\n\n            if (!this._rendered) {\n                this._rendered = true;\n\n                if (defined(this.value.target)) {\n                    this.target = new Target({\n                        type: options.target.shape,\n                        background: options.target.color || this.color,\n                        opacity: options.opacity,\n                        zIndex: options.zIndex,\n                        border: options.target.border,\n                        vAlign: TOP,\n                        align: RIGHT\n                    });\n\n                    this.target.value = this.value;\n                    this.target.dataItem = this.dataItem;\n                    this.target.series = this.series;\n\n                    this.append(this.target);\n                }\n\n                this.createLabel();\n                this.createNote();\n            }\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labels = options.labels;\n\n            if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else {\n                    labelText = this.formatValue(labels.format);\n                }\n\n                this.label = new BarLabel(labelText, labels, pointData);\n                this.append(this.label);\n            }\n        },\n\n        reflow: function(box) {\n            this.render();\n\n            var ref = this;\n            var options = ref.options;\n            var target = ref.target;\n            var chart = ref.owner;\n            var invertAxes = options.invertAxes;\n            var valueAxis = chart.seriesValueAxis(this.options);\n            var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n            var targetValueSlot = valueAxis.getSlot(this.value.target);\n            var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n            var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n            if (target) {\n                var targetSlot = new Box(\n                    targetSlotX.x1, targetSlotY.y1,\n                    targetSlotX.x2, targetSlotY.y2\n                );\n                target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n                target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n                target.reflow(targetSlot);\n            }\n\n            var label = this.label;\n            if (label) {\n                label.options.aboveAxis = this.aboveAxis;\n                label.reflow(box);\n            }\n\n            if (this.note) {\n                this.note.reflow(box);\n            }\n\n            this.box = box;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options;\n            var body = Path.fromRect(this.box.toRect(), {\n                fill: {\n                    color: this.color,\n                    opacity: options.opacity\n                },\n                stroke: null\n            });\n\n            if (options.border.width > 0) {\n                body.options.set(\"stroke\", {\n                    color: options.border.color || this.color,\n                    width: options.border.width,\n                    dashType: options.border.dashType,\n                    opacity: valueOrDefault(options.border.opacity, options.opacity)\n                });\n            }\n\n            this.bodyVisual = body;\n\n            alignPathToPixel(body);\n            this.visual.append(body);\n        },\n\n        createAnimation: function() {\n            if (this.bodyVisual) {\n                this.animation = Animation.create(\n                    this.bodyVisual, this.options.animation\n                );\n            }\n        },\n\n        createHighlight: function(style) {\n            return Path.fromRect(this.box.toRect(), style);\n        },\n\n        highlightVisual: function() {\n            return this.bodyVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                rect: this.box.toRect(),\n                visual: this.bodyVisual,\n                options: this.options\n            };\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                series: this.series\n            };\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        }\n    });\n\n    Bullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\n\n    setDefaultOptions(Bullet, {\n        border: {\n            width: 1\n        },\n        vertical: false,\n        opacity: 1,\n        target: {\n            shape: \"\",\n            border: {\n                width: 0,\n                color: \"green\"\n            },\n            line: {\n                width: 2\n            }\n        },\n        labels: {\n            visible: false\n        },\n        tooltip: {\n            format: \"Current: {0}<br />Target: {1}\"\n        },\n        notes: {\n            label: {}\n        }\n    });\n\n    deepExtend(Bullet.prototype, PointEventsMixin);\n    deepExtend(Bullet.prototype, NoteMixin);\n\n    var BulletChart = CategoricalChart.extend({\n        init: function(plotArea, options) {\n\n            wrapData(options);\n\n            CategoricalChart.fn.init.call(this, plotArea, options);\n        },\n\n        reflowCategories: function(categorySlots) {\n            var children = this.children;\n            var childrenLength = children.length;\n\n            for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n            }\n        },\n\n        plotRange: function(point) {\n            var series = point.series;\n            var valueAxis = this.seriesValueAxis(series);\n            var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n            return [ axisCrossingValue, point.value.current || axisCrossingValue ];\n        },\n\n        createPoint: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var series = fields.series;\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var value = data.valueFields;\n\n            var bulletOptions = deepExtend({\n                vertical: !options.invertAxes,\n                overlay: series.overlay,\n                categoryIx: categoryIx,\n                invertAxes: options.invertAxes\n            }, series);\n\n            var color = data.fields.color || series.color;\n            bulletOptions = this.evalPointOptions(bulletOptions, value, fields);\n            if (isFunction(series.color)) {\n                color = bulletOptions.color;\n            }\n\n            var bullet = new Bullet(value, bulletOptions);\n            bullet.color = color;\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                cluster = new ClusterLayout({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            cluster.append(bullet);\n\n            return bullet;\n        },\n\n        updateRange: function(value, fields) {\n            var current = value.current;\n            var target = value.target;\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName];\n\n            if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n                axisRange = this.valueAxisRanges[axisName] =\n                    axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                axisRange.min = Math.min(axisRange.min, current, target);\n                axisRange.max = Math.max(axisRange.max, current, target);\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            return this.chartService.format.auto(format, point.value.current, point.value.target);\n        },\n\n        pointValue: function(data) {\n            return data.valueFields.current;\n        },\n\n        aboveAxis: function(point) {\n            var value = point.value.current;\n\n            return value > 0;\n        },\n\n        createAnimation: function() {\n            var this$1$1 = this;\n\n            var points = this.points;\n\n            this._setAnimationOptions();\n\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                point.options.animation = this$1$1.options.animation;\n                point.createAnimation();\n            }\n        }\n    });\n\n    BulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n\n    setDefaultOptions(BulletChart, {\n        animation: {\n            type: BAR\n        }\n    });\n\n    function wrapData(options) {\n        var series = options.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var seriesItem = series[i];\n            var data = seriesItem.data;\n            if (data && !isArray(data[0]) && !isObject(data[0])) {\n                seriesItem.data = [ data ];\n            }\n        }\n    }\n\n    var BaseTooltip = Class.extend({\n        init: function(chartService, options) {\n\n            this.chartService = chartService;\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        getStyle: function(options, point) {\n            var background = options.background;\n            var border = options.border.color;\n\n            if (point) {\n                var pointColor = point.color || point.options.color;\n                background = valueOrDefault(background, pointColor);\n                border = valueOrDefault(border, pointColor);\n            }\n\n            var padding = getSpacing(options.padding || {}, \"auto\");\n\n            return {\n                backgroundColor: background,\n                borderColor: border,\n                font: options.font,\n                color: options.color,\n                opacity: options.opacity,\n                borderWidth: styleValue(options.border.width),\n                paddingTop: styleValue(padding.top),\n                paddingBottom: styleValue(padding.bottom),\n                paddingLeft: styleValue(padding.left),\n                paddingRight: styleValue(padding.right)\n            };\n        },\n\n        show: function(options, tooltipOptions, point) {\n            options.format = tooltipOptions.format;\n\n            var style = this.getStyle(tooltipOptions, point);\n            options.style = style;\n\n            var background = new Color(style.backgroundColor);\n            if (!defined(tooltipOptions.color) && !background.isDark()) {\n                options.className = \"k-chart-tooltip-inverse\";\n            }\n\n            this.chartService.notify(SHOW_TOOLTIP, options);\n\n            this.visible = true;\n        },\n\n        hide: function() {\n            if (this.chartService) {\n                this.chartService.notify(HIDE_TOOLTIP);\n            }\n\n            this.visible = false;\n        },\n\n        destroy: function() {\n            delete this.chartService;\n        }\n    });\n\n    setDefaultOptions(BaseTooltip, {\n        border: {\n            width: 1\n        },\n        opacity: 1\n    });\n\n    var CrosshairTooltip = BaseTooltip.extend({\n        init: function(chartService, crosshair, options) {\n            BaseTooltip.fn.init.call(this, chartService, options);\n\n            this.crosshair = crosshair;\n            this.formatService = chartService.format;\n            this.initAxisName();\n        },\n\n        initAxisName: function() {\n            var axis = this.crosshair.axis;\n            var plotArea = axis.plotArea;\n            var name;\n            if (plotArea.categoryAxis) {\n                name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n            } else {\n                name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n            }\n            this.axisName = name;\n        },\n\n        showAt: function(point) {\n            var ref = this;\n            var axis = ref.crosshair.axis;\n            var options = ref.options;\n            var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n            var formattedValue = value;\n\n            if (options.format) {\n                formattedValue = this.formatService.auto(options.format, value);\n            } else if (axis.options.type === DATE) {\n                formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n            }\n\n            this.show({\n                point: point,\n                anchor: this.getAnchor(),\n                crosshair: this.crosshair,\n                value: formattedValue,\n                axisName: this.axisName,\n                axisIndex: this.crosshair.axis.axisIndex\n            }, this.options);\n        },\n\n        hide: function() {\n            this.chartService.notify(HIDE_TOOLTIP, {\n                crosshair: this.crosshair,\n                axisName: this.axisName,\n                axisIndex: this.crosshair.axis.axisIndex\n            });\n        },\n\n        getAnchor: function() {\n            var ref = this;\n            var crosshair = ref.crosshair;\n            var ref_options = ref.options;\n            var position = ref_options.position;\n            var padding = ref_options.padding;\n            var vertical = !crosshair.axis.options.vertical;\n            var lineBox = crosshair.line.bbox();\n            var horizontalAlign, verticalAlign, point;\n\n            if (vertical) {\n                horizontalAlign = CENTER;\n                if (position === BOTTOM) {\n                    verticalAlign = TOP;\n                    point = lineBox.bottomLeft().translate(0, padding);\n                } else {\n                    verticalAlign = BOTTOM;\n                    point = lineBox.topLeft().translate(0, -padding);\n                }\n            } else {\n                verticalAlign = CENTER;\n                if (position === LEFT) {\n                    horizontalAlign = RIGHT;\n                    point = lineBox.topLeft().translate(-padding, 0);\n                } else {\n                    horizontalAlign = LEFT;\n                    point = lineBox.topRight().translate(padding, 0);\n                }\n            }\n\n            return {\n                point: point,\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    });\n\n    setDefaultOptions(CrosshairTooltip, {\n        padding: 10\n    });\n\n    var Crosshair = ChartElement.extend({\n        init: function(chartService, axis, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.axis = axis;\n            this.stickyMode = axis instanceof CategoryAxis;\n\n            var tooltipOptions = this.options.tooltip;\n\n            if (tooltipOptions.visible) {\n                this.tooltip = new CrosshairTooltip(chartService, this,\n                    deepExtend({}, tooltipOptions, { stickyMode: this.stickyMode })\n                );\n            }\n        },\n\n        showAt: function(point) {\n            this.point = point;\n            this.moveLine();\n            this.line.visible(true);\n\n            if (this.tooltip) {\n                this.tooltip.showAt(point);\n            }\n        },\n\n        hide: function() {\n            this.line.visible(false);\n\n            if (this.tooltip) {\n                this.tooltip.hide();\n            }\n        },\n\n        moveLine: function() {\n            var ref = this;\n            var axis = ref.axis;\n            var point = ref.point;\n            var vertical = axis.options.vertical;\n            var box = this.getBox();\n            var dim = vertical ? Y : X;\n            var lineStart = new GeometryPoint(box.x1, box.y1);\n            var lineEnd;\n\n            if (vertical) {\n                lineEnd = new GeometryPoint(box.x2, box.y1);\n            } else {\n                lineEnd = new GeometryPoint(box.x1, box.y2);\n            }\n\n            if (point) {\n                if (this.stickyMode) {\n                    var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                    lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n                } else {\n                    lineStart[dim] = lineEnd[dim] = point[dim];\n                }\n            }\n\n            this.box = box;\n\n            this.line.moveTo(lineStart).lineTo(lineEnd);\n        },\n\n        getBox: function() {\n            var axis = this.axis;\n            var axes = axis.pane.axes;\n            var length = axes.length;\n            var vertical = axis.options.vertical;\n            var box = axis.lineBox().clone();\n            var dim = vertical ? X : Y;\n            var axisLineBox;\n\n            for (var i = 0; i < length; i++) {\n                var currentAxis = axes[i];\n                if (currentAxis.options.vertical !== vertical) {\n                    if (!axisLineBox) {\n                        axisLineBox = currentAxis.lineBox().clone();\n                    } else {\n                        axisLineBox.wrap(currentAxis.lineBox());\n                    }\n                }\n            }\n\n            box[dim + 1] = axisLineBox[dim + 1];\n            box[dim + 2] = axisLineBox[dim + 2];\n\n            return box;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options;\n            this.line = new Path({\n                stroke: {\n                    color: options.color,\n                    width: options.width,\n                    opacity: options.opacity,\n                    dashType: options.dashType\n                },\n                visible: false\n            });\n\n            this.moveLine();\n            this.visual.append(this.line);\n        },\n\n        destroy: function() {\n            if (this.tooltip) {\n                this.tooltip.destroy();\n            }\n\n            ChartElement.fn.destroy.call(this);\n        }\n    });\n\n    setDefaultOptions(Crosshair, {\n        color: BLACK,\n        width: 2,\n        zIndex: -1,\n        tooltip: {\n            visible: false\n        }\n    });\n\n    var ChartContainer = ChartElement.extend({\n        init: function(options, pane) {\n            ChartElement.fn.init.call(this, options);\n            this.pane = pane;\n        },\n\n        shouldClip: function() {\n            var children = this.children;\n            var length = children.length;\n\n            for (var i = 0; i < length; i++) {\n                if (children[i].options.clip === true) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _clipBox: function() {\n            return this.pane.chartsBox();\n        },\n\n        createVisual: function() {\n            this.visual = new Group({\n                zIndex: 0\n            });\n\n            if (this.shouldClip()) {\n                var clipBox = this.clipBox = this._clipBox();\n                var clipRect = clipBox.toRect();\n                var clipPath = Path.fromRect(clipRect);\n                alignPathToPixel(clipPath);\n\n                this.visual.clip(clipPath);\n                this.unclipLabels();\n            }\n        },\n\n        stackRoot: function() {\n            return this;\n        },\n\n        unclipLabels: function() {\n            var ref = this;\n            var charts = ref.children;\n            var clipBox = ref.clipBox;\n\n            for (var i = 0; i < charts.length; i++) {\n                var points = charts[i].points || {};\n                var length = points.length;\n\n                for (var j = 0; j < length; j++) {\n                    var point = points[j];\n                    if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                        if (point.unclipElements) {\n                            point.unclipElements();\n                        } else {\n                            var label = point.label;\n                            var note = point.note;\n\n                            if (label && label.options.visible) {\n                                if (label.alignToClipBox) {\n                                    label.alignToClipBox(clipBox);\n                                }\n                                label.options.noclip = true;\n                            }\n\n                            if (note && note.options.visible) {\n                                note.options.noclip = true;\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        destroy: function() {\n            ChartElement.fn.destroy.call(this);\n\n            delete this.parent;\n        }\n    });\n\n    ChartContainer.prototype.isStackRoot = true;\n\n    var Pane = BoxElement.extend({\n        init: function(options) {\n            BoxElement.fn.init.call(this, options);\n\n            this.id = paneID();\n\n            this.createTitle();\n\n            this.content = new ChartElement();\n\n            this.chartContainer = new ChartContainer({}, this);\n            this.append(this.content);\n\n            this.axes = [];\n            this.charts = [];\n        },\n\n        createTitle: function() {\n            var titleOptions = this.options.title;\n            if (isObject(titleOptions)) {\n                titleOptions = deepExtend({}, titleOptions, {\n                    align: titleOptions.position,\n                    position: TOP\n                });\n            }\n\n            this.title = Title.buildTitle(titleOptions, Pane.prototype.options.title);\n            if (this.title) {\n                this.append(this.title);\n            }\n        },\n\n        appendAxis: function(axis) {\n            this.content.append(axis);\n            this.axes.push(axis);\n            axis.pane = this;\n        },\n\n        appendAxisAt: function(axis, pos) {\n            this.content.append(axis);\n            this.axes.splice(pos, 0, axis);\n            axis.pane = this;\n        },\n\n        appendChart: function(chart) {\n            if (this.chartContainer.parent !== this.content) {\n                this.content.append(this.chartContainer);\n            }\n\n            this.charts.push(chart);\n            this.chartContainer.append(chart);\n            chart.pane = this;\n        },\n\n        empty: function() {\n            var this$1$1 = this;\n\n            var plotArea = this.parent;\n\n            if (plotArea) {\n                for (var i = 0; i < this.axes.length; i++) {\n                    plotArea.removeAxis(this$1$1.axes[i]);\n                }\n\n                for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                    plotArea.removeChart(this$1$1.charts[i$1]);\n                }\n            }\n\n            this.axes = [];\n            this.charts = [];\n\n            this.content.destroy();\n            this.content.children = [];\n            this.chartContainer.children = [];\n        },\n\n        reflow: function(targetBox) {\n            // Content (such as charts) is rendered, but excluded from reflows\n            var content;\n            if (last(this.children) === this.content) {\n                content = this.children.pop();\n            }\n\n            BoxElement.fn.reflow.call(this, targetBox);\n\n            if (content) {\n                this.children.push(content);\n            }\n\n            if (this.title) {\n                this.contentBox.y1 += this.title.box.height();\n            }\n        },\n\n        visualStyle: function() {\n            var style = BoxElement.fn.visualStyle.call(this);\n            style.zIndex = -10;\n\n            return style;\n        },\n\n        renderComplete: function() {\n            if (this.options.visible) {\n                this.createGridLines();\n            }\n        },\n\n        stackRoot: function() {\n            return this;\n        },\n\n        clipRoot: function() {\n            return this;\n        },\n\n        createGridLines: function() {\n            var axes = this.axes;\n            var allAxes = axes.concat(this.parent.axes);\n            var vGridLines = [];\n            var hGridLines = [];\n\n            // TODO\n            // Is full combination really necessary?\n            for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var vertical = axis.options.vertical;\n                var gridLines = vertical ? vGridLines : hGridLines;\n                for (var j = 0; j < allAxes.length; j++) {\n                    if (gridLines.length === 0) {\n                        var altAxis = allAxes[j];\n                        if (vertical !== altAxis.options.vertical) {\n                            append(gridLines, axis.createGridLines(altAxis));\n                        }\n                    }\n                }\n            }\n        },\n\n        refresh: function() {\n            this.visual.clear();\n\n            this.content.parent = null;\n            this.content.createGradient = this.createGradient.bind(this);\n            this.content.renderVisual();\n            this.content.parent = this;\n\n            if (this.title) {\n                this.visual.append(this.title.visual);\n            }\n\n            this.visual.append(this.content.visual);\n\n            this.renderComplete();\n            this.notifyRender();\n        },\n\n        chartsBox: function() {\n            var axes = this.axes;\n            var length = axes.length;\n            var chartsBox = new Box();\n\n            for (var idx = 0; idx < length; idx++) {\n                var axis = axes[idx];\n                var axisValueField = axis.options.vertical ? Y : X;\n                var lineBox = axis.lineBox();\n                chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n                chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n            }\n\n            if (chartsBox.x2 === 0) {\n                var allAxes = this.parent.axes;\n                var length$1 = allAxes.length;\n\n                for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                    var axis$1 = allAxes[idx$1];\n                    if (!axis$1.options.vertical) {\n                        var lineBox$1 = axis$1.lineBox();\n                        chartsBox.x1 = lineBox$1.x1;\n                        chartsBox.x2 = lineBox$1.x2;\n                    }\n                }\n            }\n            return chartsBox;\n        },\n\n        clipBox: function() {\n            return this.chartContainer.clipBox;\n        },\n\n        notifyRender: function() {\n            var service = this.getService();\n            if (service) {\n                service.notify(PANE_RENDER, {\n                    pane: new ChartPane(this),\n                    index: this.paneIndex,\n                    name: this.options.name\n                });\n            }\n        }\n    });\n\n    var ID = 1;\n\n    function paneID() {\n        return \"pane\" + ID++;\n    }\n\n    Pane.prototype.isStackRoot = true;\n\n    setDefaultOptions(Pane, {\n        zIndex: -1,\n        shrinkToFit: true,\n        title: {\n            align: LEFT\n        },\n        visible: true\n    });\n\n    function appendIfNotNull(array, element) {\n        if (element !== null) {\n            array.push(element);\n        }\n    }\n\n    function segmentVisible(series, fields, index) {\n        var visible = fields.visible;\n        if (defined(visible)) {\n            return visible;\n        }\n\n        var pointVisibility = series.pointVisibility;\n        if (pointVisibility) {\n            return pointVisibility[index];\n        }\n    }\n\n    function bindSegments(series) {\n        var data = series.data;\n        var points = [];\n        var sum = 0;\n        var count = 0;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            var pointData = SeriesBinder.current.bindPoint(series, idx);\n            var value = pointData.valueFields.value;\n\n            if (isString(value)) {\n                value = parseFloat(value);\n            }\n\n            if (isNumber(value)) {\n                pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n\n                pointData.value = Math.abs(value);\n                points.push(pointData);\n\n                if (pointData.visible) {\n                    sum += pointData.value;\n                }\n\n                if (value !== 0) {\n                    count++;\n                }\n            } else {\n                points.push(null);\n            }\n        }\n\n        return {\n            total: sum,\n            points: points,\n            count: count\n        };\n    }\n\n    function equalsIgnoreCase(a, b) {\n        if (a && b) {\n            return a.toLowerCase() === b.toLowerCase();\n        }\n\n        return a === b;\n    }\n\n    function filterSeriesByType(series, types) {\n        var result = [];\n\n        var seriesTypes = [].concat(types);\n        for (var idx = 0; idx < series.length; idx++) {\n            var currentSeries = series[idx];\n            if (inArray(currentSeries.type, seriesTypes)) {\n                result.push(currentSeries);\n            }\n        }\n\n        return result;\n    }\n\n    function getDateField(field, row, intlService) {\n        if (row === null) {\n            return row;\n        }\n\n        var key = \"_date_\" + field;\n        var value = row[key];\n\n        if (!value) {\n            value = parseDate(intlService, getter(field, true)(row));\n            row[key] = value;\n        }\n\n        return value;\n    }\n\n    function isDateAxis(axisOptions, sampleCategory) {\n        var type = axisOptions.type;\n        var dateCategory = sampleCategory instanceof Date;\n\n        return (!type && dateCategory) || equalsIgnoreCase(type, DATE);\n    }\n\n    function singleItemOrArray(array) {\n        return array.length === 1 ? array[0] : array;\n    }\n\n    var AREA_REGEX = /area/i;\n\n    function seriesMissingValues(series) {\n        if (series.missingValues) {\n            return series.missingValues;\n        }\n\n        return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n    }\n\n    function hasValue$1(series, item) {\n        var fields = SeriesBinder.current.bindPoint(series, null, item);\n        var valueFields = fields.valueFields;\n\n        for (var field in valueFields) {\n            if (dataviz.convertableToNumber(valueFields[field])) {\n                return true;\n            }\n        }\n    }\n\n    function findNext(ref) {\n        var start = ref.start;\n        var dir = ref.dir;\n        var min = ref.min;\n        var max = ref.max;\n        var getter$$1 = ref.getter;\n        var hasItem = ref.hasItem;\n        var series = ref.series;\n\n        var pointHasValue, outPoint;\n        var idx = start;\n        do {\n            idx += dir;\n            //aggregating and binding the item takes too much time for large number of categories\n            //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n            if (hasItem(idx)) {\n                outPoint = getter$$1(idx);\n                pointHasValue = hasValue$1(series, outPoint.item);\n            }\n        } while (min <= idx && idx <= max && !pointHasValue);\n\n        if (pointHasValue) {\n            return outPoint;\n        }\n    }\n\n    function createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n        var min = range.min;\n        var max = range.max;\n        var hasMinPoint = min > 0 && min < count;\n        var hasMaxPoint = max + 1 < count;\n\n        if (hasMinPoint || hasMaxPoint) {\n            var missingValues = seriesMissingValues(series);\n            var minPoint, maxPoint;\n            if (missingValues !== INTERPOLATE) {\n                if (hasMinPoint) {\n                    minPoint = getter$$1(min - 1);\n                }\n\n                if (hasMaxPoint) {\n                    maxPoint = getter$$1(max + 1);\n                }\n            } else {\n                var outPoint, pointHasValue;\n                if (hasMinPoint) {\n                    outPoint = getter$$1(min - 1);\n                    pointHasValue = hasValue$1(series, outPoint.item);\n                    if (!pointHasValue) {\n                        minPoint = findNext({\n                            start: min,\n                            dir: -1,\n                            min: 0,\n                            max: count - 1,\n                            getter: getter$$1,\n                            hasItem: hasItem,\n                            series: series\n                        });\n                    } else {\n                        minPoint = outPoint;\n                    }\n                }\n\n                if (hasMaxPoint) {\n                    outPoint = getter$$1(max + 1);\n                    pointHasValue = hasValue$1(series, outPoint.item);\n                    if (!pointHasValue) {\n                        maxPoint = findNext({\n                            start: max,\n                            dir: 1,\n                            min: 0,\n                            max: count - 1,\n                            getter: getter$$1,\n                            hasItem: hasItem,\n                            series: series\n                        });\n                    } else {\n                        maxPoint = outPoint;\n                    }\n                }\n            }\n\n            if (minPoint) {\n                series._outOfRangeMinPoint = minPoint;\n            }\n\n            if (maxPoint) {\n                series._outOfRangeMaxPoint = maxPoint;\n            }\n        }\n    }\n\n    var PlotAreaBase = ChartElement.extend({\n        init: function(series, options, chartService) {\n            ChartElement.fn.init.call(this, options);\n\n            this.initFields(series, options);\n            this.series = series;\n            this.initSeries();\n            this.charts = [];\n            this.options.legend = this.options.legend || {};\n            this.options.legend.items = [];\n            this.axes = [];\n            this.crosshairs = [];\n            this.chartService = chartService;\n            this.originalOptions = options;\n\n            this.createPanes();\n            this.render();\n            this.createCrosshairs();\n        },\n\n        initFields: function() { },\n\n        initSeries: function() {\n            var series = this.series;\n\n            for (var i = 0; i < series.length; i++) {\n                series[i].index = i;\n            }\n        },\n\n        createPanes: function() {\n            var this$1$1 = this;\n\n            var titleOptions = this.options.title || {};\n            var paneDefaults = this.options.paneDefaults;\n            var paneOptions = this.options.panes || [];\n            var panesLength = Math.max(paneOptions.length, 1);\n            var panes = [];\n\n            var defaults = deepExtend({\n                title: {\n                    color: titleOptions.color\n                }\n            }, paneDefaults);\n\n            for (var i = 0; i < panesLength; i++) {\n                var options = deepExtend({}, defaults, paneOptions[i]);\n                if (isString(options.title)) {\n                    options.title = deepExtend({ text: options.title }, defaults.title);\n                }\n\n                var currentPane = new Pane(options);\n                currentPane.paneIndex = i;\n\n                panes.push(currentPane);\n                this$1$1.append(currentPane);\n            }\n\n            this.panes = panes;\n        },\n\n        crosshairOptions: function(axis) {\n            return axis.options.crosshair;\n        },\n\n        createCrosshairs: function(panes) {\n            var this$1$1 = this;\n            if (panes === void 0) { panes = this.panes; }\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                for (var j = 0; j < pane.axes.length; j++) {\n                    var axis = pane.axes[j];\n                    var options = this$1$1.crosshairOptions(axis);\n                    if (options && options.visible) {\n                        var currentCrosshair = new Crosshair(this$1$1.chartService, axis, options);\n\n                        this$1$1.crosshairs.push(currentCrosshair);\n                        pane.content.append(currentCrosshair);\n                    }\n                }\n            }\n        },\n\n        removeCrosshairs: function(pane) {\n            var crosshairs = this.crosshairs;\n            var axes = pane.axes;\n\n            for (var i = crosshairs.length - 1; i >= 0; i--) {\n                for (var j = 0; j < axes.length; j++) {\n                    if (crosshairs[i].axis === axes[j]) {\n                        crosshairs.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        },\n\n        hideCrosshairs: function() {\n            var crosshairs = this.crosshairs;\n            for (var idx = 0; idx < crosshairs.length; idx++) {\n                crosshairs[idx].hide();\n            }\n        },\n\n        findPane: function(name) {\n            var panes = this.panes;\n            var matchingPane;\n\n            for (var i = 0; i < panes.length; i++) {\n                if (panes[i].options.name === name) {\n                    matchingPane = panes[i];\n                    break;\n                }\n            }\n\n            return matchingPane || panes[0];\n        },\n\n        findPointPane: function(point) {\n            var panes = this.panes;\n            var matchingPane;\n\n            for (var i = 0; i < panes.length; i++) {\n                if (panes[i].box.containsPoint(point)) {\n                    matchingPane = panes[i];\n                    break;\n                }\n            }\n\n            return matchingPane;\n        },\n\n        appendAxis: function(axis) {\n            var pane = this.findPane(axis.options.pane);\n\n            pane.appendAxis(axis);\n            this.axes.push(axis);\n            axis.plotArea = this;\n        },\n\n        removeAxis: function(axisToRemove) {\n            var this$1$1 = this;\n\n            var filteredAxes = [];\n\n            for (var i = 0; i < this.axes.length; i++) {\n                var axis = this$1$1.axes[i];\n                if (axisToRemove !== axis) {\n                    filteredAxes.push(axis);\n                } else {\n                    axis.destroy();\n                }\n            }\n\n            this.axes = filteredAxes;\n        },\n\n        appendChart: function(chart, pane) {\n            this.charts.push(chart);\n            if (pane) {\n                pane.appendChart(chart);\n            } else {\n                this.append(chart);\n            }\n        },\n\n        removeChart: function(chartToRemove) {\n            var this$1$1 = this;\n\n            var filteredCharts = [];\n\n            for (var i = 0; i < this.charts.length; i++) {\n                var chart = this$1$1.charts[i];\n                if (chart !== chartToRemove) {\n                    filteredCharts.push(chart);\n                } else {\n                    chart.destroy();\n                }\n            }\n\n            this.charts = filteredCharts;\n        },\n\n        addToLegend: function(series) {\n            var count = series.length;\n            var legend = this.options.legend;\n            var labels = legend.labels || {};\n            var inactiveItems = legend.inactiveItems || {};\n            var inactiveItemsLabels = inactiveItems.labels || {};\n            var data = [];\n\n            for (var i = 0; i < count; i++) {\n                var currentSeries = series[i];\n                var seriesVisible = currentSeries.visible !== false;\n                if (currentSeries.visibleInLegend === false) {\n                    continue;\n                }\n\n                var text = currentSeries.name;\n                var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n                if (labelTemplate) {\n                    text = labelTemplate({\n                        text: hasValue(text) ? text : \"\",\n                        series: currentSeries\n                    });\n                }\n\n                var defaults = currentSeries._defaults;\n                var color = currentSeries.color;\n                if (isFunction(color) && defaults) {\n                    color = defaults.color;\n                }\n\n                var itemLabelOptions = (void 0), markerColor = (void 0);\n                if (seriesVisible) {\n                    itemLabelOptions = {};\n                    markerColor = color;\n                } else {\n                    itemLabelOptions = {\n                        color: inactiveItemsLabels.color,\n                        font: inactiveItemsLabels.font\n                    };\n                    markerColor = inactiveItems.markers.color;\n                }\n\n                if (hasValue(text) && text !== \"\") {\n                    data.push({\n                        text: text,\n                        labels: itemLabelOptions,\n                        markerColor: markerColor,\n                        series: currentSeries,\n                        active: seriesVisible\n                    });\n                }\n            }\n\n            append(legend.items, data);\n        },\n\n        groupAxes: function(panes) {\n            var xAxes = [];\n            var yAxes = [];\n\n            for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n                var paneAxes = panes[paneIx].axes;\n                for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                    var axis = paneAxes[axisIx];\n                    if (axis.options.vertical) {\n                        yAxes.push(axis);\n                    } else {\n                        xAxes.push(axis);\n                    }\n                }\n            }\n\n            return { x: xAxes, y: yAxes, any: xAxes.concat(yAxes) };\n        },\n\n        groupSeriesByPane: function() {\n            var this$1$1 = this;\n\n            var series = this.series;\n            var seriesByPane = {};\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var pane = this$1$1.seriesPaneName(currentSeries);\n\n                if (seriesByPane[pane]) {\n                    seriesByPane[pane].push(currentSeries);\n                } else {\n                    seriesByPane[pane] = [ currentSeries ];\n                }\n            }\n\n            return seriesByPane;\n        },\n\n        filterVisibleSeries: function(series) {\n            var result = [];\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                if (currentSeries.visible !== false) {\n                    result.push(currentSeries);\n                }\n            }\n\n            return result;\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options.plotArea;\n            var panes = this.panes;\n            var margin = getSpacing(options.margin);\n\n            this.box = targetBox.clone().unpad(margin);\n            this.reflowPanes();\n\n            this.detachLabels();\n            this.reflowAxes(panes);\n            this.reflowCharts(panes);\n        },\n\n        redraw: function(panes) {\n            var this$1$1 = this;\n\n            var panesArray = [].concat(panes);\n            this.initSeries();\n\n            //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n            var root = this.getRoot();\n            if (root) {\n                root.cleanGradients();\n            }\n\n            for (var i = 0; i < panesArray.length; i++) {\n                this$1$1.removeCrosshairs(panesArray[i]);\n                panesArray[i].empty();\n            }\n\n            this.render(panesArray);\n            this.detachLabels();\n            this.reflowAxes(this.panes);\n            this.reflowCharts(panesArray);\n\n            this.createCrosshairs(panesArray);\n\n            for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n                panesArray[i$1].refresh();\n            }\n        },\n\n        axisCrossingValues: function(axis, crossingAxes) {\n            var options = axis.options;\n            var crossingValues = [].concat(\n                options.axisCrossingValues || options.axisCrossingValue\n            );\n            var valuesToAdd = crossingAxes.length - crossingValues.length;\n            var defaultValue = crossingValues[0] || 0;\n\n            for (var i = 0; i < valuesToAdd; i++) {\n                crossingValues.push(defaultValue);\n            }\n\n            return crossingValues;\n        },\n\n        alignAxisTo: function(axis, targetAxis, crossingValue, targetCrossingValue) {\n            var slot = axis.getSlot(crossingValue, crossingValue, true);\n            var slotEdge = axis.options.reverse ? 2 : 1;\n            var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n            var targetEdge = targetAxis.options.reverse ? 2 : 1;\n            var axisBox = axis.box.translate(\n                targetSlot[X + targetEdge] - slot[X + slotEdge],\n                targetSlot[Y + targetEdge] - slot[Y + slotEdge]\n            );\n\n            if (axis.pane !== targetAxis.pane) {\n                axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n            }\n\n            axis.reflow(axisBox);\n        },\n\n        alignAxes: function(xAxes, yAxes) {\n            var this$1$1 = this;\n\n            var xAnchor = xAxes[0];\n            var yAnchor = yAxes[0];\n            var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n            var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n            var leftAnchors = {};\n            var rightAnchors = {};\n            var topAnchors = {};\n            var bottomAnchors = {};\n\n            for (var i = 0; i < yAxes.length; i++) {\n                var axis = yAxes[i];\n                var pane = axis.pane;\n                var paneId = pane.id;\n                var visible = axis.options.visible !== false;\n\n                // Locate pane anchor, if any, and use its axisCrossingValues\n                var anchor = paneAnchor(xAxes, pane) || xAnchor;\n                var anchorCrossings = xAnchorCrossings;\n\n                if (anchor !== xAnchor) {\n                    anchorCrossings = this$1$1.axisCrossingValues(anchor, yAxes);\n                }\n\n                this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                if (axis.options._overlap) {\n                    continue;\n                }\n\n                if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                    // Push the axis to the left the previous y-axis so they don't overlap\n                    if (leftAnchors[paneId]) {\n                        axis.reflow(axis.box\n                            .alignTo(leftAnchors[paneId].box, LEFT)\n                            .translate(-axis.options.margin, 0)\n                        );\n                    }\n\n                    if (visible) {\n                        leftAnchors[paneId] = axis;\n                    }\n                }\n\n                if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                    // Flip the labels on the right if we're at the right end of the pane\n                    if (!axis._mirrored) {\n                        axis.options.labels.mirror = !axis.options.labels.mirror;\n                        axis._mirrored = true;\n                    }\n\n                    this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                    // Push the axis to the right the previous y-axis so they don't overlap\n                    if (rightAnchors[paneId]) {\n                        axis.reflow(axis.box\n                            .alignTo(rightAnchors[paneId].box, RIGHT)\n                            .translate(axis.options.margin, 0)\n                        );\n                    }\n\n                    if (visible) {\n                        rightAnchors[paneId] = axis;\n                    }\n                }\n\n                if (i !== 0 && yAnchor.pane === axis.pane) {\n                    axis.alignTo(yAnchor);\n                    axis.reflow(axis.box);\n                }\n            }\n\n            for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n                var axis$1 = xAxes[i$1];\n                var pane$1 = axis$1.pane;\n                var paneId$1 = pane$1.id;\n                var visible$1 = axis$1.options.visible !== false;\n\n                // Locate pane anchor and use its axisCrossingValues\n                var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n                var anchorCrossings$1 = yAnchorCrossings;\n                if (anchor$1 !== yAnchor) {\n                    anchorCrossings$1 = this$1$1.axisCrossingValues(anchor$1, xAxes);\n                }\n\n                this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                if (axis$1.options._overlap) {\n                    continue;\n                }\n\n                if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                    // Flip the labels on top if we're at the top of the pane\n                    if (!axis$1._mirrored) {\n                        axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                        axis$1._mirrored = true;\n                    }\n                    this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                    // Push the axis above the previous x-axis so they don't overlap\n                    if (topAnchors[paneId$1]) {\n                        axis$1.reflow(axis$1.box\n                            .alignTo(topAnchors[paneId$1].box, TOP)\n                            .translate(0, -axis$1.options.margin)\n                        );\n                    }\n\n                    if (visible$1) {\n                        topAnchors[paneId$1] = axis$1;\n                    }\n                }\n\n                if (round(axis$1.lineBox().y2, datavizConstants.COORD_PRECISION) === round(anchor$1.lineBox().y2, datavizConstants.COORD_PRECISION)) {\n                    // Push the axis below the previous x-axis so they don't overlap\n                    if (bottomAnchors[paneId$1]) {\n                        axis$1.reflow(axis$1.box\n                            .alignTo(bottomAnchors[paneId$1].box, BOTTOM)\n                            .translate(0, axis$1.options.margin)\n                        );\n                    }\n\n                    if (visible$1) {\n                        bottomAnchors[paneId$1] = axis$1;\n                    }\n                }\n\n                if (i$1 !== 0) {\n                    axis$1.alignTo(xAnchor);\n                    axis$1.reflow(axis$1.box);\n                }\n            }\n        },\n\n        shrinkAxisWidth: function(panes) {\n            var axes = this.groupAxes(panes).any;\n            var axisBox = axisGroupBox(axes);\n            var overflowX = 0;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n\n                if (currentPane.axes.length > 0) {\n                    overflowX = Math.max(\n                        overflowX,\n                        axisBox.width() - currentPane.contentBox.width()\n                    );\n                }\n            }\n\n            if (overflowX !== 0) {\n                for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                    var currentAxis = axes[i$1];\n\n                    if (!currentAxis.options.vertical) {\n                        currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                    }\n                }\n            }\n        },\n\n        shrinkAxisHeight: function(panes) {\n            var shrinked;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                var axes = currentPane.axes;\n                var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n                if (overflowY !== 0) {\n                    for (var j = 0; j < axes.length; j++) {\n                        var currentAxis = axes[j];\n\n                        if (currentAxis.options.vertical) {\n                            currentAxis.reflow(\n                                currentAxis.box.shrink(0, overflowY)\n                            );\n                        }\n                    }\n                    shrinked = true;\n                }\n            }\n\n            return shrinked;\n        },\n\n        fitAxes: function(panes) {\n            var axes = this.groupAxes(panes).any;\n            var offsetX = 0;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                var paneAxes = currentPane.axes;\n                var paneBox = currentPane.contentBox;\n\n                if (paneAxes.length > 0) {\n                    var axisBox = axisGroupBox(paneAxes);\n                    // OffsetY is calculated and applied per pane\n                    var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2);\n\n                    // OffsetX is calculated and applied globally\n                    offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                    for (var j = 0; j < paneAxes.length; j++) {\n                        var currentAxis = paneAxes[j];\n\n                        currentAxis.reflow(\n                            currentAxis.box.translate(0, offsetY)\n                        );\n                    }\n                }\n            }\n\n            for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis$1 = axes[i$1];\n\n                currentAxis$1.reflow(\n                    currentAxis$1.box.translate(offsetX, 0)\n                );\n            }\n        },\n\n        reflowAxes: function(panes) {\n            var this$1$1 = this;\n\n            var axes = this.groupAxes(panes);\n\n            for (var i = 0; i < panes.length; i++) {\n                this$1$1.reflowPaneAxes(panes[i]);\n            }\n\n            if (axes.x.length > 0 && axes.y.length > 0) {\n                this.alignAxes(axes.x, axes.y);\n                this.shrinkAxisWidth(panes);\n\n                this.autoRotateAxisLabels(axes);\n\n                this.alignAxes(axes.x, axes.y);\n                if (this.shrinkAxisWidth(panes)) {\n                    this.alignAxes(axes.x, axes.y);\n                }\n\n                this.shrinkAxisHeight(panes);\n                this.alignAxes(axes.x, axes.y);\n\n                if (this.shrinkAxisHeight(panes)) {\n                    this.alignAxes(axes.x, axes.y);\n                }\n\n                this.fitAxes(panes);\n            }\n        },\n\n        autoRotateAxisLabels: function(groupedAxes) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var panes = ref.panes;\n            var axes = allPaneAxes(panes);\n            var rotated;\n\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                if (axis.autoRotateLabels()) {\n                    rotated = true;\n                }\n            }\n\n            if (rotated) {\n                for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                    this$1$1.reflowPaneAxes(panes[idx$1]);\n                }\n\n                if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                    this.alignAxes(groupedAxes.x, groupedAxes.y);\n                    this.shrinkAxisWidth(panes);\n                }\n            }\n        },\n\n        reflowPaneAxes: function(pane) {\n            var axes = pane.axes;\n            var length = axes.length;\n\n            if (length > 0) {\n                for (var i = 0; i < length; i++) {\n                    axes[i].reflow(pane.contentBox);\n                }\n            }\n        },\n\n        reflowCharts: function(panes) {\n            var charts = this.charts;\n            var count = charts.length;\n            var box = this.box;\n\n            for (var i = 0; i < count; i++) {\n                var chartPane = charts[i].pane;\n                if (!chartPane || inArray(chartPane, panes)) {\n                    charts[i].reflow(box);\n                }\n            }\n        },\n\n        reflowPanes: function() {\n            var ref = this;\n            var box = ref.box;\n            var panes = ref.panes;\n            var panesLength = panes.length;\n            var remainingHeight = box.height();\n            var remainingPanes = panesLength;\n            var autoHeightPanes = 0;\n            var top = box.y1;\n\n            for (var i = 0; i < panesLength; i++) {\n                var currentPane = panes[i];\n                var height = currentPane.options.height;\n\n                currentPane.options.width = box.width();\n\n                if (!currentPane.options.height) {\n                    autoHeightPanes++;\n                } else {\n                    if (height.indexOf && height.indexOf(\"%\")) {\n                        var percents = parseInt(height, 10) / 100;\n                        currentPane.options.height = percents * box.height();\n                    }\n\n                    currentPane.reflow(box.clone());\n\n                    remainingHeight -= currentPane.options.height;\n                }\n            }\n\n            for (var i$1 = 0; i$1 < panesLength; i$1++) {\n                var currentPane$1 = panes[i$1];\n\n                if (!currentPane$1.options.height) {\n                    currentPane$1.options.height = remainingHeight / autoHeightPanes;\n                }\n            }\n\n            for (var i$2 = 0; i$2 < panesLength; i$2++) {\n                var currentPane$2 = panes[i$2];\n                var paneBox = box\n                    .clone()\n                    .move(box.x1, top);\n\n                currentPane$2.reflow(paneBox);\n\n                remainingPanes--;\n                top += currentPane$2.options.height;\n            }\n        },\n\n        backgroundBox: function() {\n            var axes = this.axes;\n            var axesCount = axes.length;\n            var box;\n\n            for (var i = 0; i < axesCount; i++) {\n                var axisA = axes[i];\n\n                for (var j = 0; j < axesCount; j++) {\n                    var axisB = axes[j];\n\n                    if (axisA.options.vertical !== axisB.options.vertical) {\n                        var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                        if (!box) {\n                            box = lineBox;\n                        } else {\n                            box = box.wrap(lineBox);\n                        }\n                    }\n                }\n            }\n\n            return box || this.box;\n        },\n\n        chartsBoxes: function() {\n            var panes = this.panes;\n            var boxes = [];\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                boxes.push(panes[idx].chartsBox());\n            }\n\n            return boxes;\n        },\n\n        addBackgroundPaths: function(multipath) {\n            var boxes = this.chartsBoxes();\n            for (var idx = 0; idx < boxes.length; idx++) {\n                multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n            }\n        },\n\n        backgroundContainsPoint: function(point) {\n            var boxes = this.chartsBoxes();\n            for (var idx = 0; idx < boxes.length; idx++) {\n                if (boxes[idx].containsPoint(point)) {\n                    return true;\n                }\n            }\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options.plotArea;\n            var opacity = options.opacity;\n            var background = options.background;\n            var border = options.border; if (border === void 0) { border = {}; }\n            if (isTransparent(background)) {\n                background = WHITE;\n                opacity = 0;\n            }\n\n            var bg = this._bgVisual = new drawing.MultiPath({\n                fill: {\n                    color: background,\n                    opacity: opacity\n                },\n                stroke: {\n                    color: border.width ? border.color : \"\",\n                    width: border.width,\n                    dashType: border.dashType\n                },\n                zIndex: -1\n            });\n\n            this.addBackgroundPaths(bg);\n\n            this.appendVisual(bg);\n        },\n\n        pointsByCategoryIndex: function(categoryIndex) {\n            var charts = this.charts;\n            var result = [];\n\n            if (categoryIndex !== null) {\n                for (var i = 0; i < charts.length; i++) {\n                    var chart = charts[i];\n                    if (chart.pane.options.name === \"_navigator\") {\n                        continue;\n                    }\n\n                    var points = charts[i].categoryPoints[categoryIndex];\n                    if (points && points.length) {\n                        for (var j = 0; j < points.length; j++) {\n                            var point = points[j];\n                            if (point && defined(point.value) && point.value !== null) {\n                                result.push(point);\n                            }\n                        }\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        pointsBySeriesIndex: function(seriesIndex) {\n            return this.filterPoints(function(point) {\n                return point.series.index === seriesIndex;\n            });\n        },\n\n        pointsBySeriesName: function(name) {\n            return this.filterPoints(function(point) {\n                return point.series.name === name;\n            });\n        },\n\n        filterPoints: function(callback) {\n            var charts = this.charts;\n            var result = [];\n\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                var points = chart.points;\n                for (var j = 0; j < points.length; j++) {\n                    var point = points[j];\n                    if (point && point.visible !== false && callback(point)) {\n                        result.push(point);\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        findPoint: function(callback) {\n            var charts = this.charts;\n\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                var points = chart.points;\n                for (var j = 0; j < points.length; j++) {\n                    var point = points[j];\n                    if (point && point.visible !== false && callback(point)) {\n                        return point;\n                    }\n                }\n            }\n        },\n\n        paneByPoint: function(point) {\n            var panes = this.panes;\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                if (pane.box.containsPoint(point)) {\n                    return pane;\n                }\n            }\n        },\n\n        detachLabels: function() {\n            var axes = this.groupAxes(this.panes);\n            var xAxes = axes.x;\n            var yAxes = axes.y;\n\n            this.detachAxisGroupLabels(yAxes, xAxes);\n            this.detachAxisGroupLabels(xAxes, yAxes);\n        },\n\n        detachAxisGroupLabels: function(axes, crossingAxes) {\n            var this$1$1 = this;\n\n            var labelAxisCount = 0;\n\n            for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var pane = axis.pane;\n                var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n                var axisIndex = i + labelAxisCount;\n                var labelAxis = this$1$1.createLabelAxis(axis, axisIndex, anchor);\n\n                if (labelAxis) {\n                    labelAxisCount++;\n\n                    var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                    pane.appendAxisAt(labelAxis, pos);\n                }\n            }\n        },\n\n        createLabelAxis: function(axis, axisIndex, anchor) {\n            var labelOptions = axis.options.labels;\n            var position = labelOptions.position;\n            var onAxis = position !== datavizConstants.END && position !== datavizConstants.START;\n            var visible = labelOptions.visible;\n\n            if (onAxis || visible === false) {\n                return null;\n            }\n\n            var allAxes = this.groupAxes(this.panes);\n            var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n            var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n            var end = position === datavizConstants.END;\n            var range = anchor.range();\n            var edge = end ? range.max : range.min;\n            var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n            if (crossingValue - edge === 0) {\n                return null;\n            }\n\n            anchorCrossings.splice(axisIndex + 1, 0, edge);\n            anchor.options.axisCrossingValues = anchorCrossings;\n\n            var labelAxis = axis.clone();\n            axis.clear();\n\n            labelAxis.options.name = undefined;\n            labelAxis.options.line.visible = false;\n\n            labelAxis.options.crosshair = undefined;\n            labelAxis.options.notes = undefined;\n            labelAxis.options.plotBands = undefined;\n\n            return labelAxis;\n        }\n    });\n\n    function isSingleAxis(axis) {\n        return !axis.pane.axes.some(function (a) { return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false; }\n        );\n    }\n\n    function axisGroupBox(axes) {\n        var length = axes.length;\n        var box;\n\n        for (var i = 0; i < length; i++) {\n            var axis = axes[i];\n            var visible = axis.options.visible !== false;\n            if (visible || isSingleAxis(axis)) {\n                var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n                if (!box) {\n                    box = axisBox.clone();\n                } else {\n                    box.wrap(axisBox);\n                }\n            }\n        }\n\n        return box || new Box();\n    }\n\n    function paneAnchor(axes, pane) {\n        for (var i = 0; i < axes.length; i++) {\n            var anchor = axes[i];\n            if (anchor && anchor.pane === pane) {\n                return anchor;\n            }\n        }\n    }\n\n    function isTransparent(color) {\n        return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n    }\n\n    var allPaneAxes = function (panes) { return panes.reduce(function (acc, pane) { return acc.concat(pane.axes); }, []); };\n\n    setDefaultOptions(PlotAreaBase, {\n        series: [],\n        plotArea: {\n            margin: {}\n        },\n        background: \"\",\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        paneDefaults: {\n            title: {}\n        },\n        legend: {\n            inactiveItems: {\n                labels: {\n                    color: \"#919191\"\n                },\n                markers: {\n                    color: \"#919191\"\n                }\n            }\n        }\n    });\n\n    var PlotAreaEventsMixin = {\n        hover: function(chart, e) {\n            this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n        },\n\n        click: function(chart, e) {\n            this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n        }\n    };\n\n    var SeriesAggregator = Class.extend({\n        init: function(series, binder, defaultAggregates) {\n\n            var canonicalFields = binder.canonicalFields(series);\n            var valueFields = binder.valueFields(series);\n            var sourceFields = binder.sourceFields(series, canonicalFields);\n            var seriesFields = this._seriesFields = [];\n            var defaults = defaultAggregates.query(series.type);\n            var rootAggregate = series.aggregate || defaults;\n\n            this._series = series;\n            this._binder = binder;\n\n            for (var i = 0; i < canonicalFields.length; i++) {\n                var field = canonicalFields[i];\n                var fieldAggregate = (void 0);\n\n                if (isObject(rootAggregate)) {\n                    fieldAggregate = rootAggregate[field];\n                } else if (i === 0 || inArray(field, valueFields)) {\n                    fieldAggregate = rootAggregate;\n                } else {\n                    break;\n                }\n\n                if (fieldAggregate) {\n                    seriesFields.push({\n                        canonicalName: field,\n                        name: sourceFields[i],\n                        transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                    });\n                }\n            }\n        },\n\n        aggregatePoints: function(srcPoints, group) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref._series;\n            var seriesFields = ref._seriesFields;\n            var data = this._bindPoints(srcPoints || []);\n            var firstDataItem = data.dataItems[0];\n            var result = {};\n\n            if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n                var fn = function() {};\n                fn.prototype = firstDataItem;\n                result = new fn();\n            }\n\n            for (var i = 0; i < seriesFields.length; i++) {\n                var field = seriesFields[i];\n                var srcValues = this$1$1._bindField(data.values, field.canonicalName);\n                var value = field.transform(srcValues, series, data.dataItems, group);\n\n                if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                    result = value;\n                    break;\n                } else {\n                    if (defined(value)) {\n                        setValue(field.name, result, value);\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _bindPoints: function(points) {\n            var ref = this;\n            var binder = ref._binder;\n            var series = ref._series;\n            var values = [];\n            var dataItems = [];\n\n            for (var i = 0; i < points.length; i++) {\n                var pointIx = points[i];\n\n                values.push(binder.bindPoint(series, pointIx));\n                dataItems.push(series.data[pointIx]);\n            }\n\n            return {\n                values: values,\n                dataItems: dataItems\n            };\n        },\n\n        _bindField: function(data, field) {\n            var values = [];\n            var count = data.length;\n\n            for (var i = 0; i < count; i++) {\n                var item = data[i];\n                var valueFields = item.valueFields;\n                var value = (void 0);\n\n                if (defined(valueFields[field])) {\n                    value = valueFields[field];\n                } else {\n                    value = item.fields[field];\n                }\n\n                values.push(value);\n            }\n\n            return values;\n        }\n    });\n\n    function setValue(fieldName, target, value) {\n        var parentObj = target;\n        var field = fieldName;\n\n        if (fieldName.indexOf(\".\") > -1) {\n            var parts = fieldName.split(\".\");\n\n            while (parts.length > 1) {\n                field = parts.shift();\n                if (!defined(parentObj[field])) {\n                    parentObj[field] = {};\n                }\n                parentObj = parentObj[field];\n            }\n            field = parts.shift();\n        }\n\n        parentObj[field] = value;\n    }\n\n    var DefaultAggregates = Class.extend({\n        init: function() {\n\n            this._defaults = {};\n        },\n\n        register: function(seriesTypes, aggregates) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < seriesTypes.length; i++) {\n                this$1$1._defaults[seriesTypes[i]] = aggregates;\n            }\n        },\n\n        query: function(seriesType) {\n            return this._defaults[seriesType];\n        }\n    });\n\n    DefaultAggregates.current = new DefaultAggregates();\n\n    var RangeBar = Bar.extend({\n        createLabel: function() {\n            var labels = this.options.labels;\n            var fromOptions = deepExtend({}, labels, labels.from);\n            var toOptions = deepExtend({}, labels, labels.to);\n\n            if (fromOptions.visible) {\n                this.labelFrom = this._createLabel(fromOptions);\n                this.append(this.labelFrom);\n            }\n\n            if (toOptions.visible) {\n                this.labelTo = this._createLabel(toOptions);\n                this.append(this.labelTo);\n            }\n        },\n\n        _createLabel: function(options) {\n            var labelTemplate = getTemplate(options);\n            var pointData = this.pointData();\n\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(options.format);\n            }\n\n            return new BarLabel(labelText,\n                deepExtend({\n                    vertical: this.options.vertical\n                },\n                options\n            ), pointData);\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n\n            var ref = this;\n            var labelFrom = ref.labelFrom;\n            var labelTo = ref.labelTo;\n            var value = ref.value;\n\n            this.box = targetBox;\n\n            if (labelFrom) {\n                labelFrom.options.aboveAxis = value.from > value.to;\n                labelFrom.reflow(targetBox);\n            }\n\n            if (labelTo) {\n                labelTo.options.aboveAxis = value.to > value.from;\n                labelTo.reflow(targetBox);\n            }\n\n            if (this.note) {\n                this.note.reflow(targetBox);\n            }\n        }\n    });\n\n    RangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n        labels: {\n            format: \"{0} - {1}\"\n        },\n        tooltip: {\n            format: \"{1}\"\n        }\n    });\n\n    var RangeBarChart = BarChart.extend({\n        pointType: function() {\n            return RangeBar;\n        },\n\n        pointValue: function(data) {\n            return data.valueFields;\n        },\n\n        formatPointValue: function(point, format) {\n            if (point.value.from === null && point.value.to === null) {\n                return \"\";\n            }\n\n            return this.chartService.format.auto(format, point.value.from, point.value.to);\n        },\n\n        plotRange: function(point) {\n            if (!point) {\n                return 0;\n            }\n\n            return [ point.value.from, point.value.to ];\n        },\n\n        updateRange: function(value, fields) {\n            var axisName = fields.series.axis;\n            var from = value.from;\n            var to = value.to;\n            var axisRange = this.valueAxisRanges[axisName];\n\n            if (value !== null && isNumber(from) && isNumber(to)) {\n                axisRange = this.valueAxisRanges[axisName] = axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                axisRange.min = Math.min(axisRange.min, from);\n                axisRange.max = Math.max(axisRange.max, from);\n\n                axisRange.min = Math.min(axisRange.min, to);\n                axisRange.max = Math.max(axisRange.max, to);\n            }\n        },\n\n        aboveAxis: function(point) {\n            var value = point.value;\n            return value.from < value.to;\n        }\n    });\n\n    RangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n\n    var RangeLinePoint = LinePoint.extend({\n        aliasFor: function() {\n            return this.parent;\n        }\n    });\n\n    var AUTO = 'auto';\n    var DEFAULT_FROM_FORMAT = '{0}';\n    var DEFAULT_TO_FORMAT = '{1}';\n\n    var RangeAreaPoint = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.value = value;\n            this.options = options;\n            this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n            this.tooltipTracking = true;\n            this.initLabelsFormat();\n        },\n\n        render: function() {\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            var ref = this.options;\n            var markers = ref.markers;\n            var labels = ref.labels;\n            var value = this.value;\n\n            var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n                labels: labels.from,\n                markers: markers.from\n            }));\n\n            var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n                labels: labels.to,\n                markers: markers.to\n            }));\n\n            this.copyFields(fromPoint);\n            this.copyFields(toPoint);\n\n            this.append(fromPoint);\n            this.append(toPoint);\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n\n            var fromBox = targetBox.from;\n            var toBox = targetBox.to;\n\n            this.positionLabels(fromBox, toBox);\n\n            this.fromPoint.reflow(fromBox);\n            this.toPoint.reflow(toBox);\n\n            this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n        },\n\n        createHighlight: function() {\n            var group = new Group();\n            group.append(this.fromPoint.createHighlight());\n            group.append(this.toPoint.createHighlight());\n\n            return group;\n        },\n\n        highlightVisual: function() {\n            return this.visual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                from: this.fromPoint.highlightVisualArgs(),\n                to: this.toPoint.highlightVisualArgs()\n            };\n        },\n\n        tooltipAnchor: function() {\n            var clipBox = this.owner.pane.clipBox();\n            var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n            if (showTooltip) {\n                var box = this.box;\n                var center = box.center();\n                var horizontalAlign = LEFT;\n                var x, y, verticalAlign;\n\n                if (this.options.vertical) {\n                    x = center.x;\n                    y = box.y1 - TOOLTIP_OFFSET;\n                    verticalAlign = BOTTOM;\n                } else {\n                    x = box.x2 + TOOLTIP_OFFSET;\n                    y = center.y;\n                    verticalAlign = CENTER;\n                }\n\n                return {\n                    point: new Point(x, y),\n                    align: {\n                        horizontal: horizontalAlign,\n                        vertical: verticalAlign\n                    }\n                };\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        },\n\n        unclipElements: function() {\n            this.fromPoint.unclipElements();\n            this.toPoint.unclipElements();\n        },\n\n        initLabelsFormat: function() {\n            var labels = this.options.labels;\n            if (!labels.format) {\n                if (!labels.from || !labels.from.format) {\n                    labels.from = $.extend({}, labels.from, {\n                        format: DEFAULT_FROM_FORMAT\n                    });\n                }\n\n                if (!labels.to || !labels.to.format) {\n                    labels.to = $.extend({}, labels.to, {\n                        format: DEFAULT_TO_FORMAT\n                    });\n                }\n            }\n        },\n\n        positionLabels: function(fromBox, toBox) {\n            var ref = this.options;\n            var labels = ref.labels;\n            var vertical = ref.vertical;\n\n            if (labels.position === AUTO) {\n                var fromLabelPosition, toLabelPosition;\n                if (vertical) {\n                    if (toBox.y1 <= fromBox.y1) {\n                        toLabelPosition = ABOVE;\n                        fromLabelPosition = BELOW;\n                    } else {\n                        toLabelPosition = BELOW;\n                        fromLabelPosition = ABOVE;\n                    }\n                } else {\n                    if (toBox.x1 <= fromBox.x1) {\n                        toLabelPosition = LEFT;\n                        fromLabelPosition = RIGHT;\n                    } else {\n                        toLabelPosition = RIGHT;\n                        fromLabelPosition = LEFT;\n                    }\n                }\n\n                if (!labels.from || !labels.from.position) {\n                    this.fromPoint.options.labels.position = fromLabelPosition;\n                }\n\n                if (!labels.to || !labels.to.position) {\n                    this.toPoint.options.labels.position = toLabelPosition;\n                }\n            }\n        },\n\n        copyFields: function(point) {\n            point.dataItem = this.dataItem;\n            point.category = this.category;\n            point.series = this.series;\n            point.color = this.color;\n            point.owner = this.owner;\n        }\n    });\n\n    deepExtend(RangeAreaPoint.prototype, PointEventsMixin);\n    deepExtend(RangeAreaPoint.prototype, NoteMixin);\n\n    RangeAreaPoint.prototype.defaults = {\n        markers: {\n            visible: false,\n            background: WHITE,\n            size: LINE_MARKER_SIZE,\n            type: CIRCLE,\n            border: {\n                width: 2\n            },\n            opacity: 1\n        },\n        labels: {\n            visible: false,\n            margin: getSpacing(3),\n            padding: getSpacing(4),\n            animation: {\n                type: FADEIN,\n                delay: INITIAL_ANIMATION_DURATION\n            },\n            position: AUTO\n        },\n        notes: {\n            label: {}\n        },\n        highlight: {\n            markers: {\n                border: {\n                    color: WHITE,\n                    width: 2\n                }\n            },\n            zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n        },\n        tooltip: {\n            format: '{0} - {1}'\n        }\n    };\n\n    var RangeAreaSegment = AreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n        },\n\n        stackSegments: function() {\n            var fromSegments = this.fromSegments;\n            if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n            }\n\n            return fromSegments;\n        },\n\n        createStroke: function(style) {\n            var toPath = new Path(style);\n            var fromPath = new Path(style);\n\n            toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n            fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n\n            this.visual.append(toPath);\n            this.visual.append(fromPath);\n        },\n\n        hasStackSegment: function() {\n            return true;\n        },\n\n        fromPoints: function() {\n            return this.linePoints.map(function (point) { return point.fromPoint; });\n        },\n\n        toPoints: function() {\n            return this.linePoints.map(function (point) { return point.toPoint; });\n        }\n    });\n\n    var SplineRangeAreaSegment = RangeAreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.createCurveSegments(this.toPoints());\n        },\n\n        stackSegments: function() {\n            var fromSegments = this.fromSegments;\n            if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n            }\n\n            return fromSegments;\n        },\n\n        createCurveSegments: function(points) {\n            var curveProcessor = new CurveProcessor();\n\n            return curveProcessor.process(this.toGeometryPoints(points));\n        }\n    });\n\n    var StepRangeAreaSegment = RangeAreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n        },\n\n        stackSegments: function() {\n            var fromSegments = this.fromSegments;\n            if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n                fromSegments.reverse();\n            }\n\n            return fromSegments;\n        }\n    });\n\n    deepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n\n    var RangeAreaChart = CategoricalChart.extend({\n        render: function() {\n            CategoricalChart.fn.render.call(this);\n\n            this.renderSegments();\n        },\n\n        pointType: function() {\n            return RangeAreaPoint;\n        },\n\n        createPoint: function(data, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var value = data.valueFields;\n\n            if (!hasValue(value.from) && !hasValue(value.to)) {\n                if (this.seriesMissingValues(series) === ZERO) {\n                    value = {\n                        from: 0,\n                        to: 0\n                    };\n                } else {\n                    return null;\n                }\n            }\n\n            var pointOptions = this.pointOptions(series, seriesIx);\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            var color = data.fields.color || series.color;\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var point = new RangeAreaPoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = (currentSeries.line || {}).style;\n            var segmentType;\n            if (style === \"smooth\") {\n                segmentType = SplineRangeAreaSegment;\n            } else if (style === \"step\") {\n                segmentType = StepRangeAreaSegment;\n            } else {\n                segmentType = RangeAreaSegment;\n            }\n\n            return new segmentType(linePoints, currentSeries, seriesIx);\n        },\n\n        plotRange: function(point, startValue) {\n            if (!point) {\n                return [ startValue, startValue ];\n            }\n\n            return [ point.value.from, point.value.to ];\n        },\n\n        valueSlot: function(valueAxis, plotRange) {\n            var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n            var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n            if (fromSlot && toSlot) {\n                return {\n                    from: fromSlot,\n                    to: toSlot\n                };\n            }\n        },\n\n        pointSlot: function(categorySlot, valueSlot) {\n            var from = valueSlot.from;\n            var to = valueSlot.to;\n            var fromSlot, toSlot;\n\n            if (this.options.invertAxes) {\n                fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n                toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n            } else {\n                fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n                toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n            }\n\n            return {\n                from: fromSlot,\n                to: toSlot\n            };\n        },\n\n        addValue: function(data, fields) {\n            var valueFields = data.valueFields;\n            if (!isNumber(valueFields.from)) {\n                valueFields.from = valueFields.to;\n            }\n\n            if (!isNumber(valueFields.to)) {\n                valueFields.to = valueFields.from;\n            }\n\n            CategoricalChart.fn.addValue.call(this, data, fields);\n        },\n\n        updateRange: function(value, fields) {\n            if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n                var axisName = fields.series.axis;\n                var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n                var from = value.from;\n                var to = value.to;\n\n                axisRange.min = Math.min(axisRange.min, from, to);\n                axisRange.max = Math.max(axisRange.max, from, to);\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n\n            return this.chartService.format.auto(format, value.from, value.to);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point) {\n                    result.push((point.fromPoint || {}).marker);\n                    result.push((point.toPoint || {}).marker);\n                }\n            }\n\n            return result.concat(this._segments);\n        }\n    });\n\n    deepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n\n    var OHLCPoint = Candlestick.extend({\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var value = ref.value;\n            var chart = ref.owner;\n            var valueAxis = chart.seriesValueAxis(options);\n            var oPoints = [];\n            var cPoints = [];\n            var lhPoints = [];\n\n            var lhSlot = valueAxis.getSlot(value.low, value.high);\n            var oSlot = valueAxis.getSlot(value.open, value.open);\n            var cSlot = valueAxis.getSlot(value.close, value.close);\n\n            oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n            oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n\n            var mid = lhSlot.center().x;\n\n            oPoints.push([ oSlot.x1, oSlot.y1 ]);\n            oPoints.push([ mid, oSlot.y1 ]);\n            cPoints.push([ mid, cSlot.y1 ]);\n            cPoints.push([ cSlot.x2, cSlot.y1 ]);\n            lhPoints.push([ mid, lhSlot.y1 ]);\n            lhPoints.push([ mid, lhSlot.y2 ]);\n\n            this.lines = [\n                oPoints, cPoints, lhPoints\n            ];\n\n            this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n\n            this.reflowNote();\n        },\n\n        createBody: function() {}\n    });\n\n    var OHLCChart = CandlestickChart.extend({\n        pointType: function() {\n            return OHLCPoint;\n        }\n    });\n\n    var WaterfallSegment = ChartElement.extend({\n        init: function(from, to, series) {\n            ChartElement.fn.init.call(this);\n\n            this.from = from;\n            this.to = to;\n            this.series = series;\n        },\n\n        linePoints: function() {\n            var from = this.from;\n            var ref = this;\n            var fromBox = ref.from.box;\n            var toBox = ref.to.box;\n            var points = [];\n\n            if (from.isVertical) {\n                var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n                points.push(\n                    [ fromBox.x1, y ],\n                    [ toBox.x2, y ]\n                );\n            } else {\n                var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n                points.push(\n                    [ x, fromBox.y1 ],\n                    [ x, toBox.y2 ]\n                );\n            }\n\n            return points;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var line = this.series.line || {};\n\n            var path = Path.fromPoints(this.linePoints(), {\n                stroke: {\n                    color: line.color,\n                    width: line.width,\n                    opacity: line.opacity,\n                    dashType: line.dashType\n                }\n            });\n\n            alignPathToPixel(path);\n            this.visual.append(path);\n        }\n    });\n\n    setDefaultOptions(WaterfallSegment, {\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    });\n\n    var WaterfallChart = BarChart.extend({\n        render: function() {\n            BarChart.fn.render.call(this);\n            this.createSegments();\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var totalCategories = categoriesCount(series);\n            var isVertical = !this.options.invertAxes;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var total = 0;\n                var runningTotal = 0;\n\n                for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                    var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                    var value = data.valueFields.value;\n                    var summary = data.fields.summary;\n                    var from = total;\n                    var to = (void 0);\n\n                    if (summary) {\n                        if (summary.toLowerCase() === \"total\") {\n                            data.valueFields.value = total;\n                            from = 0;\n                            to = total;\n                        } else {\n                            data.valueFields.value = runningTotal;\n                            to = from - runningTotal;\n                            runningTotal = 0;\n                        }\n                    } else if (isNumber(value)) {\n                        runningTotal += value;\n                        total += value;\n                        to = total;\n                    }\n\n                    callback(data, {\n                        category: this$1$1.categoryAxis.categoryAt(categoryIx),\n                        categoryIx: categoryIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        total: total,\n                        runningTotal: runningTotal,\n                        from: from,\n                        to: to,\n                        isVertical: isVertical\n                    });\n                }\n            }\n        },\n\n        updateRange: function(value, fields) {\n            BarChart.fn.updateRange.call(this, { value: fields.to }, fields);\n        },\n\n        aboveAxis: function(point) {\n            return point.value >= 0;\n        },\n\n        plotRange: function(point) {\n            return [ point.from, point.to ];\n        },\n\n        createSegments: function() {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var seriesPoints = this.seriesPoints;\n            var segments = this.segments = [];\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var points = seriesPoints[seriesIx];\n\n                if (points) {\n                    var prevPoint = (void 0);\n                    for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                        var point = points[pointIx];\n\n                        if (point && prevPoint) {\n                            var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                            segments.push(segment);\n                            this$1$1.append(segment);\n                        }\n\n                        prevPoint = point;\n                    }\n                }\n            }\n        }\n    });\n\n    var AREA_SERIES = [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA ];\n    var OUT_OF_RANGE_SERIES = [ LINE, VERTICAL_LINE ].concat(AREA_SERIES);\n\n    var CategoricalPlotArea = PlotAreaBase.extend({\n        initFields: function(series) {\n            var this$1$1 = this;\n\n            this.namedCategoryAxes = {};\n            this.namedValueAxes = {};\n            this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n\n            if (series.length > 0) {\n                this.invertAxes = inArray(\n                    series[0].type, [ BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA,\n                                     RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT ]\n                );\n\n                for (var i = 0; i < series.length; i++) {\n                    var stack = series[i].stack;\n                    if (stack && stack.type === \"100%\") {\n                        this$1$1.stack100 = true;\n                        break;\n                    }\n                }\n            }\n\n        },\n\n        render: function(panes) {\n            if (panes === void 0) { panes = this.panes; }\n\n            this.createCategoryAxes(panes);\n            this.aggregateCategories(panes);\n            this.createCategoryAxesLabels(panes);\n            this.createCharts(panes);\n            this.createValueAxes(panes);\n        },\n\n        removeAxis: function(axis) {\n            var axisName = axis.options.name;\n\n            PlotAreaBase.fn.removeAxis.call(this, axis);\n\n            if (axis instanceof CategoryAxis) {\n                delete this.namedCategoryAxes[axisName];\n            } else {\n                this.valueAxisRangeTracker.reset(axisName);\n                delete this.namedValueAxes[axisName];\n            }\n\n            if (axis === this.categoryAxis) {\n                delete this.categoryAxis;\n            }\n\n            if (axis === this.valueAxis) {\n                delete this.valueAxis;\n            }\n        },\n\n        createCharts: function(panes) {\n            var this$1$1 = this;\n\n            var seriesByPane = this.groupSeriesByPane();\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1$1.addToLegend(paneSeries);\n\n                var visibleSeries = this$1$1.filterVisibleSeries(paneSeries);\n                if (!visibleSeries) {\n                    continue;\n                }\n\n                var groups = this$1$1.groupSeriesByCategoryAxis(visibleSeries);\n                for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                    this$1$1.createChartGroup(groups[groupIx], pane);\n                }\n            }\n        },\n\n        createChartGroup: function(series, pane) {\n            this.createAreaChart(\n                filterSeriesByType(series, [ AREA, VERTICAL_AREA ]), pane\n            );\n\n            this.createRangeAreaChart(\n                filterSeriesByType(series, [ RANGE_AREA, VERTICAL_RANGE_AREA ]), pane\n            );\n\n            this.createBarChart(\n                filterSeriesByType(series, [ COLUMN, BAR ]), pane\n            );\n\n            this.createRangeBarChart(\n                filterSeriesByType(series, [ RANGE_COLUMN, RANGE_BAR ]), pane\n            );\n\n            this.createBulletChart(\n                filterSeriesByType(series, [ BULLET, VERTICAL_BULLET ]), pane\n            );\n\n            this.createCandlestickChart(\n                filterSeriesByType(series, CANDLESTICK), pane\n            );\n\n            this.createBoxPlotChart(\n                filterSeriesByType(series, [ BOX_PLOT, VERTICAL_BOX_PLOT ]), pane\n            );\n\n            this.createOHLCChart(\n                filterSeriesByType(series, OHLC), pane\n            );\n\n            this.createWaterfallChart(\n                filterSeriesByType(series, [ WATERFALL, HORIZONTAL_WATERFALL ]), pane\n            );\n\n            this.createLineChart(\n                filterSeriesByType(series, [ LINE, VERTICAL_LINE ]), pane\n            );\n        },\n\n        aggregateCategories: function(panes) {\n            var this$1$1 = this;\n\n            var series = this.srcSeries || this.series;\n            var processedSeries = [];\n            this._currentPointsCache = {};\n            this._seriesPointsCache = this._seriesPointsCache || {};\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var categoryAxis = this$1$1.seriesCategoryAxis(currentSeries);\n                var axisPane = this$1$1.findPane(categoryAxis.options.pane);\n                var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n                if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                    currentSeries = this$1$1.aggregateSeries(currentSeries, categoryAxis);\n                } else {\n                    currentSeries = this$1$1.filterSeries(currentSeries, categoryAxis);\n                }\n\n                processedSeries.push(currentSeries);\n            }\n\n            this._seriesPointsCache = this._currentPointsCache;\n            this._currentPointsCache = null;\n\n            this.srcSeries = series;\n            this.series = processedSeries;\n        },\n\n        filterSeries: function(series, categoryAxis) {\n            var dataLength = (series.data || {}).length;\n            categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n            if (!(isNumber(categoryAxis.options.min) || isNumber(categoryAxis.options.max))) {\n                return series;\n            }\n\n            var range = categoryAxis.currentRangeIndices();\n            var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n            var currentSeries = deepExtend({}, series);\n\n            currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n            if (outOfRangePoints) {\n                createOutOfRangePoints(currentSeries, range, dataLength, function (idx) { return ({\n                    item: series.data[idx],\n                    category: categoryAxis.categoryAt(idx, true),\n                    categoryIx: idx - range.min\n                }); }, function (idx) { return defined(series.data[idx]); });\n            }\n\n            return currentSeries;\n        },\n\n        clearSeriesPointsCache: function() {\n            this._seriesPointsCache = {};\n        },\n\n        seriesSourcePoints: function(series, categoryAxis) {\n            var this$1$1 = this;\n\n            var key = (series.index) + \";\" + (categoryAxis.categoriesHash());\n            if (this._seriesPointsCache[key]) {\n                this._currentPointsCache[key] = this._seriesPointsCache[key];\n                return this._seriesPointsCache[key];\n            }\n\n            var axisOptions = categoryAxis.options;\n            var srcCategories = axisOptions.srcCategories;\n            var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n            var srcData = series.data;\n            var getFn = dateAxis ? getDateField : getField;\n            var result = [];\n            if (!dateAxis) {\n                categoryAxis.mapCategories();//fixes major performance issue caused by searching for the index for large data\n            }\n\n            for (var idx = 0; idx < srcData.length; idx++) {\n                var category = (void 0);\n                if (series.categoryField) {\n                    category = getFn(series.categoryField, srcData[idx], this$1$1.chartService.intl);\n                } else {\n                    category = srcCategories[idx];\n                }\n\n                if (defined(category) && category !== null) {\n                    var categoryIx = categoryAxis.totalIndex(category);\n                    result[categoryIx] = result[categoryIx] || { items: [], category: category };\n                    result[categoryIx].items.push(idx);\n                }\n            }\n\n            this._currentPointsCache[key] = result;\n\n            return result;\n        },\n\n        aggregateSeries: function(series, categoryAxis) {\n            var srcData = series.data;\n            if (!srcData.length) {\n                return series;\n            }\n\n            var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n            var result = deepExtend({}, series);\n            var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n            var data = result.data = [];\n            var dataItems = categoryAxis.options.dataItems || [];\n\n            var range = categoryAxis.currentRangeIndices();\n            var categoryItem = function (idx) {\n                var categoryIdx = idx - range.min;\n                var point = srcPoints[idx];\n                if (!point) {\n                    point = srcPoints[idx] = {};\n                }\n\n                point.categoryIx = categoryIdx;\n\n                if (!point.item) {\n                    var category = categoryAxis.categoryAt(idx, true);\n                    point.category = category;\n                    point.item = aggregator.aggregatePoints(point.items, category);\n                }\n\n                return point;\n            };\n\n            for (var idx = range.min; idx <= range.max; idx++) {\n                var point = categoryItem(idx);\n                data[point.categoryIx] = point.item;\n\n                if (point.items && point.items.length) {\n                    dataItems[point.categoryIx] = point.item;\n                }\n            }\n\n            if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n                createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) { return srcPoints[idx]; });\n            }\n\n            categoryAxis.options.dataItems = dataItems;\n\n            return result;\n        },\n\n        appendChart: function(chart, pane) {\n            var series = chart.options.series;\n            var categoryAxis = this.seriesCategoryAxis(series[0]);\n            var categories = categoryAxis.options.categories;\n            var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n            if (categoriesToAdd > 0) {//consider setting an option to axis instead of adding fake categories\n                categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n                while (categoriesToAdd--) {\n                    categories.push(\"\");\n                }\n            }\n\n            this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        },\n\n        seriesPaneName: function(series) {\n            var options = this.options;\n            var axisName = series.axis;\n            var axisOptions = [].concat(options.valueAxis);\n            var axis = grep(axisOptions, function(a) { return a.name === axisName; })[0];\n            var panes = options.panes || [ {} ];\n            var defaultPaneName = (panes[0] || {}).name || \"default\";\n            var paneName = (axis || {}).pane || defaultPaneName;\n\n            return paneName;\n        },\n\n        seriesCategoryAxis: function(series) {\n            var axisName = series.categoryAxis;\n            var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n            if (!axis) {\n                throw new Error(\"Unable to locate category axis with name \" + axisName);\n            }\n\n            return axis;\n        },\n\n        stackableChartOptions: function(firstSeries, pane) {\n            var stack = firstSeries.stack;\n            var isStacked100 = stack && stack.type === \"100%\";\n            var clip = pane.options.clip;\n\n            return {\n                isStacked: stack,\n                isStacked100: isStacked100,\n                clip: clip\n            };\n        },\n\n        groupSeriesByCategoryAxis: function(series) {\n            var categoryAxes = [];\n            var unique = {};\n            for (var idx = 0; idx < series.length; idx++) {\n                var name = series[idx].categoryAxis || \"$$default$$\";\n                if (!unique.hasOwnProperty(name)) {\n                    unique[name] = true;\n                    categoryAxes.push(name);\n                }\n            }\n\n            var groups = [];\n            for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n                var axis = categoryAxes[axisIx];\n                var axisSeries = groupSeries(series, axis, axisIx);\n                if (axisSeries.length === 0) {\n                    continue;\n                }\n\n                groups.push(axisSeries);\n            }\n\n            return groups;\n        },\n\n        createBarChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var barChart = new BarChart(this, $.extend({\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n            }, this.stackableChartOptions(firstSeries, pane)));\n\n            this.appendChart(barChart, pane);\n        },\n\n        createRangeBarChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var rangeColumnChart = new RangeBarChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n            });\n\n            this.appendChart(rangeColumnChart, pane);\n        },\n\n        createBulletChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var bulletChart = new BulletChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(bulletChart, pane);\n        },\n\n        createLineChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var lineChart = new LineChart(this, $.extend({\n                invertAxes: this.invertAxes,\n                series: series\n            }, this.stackableChartOptions(firstSeries, pane)));\n\n            this.appendChart(lineChart, pane);\n        },\n\n        createAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var areaChart = new AreaChart(this, $.extend({\n                invertAxes: this.invertAxes,\n                series: series\n            }, this.stackableChartOptions(firstSeries, pane)));\n\n            this.appendChart(areaChart, pane);\n        },\n\n        createRangeAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var rangeAreaChart = new RangeAreaChart(this, {\n                invertAxes: this.invertAxes,\n                series: series,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(rangeAreaChart, pane);\n        },\n\n        createOHLCChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var chart = new OHLCChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        createCandlestickChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var chart = new CandlestickChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        createBoxPlotChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var chart = new BoxPlotChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        createWaterfallChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var waterfallChart = new WaterfallChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n            });\n\n            this.appendChart(waterfallChart, pane);\n        },\n\n        axisRequiresRounding: function(categoryAxisName, categoryAxisIndex) {\n            var this$1$1 = this;\n\n            var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n            for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n                var currentSeries = this$1$1.series[seriesIx];\n                if (inArray(currentSeries.type, AREA_SERIES)) {\n                    var line = currentSeries.line;\n                    if (line && line.style === STEP) {\n                        centeredSeries.push(currentSeries);\n                    }\n                }\n            }\n\n            for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n                var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n                if (seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) {\n                    return true;\n                }\n            }\n        },\n\n        aggregatedAxis: function(categoryAxisName, categoryAxisIndex) {\n            var series = this.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var seriesAxis = series[seriesIx].categoryAxis || \"\";\n                if ((seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) && series[seriesIx].categoryField) {\n                    return true;\n                }\n            }\n        },\n\n        createCategoryAxesLabels: function() {\n            var axes = this.axes;\n            for (var i = 0; i < axes.length; i++) {\n                if (axes[i] instanceof CategoryAxis) {\n                    axes[i].createLabels();\n                }\n            }\n        },\n\n        createCategoryAxes: function(panes) {\n            var this$1$1 = this;\n\n            var invertAxes = this.invertAxes;\n            var definitions = [].concat(this.options.categoryAxis);\n            var axes = [];\n\n            for (var i = 0; i < definitions.length; i++) {\n                var axisOptions = definitions[i];\n                var axisPane = this$1$1.findPane(axisOptions.pane);\n\n                if (inArray(axisPane, panes)) {\n                    var name = axisOptions.name;\n                    var categories = axisOptions.categories; if (categories === void 0) { categories = []; }\n                    axisOptions = deepExtend({\n                        vertical: invertAxes,\n                        reverse: !invertAxes && this$1$1.chartService.rtl,\n                        axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                    }, axisOptions);\n\n                    if (!defined(axisOptions.justified)) {\n                        axisOptions.justified = this$1$1.isJustified();\n                    }\n\n                    if (this$1$1.axisRequiresRounding(name, i)) {\n                        axisOptions.justified = false;\n                    }\n\n                    var categoryAxis = (void 0);\n\n                    if (isDateAxis(axisOptions, categories[0])) {\n                        categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1$1.chartService);\n                    } else {\n                        categoryAxis = new CategoryAxis(axisOptions, this$1$1.chartService);\n                    }\n\n                    definitions[i].categories = categoryAxis.options.srcCategories;\n\n                    if (name) {\n                        if (this$1$1.namedCategoryAxes[name]) {\n                            throw new Error((\"Category axis with name \" + name + \" is already defined\"));\n                        }\n                        this$1$1.namedCategoryAxes[name] = categoryAxis;\n                    }\n\n                    categoryAxis.axisIndex = i;\n                    axes.push(categoryAxis);\n                    this$1$1.appendAxis(categoryAxis);\n                }\n            }\n\n            var primaryAxis = this.categoryAxis || axes[0];\n            this.categoryAxis = primaryAxis;\n\n            if (invertAxes) {\n                this.axisY = primaryAxis;\n            } else {\n                this.axisX = primaryAxis;\n            }\n        },\n\n        isJustified: function() {\n            var series = this.series;\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                if (!inArray(currentSeries.type, AREA_SERIES)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        createValueAxes: function(panes) {\n            var this$1$1 = this;\n\n            var tracker = this.valueAxisRangeTracker;\n            var defaultRange = tracker.query();\n            var definitions = [].concat(this.options.valueAxis);\n            var invertAxes = this.invertAxes;\n            var baseOptions = { vertical: !invertAxes, reverse: invertAxes && this.chartService.rtl };\n            var axes = [];\n\n            if (this.stack100) {\n                baseOptions.roundToMajorUnit = false;\n                baseOptions.labels = { format: \"P0\" };\n            }\n\n            for (var i = 0; i < definitions.length; i++) {\n                var axisOptions = definitions[i];\n                var axisPane = this$1$1.findPane(axisOptions.pane);\n\n                if (inArray(axisPane, panes)) {\n                    var name = axisOptions.name;\n                    var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n                    var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                    if (i === 0 && range && defaultRange) {\n                        range.min = Math.min(range.min, defaultRange.min);\n                        range.max = Math.max(range.max, defaultRange.max);\n                    }\n\n                    var axisType = (void 0);\n                    if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                        axisType = dataviz.LogarithmicAxis;\n                    } else {\n                        axisType = dataviz.NumericAxis;\n                    }\n\n                    var valueAxis = new axisType(range.min, range.max,\n                        deepExtend({}, baseOptions, axisOptions),\n                        this$1$1.chartService\n                    );\n\n                    if (name) {\n                        if (this$1$1.namedValueAxes[name]) {\n                            throw new Error((\"Value axis with name \" + name + \" is already defined\"));\n                        }\n                        this$1$1.namedValueAxes[name] = valueAxis;\n                    }\n                    valueAxis.axisIndex = i;\n\n                    axes.push(valueAxis);\n                    this$1$1.appendAxis(valueAxis);\n                }\n            }\n\n            var primaryAxis = this.valueAxis || axes[0];\n            this.valueAxis = primaryAxis;\n\n            if (invertAxes) {\n                this.axisX = primaryAxis;\n            } else {\n                this.axisY = primaryAxis;\n            }\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var pane = this.pointPane(point);\n            var categories = [];\n            var values = [];\n\n            if (!pane) {\n                return;\n            }\n\n            var allAxes = pane.axes;\n            for (var i = 0; i < allAxes.length; i++) {\n                var axis = allAxes[i];\n                if (axis.getValue) {\n                    appendIfNotNull(values, axis.getValue(point));\n                } else {\n                    appendIfNotNull(categories, axis.getCategory(point));\n                }\n            }\n\n            if (categories.length === 0) {\n                appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n            }\n\n            if (categories.length > 0 && values.length > 0) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    originalEvent: e,\n                    category: singleItemOrArray(categories),\n                    value: singleItemOrArray(values)\n                });\n            }\n        },\n\n        pointPane: function(point) {\n            var panes = this.panes;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                if (currentPane.contentBox.containsPoint(point)) {\n                    return currentPane;\n                }\n            }\n        },\n\n        updateAxisOptions: function(axis, options) {\n            updateAxisOptions(this.options, axis, options);\n            updateAxisOptions(this.originalOptions, axis, options);\n        }\n    });\n\n    function updateAxisOptions(targetOptions, axis, options) {\n        var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n        deepExtend(axesOptions[axis.axisIndex], options);\n    }\n\n    function groupSeries(series, axis, axisIx) {\n        return grep(series, function(s) {\n            return (axisIx === 0 && !s.categoryAxis) || (s.categoryAxis === axis);\n        });\n    }\n\n    setDefaultOptions(CategoricalPlotArea, {\n        categoryAxis: {},\n        valueAxis: {}\n    });\n\n    deepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n\n    var Highlight = Class.extend({\n        init: function() {\n\n            this._points = [];\n        },\n\n        destroy: function() {\n            this._points = [];\n        },\n\n        show: function(points, opacity) {\n            var this$1$1 = this;\n\n            var arrayPoints = [].concat(points);\n            this.hide();\n\n            for (var i = 0; i < arrayPoints.length; i++) {\n                var point = arrayPoints[i];\n                if (point && point.toggleHighlight && point.hasHighlight()) {\n                    this$1$1.togglePointHighlight(point, true, opacity);\n                    this$1$1._points.push(point);\n                }\n            }\n        },\n\n        togglePointHighlight: function(point, show, opacity) {\n            var toggleHandler = (point.options.highlight || {}).toggle;\n            if (toggleHandler) {\n                var eventArgs = {\n                    category: point.category,\n                    series: point.series,\n                    dataItem: point.dataItem,\n                    value: point.value,\n                    stackValue: point.stackValue,\n                    preventDefault: preventDefault,\n                    visual: point.highlightVisual(),\n                    show: show\n                };\n                toggleHandler(eventArgs);\n                if (!eventArgs._defaultPrevented) {\n                    point.toggleHighlight(show, opacity);\n                }\n            } else {\n                point.toggleHighlight(show, opacity);\n            }\n        },\n\n        hide: function() {\n            var this$1$1 = this;\n\n            var points = this._points;\n            while (points.length) {\n                this$1$1.togglePointHighlight(points.pop(), false);\n            }\n        },\n\n        isHighlighted: function(element) {\n            var points = this._points;\n\n            for (var i = 0; i < points.length; i++) {\n                var point = points[i];\n                if (element === point) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    });\n\n    function preventDefault() {\n        this._defaultPrevented = true;\n    }\n\n    function acceptKey(e, mouseKey) {\n        var key = (mouseKey || \"\").toLowerCase();\n        var event = e.event;\n        var accept = (key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey)) || event[key + \"Key\"];\n\n        return accept;\n    }\n\n    function toChartAxisRanges(axisRanges) {\n        var ranges = {};\n        for (var idx = 0; idx < axisRanges.length; idx++) {\n            var axisRange = axisRanges[idx];\n            if (axisRange.axis.options.name) {\n                ranges[axisRange.axis.options.name] = {\n                    min: axisRange.range.min,\n                    max: axisRange.range.max\n                };\n            }\n        }\n        return ranges;\n    }\n\n    var Pannable = Class.extend({\n        init: function(plotArea, options) {\n\n            this.plotArea = plotArea;\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        start: function(e) {\n            this._active = acceptKey(e, this.options.key);\n            return this._active;\n        },\n\n        move: function(e) {\n            if (this._active) {\n                var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n                if (axisRanges.length) {\n                    this.axisRanges = axisRanges;\n                    return toChartAxisRanges(axisRanges);\n                }\n            }\n        },\n\n        end: function() {\n            var active = this._active;\n            this._active = false;\n\n            return active;\n        },\n\n        pan: function() {\n            var ref = this;\n            var plotArea = ref.plotArea;\n            var axisRanges = ref.axisRanges;\n            if (axisRanges.length) {\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                    var range = axisRanges[idx];\n                    plotArea.updateAxisOptions(range.axis, range.range);\n                }\n                plotArea.redraw(plotArea.panes);\n            }\n        },\n\n        destroy: function() {\n            delete this.plotArea;\n        },\n\n        _panAxes: function(e, position) {\n            var plotArea = this.plotArea;\n            var delta = -e[position].delta;\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var updatedAxes = [];\n\n            if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n                var axes = plotArea.axes;\n                for (var idx = 0; idx < axes.length; idx++) {\n                    var axis = axes[idx];\n\n                    if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                        var range = axis.pan(delta);\n\n                        if (range) {\n                            range.limitRange = true;\n                            updatedAxes.push({\n                                axis: axis,\n                                range: range\n                            });\n                        }\n                    }\n                }\n            }\n\n            return updatedAxes;\n        }\n    });\n\n    Pannable.prototype.options = {\n        key: \"none\",\n        lock: \"none\"\n    };\n\n    var ZoomSelection = Class.extend({\n        init: function(chart, options) {\n\n            this.chart = chart;\n            this.options = deepExtend({}, this.options, options);\n            this.createElement();\n        },\n\n        createElement: function() {\n            var marquee = this._marquee = document.createElement(\"div\");\n            marquee.className = \"k-marquee\";\n            var marqueeColor = document.createElement(\"div\");\n            marqueeColor.className = \"k-marquee-color\";\n            marquee.appendChild(marqueeColor);\n        },\n\n        removeElement: function() {\n            if (this._marquee.parentNode) {\n                this._marquee.parentNode.removeChild(this._marquee);\n            }\n        },\n\n        setStyles: function(styles) {\n            elementStyles(this._marquee, styles);\n        },\n\n        start: function(e) {\n            if (acceptKey(e, this.options.key)) {\n                var chart = this.chart;\n                var point = chart._eventCoordinates(e);\n                var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n                var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n                if (zoomPane && clipBox) {\n                    var offset = this._elementOffset();\n\n                    clipBox.translate(offset.left, offset.top);\n                    this._zoomPaneClipBox = clipBox;\n\n                    document.body.appendChild(this._marquee);\n                    this.setStyles({\n                        left: e.pageX + 1,\n                        top: e.pageY + 1,\n                        width: 0,\n                        height: 0\n                    });\n\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _elementOffset: function() {\n            var chartElement = this.chart.element;\n            var ref = elementStyles(chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            var offset = dataviz.elementOffset(chartElement);\n\n            return {\n                left: paddingLeft + offset.left,\n                top: paddingTop + offset.top\n            };\n        },\n\n        move: function(e) {\n            var zoomPane = this._zoomPane;\n            if (zoomPane) {\n                this.setStyles(this._selectionPosition(e));\n            }\n        },\n\n        end: function(e) {\n            var zoomPane = this._zoomPane;\n            if (zoomPane) {\n                var elementOffset$$1 = this._elementOffset();\n                var selectionPosition = this._selectionPosition(e);\n                selectionPosition.left -= elementOffset$$1.left;\n                selectionPosition.top -= elementOffset$$1.top;\n\n                var start = { x: selectionPosition.left, y: selectionPosition.top };\n                var end = { x: selectionPosition.left + selectionPosition.width, y: selectionPosition.top + selectionPosition.height };\n                this._updateAxisRanges(start, end);\n\n                this.removeElement();\n                delete this._zoomPane;\n\n                return toChartAxisRanges(this.axisRanges);\n            }\n        },\n\n        zoom: function() {\n            var axisRanges = this.axisRanges;\n            if (axisRanges && axisRanges.length) {\n                var plotArea = this.chart._plotArea;\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                    var axisRange = axisRanges[idx];\n                    plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n                }\n                plotArea.redraw(plotArea.panes);\n            }\n        },\n\n        destroy: function() {\n            this.removeElement();\n            delete this._marquee;\n            delete this.chart;\n        },\n\n        _updateAxisRanges: function(start, end) {\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var axisRanges = [];\n\n            var axes = this._zoomPane.axes;\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                var vertical = axis.options.vertical;\n                if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                    var range = axis.pointsRange(start, end);\n                    if (range) {\n                        axisRanges.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n\n            this.axisRanges = axisRanges;\n        },\n\n        _selectionPosition: function(e) {\n            var clipBox = this._zoomPaneClipBox;\n            var startLocation = {\n                x: e.x.startLocation,\n                y: e.y.startLocation\n            };\n            var pageX = e.x.location;\n            var pageY = e.y.location;\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var left = Math.min(startLocation.x, pageX);\n            var top = Math.min(startLocation.y, pageY);\n            var width = Math.abs(startLocation.x - pageX);\n            var height = Math.abs(startLocation.y - pageY);\n\n            if (lock === X) {\n                left = clipBox.x1;\n                width = clipBox.width();\n            }\n            if (lock === Y) {\n                top = clipBox.y1;\n                height = clipBox.height();\n            }\n\n            if (pageX > clipBox.x2) {\n                width = clipBox.x2 - startLocation.x;\n            }\n\n            if (pageX < clipBox.x1) {\n                width = startLocation.x - clipBox.x1;\n            }\n\n            if (pageY > clipBox.y2) {\n                height = clipBox.y2 - startLocation.y;\n            }\n\n            if (pageY < clipBox.y1) {\n                height = startLocation.y - clipBox.y1;\n            }\n\n            return {\n                left: Math.max(left, clipBox.x1),\n                top: Math.max(top, clipBox.y1),\n                width: width,\n                height: height\n            };\n        }\n    });\n\n    ZoomSelection.prototype.options = {\n        key: \"shift\",\n        lock: \"none\"\n    };\n\n    var ref = drawing.util;\n    var limitValue$1 = ref.limitValue;\n\n    // Limit the zoom rate between 1% and 90% per mousewheel event.\n    // At zoom rates close to 100% the axis range quickly becomes 0.\n    var MIN_RATE = 0.01;\n    var MAX_RATE = 0.9;\n    var DEFAULT_RATE = 0.3;\n\n    var MousewheelZoom = Class.extend({\n        init: function(chart, options) {\n\n            this.chart = chart;\n            this.options = deepExtend({\n                rate: DEFAULT_RATE\n            }, this.options, options);\n        },\n\n        updateRanges: function(delta, coords) {\n            var this$1$1 = this;\n\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var axisRanges = [];\n            var axes = this.chart._plotArea.axes;\n\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                var vertical = axis.options.vertical;\n\n                if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                    var rate = limitValue$1(this$1$1.options.rate, MIN_RATE, MAX_RATE);\n                    var range = axis.zoomRange(-delta * rate, coords);\n\n                    if (range) {\n                        axisRanges.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n\n            this.axisRanges = axisRanges;\n            return toChartAxisRanges(axisRanges);\n        },\n\n        zoom: function() {\n            var axisRanges = this.axisRanges;\n            var plotArea = this.chart._plotArea;\n\n            if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                    var axisRange = axisRanges[idx];\n                    plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n                }\n                plotArea.redraw(plotArea.panes);\n            }\n        },\n\n        destroy: function() {\n            delete this.chart;\n        }\n    });\n\n    var LegendLayout = ChartElement.extend({\n        init: function(options, chartService) {\n            ChartElement.fn.init.call(this, options);\n\n            this.chartService = chartService;\n        },\n\n        render: function() {\n            var ref = this;\n            var children = ref.children;\n            var options = ref.options;\n            var vertical = options.vertical;\n\n            this.visual = new drawing.Layout(null, {\n                spacing: vertical ? 0 : options.spacing,\n                lineSpacing: vertical ? options.spacing : 0,\n                orientation: vertical ? \"vertical\" : \"horizontal\",\n                reverse: options.rtl,\n                alignItems: vertical ? \"start\" : \"center\"\n            });\n\n            for (var idx = 0; idx < children.length; idx++) {\n                var legendItem = children[idx];\n                legendItem.reflow(new Box());\n                legendItem.renderVisual();\n            }\n        },\n\n        reflow: function(box) {\n            this.visual.rect(box.toRect());\n            this.visual.reflow();\n            var bbox = this.visual.clippedBBox();\n\n            if (bbox) {\n                this.box = dataviz.rectToBox(bbox);\n            } else {\n                this.box = new Box();\n            }\n        },\n\n        renderVisual: function() {\n            this.addVisual();\n        },\n\n        createVisual: function() {}\n    });\n\n    var LegendItem = BoxElement.extend({\n        init: function(options) {\n            BoxElement.fn.init.call(this, options);\n\n            this.createContainer();\n            if (!options.rtl) {\n                this.createMarker();\n                this.createLabel();\n            } else {\n                this.createLabel();\n                this.createMarker();\n            }\n        },\n\n        createContainer: function() {\n            this.container = new dataviz.FloatElement({ vertical: false, wrap: false, align: CENTER, spacing: this.options.spacing });\n            this.append(this.container);\n        },\n\n        createMarker: function() {\n            this.container.append(new ShapeElement(this.markerOptions()));\n        },\n\n        markerOptions: function() {\n            var options = this.options;\n            var markerColor = options.markerColor;\n            return deepExtend({}, options.markers, {\n                background: markerColor,\n                border: {\n                    color: markerColor\n                }\n            });\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labelOptions = deepExtend({}, options.labels);\n\n            this.container.append(new TextBox(options.text, labelOptions));\n        },\n\n        renderComplete: function() {\n            BoxElement.fn.renderComplete.call(this);\n\n            var cursor = this.options.cursor || {};\n            var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n                fill: {\n                    color: WHITE,\n                    opacity: 0\n                },\n                stroke: null,\n                cursor: cursor.style || cursor\n            });\n\n            this.appendVisual(eventSink);\n        },\n\n        click: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n                e.preventDefault();\n            }\n        },\n\n        over: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n                widget._legendItemHover(args.seriesIndex, args.pointIndex);\n            }\n\n            // Don't trigger point hover for legend items\n            return true;\n        },\n\n        out: function(widget, e) {\n            widget._unsetActivePoint();\n\n            widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n        },\n\n        eventArgs: function(e) {\n            var options = this.options;\n\n            return {\n                element: eventElement(e),\n                text: options.text,\n                series: options.series,\n                seriesIndex: options.series.index,\n                pointIndex: options.pointIndex\n            };\n        },\n\n        renderVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var customVisual = options.visual;\n\n            if (customVisual) {\n                this.visual = customVisual({\n                    active: options.active,\n                    series: options.series,\n                    sender: this.getSender(),\n                    pointIndex: options.pointIndex,\n                    options: {\n                        markers: this.markerOptions(),\n                        labels: options.labels\n                    },\n                    createVisual: function () {\n                        this$1$1.createVisual();\n                        this$1$1.renderChildren();\n                        this$1$1.renderComplete();\n\n                        var defaultVisual = this$1$1.visual;\n\n                        delete this$1$1.visual;\n\n                        return defaultVisual;\n                    }\n                });\n                this.addVisual();\n            } else {\n                BoxElement.fn.renderVisual.call(this);\n            }\n        }\n    });\n\n    var HORIZONTAL = \"horizontal\";\n    var POINTER = \"pointer\";\n    var CUSTOM = \"custom\";\n\n    var Legend = ChartElement.extend({\n        init: function(options, chartService) {\n            if (chartService === void 0) { chartService = {}; }\n\n            ChartElement.fn.init.call(this, options);\n\n            this.chartService = chartService;\n\n            if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n                this.options.position = RIGHT;\n            }\n\n            this.createContainers();\n\n            this.createLegendTitle(options.title);\n\n            this.createItems();\n        },\n\n        createContainers: function() {\n            var options = this.options;\n            var position = options.position;\n            var userAlign = options.align;\n            var align = position;\n            var vAlign = CENTER;\n\n            if (position === CUSTOM) {\n                align = LEFT;\n            } else if (inArray(position, [ TOP, BOTTOM ])) {\n                if (userAlign === \"start\") {\n                    align = LEFT;\n                } else if (userAlign === \"end\") {\n                    align = RIGHT;\n                } else {\n                    align = CENTER;\n                }\n                vAlign = position;\n            } else if (userAlign) {\n                if (userAlign === \"start\") {\n                    vAlign = TOP;\n                } else if (userAlign === \"end\") {\n                    vAlign = BOTTOM;\n                }\n            }\n\n            this.container = new BoxElement({\n                margin: options.margin,\n                padding: options.padding,\n                background: options.background,\n                border: options.border,\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n\n            if (this.hasTitle()) {\n                this.itemsContainer = new BoxElement({\n                    vAlign: vAlign,\n                    align: align,\n                    zIndex: options.zIndex,\n                    shrinkToFit: true\n                });\n            } else {\n                this.itemsContainer = this.container;\n            }\n\n            this.append(this.container);\n        },\n\n        createItems: function() {\n            var chartService = this.getService();\n            var options = this.options;\n            var vertical = this.isVertical();\n            var innerElement = new LegendLayout({\n                vertical: vertical,\n                spacing: options.spacing,\n                rtl: chartService.rtl\n            }, chartService);\n            var items = options.items;\n\n            if (options.reverse) {\n                items = items.slice(0).reverse();\n            }\n\n            var count = items.length;\n\n            for (var i = 0; i < count; i++) {\n                var item = items[i];\n\n                innerElement.append(new LegendItem(deepExtend({}, {\n                    markers: options.markers,\n                    labels: options.labels,\n                    rtl: chartService.rtl\n                }, options.item, item)));\n            }\n\n            innerElement.render();\n            this.itemsContainer.append(innerElement);\n        },\n\n        isVertical: function() {\n            var ref = this.options;\n            var orientation = ref.orientation;\n            var position = ref.position;\n            var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n                   (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n            return vertical;\n        },\n\n        hasItems: function() {\n            return this.container.children[0].children.length > 0;\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var legendBox = targetBox.clone();\n\n            if (!this.hasItems()) {\n                this.box = legendBox;\n                return;\n            }\n\n            if (options.position === CUSTOM) {\n                this.containerCustomReflow(legendBox);\n                this.box = legendBox;\n            } else {\n                this.containerReflow(legendBox);\n            }\n\n            if (this.hasTitle()) {\n                this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n            }\n        },\n\n        containerReflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var container = ref.container;\n            var position = options.position;\n            var width = options.width;\n            var height = options.height;\n            var pos = position === TOP || position === BOTTOM ? X : Y;\n            var vertical = this.isVertical();\n            var alignTarget = targetBox.clone();\n            var containerBox = targetBox.clone();\n\n            if (position === LEFT || position === RIGHT) {\n                containerBox.y1 = alignTarget.y1 = 0;\n            }\n\n            if (vertical && height) {\n                containerBox.y2 = containerBox.y1 + height;\n                containerBox.align(alignTarget, Y, container.options.vAlign);\n            } else if (!vertical && width) {\n                containerBox.x2 = containerBox.x1 + width;\n                containerBox.align(alignTarget, X, container.options.align);\n            }\n\n            container.reflow(containerBox);\n            containerBox = container.box;\n\n            var box = containerBox.clone();\n\n            if (options.offsetX || options.offsetY) {\n                containerBox.translate(options.offsetX, options.offsetY);\n                container.reflow(containerBox);\n            }\n\n            box[pos + 1] = targetBox[pos + 1];\n            box[pos + 2] = targetBox[pos + 2];\n\n            this.box = box;\n        },\n\n        containerCustomReflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var container = ref.container;\n            var offsetX = options.offsetX;\n            var offsetY = options.offsetY;\n            var width = options.width;\n            var height = options.height;\n            var vertical = this.isVertical();\n            var containerBox = targetBox.clone();\n\n            if (vertical && height) {\n                containerBox.y2 = containerBox.y1 + height;\n            } else if (!vertical && width) {\n                containerBox.x2 = containerBox.x1 + width;\n            }\n            container.reflow(containerBox);\n            containerBox = container.box;\n\n            container.reflow(new Box(\n                offsetX, offsetY,\n                offsetX + containerBox.width(), offsetY + containerBox.height()\n            ));\n        },\n\n        renderVisual: function() {\n            if (this.hasItems()) {\n                ChartElement.fn.renderVisual.call(this);\n            }\n        },\n\n        createLegendTitle: function(title) {\n            var titleOptions = deepExtend({}, {\n                color: BLACK,\n                position: TOP,\n                align: CENTER\n            }, title);\n            var text = titleOptions.text;\n\n            if (!title || title.visible === false) {\n                return;\n            }\n\n            if (defined(titleOptions) && titleOptions.visible) {\n                var labelTemplate = getTemplate(titleOptions);\n                if (labelTemplate) {\n                    text = labelTemplate({ text: text });\n                } else if (titleOptions.format) {\n                    text = this.chartService.format.auto(titleOptions.format, text);\n                }\n            }\n\n            this.title = new TextBox(text, titleOptions);\n\n            this.createTitleLayout();\n\n            this.appendTitleLayoutContent();\n        },\n\n        createTitleLayout: function() {\n            this.layout = new dataviz.FloatElement({\n                vertical: true,\n                wrap: false\n            });\n\n            this.container.append(this.layout);\n        },\n\n        hasTitle: function() {\n            return Boolean(this.options.title && this.options.title.visible !== false);\n        },\n\n        appendTitleLayoutContent: function() {\n            var options = this.options;\n\n            if (options.title.position === BOTTOM) {\n                this.layout.append(this.itemsContainer);\n                this.layout.append(this.title);\n            } else {\n                this.layout.append(this.title);\n                this.layout.append(this.itemsContainer);\n            }\n        }\n    });\n\n    setDefaultOptions(Legend, {\n        position: RIGHT,\n        items: [],\n        offsetX: 0,\n        offsetY: 0,\n        margin: getSpacing(5),\n        padding: getSpacing(5),\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        item: {\n            cursor: POINTER,\n            spacing: 6\n        },\n        spacing: 6,\n        background: \"\",\n        zIndex: 1,\n        markers: {\n            border: {\n                width: 0\n            },\n            width: 15,\n            height: 3,\n            type: \"rect\",\n            align: LEFT,\n            vAlign: CENTER\n        }\n    });\n\n    var PlotAreaFactory = Class.extend({\n        init: function() {\n\n            this._registry = [];\n        },\n\n        register: function(type, seriesTypes) {\n            this._registry.push({\n                type: type,\n                seriesTypes: seriesTypes\n            });\n        },\n\n        create: function(srcSeries, options, chartService) {\n            var registry = this._registry;\n            var match = registry[0];\n            var series;\n\n            for (var idx = 0; idx < registry.length; idx++) {\n                var entry = registry[idx];\n                series = filterSeriesByType(srcSeries, entry.seriesTypes);\n\n                if (series.length > 0) {\n                    match = entry;\n                    break;\n                }\n            }\n\n            return new match.type(series, options, chartService);\n        }\n    });\n\n    PlotAreaFactory.current = new PlotAreaFactory();\n\n    var ZOOM_ACCELERATION = 3;\n    var SELECTOR_HEIGHT_ADJUST = 0.1;\n\n    function createDiv(classNames) {\n        var element = document.createElement(\"div\");\n        if (classNames) {\n            element.className = classNames;\n        }\n\n        return element;\n    }\n\n    function closestHandle(element) {\n        var current = element;\n        while (current && !dataviz.hasClasses(current, \"k-handle\")) {\n            current = current.parentNode;\n        }\n\n        return current;\n    }\n\n    var Selection = Class.extend({\n        init: function(chart, categoryAxis, options, observer) {\n\n            var chartElement = chart.element;\n\n            this.options = deepExtend({}, this.options, options);\n            this.chart = chart;\n            this.observer = observer;\n            this.chartElement = chartElement;\n            this.categoryAxis = categoryAxis;\n            this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n\n            this.initOptions();\n\n            this.visible = this.options.visible && chartElement.offsetHeight;\n\n            if (this.visible) {\n                this.createElements();\n\n                this.set(this._index(this.options.from), this._index(this.options.to));\n\n                this.bindEvents();\n            }\n        },\n\n        onPane: function(pane) {\n            return this.categoryAxis.pane === pane;\n        },\n\n        createElements: function() {\n            var options = this.options;\n            var wrapper = this.wrapper = createDiv(\"k-selector k-pointer-events-none\");\n            elementStyles(wrapper, {\n                top: options.offset.top,\n                left: options.offset.left,\n                width: options.width,\n                height: options.height,\n                direction: 'ltr'\n            });\n\n            var selection = this.selection = createDiv(\"k-selection k-pointer-events-none\");\n\n            this.leftMask = createDiv(\"k-mask k-pointer-events-none\");\n            this.rightMask = createDiv(\"k-mask k-pointer-events-none\");\n\n            wrapper.appendChild(this.leftMask);\n            wrapper.appendChild(this.rightMask);\n            wrapper.appendChild(selection);\n\n            var body = this.body = createDiv(\"k-selection-bg k-pointer-events-none\");\n            selection.appendChild(body);\n\n            var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle k-pointer-events-auto\");\n            var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle k-pointer-events-auto\");\n            leftHandle.appendChild(createDiv());\n            rightHandle.appendChild(createDiv());\n\n            selection.appendChild(leftHandle);\n            selection.appendChild(rightHandle);\n\n            this.chartElement.appendChild(wrapper);\n            var selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n            var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n            var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n            options.selection = {\n                border: {\n                    left: selectionStyles.borderLeftWidth,\n                    right: selectionStyles.borderRightWidth\n                }\n            };\n\n            elementStyles(leftHandle, {\n                top: (selectionStyles.height - leftHandleHeight) / 2\n            });\n\n            elementStyles(rightHandle, {\n                top: (selectionStyles.height - rightHandleHeight) / 2\n            });\n\n            wrapper.style.cssText = wrapper.style.cssText;\n        },\n\n        bindEvents: function() {\n            if (this.options.mousewheel !== false) {\n                this._mousewheelHandler = this._mousewheel.bind(this);\n                var obj;\n                bindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n            }\n\n            this._domEvents = services.DomEventsBuilder.create(this.chartElement, {\n                stopPropagation: true, // applicable for the jQuery UserEvents\n                start: this._start.bind(this),\n                move: this._move.bind(this),\n                end: this._end.bind(this),\n                tap: this._tap.bind(this),\n                press: this._press.bind(this),\n                gesturestart: this._gesturestart.bind(this),\n                gesturechange: this._gesturechange.bind(this),\n                gestureend: this._gestureend.bind(this)\n            });\n        },\n\n        initOptions: function() {\n            var ref = this;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var box = categoryAxis.pane.chartsBox();\n            var intlService = this.chart.chartService.intl;\n\n            if (this._dateAxis) {\n                deepExtend(options, {\n                    min: parseDate(intlService, options.min),\n                    max: parseDate(intlService, options.max),\n                    from: parseDate(intlService, options.from),\n                    to: parseDate(intlService, options.to)\n                });\n            }\n\n            var ref$1 = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref$1.paddingLeft;\n            var paddingTop = ref$1.paddingTop;\n\n            this.options = deepExtend({}, {\n                width: box.width(),\n                height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n                padding: {\n                    left: paddingLeft,\n                    top: paddingTop\n                },\n                offset: {\n                    left: box.x1 + paddingLeft,\n                    top: box.y1 + paddingTop\n                },\n                from: options.min,\n                to: options.max\n            }, options);\n        },\n\n        destroy: function() {\n            if (this._domEvents) {\n                this._domEvents.destroy();\n                delete this._domEvents;\n            }\n\n            clearTimeout(this._mwTimeout);\n            this._state = null;\n\n            if (this.wrapper) {\n                if (this._mousewheelHandler) {\n                    var obj;\n                    unbindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n                    this._mousewheelHandler = null;\n                }\n\n                this.chartElement.removeChild(this.wrapper);\n                this.wrapper = null;\n            }\n        },\n\n        _rangeEventArgs: function(range) {\n\n            return {\n                axis: this.categoryAxis.options,\n                from: this._value(range.from),\n                to: this._value(range.to)\n            };\n        },\n\n        _pointInPane: function(x, y) {\n            var paneBox = this.categoryAxis.pane.box;\n            var modelCoords = this.chart._toModelCoordinates(x, y);\n            return paneBox.containsPoint(modelCoords);\n        },\n\n        _start: function(e) {\n            var options = this.options;\n            var target = eventElement(e);\n            if (this._state || !target) {\n                return;\n            }\n\n            var coords = dataviz.eventCoordinates(e);\n            var inPane = this._pointInPane(coords.x, coords.y);\n            if (!inPane) {\n                return;\n            }\n\n            var handle = closestHandle(target);\n            var bodyRect = this.body.getBoundingClientRect();\n            var inBody = !handle && coords.x >= bodyRect.x && coords.x <= bodyRect.x + bodyRect.width &&\n                           coords.y >= bodyRect.y && coords.y <= bodyRect.y + bodyRect.height;\n\n            this.chart._unsetActivePoint();\n            this._state = {\n                moveTarget: handle,\n                startLocation: e.x ? e.x.location : 0,\n                inBody: inBody,\n                range: {\n                    from: this._index(options.from),\n                    to: this._index(options.to)\n                }\n            };\n\n            var args = this._rangeEventArgs({\n                from: this._index(options.from),\n                to: this._index(options.to)\n            });\n\n            if (this.trigger(SELECT_START, args)) {\n                this._state = null;\n            }\n        },\n\n        _press: function(e) {\n            var handle;\n            if (this._state) {\n                handle = this._state.moveTarget;\n            } else {\n                handle = closestHandle(eventElement(e));\n            }\n            if (handle) {\n                dataviz.addClass(handle, \"k-handle-active\");\n            }\n        },\n\n        _move: function(e) {\n            if (!this._state) {\n                return;\n            }\n\n            var ref = this;\n            var state = ref._state;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var range = state.range;\n            var target = state.moveTarget;\n            var reverse = categoryAxis.options.reverse;\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var delta = state.startLocation - e.x.location;\n            var oldRange = { from: range.from, to: range.to };\n            var span = range.to - range.from;\n            var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n            var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n            if (!target && !state.inBody) {\n                return;\n            }\n\n            var leftHandle = target && dataviz.hasClasses(target, \"k-left-handle\");\n            var rightHandle = target && dataviz.hasClasses(target, \"k-right-handle\");\n\n            if (state.inBody) {\n                range.from = Math.min(\n                    Math.max(min, from - offset),\n                    max - span\n                );\n                range.to = Math.min(\n                    range.from + span,\n                    max\n                );\n            } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n                range.from = Math.min(\n                    Math.max(min, from - offset),\n                    max - 1\n                );\n                range.to = Math.max(range.from + 1, range.to);\n            } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n                range.to = Math.min(\n                    Math.max(min + 1, to - offset),\n                    max\n                );\n                range.from = Math.min(range.to - 1, range.from);\n            }\n\n            if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.move(range.from, range.to);\n                this.trigger(SELECT, this._rangeEventArgs(range));\n            }\n        },\n\n        _end: function() {\n            if (this._state) {\n                var moveTarget = this._state.moveTarget;\n                if (moveTarget) {\n                    dataviz.removeClass(moveTarget, \"k-handle-active\");\n                }\n\n                var range = this._state.range;\n                this.set(range.from, range.to);\n                this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n                delete this._state;\n            }\n        },\n\n        _tap: function(e) {\n            var ref = this;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var coords = this.chart._eventCoordinates(e);\n            var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var span = to - from;\n            var mid = from + span / 2;\n            var range = {};\n            var rightClick = e.event.which === 3;\n            var offset = Math.round(mid - categoryIx);\n\n            if (this._state || rightClick) {\n                return;\n            }\n\n            this.chart._unsetActivePoint();\n\n            if (!categoryAxis.options.justified) {\n                offset--;\n            }\n\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n\n            range.to = Math.min(range.from + span, max);\n\n            this._start(e);\n\n            if (this._state) {\n                this._state.range = range;\n                this.trigger(SELECT, this._rangeEventArgs(range));\n                this._end();\n            }\n        },\n\n        _mousewheel: function(e) {\n            var this$1$1 = this;\n\n            var delta = dataviz.mousewheelDelta(e);\n\n            this._start(e);\n\n            if (this._state) {\n                var range = this._state.range;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (Math.abs(delta) > 1) {\n                    delta *= ZOOM_ACCELERATION;\n                }\n\n                if (this.options.mousewheel.reverse) {\n                    delta *= -1;\n                }\n\n                if (this.expand(delta)) {\n                    this.trigger(SELECT, {\n                        axis: this.categoryAxis.options,\n                        delta: delta,\n                        originalEvent: e,\n                        from: this._value(range.from),\n                        to: this._value(range.to)\n                    });\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1._end();\n                }, MOUSEWHEEL_DELAY);\n            }\n        },\n\n        _gesturestart: function(e) {\n            var options = this.options;\n            var touch = e.touches[0];\n            var inPane = this._pointInPane(touch.pageX, touch.pageY);\n\n            if (!inPane) {\n                return;\n            }\n\n            this._state = {\n                range: {\n                    from: this._index(options.from),\n                    to: this._index(options.to)\n                }\n            };\n            var args = this._rangeEventArgs(this._state.range);\n\n            if (this.trigger(SELECT_START, args)) {\n                this._state = null;\n            } else {\n                e.preventDefault();\n            }\n        },\n\n        _gestureend: function() {\n            if (this._state) {\n                this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n                delete this._state;\n            }\n        },\n\n        _gesturechange: function(e) {\n            if (!this._state) {\n                return;\n            }\n\n            var ref = this;\n            var chart = ref.chart;\n            var state = ref._state;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var range = state.range;\n            var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n            var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n            var left = Math.min(p0, p1);\n            var right = Math.max(p0, p1);\n\n            e.preventDefault();\n\n            range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n            range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n            this.move(range.from, range.to);\n\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        },\n\n        _index: function(value) {\n            var index = value;\n\n            if (value instanceof Date) {\n                index = this.categoryAxis.categoryIndex(value);\n            }\n\n            return index;\n        },\n\n        _value: function(index) {\n            var value = index;\n            if (this._dateAxis) {\n                value = this.categoryAxis.categoryAt(index);\n                if (value > this.options.max) {\n                    value = this.options.max;\n                }\n            }\n\n            return value;\n        },\n\n        _slot: function(value) {\n            var categoryAxis = this.categoryAxis;\n            var index = this._index(value);\n\n            return categoryAxis.getSlot(index, index, true);\n        },\n\n        move: function(from, to) {\n            var options = this.options;\n            var reverse = this.categoryAxis.options.reverse;\n            var offset = options.offset;\n            var padding = options.padding;\n            var border = options.selection.border;\n            var left = reverse ? to : from;\n            var right = reverse ? from : to;\n            var edge = 'x' + (reverse ? 2 : 1);\n\n            var box = this._slot(left);\n            var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n            elementStyles(this.leftMask, {\n                width: leftMaskWidth\n            });\n            elementStyles(this.selection, {\n                left: leftMaskWidth\n            });\n\n            box = this._slot(right);\n\n            var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n            elementStyles(this.rightMask, {\n                width: rightMaskWidth\n            });\n\n            var distance = options.width - rightMaskWidth;\n            if (distance !== options.width) {\n                distance += border.right;\n            }\n\n            elementStyles(this.rightMask, {\n                left: distance\n            });\n            elementStyles(this.selection, {\n                width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n            });\n        },\n\n        set: function(from, to) {\n            var options = this.options;\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var fromValue = limitValue(this._index(from), min, max);\n            var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n            if (options.visible) {\n                this.move(fromValue, toValue);\n            }\n\n            options.from = this._value(fromValue);\n            options.to = this._value(toValue);\n        },\n\n        expand: function(delta) {\n            var options = this.options;\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var zDir = options.mousewheel.zoom;\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var range = { from: from, to: to };\n            var oldRange = deepExtend({}, range);\n\n            if (this._state) {\n                range = this._state.range;\n            }\n\n            if (zDir !== RIGHT) {\n                range.from = limitValue(\n                    limitValue(from - delta, 0, to - 1),\n                    min, max\n                );\n            }\n\n            if (zDir !== LEFT) {\n                range.to = limitValue(\n                    limitValue(to + delta, range.from + 1, max),\n                    min,\n                    max\n                 );\n            }\n\n            if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.set(range.from, range.to);\n                return true;\n            }\n        },\n\n        zoom: function(delta, coords) {\n            var options = this.options;\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var range = { from: from, to: to };\n            var oldRange = deepExtend({}, range);\n\n            var ref = this.categoryAxis.options;\n            var reverse = ref.reverse;\n            var origin = X + (reverse ? '2' : '1');\n            var lineBox = this.categoryAxis.lineBox();\n            var relative = Math.abs(lineBox[origin] - coords[X]);\n            var size = lineBox.width();\n            var position = round(relative / size, 2);\n            var minDelta = round(position * delta);\n            var maxDelta = round((1 - position) * delta);\n\n            if (this._state) {\n                range = this._state.range;\n            }\n\n            range.from = limitValue(\n                limitValue(from - minDelta, 0, to - 1),\n                min, max\n            );\n\n            range.to = limitValue(\n                limitValue(to + maxDelta, range.from + 1, max),\n                min,\n                max\n            );\n\n            if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.set(range.from, range.to);\n                return true;\n            }\n        },\n\n        trigger: function(name, args) {\n            return (this.observer || this.chart).trigger(name, args);\n        }\n    });\n\n    setDefaultOptions(Selection, {\n        visible: true,\n        mousewheel: {\n            zoom: \"both\"\n        },\n        min: MIN_VALUE,\n        max: MAX_VALUE\n    });\n\n    var Tooltip = BaseTooltip.extend({\n        show: function(point) {\n            if (!point || !point.tooltipAnchor || (this._current && this._current === point)) {\n                return;\n            }\n\n            var options = deepExtend({}, this.options, point.options.tooltip);\n            var anchor = point.tooltipAnchor();\n\n            if (anchor) {\n                this._current = point;\n                BaseTooltip.fn.show.call(this, {\n                    point: point,\n                    anchor: anchor\n                }, options, point);\n            } else {\n                this.hide();\n            }\n        },\n\n        hide: function() {\n            delete this._current;\n            BaseTooltip.fn.hide.call(this);\n        }\n    });\n\n    var SharedTooltip = BaseTooltip.extend({\n        init: function(plotArea, options) {\n            BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n\n            this.plotArea = plotArea;\n            this.formatService = plotArea.chartService.format;\n        },\n\n        showAt: function(points, coords) {\n            var tooltipPoints = grep(points, function(point) {\n                var tooltip = point.series.tooltip;\n                var excluded = tooltip && tooltip.visible === false;\n\n                return !excluded;\n            });\n\n            if (tooltipPoints.length > 0) {\n                var point = tooltipPoints[0];\n                var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n                var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n                this.show({\n                    anchor: anchor,\n                    shared: true,\n                    points: points,\n                    category: point.category,\n                    categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                    series: this.plotArea.series\n                }, this.options);\n            }\n        },\n\n        _slotAnchor: function(point, slot) {\n            var axis = this.plotArea.categoryAxis;\n            var align = {\n                horizontal: \"left\",\n                vertical: \"center\"\n            };\n\n            if (!axis.options.vertical) {\n                point.x = slot.center().x;\n            }\n\n            return {\n                point: point,\n                align: align\n            };\n        },\n\n        _defaultAnchor: function(point, slot) {\n            var box = point.owner.pane.chartsBox();\n            var vertical = this.plotArea.categoryAxis.options.vertical;\n            var center = box.center();\n            var slotCenter = slot.center();\n            var align = {\n                horizontal: \"center\",\n                vertical: \"center\"\n            };\n\n            var centerPoint;\n            if (vertical) {\n                centerPoint = new Point(center.x, slotCenter.y);\n            } else {\n                centerPoint = new Point(slotCenter.x, center.y);\n            }\n\n            return {\n                point: centerPoint,\n                align: align\n            };\n        }\n    });\n\n    setDefaultOptions(SharedTooltip, {\n        categoryFormat: '{0:d}'\n    });\n\n    var BarChartAnimation = Animation.extend({\n        setup: function() {\n            var ref = this;\n            var element = ref.element;\n            var options = ref.options;\n            var bbox = element.bbox();\n\n            if (bbox) {\n                this.origin = options.origin;\n                var axis = options.vertical ? Y : X;\n\n                var fromScale = this.fromScale = new GeometryPoint(1, 1);\n                fromScale[axis] = START_SCALE;\n\n                element.transform(transform()\n                    .scale(fromScale.x, fromScale.y)\n                );\n            } else {\n                this.abort();\n            }\n        },\n\n        step: function(pos) {\n            var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n            var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n\n            this.element.transform(transform()\n                .scale(scaleX, scaleY, this.origin)\n            );\n        },\n\n        abort: function() {\n            Animation.fn.abort.call(this);\n            this.element.transform(null);\n        }\n    });\n\n    setDefaultOptions(BarChartAnimation, {\n        duration: INITIAL_ANIMATION_DURATION\n    });\n\n    AnimationFactory.current.register(BAR, BarChartAnimation);\n\n    var BubbleAnimation = Animation.extend({\n        setup: function() {\n            var center = this.center = this.element.bbox().center();\n            this.element.transform(transform()\n                .scale(START_SCALE, START_SCALE, center)\n            );\n        },\n\n        step: function(pos) {\n            this.element.transform(transform()\n                .scale(pos, pos, this.center)\n            );\n        }\n    });\n\n    setDefaultOptions(BubbleAnimation, {\n        easing: \"easeOutElastic\"\n    });\n\n    AnimationFactory.current.register(BUBBLE, BubbleAnimation);\n\n    var FadeInAnimation = Animation.extend({\n        setup: function() {\n            this.fadeTo = this.element.opacity();\n            this.element.opacity(0);\n        },\n\n        step: function(pos) {\n            this.element.opacity(pos * this.fadeTo);\n        }\n    });\n\n    setDefaultOptions(FadeInAnimation, {\n        duration: 200,\n        easing: \"linear\"\n    });\n\n    AnimationFactory.current.register(FADEIN, FadeInAnimation);\n\n    var PieAnimation = Animation.extend({\n        setup: function() {\n            this.element.transform(transform()\n                .scale(START_SCALE, START_SCALE, this.options.center)\n            );\n        },\n\n        step: function(pos) {\n            this.element.transform(transform()\n                .scale(pos, pos, this.options.center)\n            );\n        }\n    });\n\n    setDefaultOptions(PieAnimation, {\n        easing: \"easeOutElastic\",\n        duration: INITIAL_ANIMATION_DURATION\n    });\n\n    AnimationFactory.current.register(PIE, PieAnimation);\n\n    var ScatterLineChart = ScatterChart.extend({\n        render: function() {\n            ScatterChart.fn.render.call(this);\n\n            this.renderSegments();\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = currentSeries.style;\n            var pointType;\n\n            if (style === SMOOTH) {\n                pointType = SplineSegment;\n            } else {\n                pointType = LineSegment;\n            }\n\n            return new pointType(linePoints, currentSeries, seriesIx);\n        },\n\n        animationPoints: function() {\n            var points = ScatterChart.fn.animationPoints.call(this);\n            return points.concat(this._segments);\n        },\n\n        createMissingValue: function(value, missingValues) {\n            if (missingValues === ZERO) {\n                var missingValue = {\n                    x: value.x,\n                    y: value.y\n                };\n                if (!hasValue(missingValue.x)) {\n                    missingValue.x = 0;\n                }\n                if (!hasValue(missingValue.y)) {\n                    missingValue.y = 0;\n                }\n                return missingValue;\n            }\n        }\n    });\n\n    deepExtend(ScatterLineChart.prototype, LineChartMixin);\n\n    var XYPlotArea = PlotAreaBase.extend({\n        initFields: function() {\n            this.namedXAxes = {};\n            this.namedYAxes = {};\n\n            this.xAxisRangeTracker = new AxisGroupRangeTracker();\n            this.yAxisRangeTracker = new AxisGroupRangeTracker();\n        },\n\n        render: function(panes) {\n            var this$1$1 = this;\n            if (panes === void 0) { panes = this.panes; }\n\n            var seriesByPane = this.groupSeriesByPane();\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1$1.addToLegend(paneSeries);\n                var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n                if (!filteredSeries) {\n                    continue;\n                }\n\n                this$1$1.createScatterChart(\n                    filterSeriesByType(filteredSeries, SCATTER),\n                    pane\n                );\n\n                this$1$1.createScatterLineChart(\n                    filterSeriesByType(filteredSeries, SCATTER_LINE),\n                    pane\n                );\n\n                this$1$1.createBubbleChart(\n                    filterSeriesByType(filteredSeries, BUBBLE),\n                    pane\n                );\n            }\n\n            this.createAxes(panes);\n        },\n\n        appendChart: function(chart, pane) {\n            this.xAxisRangeTracker.update(chart.xAxisRanges);\n            this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        },\n\n        removeAxis: function(axis) {\n            var axisName = axis.options.name;\n\n            PlotAreaBase.fn.removeAxis.call(this, axis);\n\n            if (axis.options.vertical) {\n                this.yAxisRangeTracker.reset(axisName);\n                delete this.namedYAxes[axisName];\n            } else {\n                this.xAxisRangeTracker.reset(axisName);\n                delete this.namedXAxes[axisName];\n            }\n\n            if (axis === this.axisX) {\n                delete this.axisX;\n            }\n\n            if (axis === this.axisY) {\n                delete this.axisY;\n            }\n        },\n\n        seriesPaneName: function(series) {\n            var options = this.options;\n            var xAxisName = series.xAxis;\n            var xAxisOptions = [].concat(options.xAxis);\n            var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n            var yAxisName = series.yAxis;\n            var yAxisOptions = [].concat(options.yAxis);\n            var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n            var panes = options.panes || [ {} ];\n            var defaultPaneName = panes[0].name || \"default\";\n            var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n            return paneName;\n        },\n\n        createScatterChart: function(series, pane) {\n            if (series.length > 0) {\n                this.appendChart(\n                    new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                    pane\n                );\n            }\n        },\n\n        createScatterLineChart: function(series, pane) {\n            if (series.length > 0) {\n                this.appendChart(\n                    new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                    pane\n                );\n            }\n        },\n\n        createBubbleChart: function(series, pane) {\n            if (series.length > 0) {\n                this.appendChart(\n                    new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                    pane\n                );\n            }\n        },\n\n        createXYAxis: function(options, vertical, axisIndex) {\n            var axisName = options.name;\n            var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n            var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n            var axisOptions = deepExtend({ reverse: !vertical && this.chartService.rtl }, options, { vertical: vertical });\n            var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n            var defaultRange = tracker.query();\n            var defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n            var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n            var typeSamples = [ axisOptions.min, axisOptions.max ];\n            var series = this.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n                if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                    var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                    typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                    break;\n                }\n            }\n\n            if (axisIndex === 0 && defaultRange) {\n                range.min = Math.min(range.min, defaultRange.min);\n                range.max = Math.max(range.max, defaultRange.max);\n            }\n\n            var inferredDate;\n\n            for (var i = 0; i < typeSamples.length; i++) {\n                if (typeSamples[i] instanceof Date) {\n                    inferredDate = true;\n                    break;\n                }\n            }\n\n            var axisType;\n            if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n                axisType = dataviz.DateValueAxis;\n            } else if (isLog) {\n                axisType = dataviz.LogarithmicAxis;\n            } else {\n                axisType = dataviz.NumericAxis;\n            }\n\n            var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n            axis.axisIndex = axisIndex;\n\n            if (axisName) {\n                if (namedAxes[axisName]) {\n                    throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n                }\n                namedAxes[axisName] = axis;\n            }\n\n            this.appendAxis(axis);\n\n            return axis;\n        },\n\n        createAxes: function(panes) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var xAxesOptions = [].concat(options.xAxis);\n            var xAxes = [];\n            var yAxesOptions = [].concat(options.yAxis);\n            var yAxes = [];\n\n            for (var idx = 0; idx < xAxesOptions.length; idx++) {\n                var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n                if (inArray(axisPane, panes)) {\n                    xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n                }\n            }\n\n            for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n                var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n                if (inArray(axisPane$1, panes)) {\n                    yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n                }\n            }\n\n            this.axisX = this.axisX || xAxes[0];\n            this.axisY = this.axisY || yAxes[0];\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var allAxes = this.axes;\n            var length = allAxes.length;\n            var xValues = [];\n            var yValues = [];\n\n            for (var i = 0; i < length; i++) {\n                var axis = allAxes[i];\n                var values = axis.options.vertical ? yValues : xValues;\n                var currentValue = axis.getValue(point);\n                if (currentValue !== null) {\n                    values.push(currentValue);\n                }\n            }\n\n            if (xValues.length > 0 && yValues.length > 0) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    originalEvent: e,\n                    x: singleItemOrArray(xValues),\n                    y: singleItemOrArray(yValues)\n                });\n            }\n        },\n\n        updateAxisOptions: function(axis, options) {\n            var vertical = axis.options.vertical;\n            var axes = this.groupAxes(this.panes);\n            var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n            updateAxisOptions$1(this.options, index, vertical, options);\n            updateAxisOptions$1(this.originalOptions, index, vertical, options);\n        }\n    });\n\n    function updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n        var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n        deepExtend(axisOptions, options);\n    }\n\n    setDefaultOptions(XYPlotArea, {\n        xAxis: {},\n        yAxis: {}\n    });\n\n    deepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\n    var PieSegment = ChartElement.extend({\n        init: function(value, sector, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.value = value;\n            this.sector = sector;\n        },\n\n        render: function() {\n            var labels = this.options.labels;\n            var chartService = this.owner.chartService;\n            var labelText = this.value;\n\n            if (this._rendered || this.visible === false) {\n                return;\n            }\n            this._rendered = true;\n\n            var labelTemplate = getTemplate(labels);\n            var pointData = this.pointData();\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else if (labels.format) {\n                labelText = chartService.format.auto(labels.format, labelText);\n            }\n\n            if (labels.visible && (labelText || labelText === 0)) {\n                if (labels.position === CENTER || labels.position === INSIDE_END) {\n                    if (!labels.color) {\n                        labels.color = dataviz.autoTextColor(this.options.color);\n                    }\n                    if (!labels.background) {\n                        labels.background = this.options.color;\n                    }\n                } else {\n                    var themeLabels = chartService.theme.seriesDefaults.labels;\n                    labels.color = labels.color || themeLabels.color;\n                    labels.background = labels.background || themeLabels.background;\n                }\n\n                this.label = new TextBox(labelText, deepExtend({}, labels, {\n                    align: CENTER,\n                    vAlign: \"\",\n                    animation: {\n                        type: FADEIN,\n                        delay: this.animationDelay\n                    }\n                }), pointData);\n\n                this.append(this.label);\n            }\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n            this.box = targetBox;\n            this.reflowLabel();\n        },\n\n        reflowLabel: function() {\n            var ref = this;\n            var labelsOptions = ref.options.labels;\n            var label = ref.label;\n            var sector = this.sector.clone();\n            var labelsDistance = labelsOptions.distance;\n            var angle = sector.middle();\n\n            if (label) {\n                var labelHeight = label.box.height();\n                var labelWidth = label.box.width();\n                var lp;\n\n                if (labelsOptions.position === CENTER) {\n                    sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                    lp = sector.point(angle);\n                    label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else if (labelsOptions.position === INSIDE_END) {\n                    sector.radius = sector.radius - labelHeight / 2;\n                    lp = sector.point(angle);\n                    label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else {\n                    var x1;\n                    lp = sector.clone().expand(labelsDistance).point(angle);\n                    if (lp.x >= sector.center.x) {\n                        x1 = lp.x + labelWidth;\n                        label.orientation = RIGHT;\n                    } else {\n                        x1 = lp.x - labelWidth;\n                        label.orientation = LEFT;\n                    }\n                    label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n                }\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var sector = ref.sector;\n            var options = ref.options;\n\n            ChartElement.fn.createVisual.call(this);\n\n            if (this.value) {\n                if (options.visual) {\n                    var startAngle = (sector.startAngle + 180) % 360;\n                    var visual = options.visual({\n                        category: this.category,\n                        dataItem: this.dataItem,\n                        value: this.value,\n                        series: this.series,\n                        percentage: this.percentage,\n                        center: new GeometryPoint(sector.center.x, sector.center.y),\n                        radius: sector.radius,\n                        innerRadius: sector.innerRadius,\n                        startAngle: startAngle,\n                        endAngle: startAngle + sector.angle,\n                        options: options,\n                        sender: this.getSender(),\n                        createVisual: function () {\n                            var group = new Group();\n                            this$1$1.createSegmentVisual(group);\n\n                            return group;\n                        }\n                    });\n\n                    if (visual) {\n                        this.visual.append(visual);\n                    }\n                } else {\n                    this.createSegmentVisual(this.visual);\n                }\n            }\n        },\n\n        createSegmentVisual: function(group) {\n            var ref = this;\n            var sector = ref.sector;\n            var options = ref.options;\n            var borderOptions = options.border || {};\n            var border = borderOptions.width > 0 ? {\n                stroke: {\n                    color: borderOptions.color,\n                    width: borderOptions.width,\n                    opacity: borderOptions.opacity,\n                    dashType: borderOptions.dashType\n                }\n            } : {};\n            var color = options.color;\n            var fill = {\n                color: color,\n                opacity: options.opacity\n            };\n            var visual = this.createSegment(sector, deepExtend({\n                fill: fill,\n                stroke: {\n                    opacity: options.opacity\n                },\n                zIndex: options.zIndex\n            }, border));\n\n            group.append(visual);\n\n            if (hasGradientOverlay(options)) {\n                group.append(this.createGradientOverlay(visual, {\n                    baseColor: color,\n                    fallbackFill: fill\n                }, deepExtend({\n                    center: [ sector.center.x, sector.center.y ],\n                    innerRadius: sector.innerRadius,\n                    radius: sector.radius,\n                    userSpace: true\n                }, options.overlay)));\n            }\n        },\n\n        createSegment: function(sector, options) {\n            if (options.singleSegment) {\n                return new drawing.Circle(new geometry.Circle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n            }\n\n            return dataviz.ShapeBuilder.current.createRing(sector, options);\n        },\n\n        createAnimation: function() {\n            var ref = this;\n            var options = ref.options;\n            var center = ref.sector.center;\n\n            deepExtend(options, {\n                animation: {\n                    center: [ center.x, center.y ],\n                    delay: this.animationDelay\n                }\n            });\n\n            ChartElement.fn.createAnimation.call(this);\n        },\n\n        createHighlight: function(options) {\n            var highlight = this.options.highlight || {};\n            var border = highlight.border || {};\n\n            return this.createSegment(this.sector, deepExtend({}, options, {\n                fill: {\n                    color: highlight.color,\n                    opacity: highlight.opacity\n                },\n                stroke: {\n                    opacity: border.opacity,\n                    width: border.width,\n                    color: border.color\n                }\n            }));\n        },\n\n        highlightVisual: function() {\n            return this.visual.children[0];\n        },\n\n        highlightVisualArgs: function() {\n            var sector = this.sector;\n\n            return {\n                options: this.options,\n                radius: sector.radius,\n                innerRadius: sector.innerRadius,\n                center: new GeometryPoint(sector.center.x, sector.center.y),\n                startAngle: sector.startAngle,\n                endAngle: sector.angle + sector.startAngle,\n                visual: this.visual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n            var midAndle = sector.middle();\n            var midPoint = sector.point(midAndle);\n\n            return {\n                point: midPoint,\n                align: tooltipAlignment(midAndle + 180)\n            };\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage\n            };\n        }\n    });\n\n    var RAD_30 = round(dataviz.rad(30), DEFAULT_PRECISION);\n    var RAD_60 = round(dataviz.rad(60), DEFAULT_PRECISION);\n\n    function tooltipAlignment(angle) {\n        var radians = dataviz.rad(angle);\n        var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n        var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n\n        var horizontal;\n        if (Math.abs(sine) > RAD_60) {\n            horizontal = CENTER;\n        } else if (cosine < 0) {\n            horizontal = RIGHT;\n        } else {\n            horizontal = LEFT;\n        }\n\n        var vertical;\n        if (Math.abs(sine) < RAD_30) {\n            vertical = CENTER;\n        } else if (sine < 0) {\n            vertical = BOTTOM;\n        } else {\n            vertical = TOP;\n        }\n\n        return {\n            horizontal: horizontal,\n            vertical: vertical\n        };\n    }\n\n    setDefaultOptions(PieSegment, {\n        color: WHITE,\n        overlay: {\n            gradient: \"roundedBevel\"\n        },\n        border: {\n            width: 0.5\n        },\n        labels: {\n            visible: false,\n            distance: 35,\n            font: datavizConstants.DEFAULT_FONT,\n            margin: getSpacing(0.5),\n            align: CIRCLE,\n            zIndex: 1,\n            position: OUTSIDE_END\n        },\n        animation: {\n            type: PIE\n        },\n        highlight: {\n            visible: true,\n            border: {\n                width: 1\n            }\n        },\n        visible: true\n    });\n\n    deepExtend(PieSegment.prototype, PointEventsMixin);\n\n    var PieChartMixin = {\n        createLegendItem: function(value, point, options) {\n            var legendOptions = this.options.legend || {};\n            var labelsOptions = legendOptions.labels || {};\n            var inactiveItems = legendOptions.inactiveItems || {};\n            var inactiveItemsLabels = inactiveItems.labels || {};\n\n            if (options && options.visibleInLegend !== false) {\n                var pointVisible = options.visible !== false;\n                var labelTemplate = pointVisible ? getTemplate(labelsOptions) :\n                    getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n                var text = options.category;\n\n                if (labelTemplate) {\n                    text = labelTemplate({\n                        text: text,\n                        series: options.series,\n                        dataItem: options.dataItem,\n                        percentage: options.percentage,\n                        value: value\n                    });\n                }\n\n                var itemLabelOptions, markerColor;\n                if (pointVisible) {\n                    itemLabelOptions = {};\n                    markerColor = point.color;\n                } else {\n                    itemLabelOptions = {\n                        color: inactiveItemsLabels.color,\n                        font: inactiveItemsLabels.font\n                    };\n                    markerColor = (inactiveItems.markers || {}).color;\n                }\n\n                if (hasValue(text) && text !== \"\") {\n                    this.legendItems.push({\n                        active: pointVisible,\n                        pointIndex: options.index,\n                        text: text,\n                        series: options.series,\n                        markerColor: markerColor,\n                        labels: itemLabelOptions\n                    });\n                }\n            }\n        }\n    };\n\n    var PIE_SECTOR_ANIM_DELAY = 70;\n\n    var PieChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this.points = [];\n            this.legendItems = [];\n            this.render();\n        },\n\n        render: function() {\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n            var colorsCount = seriesColors.length;\n            var series = options.series;\n            var seriesCount = series.length;\n\n            for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var data = currentSeries.data;\n                var ref$1 = bindSegments(currentSeries);\n                var total = ref$1.total;\n                var points = ref$1.points;\n                var count = ref$1.count;\n                var anglePerValue = 360 / total;\n                var constantAngle = (void 0);\n                if (!isFinite(anglePerValue)) {\n                    constantAngle = 360 / count;\n                }\n                var currentAngle = (void 0);\n\n                if (defined(currentSeries.startAngle)) {\n                    currentAngle = currentSeries.startAngle;\n                } else {\n                    currentAngle = options.startAngle;\n                }\n\n                if (seriesIx !== seriesCount - 1) {\n                    if (currentSeries.labels.position === OUTSIDE_END) {\n                        currentSeries.labels.position = CENTER;\n                    }\n                }\n\n                for (var i = 0; i < points.length; i++) {\n                    var pointData = points[i];\n                    if (!pointData) {\n                        continue;\n                    }\n\n                    var fields = pointData.fields;\n                    var value = pointData.value;\n                    var visible = pointData.visible;\n                    var angle = value !== 0 ? (constantAngle || (value * anglePerValue)) : 0;\n                    var explode = data.length !== 1 && Boolean(fields.explode);\n\n                    if (!isFunction(currentSeries.color)) {\n                        currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                    }\n\n                    callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                        owner: this$1$1,\n                        category: defined(fields.category) ? fields.category : \"\",\n                        index: i,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: data[i],\n                        percentage: total !== 0 ? value / total : 0,\n                        explode: explode,\n                        visibleInLegend: fields.visibleInLegend,\n                        visible: visible,\n                        zIndex: seriesCount - seriesIx,\n                        animationDelay: this$1$1.animationDelay(i, seriesIx, seriesCount)\n                    });\n\n                    if (visible !== false) {\n                        currentAngle += angle;\n                    }\n                }\n            }\n        },\n\n        evalSegmentOptions: function(options, value, fields) {\n            var series = fields.series;\n\n            evalOptions(options, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                category: fields.category,\n                percentage: fields.percentage\n            }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"visual\", \"toggle\" ] });\n        },\n\n        addValue: function(value, sector, fields) {\n            var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n            this.evalSegmentOptions(segmentOptions, value, fields);\n\n            this.createLegendItem(value, segmentOptions, fields);\n\n            if (fields.visible === false) {\n                return;\n            }\n\n            var segment = new PieSegment(value, sector, segmentOptions);\n            $.extend(segment, fields);\n            this.append(segment);\n            this.points.push(segment);\n        },\n\n        reflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var points = ref.points;\n            var seriesConfigs = ref.seriesConfigs; if (seriesConfigs === void 0) { seriesConfigs = []; }\n            var count = points.length;\n            var box = targetBox.clone();\n            var space = 5;\n            var minWidth = Math.min(box.width(), box.height());\n            var halfMinWidth = minWidth / 2;\n            var defaultPadding = minWidth - minWidth * 0.85;\n            var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n            var newBoxCenter = newBox.center();\n            var boxCenter = box.center();\n            var seriesCount = options.series.length;\n            var leftSideLabels = [];\n            var rightSideLabels = [];\n            var padding = valueOrDefault(options.padding, defaultPadding);\n\n            this.targetBox = targetBox;\n\n            padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n            newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n\n            var radius = halfMinWidth - padding;\n            var center = new Point(\n                radius + newBox.x1 + padding,\n                radius + newBox.y1 + padding\n            );\n\n            for (var i = 0; i < count; i++) {\n                var segment = points[i];\n                var sector = segment.sector;\n                var seriesIndex = segment.seriesIx;\n                sector.radius = radius;\n                sector.center = center;\n\n                if (seriesConfigs.length) {\n                    var seriesConfig = seriesConfigs[seriesIndex];\n                    sector.innerRadius = seriesConfig.innerRadius;\n                    sector.radius = seriesConfig.radius;\n                }\n\n                if (seriesIndex === seriesCount - 1 && segment.explode) {\n                    sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n                }\n\n                segment.reflow(newBox);\n\n                var label = segment.label;\n                if (label) {\n                    if (label.options.position === OUTSIDE_END) {\n                        if (seriesIndex === seriesCount - 1) {\n                            if (label.orientation === RIGHT) {\n                                rightSideLabels.push(label);\n                            } else {\n                                leftSideLabels.push(label);\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (leftSideLabels.length > 0) {\n                leftSideLabels.sort(this.labelComparator(true));\n                this.leftLabelsReflow(leftSideLabels);\n            }\n\n            if (rightSideLabels.length > 0) {\n                rightSideLabels.sort(this.labelComparator(false));\n                this.rightLabelsReflow(rightSideLabels);\n            }\n\n            this.box = newBox;\n        },\n\n        leftLabelsReflow: function(labels) {\n            var distances = this.distanceBetweenLabels(labels);\n\n            this.distributeLabels(distances, labels);\n        },\n\n        rightLabelsReflow: function(labels) {\n            var distances = this.distanceBetweenLabels(labels);\n\n            this.distributeLabels(distances, labels);\n        },\n\n        distanceBetweenLabels: function(labels) {\n            var segment = last(this.points);\n            var sector = segment.sector;\n            var count = labels.length - 1;\n            var lr = sector.radius + segment.options.labels.distance;\n            var distances = [];\n            var firstBox = labels[0].box;\n            var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n\n            distances.push(distance);\n\n            for (var i = 0; i < count; i++) {\n                var secondBox = labels[i + 1].box;\n\n                firstBox = labels[i].box;\n                distance = round(secondBox.y1 - firstBox.y2);\n                distances.push(distance);\n            }\n            distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n            distances.push(distance);\n\n            return distances;\n        },\n\n        distributeLabels: function(distances, labels) {\n            var this$1$1 = this;\n\n            var count = distances.length;\n            var left, right, remaining;\n\n            for (var i = 0; i < count; i++) {\n                remaining = -distances[i];\n                left = right = i;\n\n                while (remaining > 0 && (left >= 0 || right < count)) {\n                    remaining = this$1$1._takeDistance(distances, i, --left, remaining);\n                    remaining = this$1$1._takeDistance(distances, i, ++right, remaining);\n                }\n            }\n\n            this.reflowLabels(distances, labels);\n        },\n\n        _takeDistance: function(distances, anchor, position, amount) {\n            var result = amount;\n            if (distances[position] > 0) {\n                var available = Math.min(distances[position], result);\n                result -= available;\n                distances[position] -= available;\n                distances[anchor] += available;\n            }\n\n            return result;\n        },\n\n        reflowLabels: function(distances, labels) {\n            var this$1$1 = this;\n\n            var segment = last(this.points);\n            var sector = segment.sector;\n            var labelOptions = segment.options.labels;\n            var labelsCount = labels.length;\n            var labelDistance = labelOptions.distance;\n            var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n            var boxX;\n\n            distances[0] += 2;\n            for (var i = 0; i < labelsCount; i++) {\n                var label = labels[i];\n                var box = label.box;\n\n                boxY += distances[i];\n                boxX = this$1$1.hAlignLabel(\n                    box.x2,\n                    sector.clone().expand(labelDistance),\n                    boxY,\n                    boxY + box.height(),\n                    label.orientation === RIGHT);\n\n                if (label.orientation === RIGHT) {\n                    if (labelOptions.align !== CIRCLE) {\n                        boxX = sector.radius + sector.center.x + labelDistance;\n                    }\n                    label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n                } else {\n                    if (labelOptions.align !== CIRCLE) {\n                        boxX = sector.center.x - sector.radius - labelDistance;\n                    }\n                    label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n                }\n\n                boxY += box.height();\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var connectors = ref.options.connectors;\n            var points = ref.points;\n            var count = points.length;\n            var space = 4;\n\n            ChartElement.fn.createVisual.call(this);\n\n            this._connectorLines = [];\n\n            for (var i = 0; i < count; i++) {\n                var segment = points[i];\n                var sector = segment.sector;\n                var label = segment.label;\n                var angle = sector.middle();\n                var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n                if (label) {\n                    var connectorLine = new Path({\n                        stroke: {\n                            color: connectorsColor,\n                            width: connectors.width\n                        },\n                        animation: {\n                            type: FADEIN,\n                            delay: segment.animationDelay\n                        }\n                    });\n\n                    if (label.options.position === OUTSIDE_END) {\n                        var box = label.box;\n                        var centerPoint = sector.center;\n                        var start = sector.point(angle);\n                        var middle = new Point(box.x1, box.center().y);\n                        var sr = (void 0), end = (void 0), crossing = (void 0);\n\n                        start = sector.clone().expand(connectors.padding).point(angle);\n                        connectorLine.moveTo(start.x, start.y);\n                        // TODO: Extract into a method to remove duplication\n                        if (label.orientation === RIGHT) {\n                            end = new Point(box.x1 - connectors.padding, box.center().y);\n                            crossing = intersection(centerPoint, start, middle, end);\n                            middle = new Point(end.x - space, end.y);\n                            crossing = crossing || middle;\n                            crossing.x = Math.min(crossing.x, middle.x);\n\n                            if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                                crossing.x < sector.center.x) {\n                                sr = sector.center.x + sector.radius + space;\n                                if (segment.options.labels.align !== COLUMN) {\n                                    if (sr < middle.x) {\n                                        connectorLine.lineTo(sr, start.y);\n                                    } else {\n                                        connectorLine.lineTo(start.x + space * 2, start.y);\n                                    }\n                                } else {\n                                    connectorLine.lineTo(sr, start.y);\n                                }\n                                connectorLine.lineTo(middle.x, end.y);\n                            } else {\n                                crossing.y = end.y;\n                                connectorLine.lineTo(crossing.x, crossing.y);\n                            }\n                        } else {\n                            end = new Point(box.x2 + connectors.padding, box.center().y);\n                            crossing = intersection(centerPoint, start, middle, end);\n                            middle = new Point(end.x + space, end.y);\n                            crossing = crossing || middle;\n                            crossing.x = Math.max(crossing.x, middle.x);\n\n                            if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                                crossing.x > sector.center.x) {\n                                sr = sector.center.x - sector.radius - space;\n                                if (segment.options.labels.align !== COLUMN) {\n                                    if (sr > middle.x) {\n                                        connectorLine.lineTo(sr, start.y);\n                                    } else {\n                                        connectorLine.lineTo(start.x - space * 2, start.y);\n                                    }\n                                } else {\n                                    connectorLine.lineTo(sr, start.y);\n                                }\n                                connectorLine.lineTo(middle.x, end.y);\n                            } else {\n                                crossing.y = end.y;\n                                connectorLine.lineTo(crossing.x, crossing.y);\n                            }\n                        }\n\n                        connectorLine.lineTo(end.x, end.y);\n\n                        this$1$1._connectorLines.push(connectorLine);\n                        this$1$1.visual.append(connectorLine);\n                    }\n                }\n            }\n        },\n\n        renderVisual: function() {\n            ChartElement.fn.renderVisual.call(this);\n\n            if (dataviz.find(this.options.series, function (options) { return options.autoFit; })) {\n                var targetBox = this.targetBox;\n                var pieCenter = this.box.center();\n                var bbox = this.visual.bbox();\n                if (!bbox) {\n                    return;\n                }\n\n                var bboxBottom = bbox.bottomRight();\n\n                var scale = Math.min(\n                    (pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y),\n                    (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y),\n                    (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x),\n                    (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x)\n                );\n\n                if (scale < 1) {\n                    this.visual.transform(transform().scale(scale, scale, [ pieCenter.x, pieCenter.y ]));\n                }\n            }\n        },\n\n        labelComparator: function(reverse) {\n            var reverseValue = reverse ? -1 : 1;\n\n            return function(a, b) {\n                var first = (a.parent.sector.middle() + 270) % 360;\n                var second = (b.parent.sector.middle() + 270) % 360;\n                return (first - second) * reverseValue;\n            };\n        },\n\n        hAlignLabel: function(originalX, sector, y1, y2, direction) {\n            var radius = sector.radius;\n            var sector_center = sector.center;\n            var cx = sector_center.x;\n            var cy = sector_center.y;\n            var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n            if (t > radius) {\n                return originalX;\n            }\n\n            return cx + Math.sqrt((radius * radius) - (t * t)) * (direction ? 1 : -1);\n        },\n\n        pointInCircle: function(point, center, radius) {\n            return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n        },\n\n        formatPointValue: function(point, format) {\n            return this.chartService.format.auto(format, point.value);\n        },\n\n        animationDelay: function(categoryIndex) {\n            return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n        },\n\n        stackRoot: function() {\n            return this;\n        }\n    });\n\n    function intersection(a1, a2, b1, b2) {\n        var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n        var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n        var result;\n        if (ub !== 0) {\n            var ua = (uat / ub);\n\n            result = new Point(\n                a1.x + ua * (a2.x - a1.x),\n                a1.y + ua * (a2.y - a1.y)\n            );\n        }\n\n        return result;\n    }\n\n    setDefaultOptions(PieChart, {\n        startAngle: 90,\n        connectors: {\n            width: 2,\n            color: \"#939393\",\n            padding: 8\n        },\n        inactiveItems: {\n            markers: {},\n            labels: {}\n        }\n    });\n\n    deepExtend(PieChart.prototype, PieChartMixin);\n\n    PieChart.prototype.isStackRoot = true;\n\n    var PiePlotArea = PlotAreaBase.extend({\n        render: function() {\n            this.createPieChart(this.series);\n        },\n\n        createPieChart: function(series) {\n            var firstSeries = series[0];\n            var pieChart = new PieChart(this, {\n                series: series,\n                padding: firstSeries.padding,\n                startAngle: firstSeries.startAngle,\n                connectors: firstSeries.connectors,\n                legend: this.options.legend\n            });\n\n            this.appendChart(pieChart);\n        },\n\n        appendChart: function(chart, pane) {\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n            append(this.options.legend.items, chart.legendItems);\n        }\n    });\n\n    var DonutSegment = PieSegment.extend({\n        reflowLabel: function() {\n            var ref = this;\n            var labelsOptions = ref.options.labels;\n            var label = ref.label;\n            var sector = this.sector.clone();\n            var angle = sector.middle();\n\n            if (label) {\n                var labelHeight = label.box.height();\n                if (labelsOptions.position === CENTER) {\n                    sector.radius -= (sector.radius - sector.innerRadius) / 2;\n\n                    var lp = sector.point(angle);\n\n                    label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else {\n                    PieSegment.fn.reflowLabel.call(this);\n                }\n            }\n        },\n\n        createSegment: function(sector, options) {\n            return dataviz.ShapeBuilder.current.createRing(sector, options);\n        }\n    });\n\n    setDefaultOptions(DonutSegment, {\n        overlay: {\n            gradient: \"roundedGlass\"\n        },\n        labels: {\n            position: CENTER\n        },\n        animation: {\n            type: PIE\n        }\n    });\n\n    deepExtend(DonutSegment.prototype, PointEventsMixin);\n\n    var DONUT_SECTOR_ANIM_DELAY = 50;\n\n    var DonutChart = PieChart.extend({\n        addValue: function(value, sector, fields) {\n            var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n            this.evalSegmentOptions(segmentOptions, value, fields);\n\n            this.createLegendItem(value, segmentOptions, fields);\n\n            if (fields.visible === false) {\n                return;\n            }\n\n            var segment = new DonutSegment(value, sector, segmentOptions);\n\n            $.extend(segment, fields);\n            this.append(segment);\n            this.points.push(segment);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var box = targetBox.clone();\n            var space = 5;\n            var minWidth = Math.min(box.width(), box.height());\n            var halfMinWidth = minWidth / 2;\n            var defaultPadding = minWidth - minWidth * 0.85;\n            var series = options.series;\n            var seriesCount = series.length;\n\n            var padding = valueOrDefault(options.padding, defaultPadding);\n            padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n\n            var totalSize = halfMinWidth - padding;\n            var seriesWithoutSize = 0;\n            var holeSize;\n\n            for (var i = 0; i < seriesCount; i++) {\n                var currentSeries = series[i];\n                if (i === 0) {\n                    if (defined(currentSeries.holeSize)) {\n                        holeSize = currentSeries.holeSize;\n                        totalSize -= currentSeries.holeSize;\n                    }\n                }\n\n                if (defined(currentSeries.size)) {\n                    totalSize -= currentSeries.size;\n                } else {\n                    seriesWithoutSize++;\n                }\n\n                if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                    totalSize -= currentSeries.margin;\n                }\n            }\n\n            if (!defined(holeSize)) {\n                var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n                holeSize = currentSize * 0.75;\n                totalSize -= holeSize;\n            }\n\n            var innerRadius = holeSize;\n            var margin = 0;\n            var size, radius;\n\n            this.seriesConfigs = [];\n\n            for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n                var currentSeries$1 = series[i$1];\n                size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n                innerRadius += margin;\n                radius = innerRadius + size;\n                this$1$1.seriesConfigs.push({ innerRadius: innerRadius, radius: radius });\n                margin = currentSeries$1.margin || 0;\n                innerRadius = radius;\n            }\n\n            PieChart.fn.reflow.call(this, targetBox);\n        },\n\n        animationDelay: function(categoryIndex, seriesIndex, seriesCount) {\n            return categoryIndex * DONUT_SECTOR_ANIM_DELAY +\n                (INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1));\n        }\n    });\n\n    setDefaultOptions(DonutChart, {\n        startAngle: 90,\n        connectors: {\n            width: 2,\n            color: \"#939393\",\n            padding: 8\n        }\n    });\n\n    var DonutPlotArea = PiePlotArea.extend({\n        render: function() {\n            this.createDonutChart(this.series);\n        },\n\n        createDonutChart: function(series) {\n            var firstSeries = series[0];\n            var donutChart = new DonutChart(this, {\n                series: series,\n                padding: firstSeries.padding,\n                connectors: firstSeries.connectors,\n                legend: this.options.legend\n            });\n\n            this.appendChart(donutChart);\n        }\n    });\n\n    var DEFAULT_PADDING = 0.15;\n\n    var PolarPlotAreaBase = PlotAreaBase.extend({\n        initFields: function() {\n            this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n        },\n\n        render: function() {\n            this.addToLegend(this.series);\n            this.createPolarAxis();\n            this.createCharts();\n            this.createValueAxis();\n        },\n\n        alignAxes: function() {\n            var axis = this.valueAxis;\n            var range = axis.range();\n            var crossingValue = axis.options.reverse ? range.max : range.min;\n            var slot = axis.getSlot(crossingValue);\n            var center = this.polarAxis.getSlot(0).center;\n            var axisBox = axis.box.translate(\n                center.x - slot.x1,\n                center.y - slot.y1\n            );\n\n            axis.reflow(axisBox);\n        },\n\n        createValueAxis: function() {\n            var tracker = this.valueAxisRangeTracker;\n            var defaultRange = tracker.query();\n            var axisOptions = this.valueAxisOptions({\n                roundToMajorUnit: false,\n                zIndex: -1\n            });\n            var axisType, axisDefaultRange;\n\n            if (axisOptions.type === LOGARITHMIC) {\n                axisType = dataviz.RadarLogarithmicAxis;\n                axisDefaultRange = { min: 0.1, max: 1 };\n            } else {\n                axisType = dataviz.RadarNumericAxis;\n                axisDefaultRange = { min: 0, max: 1 };\n            }\n\n            var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n            if (range && defaultRange) {\n                range.min = Math.min(range.min, defaultRange.min);\n                range.max = Math.max(range.max, defaultRange.max);\n            }\n\n            var valueAxis = new axisType(\n                range.min, range.max,\n                axisOptions,\n                this.chartService\n            );\n\n            this.valueAxis = valueAxis;\n            this.appendAxis(valueAxis);\n        },\n\n        reflowAxes: function() {\n            var ref = this;\n            var options = ref.options.plotArea;\n            var valueAxis = ref.valueAxis;\n            var polarAxis = ref.polarAxis;\n            var box = ref.box;\n            var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n            var padding = getSpacing(options.padding || {}, defaultPadding);\n            var paddingBox = box.clone().unpad(padding);\n            var axisBox = paddingBox.clone();\n\n            axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n            axisBox.align(paddingBox, Y, CENTER);\n\n            var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n            polarAxis.reflow(axisBox);\n            valueAxis.reflow(valueAxisBox);\n            var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n            valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n            this.axisBox = axisBox;\n            this.alignAxes(axisBox);\n        },\n\n        backgroundBox: function() {\n            return this.box;\n        },\n\n        detachLabels: function() {}\n    });\n\n    var PolarScatterChart = ScatterChart.extend({\n        pointSlot: function(slotX, slotY) {\n            var valueRadius = slotX.center.y - slotY.y1;\n            var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n\n            return new Box(slot.x, slot.y, slot.x, slot.y);\n        }\n    });\n\n    setDefaultOptions(PolarScatterChart, {\n        clip: false\n    });\n\n    var PolarLineChart = ScatterLineChart.extend({\n\n    });\n\n    PolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n\n    setDefaultOptions(PolarLineChart, {\n        clip: false\n    });\n\n    var SplinePolarAreaSegment = SplineAreaSegment.extend({\n        fillToAxes: function(fillPath) {\n            var center = this._polarAxisCenter();\n            fillPath.lineTo(center.x, center.y);\n        },\n\n        _polarAxisCenter: function() {\n            var polarAxis = this.parent.plotArea.polarAxis;\n            var center = polarAxis.box.center();\n            return center;\n        },\n\n        strokeSegments: function() {\n            var segments = this._strokeSegments;\n\n            if (!segments) {\n                var center = this._polarAxisCenter();\n                var curveProcessor = new CurveProcessor(false);\n                var linePoints = this.points();\n\n                linePoints.push(center);\n                segments = this._strokeSegments = curveProcessor.process(linePoints);\n                segments.pop();\n            }\n\n            return segments;\n        }\n    });\n\n    var PolarAreaSegment = AreaSegment.extend({\n        fillToAxes: function(fillPath) {\n            var polarAxis = this.parent.plotArea.polarAxis;\n            var center = polarAxis.box.center();\n            var centerSegment = new geometry.Segment([ center.x, center.y ]);\n\n            fillPath.segments.unshift(centerSegment);\n            fillPath.segments.push(centerSegment);\n        }\n    });\n\n    var PolarAreaChart = PolarLineChart.extend({\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = (currentSeries.line || {}).style;\n            var segment;\n\n            if (style === SMOOTH) {\n                segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n            } else {\n                segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n            }\n            return segment;\n        },\n\n        createMissingValue: function(value, missingValues) {\n            var missingValue;\n\n            if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n                missingValue = {\n                    x: value.x,\n                    y: value.y\n                };\n                if (missingValues === ZERO) {\n                    missingValue.y = 0;\n                }\n            }\n\n            return missingValue;\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues || ZERO;\n        },\n\n        _hasMissingValuesGap: function() {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n\n            for (var idx = 0; idx < series.length; idx++) {\n                if (this$1$1.seriesMissingValues(series[idx]) === GAP) {\n                    return true;\n                }\n            }\n        },\n\n        sortPoints: function(points) {\n            var this$1$1 = this;\n\n            points.sort(xComparer);\n\n            if (this._hasMissingValuesGap()) {\n                for (var idx = 0; idx < points.length; idx++) {\n                    var point = points[idx];\n                    if (point) {\n                        var value = point.value;\n                        if (!hasValue(value.y) && this$1$1.seriesMissingValues(point.series) === GAP) {\n                            delete points[idx];\n                        }\n                    }\n                }\n            }\n\n            return points;\n        }\n    });\n\n    function xComparer(a, b) {\n        return a.value.x - b.value.x;\n    }\n\n    var PolarPlotArea = PolarPlotAreaBase.extend({\n        createPolarAxis: function() {\n            var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n\n            this.polarAxis = polarAxis;\n            this.axisX = polarAxis;\n            this.appendAxis(polarAxis);\n        },\n\n        valueAxisOptions: function(defaults) {\n            return deepExtend(defaults, {\n                majorGridLines: { type: ARC },\n                minorGridLines: { type: ARC }\n            }, this.options.yAxis);\n        },\n\n        createValueAxis: function() {\n            PolarPlotAreaBase.fn.createValueAxis.call(this);\n            this.axisY = this.valueAxis;\n        },\n\n        appendChart: function(chart, pane) {\n            this.valueAxisRangeTracker.update(chart.yAxisRanges);\n\n            PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n        },\n\n        createCharts: function() {\n            var series = this.filterVisibleSeries(this.series);\n            var pane = this.panes[0];\n\n            this.createLineChart(\n                filterSeriesByType(series, [ POLAR_LINE ]),\n                pane\n            );\n\n            this.createScatterChart(\n                filterSeriesByType(series, [ POLAR_SCATTER ]),\n                pane\n            );\n\n            this.createAreaChart(\n                filterSeriesByType(series, [ POLAR_AREA ]),\n                pane\n            );\n        },\n\n        createLineChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var lineChart = new PolarLineChart(this, { series: series });\n\n            this.appendChart(lineChart, pane);\n        },\n\n        createScatterChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var scatterChart = new PolarScatterChart(this, { series: series });\n\n            this.appendChart(scatterChart, pane);\n        },\n\n        createAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var areaChart = new PolarAreaChart(this, { series: series });\n\n            this.appendChart(areaChart, pane);\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var xValue = this.axisX.getValue(point);\n            var yValue = this.axisY.getValue(point);\n\n            if (xValue !== null && yValue !== null) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    x: xValue,\n                    y: yValue\n                });\n            }\n        },\n\n        createCrosshairs: function() {}\n    });\n\n    setDefaultOptions(PolarPlotArea, {\n        xAxis: {},\n        yAxis: {}\n    });\n\n    deepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin);\n\n    function groupBySeriesIx(segments) {\n        var seriesSegments = [];\n        for (var idx = 0; idx < segments.length; idx++) {\n            var segment = segments[idx];\n            seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n            seriesSegments[segment.seriesIx].push(segment);\n        }\n\n        return seriesSegments;\n    }\n\n    var RadarLineChart = LineChart.extend({\n        pointSlot: function(categorySlot, valueSlot) {\n            var valueRadius = categorySlot.center.y - valueSlot.y1;\n            var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n\n            return new Box(slot.x, slot.y, slot.x, slot.y);\n        },\n\n        renderSegments: function() {\n            LineChart.fn.renderSegments.call(this);\n\n            if (this._segments && this._segments.length > 1) {\n                var seriesSegments = groupBySeriesIx(this._segments);\n\n                for (var idx = 0; idx < seriesSegments.length; idx++) {\n                    var segments = seriesSegments[idx];\n                    if (segments && segments.length > 1) {\n                        var firstPoint = segments[0].linePoints[0];\n                        var lastSegment = last(segments);\n                        var lastPoint = last(lastSegment.linePoints);\n                        var isFirstDataPoint = firstPoint.categoryIx === 0;\n                        var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n                        if (isFirstDataPoint && isLastDataPoint) {\n                            last(segments).linePoints.push(firstPoint);\n                        }\n                    }\n                }\n            }\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = currentSeries.style;\n            var pointType;\n\n            if (style === SMOOTH) {\n                pointType = SplineSegment;\n            } else {\n                pointType = LineSegment;\n            }\n\n            var segment = new pointType(linePoints, currentSeries, seriesIx);\n            var missingValues = this.seriesMissingValues(currentSeries);\n\n            if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n                segment.options.closed = true;\n            }\n\n            return segment;\n        }\n    });\n\n    setDefaultOptions(RadarLineChart, {\n        clip: false,\n        limitPoints: false\n    });\n\n    var SplineRadarAreaSegment = SplineAreaSegment.extend({\n        fillToAxes: function() {}\n    });\n\n    var RadarAreaSegment = AreaSegment.extend({\n        fillToAxes: function() {}\n    });\n\n    var RadarAreaChart = RadarLineChart.extend({\n        createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n            var isStacked = this.options.isStacked;\n            var style = (currentSeries.line || {}).style;\n            var previousSegment;\n            var stackPoints;\n            var segment;\n\n            if (isStacked && seriesIx > 0 && prevSegment) {\n                stackPoints = prevSegment.linePoints.slice(0);\n                previousSegment = prevSegment;\n            }\n\n            if (style === SMOOTH) {\n                segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n                segment.options.closed = true;\n            } else {\n                linePoints.push(linePoints[0]);\n                segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            }\n\n            return segment;\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues || ZERO;\n        }\n    });\n\n    var RadarSegment = DonutSegment.extend({\n        init: function(value, options) {\n            DonutSegment.fn.init.call(this, value, null, options);\n        }\n    });\n\n    setDefaultOptions(RadarSegment, {\n        overlay: {\n            gradient: \"none\"\n        },\n        labels: {\n            distance: 10\n        }\n    });\n\n    var RadarClusterLayout = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.forEach = options.rtl ? forEachReverse : forEach;\n        },\n\n        reflow: function(sector) {\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var gap = options.gap;\n            var spacing = options.spacing;\n            var count = children.length;\n            var slots = count + gap + (spacing * (count - 1));\n            var slotAngle = sector.angle / slots;\n            var angle = sector.startAngle + slotAngle * (gap / 2);\n\n            this.forEach(children, function (child) {\n                var slotSector = sector.clone();\n                slotSector.startAngle = angle;\n                slotSector.angle = slotAngle;\n\n                if (child.sector) {\n                    slotSector.radius = child.sector.radius;\n                }\n\n                child.reflow(slotSector);\n                child.sector = slotSector;\n\n                angle += slotAngle + (slotAngle * spacing);\n            });\n        }\n    });\n\n    setDefaultOptions(RadarClusterLayout, {\n        gap: 1,\n        spacing: 0\n    });\n\n    var RadarStackLayout = ChartElement.extend({\n        reflow: function(sector) {\n            var ref = this;\n            var reverse = ref.options.reverse;\n            var children = ref.children;\n            var childrenCount = children.length;\n            var first = reverse ? childrenCount - 1 : 0;\n            var step = reverse ? -1 : 1;\n\n            this.box = new Box();\n\n            for (var i = first; i >= 0 && i < childrenCount; i += step) {\n                var childSector = children[i].sector;\n                childSector.startAngle = sector.startAngle;\n                childSector.angle = sector.angle;\n            }\n        }\n    });\n\n    var RadarBarChart = BarChart.extend({\n        pointType: function() {\n            return RadarSegment;\n        },\n\n        clusterType: function() {\n            return RadarClusterLayout;\n        },\n\n        stackType: function() {\n            return RadarStackLayout;\n        },\n\n        categorySlot: function(categoryAxis, categoryIx) {\n            return categoryAxis.getSlot(categoryIx);\n        },\n\n        pointSlot: function(categorySlot, valueSlot) {\n            var slot = categorySlot.clone();\n            var y = categorySlot.center.y;\n\n            slot.radius = y - valueSlot.y1;\n            slot.innerRadius = y - valueSlot.y2;\n\n            return slot;\n        },\n\n        reflowPoint: function(point, pointSlot) {\n            point.sector = pointSlot;\n            point.reflow();\n        },\n\n        createAnimation: function() {\n            this.options.animation.center = this.box.toRect().center();\n            BarChart.fn.createAnimation.call(this);\n        }\n    });\n\n    RadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n\n    setDefaultOptions(RadarBarChart, {\n        clip: false,\n        limitPoints: false,\n        animation: {\n            type: \"pie\"\n        }\n    });\n\n    var RadarPlotArea = PolarPlotAreaBase.extend({\n        createPolarAxis: function() {\n            var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n\n            this.polarAxis = categoryAxis;\n            this.categoryAxis = categoryAxis;\n            this.appendAxis(categoryAxis);\n            this.aggregateCategories();\n            this.createCategoryAxesLabels();\n        },\n\n        valueAxisOptions: function(defaults) {\n            if (this._hasBarCharts) {\n                deepExtend(defaults, {\n                    majorGridLines: { type: ARC },\n                    minorGridLines: { type: ARC }\n                });\n            }\n\n            if (this._isStacked100) {\n                deepExtend(defaults, {\n                    roundToMajorUnit: false,\n                    labels: { format: \"P0\" }\n                });\n            }\n\n            return deepExtend(defaults, this.options.valueAxis);\n        },\n\n        aggregateCategories: function() {\n            // No separate panes in radar charts\n            CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n        },\n\n        createCategoryAxesLabels: function() {\n            CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n        },\n\n        filterSeries: function(currentSeries) {\n            // Not supported for radar charts\n            return currentSeries;\n        },\n\n        createCharts: function() {\n            var series = this.filterVisibleSeries(this.series);\n            var pane = this.panes[0];\n\n            this.createAreaChart(\n                filterSeriesByType(series, [ RADAR_AREA ]),\n                pane\n            );\n\n            this.createLineChart(\n                filterSeriesByType(series, [ RADAR_LINE ]),\n                pane\n            );\n\n            this.createBarChart(\n                filterSeriesByType(series, [ RADAR_COLUMN ]),\n                pane\n            );\n        },\n\n        chartOptions: function(series) {\n            var options = { series: series };\n            var firstSeries = series[0];\n            if (firstSeries) {\n                var filteredSeries = this.filterVisibleSeries(series);\n                var stack = firstSeries.stack;\n                options.isStacked = stack && filteredSeries.length > 1;\n                options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n                if (options.isStacked100) {\n                    this._isStacked100 = true;\n                }\n            }\n\n            return options;\n        },\n\n        createAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n            this.appendChart(areaChart, pane);\n        },\n\n        createLineChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var lineChart = new RadarLineChart(this, this.chartOptions(series));\n            this.appendChart(lineChart, pane);\n        },\n\n        createBarChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var options = this.chartOptions(series);\n            options.gap = firstSeries.gap;\n            options.spacing = firstSeries.spacing;\n\n            var barChart = new RadarBarChart(this, options);\n            this.appendChart(barChart, pane);\n\n            this._hasBarCharts = true;\n        },\n\n        seriesCategoryAxis: function() {\n            return this.categoryAxis;\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var category = this.categoryAxis.getCategory(point);\n            var value = this.valueAxis.getValue(point);\n\n            if (category !== null && value !== null) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    category: category,\n                    value: value\n                });\n            }\n        },\n\n        createCrosshairs: function() {}\n    });\n\n    deepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n        appendChart: CategoricalPlotArea.prototype.appendChart,\n        aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n        seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints\n    });\n\n    setDefaultOptions(RadarPlotArea, {\n        categoryAxis: {\n            categories: []\n        },\n        valueAxis: {}\n    });\n\n    var FunnelSegment = ChartElement.extend({\n        init: function(value, options, segmentOptions) {\n            ChartElement.fn.init.call(this, options);\n\n            this.value = value;\n            this.options.index = segmentOptions.index;\n        },\n\n        reflow: function(chartBox) {\n            var points = this.points;\n            var label = this.children[0];\n\n            this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n            if (label) {\n                label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var visual;\n\n            ChartElement.fn.createVisual.call(this);\n\n            if (options.visual) {\n                visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    points: this.points,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () { return this$1$1.createPath(); }\n                });\n            } else {\n                visual = this.createPath();\n            }\n\n            if (visual) {\n                this.visual.append(visual);\n            }\n        },\n\n        createPath: function() {\n            var options = this.options;\n            var border = options.border;\n            var path = Path.fromPoints(this.points, {\n                fill: {\n                    color: options.color,\n                    opacity: options.opacity\n                },\n                stroke: {\n                    color: border.color,\n                    opacity: border.opacity,\n                    width: border.width\n                }\n            }).close();\n\n            return path;\n        },\n\n        createHighlight: function(style) {\n            return Path.fromPoints(this.points, style);\n        },\n\n        highlightVisual: function() {\n            return this.visual.children[0];\n        },\n\n        highlightVisualArgs: function() {\n            var path = Path.fromPoints(this.points).close();\n\n            return {\n                options: this.options,\n                path: path\n            };\n        },\n\n        tooltipAnchor: function() {\n            var box = this.box;\n            return {\n                point: new Point(box.center().x, box.y1),\n                align: {\n                    horizontal: \"center\",\n                    vertical: \"top\"\n                }\n            };\n        },\n\n        formatValue: function(format) {\n            var point = this;\n            return point.owner.formatPointValue(point, format);\n        }\n    });\n\n    setDefaultOptions(FunnelSegment, {\n        color: WHITE,\n        border: {\n            width: 1\n        }\n    });\n\n    deepExtend(FunnelSegment.prototype, PointEventsMixin);\n\n    var FunnelChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.points = [];\n            this.labels = [];\n            this.legendItems = [];\n            this.render();\n        },\n\n        formatPointValue: function(point, format) {\n            return this.chartService.format.auto(format,point.value);\n        },\n\n        render: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n            var series = options.series[0];\n            var data = series.data;\n\n            if (!data) {\n                return;\n            }\n\n            var ref$1 = bindSegments(series);\n            var total = ref$1.total;\n            var points = ref$1.points;\n\n            for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n\n                if (!pointData) {\n                    continue;\n                }\n\n                var fields = pointData.fields;\n\n                if (!isFunction(series.color)) {\n                    series.color = fields.color || seriesColors[i % seriesColors.length];\n                }\n\n                fields = deepExtend({\n                    index: i,\n                    owner: this$1$1,\n                    series: series,\n                    dataItem: data[i],\n                    percentage: pointData.value / total\n                }, fields, { visible: pointData.visible });\n\n                var value = pointData.valueFields.value;\n                var segment = this$1$1.createSegment(value, fields);\n                var label = this$1$1.createLabel(value, fields);\n\n                if (segment && label) {\n                    segment.append(label);\n                }\n            }\n        },\n\n        evalSegmentOptions: function(options, value, fields) {\n            var series = fields.series;\n\n            evalOptions(options, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                index: fields.index\n            }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"toggle\", \"visual\" ] });\n        },\n\n        createSegment: function(value, fields) {\n            var seriesOptions = deepExtend({}, fields.series);\n            this.evalSegmentOptions(seriesOptions, value, fields);\n\n            this.createLegendItem(value, seriesOptions, fields);\n\n            if (fields.visible !== false) {\n\n                var segment = new FunnelSegment(value, seriesOptions, fields);\n                $.extend(segment, fields);\n\n                this.append(segment);\n                this.points.push(segment);\n\n                return segment;\n            }\n        },\n\n        createLabel: function(value, fields) {\n            var series = fields.series;\n            var dataItem = fields.dataItem;\n            var labels = deepExtend({}, this.options.labels, series.labels);\n            var text = value;\n\n            if (labels.visible) {\n                var labelTemplate = getTemplate(labels);\n                var data = {\n                    dataItem: dataItem,\n                    value: value,\n                    percentage: fields.percentage,\n                    category: fields.category,\n                    series: series\n                };\n                if (labelTemplate) {\n                    text = labelTemplate(data);\n                } else if (labels.format) {\n                    text = this.plotArea.chartService.format.auto(labels.format, text);\n                }\n\n                if (!labels.color) {\n                    labels.color = dataviz.autoTextColor(series.color);\n                    if (!labels.background) {\n                        labels.background = series.color;\n                    }\n                }\n\n                this.evalSegmentOptions(labels, value, fields);\n                var textBox = new TextBox(text, deepExtend({\n                    vAlign: labels.position\n                }, labels), data);\n\n                this.labels.push(textBox);\n\n                return textBox;\n            }\n        },\n\n        labelPadding: function() {\n            var labels = this.labels;\n            var padding = { left: 0, right: 0 };\n\n            for (var i = 0; i < labels.length; i++) {\n                var label = labels[i];\n                var align = label.options.align;\n                if (align !== CENTER) {\n                    var width = labels[i].box.width();\n\n                    if (align === LEFT) {\n                        padding.left = Math.max(padding.left, width);\n                    } else {\n                        padding.right = Math.max(padding.right, width);\n                    }\n                }\n            }\n\n            return padding;\n        },\n\n        dynamicSlopeReflow: function(box, width, totalHeight) {\n            var ref = this;\n            var options = ref.options;\n            var segments = ref.points;\n            var count = segments.length;\n            var firstSegment = segments[0];\n            var maxSegment = firstSegment;\n\n            for (var idx = 0; idx < segments.length; idx++) {\n                if (segments[idx].percentage > maxSegment.percentage) {\n                    maxSegment = segments[idx];\n                }\n            }\n\n            var lastUpperSide = (firstSegment.percentage / maxSegment.percentage) * width;\n            var previousOffset = (width - lastUpperSide) / 2;\n            var previousHeight = 0;\n\n            for (var idx$1 = 0; idx$1 < count; idx$1++) {\n                var percentage = segments[idx$1].percentage;\n                var nextSegment = segments[idx$1 + 1];\n                var nextPercentage = (nextSegment ? nextSegment.percentage : percentage);\n                var points = segments[idx$1].points = [];\n                var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n                var offset = (void 0);\n\n                if (!percentage) {\n                    offset = nextPercentage ? 0 : width / 2;\n                } else {\n                    offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n                }\n\n                offset = limitValue(offset, 0, width);\n\n                points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n                points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n\n                previousOffset = offset;\n                previousHeight += height + options.segmentSpacing;\n                lastUpperSide = limitValue(width - 2 * offset, 0, width);\n            }\n        },\n\n        constantSlopeReflow: function(box, width, totalHeight) {\n            var ref = this;\n            var options = ref.options;\n            var segments = ref.points;\n            var count = segments.length;\n            var decreasingWidth = options.neckRatio <= 1;\n            var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n            var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n            var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n            var finalNarrow = (topMostWidth - neckRatio) / 2;\n            var previousHeight = 0;\n\n            for (var idx = 0; idx < count; idx++) {\n                var points = segments[idx].points = [];\n                var percentage = segments[idx].percentage;\n                var offset = (options.dynamicHeight) ? (finalNarrow * percentage) : (finalNarrow / count);\n                var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n\n                points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n                points.push(new GeometryPoint(box.x1 + previousOffset + offset,box.y1 + height + previousHeight));\n                previousOffset += offset;\n                previousHeight += height + options.segmentSpacing;\n            }\n        },\n\n        reflow: function(chartBox) {\n            var points = this.points;\n            var count = points.length;\n\n            if (!count) {\n                return;\n            }\n\n            var options = this.options;\n            var box = chartBox.clone().unpad(this.labelPadding());\n            var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n            var width = box.width();\n\n            if (options.dynamicSlope) {\n                this.dynamicSlopeReflow(box, width, totalHeight);\n            } else {\n                this.constantSlopeReflow(box, width, totalHeight);\n            }\n\n            for (var idx = 0; idx < count; idx++) {\n                points[idx].reflow(chartBox);\n            }\n        }\n    });\n\n    setDefaultOptions(FunnelChart, {\n        neckRatio: 0.3,\n        width: 300,\n        dynamicSlope: false,\n        dynamicHeight: true,\n        segmentSpacing: 0,\n        labels: {\n            visible: false,\n            align: CENTER,\n            position: CENTER,\n            zIndex: 1\n        }\n    });\n\n    deepExtend(FunnelChart.prototype, PieChartMixin);\n\n    var FunnelPlotArea = PlotAreaBase.extend({\n        render: function() {\n            this.createFunnelChart(this.series);\n        },\n\n        createFunnelChart: function(series) {\n            var firstSeries = series[0];\n            var funnelChart = new FunnelChart(this, {\n                series: series,\n                legend: this.options.legend,\n                neckRatio: firstSeries.neckRatio,\n                dynamicHeight: firstSeries.dynamicHeight,\n                dynamicSlope: firstSeries.dynamicSlope,\n                segmentSpacing: firstSeries.segmentSpacing,\n                highlight: firstSeries.highlight\n            });\n\n            this.appendChart(funnelChart);\n        },\n\n        appendChart: function(chart, pane) {\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n            append(this.options.legend.items, chart.legendItems);\n        }\n    });\n\n    // Linear color scale from the given color to white minus minimum lightness offset.\n    var colorScale = function (color, minLightnessOffset) {\n        if (minLightnessOffset === void 0) { minLightnessOffset = 0.05; }\n\n        var baseColor = kendo.parseColor(color);\n        var offset = 1 - minLightnessOffset;\n\n        return function (value) {\n            var hsl = baseColor.toHSL();\n            var range = 100 - hsl.l;\n            var point = offset - value;\n            hsl.l += Math.min(point * range, range);\n\n            return hsl.toCss();\n        };\n    };\n\n    var HeatmapPoint = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.options = options;\n            this.color = options.color || WHITE;\n            this.value = value;\n        },\n\n        render: function() {\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            this.createMarker();\n            this.createLabel();\n            this.createNote();\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labels = options.labels;\n\n            if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n                var labelColor = labels.color;\n\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else {\n                    labelText = this.formatValue(labels.format);\n                }\n\n                if (!labelColor) {\n                    labelColor = dataviz.autoTextColor(this.color);\n                }\n\n                this.label = new TextBox(labelText,\n                    deepExtend({\n                        align: CENTER,\n                        vAlign: CENTER,\n                        margin: {\n                            left: 5,\n                            right: 5\n                        },\n                        zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                    },\n                    labels, {\n                        color: labelColor\n                    }),\n                    pointData\n                );\n                this.append(this.label);\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n\n            var label = this.label;\n\n            this.box = targetBox;\n\n            if (label) {\n                label.reflow(this.markerBox());\n            }\n\n            if (this.note) {\n                this.note.reflow(targetBox);\n            }\n\n            this.marker.reflow(this.markerBox());\n        },\n\n        markerBox: function() {\n            var options = this.options;\n            var markers = options.markers;\n            var border = markers.border;\n            var rect = this.box.toRect();\n            var type = valueOrDefault(markers.type, 'rect');\n            var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n            var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n            var halfBorderWidth = Math.round(borderWidth / 2);\n\n            if (markers.size) {\n                var center = rect.center();\n                rect.size.width = rect.size.height = markers.size;\n                rect.origin.x = Math.round(center.x - rect.size.width / 2);\n                rect.origin.y = Math.round(center.y - rect.size.height / 2);\n            }\n\n            rect.size.width -= borderWidth;\n            rect.size.height -= borderWidth;\n            rect.origin.y += halfBorderWidth + 0.5;\n            rect.origin.x += halfBorderWidth + 0.5;\n\n            return dataviz.rectToBox(rect);\n        },\n\n        markerBorder: function() {\n            var options = this.options;\n            var markers = options.markers;\n            var border = markers.border;\n            var opacity = valueOrDefault(border.opacity, options.opacity);\n\n            return {\n                color: border.color || this.color,\n                width: border.width,\n                opacity: opacity,\n                dashType: border.dashType\n            };\n        },\n\n        createMarker: function() {\n            var options = this.options;\n            var markerOptions = options.markers;\n            var marker = new ShapeElement({\n                type: valueOrDefault(markerOptions.type, 'rect'),\n                width: markerOptions.size,\n                height: markerOptions.size,\n                rotation: markerOptions.rotation,\n                background: this.color,\n                border: this.markerBorder(),\n                borderRadius: markerOptions.borderRadius,\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n                animation: options.animation,\n                visual: options.visual\n            }, {\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                category: this.category\n            });\n\n            this.marker = marker;\n            this.append(marker);\n        },\n\n        createHighlight: function(style) {\n            var options = this.options;\n            var markerOptions = this.options.highlight.markers || this.options.markers;\n\n            var highlight = new ShapeElement({\n                type: valueOrDefault(markerOptions.type, 'rect'),\n                width: markerOptions.size,\n                height: markerOptions.size,\n                rotation: markerOptions.rotation,\n                background: markerOptions.color || this.color,\n                border: this.markerBorder(),\n                borderRadius: markerOptions.borderRadius,\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n            });\n\n            highlight.reflow(this.markerBox());\n            var visual = highlight.getElement();\n\n            visual.options.fill = style.fill;\n            visual.options.stroke = style.stroke;\n\n            return visual;\n        },\n\n        highlightVisual: function() {\n            return this.rectVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this.rectVisual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var left = this.box.center().x;\n            var top = this.box.y1 - TOOLTIP_OFFSET;\n\n            return {\n                point: new Point(left, top),\n                align: {\n                    horizontal: CENTER,\n                    vertical: BOTTOM\n                }\n            };\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        },\n\n        unclipElements: function() {\n            /* noop, clip labels */\n        },\n\n        pointData: function() {\n            return {\n                x: this.value.x,\n                y: this.value.y,\n                value: this.value.value,\n                dataItem: this.dataItem,\n                series: this.series\n            };\n        }\n    });\n\n    deepExtend(HeatmapPoint.prototype, PointEventsMixin);\n    deepExtend(HeatmapPoint.prototype, NoteMixin);\n\n    HeatmapPoint.prototype.defaults = {\n        markers: {\n            type: 'rect',\n            borderRadius: 4,\n            border: {\n                color: 'transparent'\n            }\n        },\n        padding: { top: 1 },\n        labels: {\n            visible: false,\n            padding: 3\n        },\n        opacity: 1,\n        notes: {\n            label: {}\n        }\n    };\n\n    var HeatmapChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this._initFields();\n\n            this.render();\n        },\n\n        _initFields: function() {\n            this.points = [];\n            this.seriesOptions = [];\n            this.valueRange = { min: MAX_VALUE, max: MIN_VALUE };\n            this._evalSeries = [];\n        },\n\n        render: function() {\n            this.setRange();\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        setRange: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                    var ref$1 = this$1$1._bindPoint(currentSeries, seriesIx, pointIx);\n                    var valueFields = ref$1.valueFields;\n                    if (defined(valueFields.value) && valueFields.value !== null) {\n                        this$1$1.valueRange.min = Math.min(this$1$1.valueRange.min, valueFields.value);\n                        this$1$1.valueRange.max = Math.max(this$1$1.valueRange.max, valueFields.value);\n                    }\n                }\n            }\n        },\n\n        addValue: function(value, fields) {\n            var point;\n            if (value && defined(value.value) && value.value !== null) {\n                point = this.createPoint(value, fields);\n                if (point) {\n                    $.extend(point, fields);\n                }\n            }\n\n            this.points.push(point);\n        },\n\n        evalPointOptions: function(options, value, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var state = {\n                defaults: series._defaults,\n                excluded: [\n                    \"data\", \"tooltip\", \"content\", \"template\",\n                    \"visual\", \"toggle\", \"drilldownSeriesFactory\"\n                ]\n            };\n\n            var doEval = this._evalSeries[seriesIx];\n            if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n            }\n\n            var pointOptions = options;\n            if (doEval) {\n                pointOptions = deepExtend({}, options);\n                evalOptions(pointOptions, {\n                    value: value,\n                    series: series,\n                    dataItem: fields.dataItem,\n                    min: this.valueRange.min,\n                    max: this.valueRange.max\n                }, state);\n            }\n\n            return pointOptions;\n        },\n\n        pointType: function() {\n            return HeatmapPoint;\n        },\n\n        pointOptions: function(series, seriesIx) {\n            var options = this.seriesOptions[seriesIx];\n            if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                    markers: {\n                        opacity: series.opacity\n                    },\n                    tooltip: {\n                        format: this.options.tooltip.format\n                    },\n                    labels: {\n                        format: this.options.labels.format\n                    }\n                }, series);\n            }\n\n            return options;\n        },\n\n        createPoint: function(value, fields) {\n            var series = fields.series;\n            var pointOptions = this.pointOptions(series, fields.seriesIx);\n            var color = fields.color || series.color;\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            } else if (this.valueRange.max !== 0) {\n                var scale = colorScale(color);\n                color = scale(value.value / this.valueRange.max);\n            }\n\n            var point = new HeatmapPoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        seriesAxes: function(series) {\n            var xAxisName = series.xAxis;\n            var yAxisName = series.yAxis;\n            var plotArea = this.plotArea;\n            var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n            var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n            if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n            }\n\n            if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n            }\n\n            return { xAxis: xAxis, yAxis: yAxis };\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var chartPoints = this.points;\n            var limit = !this.options.clip;\n            var pointIx = 0;\n\n            this.traverseDataPoints(function (value, fields) {\n                var point = chartPoints[pointIx++];\n                var ref = this$1$1.seriesAxes(fields.series);\n                var xAxis = ref.xAxis;\n                var yAxis = ref.yAxis;\n                var indexX = xAxis.categoryIndex(value.x);\n                var indexY = yAxis.categoryIndex(value.y);\n                var slotX = xAxis.getSlot(indexX, indexX, limit);\n                var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n                if (point) {\n                    if (slotX && slotY) {\n                        var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                        point.reflow(pointSlot);\n                    } else {\n                        point.visible = false;\n                    }\n                }\n            });\n\n            this.box = targetBox;\n        },\n\n        pointSlot: function(slotX, slotY) {\n            return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var ref$1 = this$1$1.seriesAxes(currentSeries);\n                var xAxis = ref$1.xAxis;\n                var yAxis = ref$1.yAxis;\n                var xRange = xAxis.currentRangeIndices();\n                var yRange = yAxis.currentRangeIndices();\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                    var ref$2 = this$1$1._bindPoint(currentSeries, seriesIx, pointIx);\n                    var value = ref$2.valueFields;\n                    var fields = ref$2.fields;\n                    var xIndex = xAxis.totalIndex(value.x);\n                    var yIndex = yAxis.totalIndex(value.y);\n                    var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                    var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                    if (xIn && yIn) {\n                        callback(value, deepExtend({\n                            pointIx: pointIx,\n                            series: currentSeries,\n                            seriesIx: seriesIx,\n                            dataItem: currentSeries.data[pointIx],\n                            owner: this$1$1\n                        }, fields));\n                    }\n                }\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n            return this.chartService.format.auto(format, value.x, value.y, value.value);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n            }\n            return result;\n        }\n    });\n    setDefaultOptions(HeatmapChart, {\n        series: [],\n        tooltip: {\n            format: \"{0}, {1}: {2}\"\n        },\n        labels: {\n            format: \"{2}\"\n        },\n        clip: true\n    });\n    deepExtend(HeatmapChart.prototype, {\n        _bindPoint: CategoricalChart.prototype._bindPoint\n    });\n\n    var HeatmapPlotArea = PlotAreaBase.extend({\n        initFields: function() {\n            this.namedXAxes = {};\n            this.namedYAxes = {};\n        },\n\n        render: function(panes) {\n            if (panes === void 0) { panes = this.panes; }\n\n            this.bindCategories();\n            this.createAxes(panes);\n            this.createCharts(panes);\n            this.createAxisLabels();\n        },\n\n        bindCategories: function() {\n            var this$1$1 = this;\n\n            var series = this.srcSeries || this.series;\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var data = currentSeries.data || [];\n                var ref = this$1$1.seriesAxes(currentSeries);\n                var xAxis = ref.xAxis;\n                var yAxis = ref.yAxis;\n\n                var xCategories = dataviz.createHashSet(xAxis.categories || []);\n                var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n                for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                    var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                    var x = ref$1.x;\n                    var y = ref$1.y;\n\n                    if (!xCategories.has(x)) {\n                        xCategories.add(x);\n                    }\n\n                    if (!yCategories.has(y)) {\n                        yCategories.add(y);\n                    }\n                }\n\n                xAxis.categories = xCategories.values();\n                yAxis.categories = yCategories.values();\n            }\n        },\n\n        createCharts: function(panes) {\n            var this$1$1 = this;\n\n            var seriesByPane = this.groupSeriesByPane();\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1$1.addToLegend(paneSeries);\n                var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n                if (!filteredSeries) {\n                    continue;\n                }\n\n                this$1$1.createHeatmapChart(\n                    filterSeriesByType(filteredSeries, [ HEATMAP ]),\n                    pane\n                );\n            }\n        },\n\n        createHeatmapChart: function(series, pane) {\n            var chart = new HeatmapChart(this, {\n                series: series\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        seriesPaneName: function(series) {\n            var options = this.options;\n            var xAxisName = series.xAxis;\n            var xAxisOptions = [].concat(options.xAxis);\n            var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n            var yAxisName = series.yAxis;\n            var yAxisOptions = [].concat(options.yAxis);\n            var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n            var panes = options.panes || [ {} ];\n            var defaultPaneName = panes[0].name || \"default\";\n            var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n            return paneName;\n        },\n\n        seriesAxes: function(series) {\n            var xAxis;\n            var yAxis;\n\n            var options = this.options;\n\n            var xAxisOptions = [].concat(options.xAxis);\n            var xAxisName = series.xAxis;\n            if (xAxisName) {\n                xAxis = xAxisOptions.find(function (axis) { return axis.name === xAxisName; });\n            } else {\n                xAxis = xAxisOptions[0];\n            }\n\n            var yAxisOptions = [].concat(options.yAxis);\n            var yAxisName = series.yAxis;\n            if (yAxisName) {\n                yAxis = yAxisOptions.find(function (axis) { return axis.name === yAxisName; });\n            } else {\n                yAxis = yAxisOptions[0];\n            }\n\n            if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n            }\n\n            if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n            }\n\n            return { xAxis: xAxis, yAxis: yAxis };\n        },\n\n        createAxisLabels: function() {\n            var axes = this.axes;\n            for (var i = 0; i < axes.length; i++) {\n                axes[i].createLabels();\n            }\n        },\n\n        createXYAxis: function(options, vertical, axisIndex) {\n            var axisName = options.name;\n            var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n            var axisOptions = $.extend({\n                axisCrossingValue: 0\n            }, options, {\n                vertical: vertical,\n                reverse: (vertical || this.chartService.rtl) ? !options.reverse : options.reverse,\n                justified: false\n            });\n            var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n            var typeSamples = [ axisOptions.min, axisOptions.max, firstCategory ];\n            var series = this.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n                if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                    var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                    typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                    break;\n                }\n            }\n\n            var inferredDate;\n\n            for (var i = 0; i < typeSamples.length; i++) {\n                if (typeSamples[i] instanceof Date) {\n                    inferredDate = true;\n                    break;\n                }\n            }\n\n            var axisType;\n            if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n                axisType = dataviz.DateCategoryAxis;\n            } else {\n                axisType = CategoryAxis;\n            }\n\n            var axis = new axisType(axisOptions, this.chartService);\n            axis.axisIndex = axisIndex;\n\n            if (axisName) {\n                if (namedAxes[axisName]) {\n                    throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n                }\n                namedAxes[axisName] = axis;\n            }\n\n            this.appendAxis(axis);\n            axis.mapCategories();\n\n            return axis;\n        },\n\n        createAxes: function(panes) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var xAxesOptions = [].concat(options.xAxis);\n            var xAxes = [];\n            var yAxesOptions = [].concat(options.yAxis);\n            var yAxes = [];\n\n            for (var idx = 0; idx < xAxesOptions.length; idx++) {\n                var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n                if (inArray(axisPane, panes)) {\n                    xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n                }\n            }\n\n            for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n                var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n                if (inArray(axisPane$1, panes)) {\n                    yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n                }\n            }\n\n            this.axisX = this.axisX || xAxes[0];\n            this.axisY = this.axisY || yAxes[0];\n        },\n\n        removeAxis: function(axis) {\n            var axisName = axis.options.name;\n\n            PlotAreaBase.fn.removeAxis.call(this, axis);\n\n            if (axis.options.vertical) {\n                delete this.namedYAxes[axisName];\n            } else {\n                delete this.namedXAxes[axisName];\n            }\n\n            if (axis === this.axisX) {\n                delete this.axisX;\n            }\n\n            if (axis === this.axisY) {\n                delete this.axisY;\n            }\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var allAxes = this.axes;\n            var length = allAxes.length;\n            var xValues = [];\n            var yValues = [];\n\n            for (var i = 0; i < length; i++) {\n                var axis = allAxes[i];\n                var values = axis.options.vertical ? yValues : xValues;\n                appendIfNotNull(values, axis.getCategory(point));\n            }\n\n            if (xValues.length > 0 && yValues.length > 0) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    originalEvent: e,\n                    x: singleItemOrArray(xValues),\n                    y: singleItemOrArray(yValues)\n                });\n            }\n        },\n\n        updateAxisOptions: function(axis, options) {\n            var vertical = axis.options.vertical;\n            var axes = this.groupAxes(this.panes);\n            var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n            updateAxisOptions$2(this.options, index, vertical, options);\n            updateAxisOptions$2(this.originalOptions, index, vertical, options);\n        },\n\n        crosshairOptions: function(axis) {\n            // Stack the crosshair above the series points.\n            return $.extend({}, axis.options.crosshair, { zIndex: 0 });\n        }\n    });\n\n    function updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n        var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n        deepExtend(axisOptions, options);\n    }\n\n    setDefaultOptions(HeatmapPlotArea, {\n        xAxis: {},\n        yAxis: {}\n    });\n\n    deepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n\n    var COLOR = \"color\";\n    var FIRST = \"first\";\n    var FROM = \"from\";\n    var MAX = \"max\";\n    var MIN = \"min\";\n    var NOTE_TEXT = \"noteText\";\n    var SUMMARY_FIELD = \"summary\";\n    var TO = \"to\";\n\n    PlotAreaFactory.current.register(CategoricalPlotArea, [\n        BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA,\n        CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT,\n        RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA\n    ]);\n\n    PlotAreaFactory.current.register(XYPlotArea, [\n        SCATTER, SCATTER_LINE, BUBBLE\n    ]);\n\n    PlotAreaFactory.current.register(PiePlotArea, [ PIE ]);\n    PlotAreaFactory.current.register(DonutPlotArea, [ DONUT ]);\n    PlotAreaFactory.current.register(FunnelPlotArea, [ FUNNEL ]);\n\n    PlotAreaFactory.current.register(PolarPlotArea, [ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ]);\n    PlotAreaFactory.current.register(RadarPlotArea, [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ]);\n\n    PlotAreaFactory.current.register(HeatmapPlotArea, [ HEATMAP ]);\n\n    SeriesBinder.current.register(\n        [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA ],\n        [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD, DRILLDOWN_FIELD ]\n    );\n\n    SeriesBinder.current.register(\n        [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n        [ FROM, TO ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n    );\n\n    SeriesBinder.current.register(\n        [ WATERFALL, HORIZONTAL_WATERFALL ],\n        [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD, DRILLDOWN_FIELD ]\n    );\n\n    SeriesBinder.current.register([ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ], [ X, Y ], [ COLOR, DRILLDOWN_FIELD ]);\n    SeriesBinder.current.register([ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ], [ VALUE ], [ COLOR, DRILLDOWN_FIELD ]);\n\n    SeriesBinder.current.register(\n        [ FUNNEL ],\n        [ VALUE ], [ CATEGORY, COLOR, \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n    );\n\n    DefaultAggregates.current.register(\n        [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL ],\n        { value: MAX, color: FIRST, noteText: FIRST, errorLow: MIN, errorHigh: MAX }\n    );\n\n    DefaultAggregates.current.register(\n        [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n        { from: MIN, to: MAX, color: FIRST, noteText: FIRST }\n    );\n\n    DefaultAggregates.current.register(\n        [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ],\n        { value: MAX, color: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ SCATTER, SCATTER_LINE, BUBBLE ],\n        [ X, Y ], [ COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD ]\n    );\n\n    SeriesBinder.current.register(\n        [ BUBBLE ], [ X, Y, \"size\" ], [ COLOR, CATEGORY, NOTE_TEXT ]\n    );\n\n    SeriesBinder.current.register(\n        [ HEATMAP ],\n        [ X, Y, VALUE ], [ COLOR, NOTE_TEXT ]\n    );\n\n    SeriesBinder.current.register(\n        [ CANDLESTICK, OHLC ],\n        [ \"open\", \"high\", \"low\", \"close\" ], [ CATEGORY, COLOR, \"downColor\", NOTE_TEXT ]\n    );\n\n    DefaultAggregates.current.register(\n        [ CANDLESTICK, OHLC ],\n        { open: MAX, high: MAX, low: MIN, close: MAX,\n          color: FIRST, downColor: FIRST, noteText: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n        [ \"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\" ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n    );\n\n    DefaultAggregates.current.register(\n        [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n        { lower: MAX, q1: MAX, median: MAX, q3: MAX, upper: MAX, mean: MAX, outliers: FIRST,\n          color: FIRST, noteText: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ BULLET, VERTICAL_BULLET ],\n        [ \"current\", \"target\" ], [ CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT, DRILLDOWN_FIELD ]\n    );\n\n    DefaultAggregates.current.register(\n        [ BULLET, VERTICAL_BULLET ],\n        { current: MAX, target: MAX, color: FIRST, noteText: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ PIE, DONUT ],\n        [ VALUE ], [ CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n    );\n\n    var AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\n    var MOUSEMOVE = \"mousemove\";\n    var CONTEXTMENU = \"contextmenu\";\n    var MOUSELEAVE = \"mouseleave\";\n    var MOUSEMOVE_DELAY = 20;\n\n    var Chart = Class.extend({\n        init: function(element, userOptions, themeOptions, context) {\n            var this$1$1 = this;\n            if (context === void 0) { context = {}; }\n\n            this.observers = [];\n            this.addObserver(context.observer);\n            this.chartService = new services.ChartService(this, context);\n            this.chartService.theme = themeOptions;\n\n            this._initElement(element);\n\n            var options = deepExtend({}, this.options, userOptions);\n            this._originalOptions = deepExtend({}, options);\n            this._theme = themeOptions;\n            this._initTheme(options, themeOptions);\n\n            this._initHandlers();\n            this._initSurface();\n\n            this.bindCategories();\n            dataviz.FontLoader.preloadFonts(userOptions, function () {\n                this$1$1.fontLoaded = true;\n                if (!this$1$1._destroyed) {\n                    this$1$1.trigger('init');\n                    this$1$1._redraw();\n                    this$1$1._attachEvents();\n                }\n            });\n        },\n\n        _initElement: function(element) {\n            this._setElementClass(element);\n            element.style.position = \"relative\";\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n            this.element = element;\n        },\n\n        _setElementClass: function(element) {\n            dataviz.addClass(element, \"k-chart\");\n        },\n\n        _initTheme: function(options, themeOptions) {\n            var seriesCopies = [];\n            var series = options.series || [];\n\n            for (var i = 0; i < series.length; i++) {\n                seriesCopies.push($.extend({}, series[i]));\n            }\n            options.series = seriesCopies;\n\n            resolveAxisAliases(options);\n            this.applyDefaults(options, themeOptions);\n\n            // Clean up default if not overriden by data attributes\n            if (options.seriesColors === null) {\n                delete options.seriesColors;\n            }\n\n            this.options = deepExtend({}, themeOptions, options);\n            this.applySeriesColors();\n        },\n\n        getSize: function() {\n            var chartArea = this.options.chartArea || {};\n            var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n            var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n            return {\n                width: width,\n                height: height\n            };\n        },\n\n        resize: function(force) {\n            var size = this.getSize();\n            var currentSize = this._size;\n            var hasSize = size.width > 0 || size.height > 0;\n\n            if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n                this._size = size;\n                this._resize(size, force);\n                this.trigger(\"resize\", size);\n            } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) { return !s.visible; })) {\n                this._destroySelections();\n                this._setupSelection();\n            }\n        },\n\n        _resize: function() {\n            this._noTransitionsRedraw();\n        },\n\n        redraw: function(paneName) {\n            this.applyDefaults(this.options);\n            this.applySeriesColors();\n\n            if (paneName) {\n                var plotArea = this._model._plotArea;\n                var pane = plotArea.findPane(paneName);\n                plotArea.redraw(pane);\n            } else {\n                this._redraw();\n            }\n        },\n\n        getAxis: function(name) {\n            return findAxisByName(name, this._plotArea.axes);\n        },\n\n        findAxisByName: function(name) {\n            return this.getAxis(name);\n        },\n\n        findPaneByName: function(name) {\n            var panes = this._plotArea.panes;\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                if (panes[idx].options.name === name) {\n                    return new ChartPane(panes[idx]);\n                }\n            }\n        },\n\n        findPaneByIndex: function(idx) {\n            var panes = this._plotArea.panes;\n            if (panes[idx]) {\n                return new ChartPane(panes[idx]);\n            }\n        },\n\n        plotArea: function() {\n            return new ChartPlotArea(this._plotArea);\n        },\n\n        toggleHighlight: function(show, filter) {\n            var plotArea = this._plotArea;\n            var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n            var points;\n\n            if (isFunction(filter)) {\n                points = plotArea.filterPoints(filter);\n            } else {\n                var seriesName, categoryName;\n                if (isObject(filter)) {\n                    seriesName = filter.series;\n                    categoryName = filter.category;\n                } else {\n                    seriesName = categoryName = filter;\n                }\n\n                if (firstSeries.type === DONUT) {\n                    points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n                } else if (firstSeries.type === PIE || firstSeries.type === FUNNEL) {\n                    points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n                } else {\n                    points = plotArea.pointsBySeriesName(seriesName);\n                }\n            }\n\n            if (points) {\n                this.togglePointsHighlight(show, points);\n            }\n        },\n\n        togglePointsHighlight: function(show, points) {\n            var highlight = this._highlight;\n            for (var idx = 0; idx < points.length; idx++) {\n                highlight.togglePointHighlight(points[idx], show);\n            }\n        },\n\n        showTooltip: function(filter) {\n            var shared = this._sharedTooltip();\n            var ref = this;\n            var tooltip = ref._tooltip;\n            var plotArea = ref._plotArea;\n            var point, categoryIndex;\n\n            if (isFunction(filter)) {\n                point = plotArea.findPoint(filter);\n                if (point && shared) {\n                    categoryIndex = point.categoryIx;\n                }\n            } else if (shared && defined(filter)) {\n                categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n            }\n\n            if (shared) {\n                if (categoryIndex >= 0) {\n                    var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                    tooltip.showAt(points);\n                }\n            } else if (point) {\n                tooltip.show(point);\n            }\n        },\n\n        hideTooltip: function() {\n            this._tooltip.hide();\n        },\n\n        _initSurface: function() {\n            var surface = this.surface;\n            var wrap = this._surfaceWrap();\n\n            var chartArea = this.options.chartArea || {};\n            if (chartArea.width) {\n                dataviz.elementSize(wrap, { width: chartArea.width });\n            }\n            if (chartArea.height) {\n                dataviz.elementSize(wrap, { height: chartArea.height });\n            }\n\n            if (!surface || surface.options.type !== this.options.renderAs) {\n                this._destroySurface();\n\n                this.surface = drawing.Surface.create(wrap, {\n                    type: this.options.renderAs\n                });\n\n                this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n                this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n            } else {\n                this.surface.clear();\n                this.surface.resize();\n            }\n        },\n\n        _surfaceWrap: function() {\n            return this.element;\n        },\n\n        _redraw: function() {\n            var model = this._getModel();\n            this._size = {\n                width: model.options.width,\n                height: model.options.height\n            };\n\n            this._destroyView();\n\n            this._model = model;\n            this._plotArea = model._plotArea;\n\n            model.renderVisual();\n\n            if (this.options.transitions !== false) {\n                model.traverse(function(element) {\n                    if (element.animation) {\n                        element.animation.setup();\n                    }\n                });\n            }\n\n            this._initSurface();\n            this.surface.draw(model.visual);\n\n            if (this.options.transitions !== false) {\n                model.traverse(function(element) {\n                    if (element.animation) {\n                        element.animation.play();\n                    }\n                });\n            }\n\n            this._tooltip = this._createTooltip();\n            this._highlight = new Highlight();\n            this._setupSelection();\n            this._createPannable();\n            this._createZoomSelection();\n            this._createMousewheelZoom();\n\n            this.trigger(RENDER);\n            triggerPaneRender(this._plotArea.panes);\n\n            if (!this._navState) {\n                this._cancelDomEvents();\n            }\n        },\n\n        exportVisual: function(exportOptions) {\n            var visual;\n            if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n                var currentOptions = this.options;\n                var options = deepExtend({}, exportOptions.options, {\n                    chartArea: {\n                        width: exportOptions.width,\n                        height: exportOptions.height\n                    }\n                });\n\n                clearMissingValues(this._originalOptions, options);\n                this.options = deepExtend({}, this._originalOptions, options);\n                this._initTheme(this.options, this._theme);\n                this.bindCategories();\n\n                var model = this._getModel();\n\n                model.renderVisual();\n                triggerPaneRender(model._plotArea.panes);\n\n                visual = model.visual;\n\n                this.options = currentOptions;\n            } else {\n                visual = this.surface.exportVisual();\n            }\n\n            return visual;\n        },\n\n        _sharedTooltip: function() {\n            return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n        },\n\n        _createPannable: function() {\n            var options = this.options;\n            if (options.pannable !== false) {\n                this._pannable = new Pannable(this._plotArea, options.pannable);\n            }\n        },\n\n        _createZoomSelection: function() {\n            var zoomable = this.options.zoomable;\n            var selection = (zoomable || {}).selection;\n            if (zoomable !== false && selection !== false) {\n                this._zoomSelection = new ZoomSelection(this, selection);\n            }\n        },\n\n        _createMousewheelZoom: function() {\n            var zoomable = this.options.zoomable;\n            var mousewheel = (zoomable || {}).mousewheel;\n            if (zoomable !== false && mousewheel !== false) {\n                this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n            }\n        },\n\n        _toggleDragZoomEvents: function() {\n            var pannable = this.options.pannable;\n            var zoomable = this.options.zoomable;\n            var selection = (zoomable || {}).selection;\n            var mousewheel = (zoomable || {}).mousewheel;\n            var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n            var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n            var element = this.element;\n\n            if (this._dragZoomEnabled && allowDrag && allowZoom) {\n                element.style.touchAction = this._touchAction || '';\n                this._dragZoomEnabled = false;\n            } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n                element.style.touchAction = \"none\";\n\n                this._dragZoomEnabled = true;\n            }\n\n            this._toggleDomEvents(!allowDrag, !allowZoom);\n        },\n\n        _toggleDomEvents: function(drag, zoom) {\n            var domEvents = this.domEvents;\n            if (!domEvents) {\n                return;\n            }\n\n            if (domEvents.toggleDrag) {\n                domEvents.toggleDrag(drag);\n            }\n\n            if (domEvents.toggleZoom) {\n                domEvents.toggleZoom(zoom);\n            }\n        },\n\n        _createTooltip: function() {\n            var ref = this;\n            var tooltipOptions = ref.options.tooltip;\n            var tooltip;\n\n            if (this._sharedTooltip()) {\n                tooltip = this._createSharedTooltip(tooltipOptions);\n            } else {\n                tooltip = new Tooltip(this.chartService, tooltipOptions);\n            }\n\n            return tooltip;\n        },\n\n        _createSharedTooltip: function(options) {\n            return new SharedTooltip(this._plotArea, options);\n        },\n\n        applyDefaults: function(options, themeOptions) {\n            applyAxisDefaults(options, themeOptions);\n            applySeriesDefaults(options, themeOptions);\n        },\n\n        applySeriesColors: function() {\n            var options = this.options;\n            var series = options.series;\n            var colors = options.seriesColors || [];\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var seriesColor = colors[i % colors.length];\n                var defaults = currentSeries._defaults;\n\n                currentSeries.color = currentSeries.color || seriesColor;\n                if (defaults) {\n                    defaults.color = defaults.color || seriesColor;\n                }\n            }\n        },\n\n        _getModel: function() {\n            var options = this.options;\n            var plotArea = this._createPlotArea();\n            var model = new dataviz.RootElement(this._modelOptions());\n            model.chart = this;\n            model._plotArea = plotArea;\n\n            var title = Title.buildTitle(options.title);\n            var subtitle = Title.buildTitle(options.subtitle, {\n                align: options.title.align,\n                position: options.title.position\n            });\n            model.append.apply(model, Title.orderTitles([title, subtitle]));\n\n            if (options.legend && options.legend.visible) {\n                model.append(new Legend(plotArea.options.legend, this.chartService));\n            }\n            model.append(plotArea);\n            model.reflow();\n\n            return model;\n        },\n\n        _modelOptions: function() {\n            var options = this.options;\n            var size = this.getSize();\n\n            return deepExtend({\n                transitions: options.transitions,\n                width: size.width || datavizConstants.DEFAULT_WIDTH,\n                height: size.height || datavizConstants.DEFAULT_HEIGHT\n            }, options.chartArea);\n        },\n\n        _createPlotArea: function(skipSeries) {\n            var options = this.options;\n\n            var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n            return plotArea;\n        },\n\n        _setupSelection: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var axes = ref._plotArea.axes;\n            var selections = this._selections = [];\n\n            for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var options = axis.options;\n                if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                    var range = axis.range();\n\n                    var selection = new Selection(this$1$1, axis,\n                        deepExtend({ min: range.min, max: range.max }, options.select)\n                    );\n\n                    selections.push(selection);\n                }\n            }\n        },\n\n        _selectStart: function(e) {\n            return this.trigger(SELECT_START, e);\n        },\n\n        _select: function(e) {\n            return this.trigger(SELECT, e);\n        },\n\n        _selectEnd: function(e) {\n            return this.trigger(SELECT_END, e);\n        },\n\n        _initHandlers: function() {\n            this._clickHandler = this._click.bind(this);\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            this._mouseleaveHandler = this._mouseleave.bind(this);\n            this._surfaceMouseenterHandler = this._mouseover.bind(this);\n            this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n            this._mousemove = kendo.throttle(\n                this._mousemove.bind(this),\n                MOUSEMOVE_DELAY\n            );\n        },\n\n        addObserver: function(observer) {\n            if (observer) {\n                this.observers.push(observer);\n            }\n        },\n\n        removeObserver: function(observer) {\n            var index = this.observers.indexOf(observer);\n            if (index >= 0) {\n                this.observers.splice(index, 1);\n            }\n        },\n\n        requiresHandlers: function(eventNames) {\n            var observers = this.observers;\n            for (var idx = 0; idx < observers.length; idx++) {\n                if (observers[idx].requiresHandlers(eventNames)) {\n                    return true;\n                }\n            }\n        },\n\n        trigger: function(name, args) {\n            if (args === void 0) { args = {}; }\n\n            args.sender = this;\n\n            if (name === SHOW_TOOLTIP) {\n                args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n            } else if (name === SERIES_OVER) {\n                this._updateDrilldownPoint(args.point);\n            } else if (name === SERIES_LEAVE) {\n                this._resetDrilldownPoint();\n            } else if (name === SERIES_CLICK) {\n                this._startDrilldown(args.point);\n            }\n\n            var observers = this.observers;\n            var isDefaultPrevented = false;\n            for (var idx = 0; idx < observers.length; idx++) {\n                if (observers[idx].trigger(name, args)) {\n                    isDefaultPrevented = true;\n                }\n            }\n\n            return isDefaultPrevented;\n        },\n\n        _attachEvents: function() {\n            var element = this.element;\n\n            this._touchAction = element.style.touchAction;\n\n            var obj;\n            bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n            if (this._shouldAttachMouseMove()) {\n                var obj$1;\n                bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n            }\n\n            this.domEvents = services.DomEventsBuilder.create(this.element, {\n                start: this._start.bind(this),\n                move: this._move.bind(this),\n                end: this._end.bind(this),\n                tap: this._tap.bind(this),\n                gesturestart: this._gesturestart.bind(this),\n                gesturechange: this._gesturechange.bind(this),\n                gestureend: this._gestureend.bind(this)\n            });\n\n            this._toggleDragZoomEvents();\n        },\n\n        _mouseleave: function(e) {\n            if (this._hoveredPoint) {\n                this._hoveredPoint.out(this, e);\n                this._hoveredPoint = null;\n            }\n\n            if (this._plotAreaHovered) {\n                this._plotAreaHovered = false;\n                this.trigger(PLOT_AREA_LEAVE);\n            }\n        },\n\n        _cancelDomEvents: function() {\n            if (this.domEvents && this.domEvents.cancel) {\n                this.domEvents.cancel();\n            }\n        },\n\n        _gesturestart: function(e) {\n            if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n                this._gestureDistance = e.distance;\n                this._unsetActivePoint();\n                this.surface.suspendTracking();\n            }\n        },\n\n        _gestureend: function(e) {\n            if (this._zooming && !this._stopChartHandlers(e)) {\n                if (this.surface) {\n                    this.surface.resumeTracking();\n                }\n                this._zooming = false;\n                this.trigger(ZOOM_END, {});\n            }\n        },\n\n        _gesturechange: function(e) {\n            var mousewheelZoom = this._mousewheelZoom;\n\n            if (mousewheelZoom && !this._stopChartHandlers(e)) {\n                e.preventDefault();\n                var previousGestureDistance = this._gestureDistance;\n                var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n                if (Math.abs(scaleDelta) >= 0.1) {\n                    scaleDelta = Math.round(scaleDelta * 10);\n\n                    this._gestureDistance = e.distance;\n                    var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                    if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                        var coords = this._eventCoordinates(e);\n\n                        if (!this._zooming) {\n                            this._zooming = true;\n                        }\n\n                        var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                        if (ranges && !this.trigger(ZOOM, args)) {\n                            mousewheelZoom.zoom();\n                        }\n                    }\n                }\n            }\n        },\n\n        _mouseout: function(e) {\n            if (e.element) {\n                var element = this._drawingChartElement(e.element, e);\n\n                if (element && element.leave) {\n                    element.leave(this, e.originalEvent);\n                }\n            }\n        },\n\n        _start: function(e) {\n            var coords = this._eventCoordinates(e);\n\n            if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n                return;\n            }\n\n            if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n                this._startNavigation(e, coords, DRAG_START);\n            }\n\n            if (this._pannable && this._pannable.start(e)) {\n                this.surface.suspendTracking();\n                this._unsetActivePoint();\n                this._suppressHover = true;\n                this.chartService.panning = true;\n            }\n\n            if (this._zoomSelection) {\n                if (this._zoomSelection.start(e)) {\n                    this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n                }\n            }\n        },\n\n        _move: function(e) {\n            var ref = this;\n            var state = ref._navState;\n            var pannable = ref._pannable;\n\n            if (this._stopChartHandlers(e)) {\n                return;\n            }\n\n            if (pannable) {\n                var ranges = pannable.move(e);\n\n                if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                    pannable.pan();\n                }\n            } else if (state) {\n                var ranges$1 = {};\n                var axes = state.axes;\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        var axis = currentAxis.options.vertical ? e.y : e.x;\n                        var delta = axis.startLocation - axis.location;\n\n                        if (delta !== 0) {\n                            ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                        }\n                    }\n                }\n\n                state.axisRanges = ranges$1;\n                this.trigger(DRAG, {\n                    axisRanges: ranges$1,\n                    originalEvent: e\n                });\n            }\n\n            if (this._zoomSelection) {\n                this._zoomSelection.move(e);\n            }\n        },\n\n        _end: function(e) {\n            if (this._stopChartHandlers(e)) {\n                return;\n            }\n\n            var pannable = this._pannable;\n            if (pannable && pannable.end(e)) {\n                this.surface.resumeTracking();\n                this.trigger(DRAG_END, {\n                    axisRanges: axisRanges(this._plotArea.axes),\n                    originalEvent: e\n                });\n                this._suppressHover = false;\n                this.chartService.panning = false;\n            } else {\n                this._endNavigation(e, DRAG_END);\n            }\n\n            if (this._zoomSelection) {\n                var ranges = this._zoomSelection.end(e);\n                if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                    this._zoomSelection.zoom();\n                    this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n                }\n            }\n        },\n\n        _stopChartHandlers: function(e) {\n            var selections = this._selections || [];\n            if (!selections.length) {\n                return false;\n            }\n\n            var coords = this._eventCoordinates(e);\n            var pane = this._plotArea.paneByPoint(coords);\n            if (pane) {\n                for (var idx = 0; idx < selections.length; idx++) {\n                    if (selections[idx].onPane(pane)) {\n                        return true;\n                    }\n                }\n            }\n        },\n\n        _mousewheelZoomRate: function() {\n            var zoomable = this.options.zoomable;\n            var mousewheel = (zoomable || {}).mousewheel || {};\n            return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n        },\n\n        _mousewheel: function(e) {\n            var this$1$1 = this;\n\n            var delta = dataviz.mousewheelDelta(e);\n            var mousewheelZoom = this._mousewheelZoom;\n            var coords = this._eventCoordinates(e);\n\n            if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n                return;\n            }\n\n            if (mousewheelZoom) {\n                var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    e.preventDefault();\n\n                    if (!this._zooming) {\n                        this._unsetActivePoint();\n                        this.surface.suspendTracking();\n                        this._zooming = true;\n                    }\n\n                    if (this._mwTimeout) {\n                        clearTimeout(this._mwTimeout);\n                    }\n\n                    args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                    if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n\n                    this._mwTimeout = setTimeout(function () {\n                        this$1$1.trigger(ZOOM_END, args);\n                        this$1$1._zooming = false;\n                        if (this$1$1.surface) {\n                            this$1$1.surface.resumeTracking();\n                        }\n                    }, MOUSEWHEEL_DELAY);\n                }\n            } else {\n                var state = this._navState;\n                if (!state) {\n                    var prevented = this._startNavigation(e, coords, ZOOM_START);\n                    if (!prevented) {\n                        state = this._navState;\n                    }\n                }\n\n                if (state) {\n                    var totalDelta = state.totalDelta || delta;\n                    state.totalDelta = totalDelta + delta;\n\n                    var axes = this._navState.axes;\n                    var ranges = {};\n\n                    for (var i = 0; i < axes.length; i++) {\n                        var currentAxis = axes[i];\n                        var axisName = currentAxis.options.name;\n                        if (axisName) {\n                            ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1$1._mousewheelZoomRate(), coords);\n                        }\n                    }\n\n                    this.trigger(ZOOM, {\n                        delta: delta,\n                        axisRanges: ranges,\n                        originalEvent: e\n                    });\n\n                    if (this._mwTimeout) {\n                        clearTimeout(this._mwTimeout);\n                    }\n\n                    this._mwTimeout = setTimeout(function () {\n                        this$1$1._endNavigation(e, ZOOM_END);\n                    }, MOUSEWHEEL_DELAY);\n                }\n            }\n        },\n\n        _startNavigation: function(e, coords, chartEvent) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPointPane(coords);\n            var axes = plotArea.axes.slice(0);\n\n            if (!pane) {\n                return;\n            }\n\n            var ranges = axisRanges(axes);\n\n            var prevented = this.trigger(chartEvent, {\n                axisRanges: ranges,\n                originalEvent: e\n            });\n\n            if (prevented) {\n                this._cancelDomEvents();\n            } else {\n                this._suppressHover = true;\n                this._unsetActivePoint();\n                this._navState = {\n                    axisRanges: ranges,\n                    pane: pane,\n                    axes: axes\n                };\n            }\n        },\n\n        _endNavigation: function(e, chartEvent) {\n            if (this._navState) {\n                this.trigger(chartEvent, {\n                    axisRanges: this._navState.axisRanges,\n                    originalEvent: e\n                });\n                this._suppressHover = false;\n                this._navState = null;\n            }\n        },\n\n        _getChartElement: function(e, match) {\n            var element = this.surface.eventTarget(e);\n            if (element) {\n                return this._drawingChartElement(element, e, match);\n            }\n        },\n\n        _drawingChartElement: function(element, e, match) {\n            var current = element;\n            var chartElement;\n            while (current && !chartElement) {\n                chartElement = current.chartElement;\n                current = current.parent;\n            }\n\n            if (chartElement) {\n                if (chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n                }\n\n                if (match) {\n                    chartElement = chartElement.closest(match);\n                    if (chartElement && chartElement.aliasFor) {\n                        chartElement = chartElement.aliasFor();\n                    }\n                }\n\n                return chartElement;\n            }\n        },\n\n        _eventCoordinates: function(e) {\n            var coordinates = dataviz.eventCoordinates(e);\n            return this._toModelCoordinates(coordinates.x, coordinates.y);\n        },\n\n        _elementPadding: function() {\n            if (!this._padding) {\n                var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n                var paddingLeft = ref.paddingLeft;\n                var paddingTop = ref.paddingTop;\n                this._padding = {\n                    top: paddingTop,\n                    left: paddingLeft\n                };\n            }\n\n            return this._padding;\n        },\n\n        _toDocumentCoordinates: function(point) {\n            var padding = this._elementPadding();\n            var offset = dataviz.elementOffset(this.element);\n\n            return {\n                left: round(point.x + padding.left + offset.left),\n                top: round(point.y + padding.top + offset.top)\n            };\n        },\n\n        _toModelCoordinates: function(clientX, clientY) {\n            var element = this.element;\n            var offset = dataviz.elementOffset(element);\n            var padding = this._elementPadding();\n            var inverseTransform = dataviz.elementScale(element).invert();\n            var point = new GeometryPoint(\n                clientX - offset.left - padding.left,\n                clientY - offset.top - padding.top\n            ).transform(inverseTransform);\n\n            return new Point(point.x, point.y);\n        },\n\n        _tap: function(e) {\n            var this$1$1 = this;\n\n            var drawingElement = this.surface.eventTarget(e);\n            var element = this._drawingChartElement(drawingElement, e);\n            var sharedTooltip = this._sharedTooltip();\n\n            if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n                this._unsetActivePoint();\n            }\n\n            if (sharedTooltip) {\n                this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n            }\n\n            this._propagateClick(element, e);\n\n            //part of fix for hover issue on windows touch\n            this.handlingTap = true;\n            setTimeout(function () {\n                this$1$1.handlingTap = false;\n            }, 0);\n        },\n\n        _click: function(e) {\n            var element = this._getChartElement(e);\n            this._propagateClick(element, e);\n        },\n\n        _propagateClick: function(element, e) {\n            var this$1$1 = this;\n\n            var current = element;\n            while (current) {\n                if (current.click) {\n                    current.click(this$1$1, e);\n                }\n\n                current = current.parent;\n            }\n        },\n\n        _startHover: function(element, e) {\n            if (this._suppressHover) {\n                return false;\n            }\n\n            var point = this._drawingChartElement(element, e, function(element) {\n                return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n            });\n\n            this._showInactiveOpacity(point, e);\n\n            return point;\n        },\n\n        _displayTooltip: function(point) {\n            var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n            if (tooltipOptions.visible) {\n                this._tooltip.show(point);\n            }\n        },\n\n        _displayInactiveOpacity: function(activePoint, multipleSeries, highlightPoints) {\n            var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n            if (!chartInstance) {\n                return;\n            }\n\n            if (multipleSeries) {\n                this._updateSeriesOpacity(activePoint);\n                this._applySeriesOpacity(chartInstance.children, null, true);\n                this._applySeriesOpacity(chartInstance.children, activePoint.series);\n                this._highlight.show(highlightPoints || activePoint);\n            } else {\n                var inactivePoints;\n\n                if (!chartInstance.supportsPointInactiveOpacity()) {\n                    this._highlight.show(activePoint);\n                    return;\n                }\n\n                inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n                if (inactivePoints && inactivePoints.length) {\n                    this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n                }\n            }\n        },\n\n        _getInactivePoints: function(activePoint, chartInstance) {\n            var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n            return allPoints.filter(function (point) { return point !== activePoint; });\n        },\n\n        _getAllPointsOfType: function(container, type) {\n            var this$1$1 = this;\n\n            var points = [];\n\n            for (var i = 0; i < container.children.length; i++) {\n                var element = container.children[i];\n\n                if (element.constructor === type) {\n                    points.push(element);\n                } else if (element.children && element.children.length) {\n                    points = points.concat(this$1$1._getAllPointsOfType(element, type));\n                }\n            }\n\n            return points;\n        },\n\n        _updateHoveredPoint: function(point, e) {\n            var hoveredPoint = this._hoveredPoint;\n\n            if (hoveredPoint && hoveredPoint !== point) {\n                hoveredPoint.out(this, e);\n                this._hoveredPoint = null;\n            }\n\n            if (point && hoveredPoint !== point && point.over) {\n                this._hoveredPoint = point;\n                point.over(this, e);\n            }\n        },\n\n        _updateDrilldownPoint: function(point) {\n            if (!point || !point.series) {\n                return;\n            }\n\n            var ref = SeriesBinder.current.bindPoint(point.series, null, point.dataItem);\n            var fields = ref.fields;\n            if (fields.drilldown) {\n                this._drilldownState = { cursor: this.element.style.cursor };\n                this.element.style.cursor = 'pointer';\n            }\n        },\n\n        _resetDrilldownPoint: function() {\n            if (this._drilldownState) {\n                this.element.style.cursor = this._drilldownState.cursor;\n                this._drilldownState = null;\n            }\n        },\n\n        _startDrilldown: function(point) {\n            if (!point || !point.series) {\n                return;\n            }\n\n            var series = point.series;\n            var ref = SeriesBinder.current.bindPoint(series, null, point.dataItem);\n            var fields = ref.fields;\n            var value = fields.drilldown;\n            if (value) {\n                var args = { series: series, point: point, value: value, sender: this };\n                this.trigger(DRILLDOWN, args);\n            }\n        },\n\n        _updateSeriesOpacity: function(point, resetOpacity) {\n            var this$1$1 = this;\n\n            var plotArea = this._plotArea;\n            var length = plotArea.series.length;\n\n            for (var i = 0; i < length; i++) {\n                var currSeries = plotArea.series[i];\n                var defaultOpacity = this$1$1._getDefaultOpacityForSeries(currSeries);\n                var inactiveOpacity = this$1$1._getInactiveOpacityForSeries(currSeries);\n\n                if (!resetOpacity && currSeries !== point.series) {\n                    currSeries.defaultOpacity = defaultOpacity;\n                    currSeries.opacity = inactiveOpacity;\n\n                    if (currSeries.line) {\n                        currSeries.line.opacity = inactiveOpacity;\n                    }\n                } else {\n                    currSeries.opacity = defaultOpacity;\n\n                    if (currSeries.line) {\n                        currSeries.line.opacity = defaultOpacity;\n                    }\n                }\n            }\n        },\n\n        _applySeriesOpacity: function(elements, activeSeries, reset, series) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                var currSeries = element.series || series;\n                var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n                if (shouldHighlight && element.visual) {\n                    var opacity = series ? series.opacity : element.series.opacity;\n                    if (currSeries !== activeSeries || reset) {\n                        element.visual.opacity(reset ? 1 : opacity);\n                    }\n                }\n\n                if (element.children && element.children.length) {\n                    this$1$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n                }\n            }\n        },\n\n        _chartInstanceFromPoint: function(point) {\n            var chartInstance = point.parent;\n\n            while (chartInstance && !chartInstance.plotArea) {\n                chartInstance = chartInstance.parent;\n            }\n\n            return chartInstance;\n        },\n\n        _showInactiveOpacity: function(point, e) {\n            var activePoint = this._activePoint;\n            var multipleSeries = this._plotArea.series.length > 1;\n            var hasInactiveOpacity = this._hasInactiveOpacity();\n\n            this._updateHoveredPoint(point, e);\n\n            if (point && activePoint !== point && point.hover) {\n                this._activePoint = point;\n\n                if (!this._sharedTooltip() && !point.hover(this, e)) {\n                    this._displayTooltip(point);\n\n                    if (hasInactiveOpacity) {\n                        this._displayInactiveOpacity(point, multipleSeries);\n                    } else {\n                        this._highlight.show(point);\n                    }\n                }\n            }\n\n            return point;\n        },\n\n        _hideInactiveOpacity: function(point) {\n            var multipleSeries = this._plotArea.series.length > 1;\n            var hasInactiveOpacity = this._hasInactiveOpacity();\n            if (hasInactiveOpacity) {\n                if (multipleSeries && this._activeChartInstance) {\n                    this._updateSeriesOpacity(point, true);\n                    this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                    this._activeChartInstance = null;\n                }\n                this._highlight && this._highlight.hide();\n                this._activePoint = null;\n            }\n        },\n\n        _hasInactiveOpacity: function() {\n            var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n            var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n            return hasDefaultInactiveOpacity || hasInactiveOpacity;\n        },\n\n        _getInactiveOpacityForSeries: function(series) {\n            var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n            var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n            return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n        },\n\n        _getDefaultOpacityForSeries: function(series) {\n            return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n        },\n\n        _mouseover: function(e) {\n            var point = this._startHover(e.element, e.originalEvent);\n\n            if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n                this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n                var obj;\n                bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            }\n        },\n\n        _mouseMoveTracking: function(e) {\n            var ref = this;\n            var options = ref.options;\n            var tooltip = ref._tooltip;\n            var highlight = ref._highlight;\n            var point = ref._activePoint;\n            var coords = this._eventCoordinates(e);\n\n            if (this._plotArea.box.containsPoint(coords)) {\n                if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                    var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                    if (seriesPoint && seriesPoint !== point) {\n                        this._activePoint = seriesPoint;\n\n                        if (!seriesPoint.hover(this, e)) {\n                            var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                            if (tooltipOptions.visible) {\n                                tooltip.show(seriesPoint);\n                            }\n\n                            highlight.show(seriesPoint);\n                        }\n                    }\n                }\n            } else {\n                var obj;\n                unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n                this._unsetActivePoint();\n                this._mouseMoveTrackHandler = null;\n\n                this._hideInactiveOpacity(point);\n            }\n        },\n\n        _mousemove: function(e) {\n            var coords = this._eventCoordinates(e);\n            var plotArea = this._plotArea;\n\n            this._trackCrosshairs(coords);\n\n            if (plotArea.hover) {\n                var overPlotArea = plotArea.backgroundContainsPoint(coords);\n                if (overPlotArea) {\n                    this._plotAreaHovered = true;\n                    this._plotArea.hover(this, e);\n                } else if (this._plotAreaHovered && !overPlotArea) {\n                    this._plotAreaHovered = false;\n                    this.trigger(PLOT_AREA_LEAVE);\n                }\n            }\n\n            if (this._sharedTooltip()) {\n                this._trackSharedTooltip(coords, e);\n            }\n        },\n\n        _trackCrosshairs: function(coords) {\n            var crosshairs = this._plotArea.crosshairs;\n\n            for (var i = 0; i < crosshairs.length; i++) {\n                var current = crosshairs[i];\n\n                if (current.box.containsPoint(coords)) {\n                    current.showAt(coords);\n                } else {\n                    current.hide();\n                }\n            }\n        },\n\n        _trackSharedTooltip: function(coords, e, toggle) {\n            if (this._suppressHover) {\n                return;\n            }\n\n            var ref = this;\n            var tooltipOptions = ref.options.tooltip;\n            var plotArea = ref._plotArea;\n            var categoryAxis = ref._plotArea.categoryAxis;\n            var tooltip = ref._tooltip;\n            var highlight = ref._highlight;\n\n            if (plotArea.backgroundContainsPoint(coords)) {\n                var index = categoryAxis.pointCategoryIndex(coords);\n                if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                    var points = plotArea.pointsByCategoryIndex(index);\n                    var pointArgs = points.map(function(point) {\n                        return point.eventArgs(e);\n                    });\n                    var hoverArgs = pointArgs[0] || {};\n                    hoverArgs.categoryPoints = pointArgs;\n\n                    if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                        if (tooltipOptions.visible) {\n                            tooltip.showAt(points, coords);\n                        }\n\n                        highlight.show(points);\n\n                        this._sharedHighlight = true;\n                    } else {\n                        tooltip.hide();\n                    }\n\n                    this._tooltipCategoryIx = index;\n                } else if (toggle && this._sharedHighlight) {\n                    highlight.hide();\n                    tooltip.hide();\n                    this._sharedHighlight = false;\n                }\n            } else if (this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._tooltipCategoryIx = null;\n                this._sharedHighlight = false;\n            }\n        },\n\n        hideElements: function(options) {\n            var plotArea = this._plotArea;\n            this._mousemove.cancel();\n\n            plotArea.hideCrosshairs();\n\n            this._unsetActivePoint(options);\n        },\n\n        _unsetActivePoint: function(options) {\n            var ref = this;\n            var tooltip = ref._tooltip;\n            var highlight = ref._highlight;\n\n            this._activePoint = null;\n            this._hoveredPoint = null;\n\n            if (tooltip && !(options && options.keepTooltipOpen)) {\n                tooltip.hide();\n            }\n\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n\n            if (highlight) {\n                highlight.hide();\n            }\n        },\n\n        _deferRedraw: function() {\n            this._redraw();\n        },\n\n        _clearRedrawTimeout: function() {\n            if (this._redrawTimeout) {\n                clearInterval(this._redrawTimeout);\n                this._redrawTimeout = null;\n            }\n        },\n\n        bindCategories: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var definitions = [].concat(options.categoryAxis);\n\n            for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n                var axis = definitions[axisIx];\n                if (axis.autoBind !== false) {\n                    this$1$1.bindCategoryAxisFromSeries(axis, axisIx);\n                }\n            }\n        },\n\n        bindCategoryAxisFromSeries: function(axis, axisIx) {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var seriesLength = series.length;\n            var uniqueCategories = new dataviz.HashMap();//perf improvement in case type category with dates\n            var items = [];\n            var bindable = false;\n            var dateAxis;\n\n            for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                var s = series[seriesIx];\n                var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\n                var data = s.data;\n                var dataLength = data.length;\n                var bind = s.categoryField && onAxis;\n                bindable = bind || bindable;\n\n                if (bind && dataLength > 0) {\n                    dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n\n                    var getFn = dateAxis ? getDateField : getField;\n\n                    for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                        var dataRow = data[dataIx];\n                        var category = getFn(s.categoryField, dataRow, this$1$1.chartService.intl);\n\n                        if (dateAxis || !uniqueCategories.get(category)) {\n                            items.push([ category, dataRow ]);\n\n                            if (!dateAxis) {\n                                uniqueCategories.set(category, true);\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (items.length > 0) {\n                if (dateAxis) {\n                    items = uniqueDates(items, function(a, b) {\n                        return dataviz.dateComparer(a[0], b[0]);\n                    });\n                }\n\n                var result = transpose(items);\n                axis.categories = result[0];\n            } else if (bindable) {\n                axis.categories = [];\n            }\n        },\n\n        _isBindable: function(series) {\n            var valueFields = SeriesBinder.current.valueFields(series);\n            var result = true;\n\n            for (var i = 0; i < valueFields.length; i++) {\n                var field = valueFields[i];\n                if (field === VALUE) {\n                    field = \"field\";\n                } else {\n                    field = field + \"Field\";\n                }\n\n                if (!defined(series[field])) {\n                    result = false;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _noTransitionsRedraw: function() {\n            var options = this.options;\n            var transitionsState;\n\n            if (options.transitions !== false) {\n                options.transitions = false;\n                transitionsState = true;\n            }\n\n            this._redraw();\n\n            if (transitionsState) {\n                options.transitions = true;\n            }\n        },\n\n        _legendItemHover: function(seriesIndex, pointIndex) {\n            var ref = this;\n            var plotArea = ref._plotArea;\n            var highlight = ref._highlight;\n            var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n            var items;\n\n            if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL ])) {\n                items = plotArea.findPoint(function(point) {\n                    return point.series.index === seriesIndex && point.index === pointIndex;\n                });\n            } else {\n                items = plotArea.pointsBySeriesIndex(seriesIndex);\n            }\n\n            if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n                var multipleSeries = plotArea.series.length > 1;\n                var point = items.length ? items[0] : items;\n\n                this._displayInactiveOpacity(point, multipleSeries, items);\n            } else {\n                highlight.show(items);\n            }\n        },\n\n        _shouldAttachMouseMove: function() {\n            return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n        },\n\n        updateMouseMoveHandler: function() {\n            var obj;\n            unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n            if (this._shouldAttachMouseMove()) {\n                var obj$1;\n                bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n            }\n        },\n\n        applyOptions: function(options, theme) {\n            clearMissingValues(this._originalOptions, options);\n            this._originalOptions = deepExtend(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions);\n\n            if (theme) {\n                this._theme = theme;\n                this.chartService.theme = theme;\n            }\n            this._initTheme(this.options, this._theme);\n\n            this._toggleDragZoomEvents();\n        },\n\n        setOptions: function(options, theme) {\n            this.applyOptions(options, theme);\n            this.bindCategories();\n            this.redraw();\n            this.updateMouseMoveHandler();\n        },\n\n        setDirection: function(rtl) {\n            this.chartService.rtl = Boolean(rtl);\n            if (this.surface && this.surface.type === 'svg') {\n                this._destroySurface();\n            }\n        },\n\n        setIntlService: function(intl) {\n            this.chartService.intl = intl;\n        },\n\n        noTransitionsRedraw: function() {\n            this._noTransitionsRedraw();\n        },\n\n        destroy: function() {\n            this._destroyed = true;\n\n            var obj;\n            unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n            if (this.domEvents) {\n                this.domEvents.destroy();\n                delete this.domEvents;\n            }\n\n            if (this._mouseMoveTrackHandler) {\n                var obj$1;\n                unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n            }\n\n            this._destroyView();\n\n            this._destroySurface();\n\n            this._clearRedrawTimeout();\n        },\n\n        _destroySurface: function() {\n            var surface = this.surface;\n            if (surface) {\n                surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n                surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n                surface.destroy();\n\n                this.surface = null;\n            }\n        },\n\n        _destroySelections: function() {\n            var selections = this._selections;\n\n            if (selections) {\n                while (selections.length > 0) {\n                    selections.shift().destroy();\n                }\n            }\n        },\n\n        _destroyView: function() {\n            var model = this._model;\n\n            if (model) {\n                model.destroy();\n                this._model = null;\n            }\n\n            this._unsetActivePoint();\n            this._resetDrilldownPoint();\n            this._destroySelections();\n\n            if (this._tooltip) {\n                this._tooltip.destroy();\n            }\n\n            if (this._highlight) {\n                this._highlight.destroy();\n            }\n\n            if (this._zoomSelection) {\n                this._zoomSelection.destroy();\n                delete this._zoomSelection;\n            }\n\n            if (this._pannable) {\n                this._pannable.destroy();\n                delete this._pannable;\n            }\n\n            if (this._mousewheelZoom) {\n                this._mousewheelZoom.destroy();\n                delete this._mousewheelZoom;\n            }\n        }\n    });\n\n    function resolveAxisAliases(options) {\n        var aliases = AXIS_NAMES;\n\n        for (var idx = 0; idx < aliases.length; idx++) {\n            var alias = aliases[idx] + \"Axes\";\n            if (options[alias]) {\n                options[aliases[idx] + \"Axis\"] = options[alias];\n                delete options[alias];\n            }\n        }\n    }\n\n    function pointByCategoryName(points, name) {\n        if (points) {\n            for (var idx = 0; idx < points.length; idx++) {\n                if (points[idx].category === name) {\n                    return [ points[idx] ];\n                }\n            }\n        }\n    }\n\n    function applyAxisDefaults(options, themeOptions) {\n        var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n        var axisName, axisDefaults, axes;\n\n        function mapAxisOptions(axisOptions) {\n            var axisColor = (axisOptions || {}).color || axisDefaults.color;\n            var result = deepExtend({},\n                themeAxisDefaults,\n                themeAxisDefaults[axisName],\n                axisDefaults,\n                axisDefaults[axisName], {\n                    line: { color: axisColor },\n                    labels: { color: axisColor },\n                    title: { color: axisColor }\n                },\n                axisOptions\n            );\n\n            delete result[axisName];\n\n            return result;\n        }\n\n        for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n            axisName = AXIS_NAMES[idx] + \"Axis\";\n            axisDefaults = options.axisDefaults || {};\n            axes = [].concat(options[axisName]);\n\n            axes = axes.map(mapAxisOptions);\n\n            options[axisName] = axes.length > 1 ? axes : axes[0];\n        }\n    }\n\n    function applySeriesDefaults(options, themeOptions) {\n        var series = options.series;\n        var seriesLength = series.length;\n        var seriesDefaults = options.seriesDefaults;\n        var commonDefaults = deepExtend({}, options.seriesDefaults);\n        var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n        var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n        cleanupNestedSeriesDefaults(commonDefaults);\n        cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n        for (var i = 0; i < seriesLength; i++) {\n            var seriesType = series[i].type || options.seriesDefaults.type;\n\n            var baseOptions = deepExtend(\n                { data: [] },\n                commonThemeDefaults,\n                themeSeriesDefaults[seriesType],\n                { tooltip: options.tooltip },\n                commonDefaults,\n                seriesDefaults[seriesType]\n            );\n\n            series[i]._defaults = baseOptions;\n            series[i] = deepExtend({}, baseOptions, series[i]);\n            series[i].data = series[i].data || [];\n        }\n    }\n\n    function cleanupNestedSeriesDefaults(seriesDefaults) {\n        delete seriesDefaults.bar;\n        delete seriesDefaults.column;\n        delete seriesDefaults.rangeColumn;\n        delete seriesDefaults.line;\n        delete seriesDefaults.verticalLine;\n        delete seriesDefaults.pie;\n        delete seriesDefaults.donut;\n        delete seriesDefaults.area;\n        delete seriesDefaults.verticalArea;\n        delete seriesDefaults.scatter;\n        delete seriesDefaults.scatterLine;\n        delete seriesDefaults.bubble;\n        delete seriesDefaults.candlestick;\n        delete seriesDefaults.ohlc;\n        delete seriesDefaults.boxPlot;\n        delete seriesDefaults.bullet;\n        delete seriesDefaults.verticalBullet;\n        delete seriesDefaults.polarArea;\n        delete seriesDefaults.polarLine;\n        delete seriesDefaults.radarArea;\n        delete seriesDefaults.radarLine;\n        delete seriesDefaults.waterfall;\n    }\n\n    function axisRanges(axes) {\n        var ranges = {};\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var axisName = axis.options.name;\n            if (axisName) {\n                ranges[axisName] = axis.range();\n            }\n        }\n\n        return ranges;\n    }\n\n    function sortDates(dates, comparer) {\n        if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n        for (var i = 1, length = dates.length; i < length; i++) {\n            if (comparer(dates[i], dates[i - 1]) < 0) {\n                dates.sort(comparer);\n                break;\n            }\n        }\n\n        return dates;\n    }\n\n    function uniqueDates(srcDates, comparer) {\n        if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n        var dates = sortDates(srcDates, comparer);\n        var length = dates.length;\n        var result = length > 0 ? [ dates[0] ] : [];\n\n        for (var i = 1; i < length; i++) {\n            if (comparer(dates[i], last(result)) !== 0) {\n                result.push(dates[i]);\n            }\n        }\n\n        return result;\n    }\n\n    function transpose(rows) {\n        var rowCount = rows.length;\n        var result = [];\n\n        for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n            var row = rows[rowIx];\n            var colCount = row.length;\n\n            for (var colIx = 0; colIx < colCount; colIx++) {\n                result[colIx] = result[colIx] || [];\n                result[colIx].push(row[colIx]);\n            }\n        }\n\n        return result;\n    }\n\n    var DATA_FIELDS = [ 'data', 'categories' ];\n\n    function clearMissingValues(originalOptions, options) {\n        for (var field in options) {\n            if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n                var fieldValue = options[field];\n                var originalValue = originalOptions[field];\n                if (defined(originalValue)) {\n                    var nullValue = fieldValue === null;\n                    if ((nullValue || !defined(fieldValue))) {\n                        delete originalOptions[field];\n                        if (nullValue) {\n                            delete options[field];\n                        }\n                    } else if (originalValue && isObject(fieldValue)) {\n                        if (isObject(originalValue)) {\n                            clearMissingValues(originalValue, fieldValue);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    function triggerPaneRender(panes) {\n        for (var idx = 0; idx < panes.length; idx++) {\n            panes[idx].notifyRender();\n        }\n    }\n\n    setDefaultOptions(Chart, {\n        renderAs: \"\",\n        chartArea: {},\n        legend: {\n            visible: true,\n            labels: {}\n        },\n        categoryAxis: {},\n        seriesDefaults: {\n            type: COLUMN,\n            data: [],\n            highlight: {\n                visible: true\n            },\n            labels: {},\n            negativeValues: {\n                visible: false\n            }\n        },\n        series: [],\n        seriesColors: null,\n        tooltip: {\n            visible: false\n        },\n        transitions: true,\n        valueAxis: {},\n        plotArea: {},\n        title: {},\n        xAxis: {},\n        yAxis: {},\n        panes: [ {} ],\n        pannable: false,\n        zoomable: false\n    });\n\n    kendo.deepExtend(kendo.dataviz, {\n        constants: constants,\n        Aggregates: Aggregates,\n        AreaChart: AreaChart,\n        AreaSegment: AreaSegment,\n        AxisGroupRangeTracker: AxisGroupRangeTracker,\n        Bar: Bar,\n        BarChart: BarChart,\n        BarLabel: BarLabel,\n        BoxPlotChart: BoxPlotChart,\n        BoxPlot: BoxPlot,\n        BubbleChart: BubbleChart,\n        Bullet: Bullet,\n        BulletChart: BulletChart,\n        CandlestickChart: CandlestickChart,\n        Candlestick: Candlestick,\n        CategoricalChart: CategoricalChart,\n        CategoricalErrorBar: CategoricalErrorBar,\n        CategoricalPlotArea: CategoricalPlotArea,\n        Chart: Chart,\n        ChartContainer: ChartContainer,\n        ClipAnimation: ClipAnimation,\n        ClusterLayout: ClusterLayout,\n        Crosshair: Crosshair,\n        CrosshairTooltip: CrosshairTooltip,\n        DefaultAggregates: DefaultAggregates,\n        DonutChart: DonutChart,\n        DonutPlotArea: DonutPlotArea,\n        DonutSegment: DonutSegment,\n        ErrorBarBase: ErrorBarBase,\n        ErrorRangeCalculator: ErrorRangeCalculator,\n        Highlight: Highlight,\n        SharedTooltip: SharedTooltip,\n        Legend: Legend,\n        LegendItem: LegendItem,\n        LegendLayout: LegendLayout,\n        LineChart: LineChart,\n        LinePoint: LinePoint,\n        LineSegment: LineSegment,\n        Pane: Pane,\n        PieAnimation: PieAnimation,\n        PieChart: PieChart,\n        PieChartMixin: PieChartMixin,\n        PiePlotArea: PiePlotArea,\n        PieSegment: PieSegment,\n        PlotAreaBase: PlotAreaBase,\n        PlotAreaEventsMixin: PlotAreaEventsMixin,\n        PlotAreaFactory: PlotAreaFactory,\n        PointEventsMixin: PointEventsMixin,\n        RangeBar: RangeBar,\n        RangeBarChart: RangeBarChart,\n        RangeAreaPoint: RangeAreaPoint,\n        RangeAreaChart: RangeAreaChart,\n        ScatterChart: ScatterChart,\n        ScatterErrorBar: ScatterErrorBar,\n        ScatterLineChart: ScatterLineChart,\n        Selection: Selection,\n        SeriesAggregator: SeriesAggregator,\n        SeriesBinder: SeriesBinder,\n        SplineSegment: SplineSegment,\n        SplineAreaSegment: SplineAreaSegment,\n        StackWrap: StackWrap,\n        Tooltip: Tooltip,\n        OHLCChart: OHLCChart,\n        OHLCPoint: OHLCPoint,\n        WaterfallChart: WaterfallChart,\n        WaterfallSegment: WaterfallSegment,\n        XYPlotArea: XYPlotArea,\n        MousewheelZoom: MousewheelZoom,\n        ZoomSelection: ZoomSelection,\n        Pannable: Pannable,\n        ChartAxis: ChartAxis,\n        ChartPane: ChartPane,\n        ChartPlotArea: ChartPlotArea,\n        findAxisByName: findAxisByName,\n        anyHasZIndex: anyHasZIndex,\n        appendIfNotNull: appendIfNotNull,\n        areNumbers: areNumbers,\n        bindSegments: bindSegments,\n        categoriesCount: categoriesCount,\n        countNumbers: countNumbers,\n        equalsIgnoreCase: equalsIgnoreCase,\n        evalOptions: evalOptions,\n        filterSeriesByType: filterSeriesByType,\n        getDateField: getDateField,\n        getField: getField,\n        hasGradientOverlay: hasGradientOverlay,\n        hasValue: hasValue,\n        isDateAxis: isDateAxis,\n        segmentVisible: segmentVisible,\n        singleItemOrArray: singleItemOrArray,\n        createOutOfRangePoints: createOutOfRangePoints\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var dataviz = kendo.dataviz;\n        var Widget = kendo.ui.Widget;\n\n        var ChartBreadcrumb = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                if (!options.chart) {\n                    throw new Error('ChartBreadcrumb: No Chart instance supplied as `options.chart`');\n                }\n\n                this._attachChartEvents();\n                this._renderBreadcrumb();\n\n                kendo.notify(this, dataviz.ui);\n            },\n\n            events: [],\n\n            options: {\n                name: \"ChartBreadcrumb\",\n                rootItem: {\n                    type: 'rootitem',\n                    icon: 'home',\n                    text: 'Home',\n                    showIcon: true\n                }\n            },\n\n            destroy: function() {\n                if (this.breadcrumb) {\n                    this.breadcrumb.destroy();\n                    this.breadcrumb = null;\n                }\n\n                if (this.chart) {\n                    this.chart.unbind('drilldown', this._onChartDrilldown);\n                    this.chart.unbind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n                    this.chart = null;\n                }\n\n                Widget.fn.destroy.call(this);\n            },\n\n            _attachChartEvents: function _attachChartEvents(deferred) {\n                var this$1$1 = this;\n\n                var options = this.options;\n\n                if (typeof options.chart.resetDrilldownLevel === 'function') {\n                    this.chart = options.chart;\n                } else if (typeof options.chart === 'string') {\n                    this.chart = $(options.chart).getKendoChart() || $('#' + options.chart).getKendoChart();\n\n                    if (!this.chart && !deferred) {\n                        setTimeout(function () { return this$1$1._attachChartEvents(true); });\n                        return;\n                    }\n                } else {\n                    throw new Error('ChartBreadcrumb: `options.chart` must be a Chart instance, element ID or a selector');\n                }\n\n                this._onChartDrilldown = this._onChartDrilldown.bind(this);\n                this.chart.bind('drilldown', this._onChartDrilldown);\n\n                this._onChartDrilldownLevelChange = this._onChartDrilldownLevelChange.bind(this);\n                this.chart.bind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n            },\n\n            _renderBreadcrumb: function() {\n                var this$1$1 = this;\n\n                var breadcrumbElement = $('<nav />');\n                this.element.append(breadcrumbElement);\n                this.breadcrumb = new kendo.ui.Breadcrumb(breadcrumbElement, {\n                    items: [this.options.rootItem]\n                });\n\n                this.breadcrumb.bind('click', function (e) { return this$1$1._onBreadcrumbClick(e); });\n            },\n\n            _onBreadcrumbClick: function(e) {\n                if (!this.breadcrumb || !this.chart) {\n                    return;\n                }\n\n                var items = this.breadcrumb.items();\n                var level = items.findIndex(function (item) { return item === e.item; });\n\n                var chart = this.chart;\n                chart.resetDrilldownLevel(level);\n            },\n\n            _onChartDrilldown: function(e) {\n                if (!this.breadcrumb || e.isDefaultPrevented()) {\n                    return;\n                }\n\n                this.breadcrumb.items(this.breadcrumb.items().concat( [{ type: 'item', text: e.point.category }]\n                ));\n            },\n\n            _onChartDrilldownLevelChange: function(e) {\n                if (!this.breadcrumb) {\n                    return;\n                }\n\n                var items = this.breadcrumb.items();\n                items = items.slice(0, e.level + 1);\n                this.breadcrumb.items(items);\n            }\n        });\n\n        dataviz.ui.plugin(ChartBreadcrumb);\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var NS = \".kendoChart\";\n        var kendo = window.kendo;\n        var Class = kendo.Class;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var dataviz = kendo.dataviz;\n        var constants = dataviz.constants;\n        var KendoChart = dataviz.Chart;\n        var SeriesBinder = dataviz.SeriesBinder;\n        var Widget = kendo.ui.Widget;\n        var DataSource = kendo.data.DataSource;\n        var deepExtend = kendo.deepExtend;\n        var defined = dataviz.defined;\n        var getField = dataviz.getField;\n        var InstanceObserver = dataviz.InstanceObserver;\n        var inArray = dataviz.inArray;\n        var services = dataviz.services;\n        var isArray = Array.isArray;\n        var extend = $.extend;\n        var template = kendo.template;\n        var encode = kendo.htmlEncode;\n\n        var MOUSELEAVE_NS = \"mouseleave\" + NS;\n        var AXIS_LABEL_CLICK = constants.AXIS_LABEL_CLICK;\n        var LEGEND_ITEM_CLICK = constants.LEGEND_ITEM_CLICK;\n        var LEGEND_ITEM_HOVER = constants.LEGEND_ITEM_HOVER;\n        var LEGEND_ITEM_LEAVE = constants.LEGEND_ITEM_LEAVE;\n        var SERIES_CLICK = constants.SERIES_CLICK;\n        var SERIES_HOVER = constants.SERIES_HOVER;\n        var SERIES_OVER = constants.SERIES_OVER;\n        var SERIES_LEAVE = constants.SERIES_LEAVE;\n        var PANE_RENDER = constants.PANE_RENDER;\n        var PLOT_AREA_CLICK = constants.PLOT_AREA_CLICK;\n        var PLOT_AREA_HOVER = constants.PLOT_AREA_HOVER;\n        var PLOT_AREA_LEAVE = constants.PLOT_AREA_LEAVE;\n        var DRAG = constants.DRAG;\n        var DRAG_END = constants.DRAG_END;\n        var DRAG_START = constants.DRAG_START;\n        var DRILLDOWN = constants.DRILLDOWN;\n        var DRILLDOWN_LEVEL_CHANGE = \"drilldownLevelChange\";\n        var ZOOM_START = constants.ZOOM_START;\n        var ZOOM = constants.ZOOM;\n        var ZOOM_END = constants.ZOOM_END;\n        var SELECT_START = constants.SELECT_START;\n        var SELECT = constants.SELECT;\n        var SELECT_END = constants.SELECT_END;\n        var RENDER = constants.RENDER;\n        var NOTE_CLICK = constants.NOTE_CLICK;\n        var NOTE_HOVER = constants.NOTE_HOVER;\n        var NOTE_LEAVE = constants.NOTE_LEAVE;\n        var DOCUMENT_ELEMENT = $(document.documentElement);\n\n        var CHANGE = \"change\";\n        var DATABOUND = \"dataBound\";\n        var LEAVE = \"leave\";\n        var MOUSEDOWN = \"down\";\n\n        var VALUE = constants.VALUE;\n        var PIE = constants.PIE;\n        var DONUT = constants.DONUT;\n        var FUNNEL = constants.FUNNEL;\n\n        var Observable = kendo.Observable;\n        var TOOLTIP_ANIMATION_DURATION = 150;\n        var TOOLTIP_SHOW_DELAY = 100;\n        var TOOLTIP_INVERSE = \"k-chart-tooltip-inverse\";\n        var SHARED_TOOLTIP_CLASS = \"k-chart-shared-tooltip\";\n        var RTL = \"rtl\";\n\n        services.DomEventsBuilder.register({\n            create: function(element, events) {\n                 return new kendo.UserEvents(element, deepExtend({\n                     global: true,\n                     multiTouch: true,\n                     fastTap: true\n                 }, events));\n            }\n        });\n\n        var ChartInstanceObserver = InstanceObserver.extend({\n            handlerMap: {\n                showTooltip: '_showTooltip',\n                hideTooltip: '_hideTooltip',\n                legendItemClick: '_onLegendItemClick',\n                render: '_onRender',\n                init: '_onInit',\n                drilldown: '_onDrilldown'\n            }\n        });\n\n        var Chart = Widget.extend({\n            init: function(element, userOptions) {\n                var dataSource;\n\n                kendo.destroy(element);\n\n                Widget.fn.init.call(this, element);\n\n                if (userOptions) {\n                    dataSource = userOptions.dataSource;\n                    delete userOptions.dataSource;\n                }\n\n                this.options = deepExtend({}, this.options, userOptions);\n\n                this.wrapper = this.element;\n                this._attachEvents();\n\n                if (userOptions) {\n                    userOptions.dataSource = dataSource;\n                }\n\n                this._seriesVisibility = new SeriesVisibilityState();\n\n                this.bind(this.events, this.options);\n                this._initDataSource(userOptions);\n\n                this._drilldownState = [];\n\n                kendo.notify(this, dataviz.ui);\n            },\n\n            events: [\n                DATABOUND,\n                DRILLDOWN,\n                DRILLDOWN_LEVEL_CHANGE,\n                SERIES_CLICK,\n                SERIES_HOVER,\n                SERIES_OVER,\n                SERIES_LEAVE,\n                AXIS_LABEL_CLICK,\n                LEGEND_ITEM_CLICK,\n                LEGEND_ITEM_HOVER,\n                LEGEND_ITEM_LEAVE,\n                PANE_RENDER,\n                PLOT_AREA_CLICK,\n                PLOT_AREA_HOVER,\n                PLOT_AREA_LEAVE,\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                ZOOM_START,\n                ZOOM,\n                ZOOM_END,\n                SELECT_START,\n                SELECT,\n                SELECT_END,\n                NOTE_CLICK,\n                NOTE_HOVER,\n                NOTE_LEAVE,\n                RENDER\n            ],\n\n            options: {\n                name: \"Chart\",\n                renderAs: \"\",\n                theme: \"default\",\n                axisDefaults: {},\n                chartArea: {},\n                legend: {},\n                categoryAxis: {},\n                autoBind: true,\n                seriesDefaults: {},\n                series: [],\n                seriesColors: null,\n                tooltip: {},\n                transitions: true,\n                valueAxis: {},\n                plotArea: {},\n                title: {},\n                xAxis: {},\n                yAxis: {},\n                panes: [{}],\n                pannable: false,\n                zoomable: false\n            },\n\n            items: function() {\n                return $();\n            },\n\n            refresh: function() {\n                var chart = this;\n                var instance = chart._instance;\n                instance.applyDefaults(chart.options);\n                instance.applySeriesColors();\n\n                chart._bindSeries();\n                chart._bindCategories();\n\n                chart.trigger(DATABOUND);\n                chart._redraw();\n            },\n\n            getSize: function() {\n                return kendo.dimensions(this.element);\n            },\n\n            redraw: function(paneName) {\n                this._size = null;\n                this._instance.redraw(paneName);\n            },\n\n            setOptions: function(options) {\n                var chart = this,\n                    dataSource = options.dataSource;\n\n                delete options.dataSource;\n\n                Widget.fn._setEvents.call(chart, options);\n\n                this._instance.applyOptions(options, this._getThemeOptions(options));\n                this.options = this._instance.options;\n                this._tooltip.setOptions(this.options.tooltip);\n                this._seriesVisibility.setOptions(this.options);\n                this._sourceSeries = null;\n\n                if (dataSource) {\n                    chart.setDataSource(dataSource);\n                }\n\n                if (chart._hasDataSource) {\n                    chart._onDataChanged();\n                } else {\n                    chart._bindCategories();\n                    chart.redraw();\n                }\n\n                chart._instance.updateMouseMoveHandler();\n\n            },\n\n            setDataSource: function(dataSource) {\n                var chart = this;\n\n                chart.dataSource.unbind(CHANGE, chart._dataChangeHandler);\n                chart.dataSource = dataSource = DataSource.create(dataSource);\n                chart._hasDataSource = true;\n                chart._hasData = false;\n\n                dataSource.bind(CHANGE, chart._dataChangeHandler);\n\n                if (chart.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n\n            destroy: function() {\n                var chart = this,\n                    dataSource = chart.dataSource;\n\n                chart.element.off(NS);\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, chart._dataChangeHandler);\n                }\n\n                if (chart._instance) {\n                    chart._instance.destroy();\n                    delete this._instance;\n                }\n\n                if (this._tooltip) {\n                    this._tooltip.destroy();\n                    delete this._tooltip;\n                }\n\n                this._destroyCrosshairTooltips();\n\n                Widget.fn.destroy.call(chart);\n            },\n\n            findPaneByName: function(name) {\n                var panes = this._plotArea.panes;\n\n                for (var idx = 0; idx < panes.length; idx++) {\n                    if (panes[idx].options.name === name) {\n                        return new ChartPane(this, panes[idx]);\n                    }\n                }\n            },\n\n            findPaneByIndex: function(idx) {\n                var panes = this._plotArea.panes;\n                if (panes[idx]) {\n                    return new ChartPane(this, panes[idx]);\n                }\n            },\n\n            findSeries: function(callback) {\n                var plotArea = this._plotArea;\n                var series = plotArea.srcSeries || plotArea.series;\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (callback(series[idx])) {\n                        return new ChartSeries(this, series[idx]);\n                    }\n                }\n            },\n\n            findSeriesByName: function(name) {\n                return this._createSeries({ name: name });\n            },\n\n            findSeriesByIndex: function(index) {\n                return this._createSeries({ index: index });\n            },\n\n            exportVisual: function(options) {\n                var instance = this._instance;\n                if (!instance) {\n                    return;\n                }\n\n                var visual;\n\n                //TO DO: support for setting any options. already available in kendo-charts\n                if (options && (options.width || options.height)) {\n                    var chartArea = instance.options.chartArea;\n                    var originalChartArea = instance._originalOptions.chartArea;\n\n                    deepExtend(chartArea, options);\n\n                    var model = instance._getModel();\n\n                    chartArea.width = originalChartArea.width;\n                    chartArea.height = originalChartArea.height;\n\n                    model.renderVisual();\n\n                    triggerPaneRender(model._plotArea.panes);\n\n                    visual = model.visual;\n                } else {\n                    visual = instance.exportVisual();\n                }\n\n                return visual;\n            },\n\n            resetDrilldownLevel: function resetDrilldownLevel(level) {\n                level = level || 0;\n                var state = this._drilldownState;\n                if (!state || level < 0 || level > state.length - 1) {\n                    return;\n                }\n\n                var args = {\n                    level: level,\n                    sender: this\n                };\n                this.trigger(DRILLDOWN_LEVEL_CHANGE, args);\n\n                this.options.series = this._drilldownState[level];\n                this._drilldownState = this._drilldownState.slice(0, level);\n\n                this._bindCategories();\n                this._redraw();\n            },\n\n            _createSeries: function(options) {\n                var seriesOptions = this._seriesOptions(options);\n                if (seriesOptions) {\n                    return new ChartSeries(this, seriesOptions);\n                }\n            },\n\n            _seriesOptions: function(options) {\n                var plotArea = this._plotArea;\n                var series = plotArea.srcSeries || plotArea.series;\n                var seriesOptions;\n\n                if (defined(options.index)) {\n                    seriesOptions = series[options.index];\n                } else if (defined(options.name)) {\n                    for (var idx = 0; idx < series.length; idx++) {\n                        if (series[idx].name === options.name) {\n                            seriesOptions = series[idx];\n                            break;\n                        }\n                    }\n                }\n\n                return seriesOptions;\n            },\n\n            _attachEvents: function() {\n                 this.element.on(MOUSELEAVE_NS, this._mouseleave.bind(this));\n            },\n\n            _mouseleave: function(e) {\n                var instance = this._instance;\n                var tooltip = this._tooltip;\n                var target = e.relatedTarget;\n\n                if (!(target && $(target).closest(tooltip.element).length) && instance && !instance.handlingTap) {\n                    instance.hideElements({\n                        keepTooltipOpen: !tooltip.options.autoHide\n                    });\n                }\n            },\n\n            _getThemeOptions: function(userOptions) {\n                var themeName = (userOptions || {}).theme;\n\n                if (themeName && dataviz.SASS_THEMES.indexOf(themeName.toLowerCase()) !== -1) {\n                    return dataviz.autoTheme().chart;\n                }\n\n                if (defined(themeName)) {\n                    var themes = dataviz.ui.themes || {};\n                    var theme = themes[themeName] || themes[themeName.toLowerCase()] || {};\n                    return theme.chart || {};\n                }\n            },\n\n            _initChart: function() {\n                this._createChart(this.options, this._getThemeOptions(this.options));\n                this.options = this._instance.options;\n                this._seriesVisibility.setOptions(this.options);\n            },\n\n            _createChart: function(options, themeOptions) {\n                this._instance = new KendoChart(this.element[0], options, themeOptions, {\n                    observer: new ChartInstanceObserver(this),\n                    sender: this,\n                    rtl: this._isRtl()\n                });\n            },\n\n            _onInit: function(e) {\n                this._instance = e.sender;\n            },\n\n            _initDataSource: function(userOptions) {\n                var chart = this,\n                    dataSource = (userOptions || {}).dataSource;\n\n                chart._dataChangeHandler = chart._onDataChanged.bind(chart);\n\n                chart.dataSource = DataSource\n                    .create(dataSource)\n                    .bind(\"change\", chart._dataChangeHandler);\n\n                chart._bindCategories();\n\n                if (dataSource) {\n                    chart._hasDataSource = true;\n                }\n\n                this._initChart();\n                this._initTooltip();\n\n                if (dataSource) {\n                    if (chart.options.autoBind) {\n                        chart.dataSource.fetch();\n                    }\n                }\n            },\n\n            _destroyCrosshairTooltips: function() {\n                var tooltips = this._crosshairTooltips;\n                if (tooltips) {\n                    for (var key in tooltips) {\n                        tooltips[key].destroy();\n                    }\n                }\n                this._crosshairTooltips = {};\n            },\n\n            _getCrosshairTooltip: function(name, index) {\n                var tooltips = this._crosshairTooltips = this._crosshairTooltips || {};\n                var key = name + index;\n                var tooltip = tooltips[key];\n                if (!tooltip) {\n                    tooltip = tooltips[key] = new CrosshairTooltip(this.element);\n                }\n                return tooltip;\n            },\n\n            _showTooltip: function(e) {\n                if (e.crosshair) {\n                    var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                    tooltip.show(e);\n                } else if (this._tooltip) {\n                    this._tooltip.show(e);\n                }\n            },\n\n            _hideTooltip: function(e) {\n                if (e.crosshair) {\n                     var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                     tooltip.hide();\n                } else if (this._tooltip) {\n                    this._tooltip.hide();\n                }\n            },\n\n            _onRender: function(e) {\n                this._destroyCrosshairTooltips();\n                this._copyMembers(e.sender);\n                if (!this._hasDataSource || this._hasData || !this.options.autoBind) {\n                    this.trigger(RENDER);\n                }\n            },\n\n            _copyMembers: function(instance) {\n                this.options = instance.options;\n                this._originalOptions = instance._originalOptions;\n                this.surface = instance.surface;\n                this._plotArea = instance._plotArea;\n                this._model = instance._model;\n                this._highlight = instance._highlight;\n                this._selections = instance._selections;\n                this._pannable = instance._pannable;\n                this._zoomSelection = instance._zoomSelection;\n                this._mousewheelZoom = instance._mousewheelZoom;\n            },\n\n            requiresHandlers: function(names) {\n               var events = this._events;\n               for (var idx = 0; idx < names.length; idx++) {\n                   if (defined(events[names[idx]])) {\n                       return true;\n                   }\n               }\n            },\n\n            _initTooltip: function() {\n                this._tooltip = this._createTooltip();\n\n                this._tooltip.bind(LEAVE, this._tooltipleave.bind(this));\n            },\n\n            _onLegendItemClick: function(e) {\n                if (!this.trigger(LEGEND_ITEM_CLICK, e)) {\n                    this._legendItemClick(e.seriesIndex, e.pointIndex);\n                }\n            },\n\n            _legendItemClick: function(seriesIndex, pointIndex) {\n                var chart = this._instance,\n                    plotArea = chart._plotArea,\n                    currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n\n                if (chart._hasInactiveOpacity() && chart._activeChartInstance) {\n                    chart._updateSeriesOpacity(null, true);\n                    chart._applySeriesOpacity(chart._activeChartInstance.children, null, true);\n                    chart._activeChartInstance = null;\n                }\n\n                if ($.inArray(currentSeries.type, [PIE, DONUT, FUNNEL]) >= 0) {\n                    var point = currentSeries.data[pointIndex];\n                    if (point && defined(point.visible)) {\n                        point.visible = !point.visible;\n                    } else {\n                        var pointVisibility = currentSeries.pointVisibility = currentSeries.pointVisibility || {};\n                        var visible = pointVisibility[pointIndex];\n                        pointVisibility[pointIndex] = defined(visible) ? !visible : false;\n                    }\n                } else {\n                    currentSeries.visible = !currentSeries.visible;\n                    this._seriesVisibility.save(currentSeries);\n                }\n\n                chart._noTransitionsRedraw();\n            },\n\n            _createTooltip: function() {\n                return new Tooltip(this.element, extend({}, this.options.tooltip, {\n                    rtl: this._isRtl()\n                }));\n            },\n\n            _tooltipleave: function() {\n                if (this._instance) {\n                    this._instance.hideElements();\n                }\n            },\n\n            _onDrilldown: function(e) {\n                var this$1$1 = this;\n\n                var series = e.series;\n                var value = e.value;\n\n                if (series.drilldownSeriesFactory) {\n                    var result = series.drilldownSeriesFactory(value);\n\n                    if (!result) {\n                        return;\n                    } else if (result instanceof Promise) {\n                        result.then(function (resolved) { return this$1$1._onDrilldownData(e, resolved); });\n                    } else {\n                        this._onDrilldownData(e, result);\n                    }\n                } else if (typeof value === 'object') {\n                    this._onDrilldownData(e, value);\n                }\n            },\n\n            _onDrilldownData: function(e, data) {\n                var drilldownSeries = Object.assign({}, e.series, data);\n                var args = {\n                    point: e.point,\n                    series: e.series,\n                    drilldownSeries: drilldownSeries,\n                    sender: this\n                };\n\n                var prevented = this.trigger(DRILLDOWN, args);\n                if (!prevented) {\n                    this._drilldownState.push(this.options.series);\n\n                    this.options.series = [drilldownSeries];\n                    this._bindCategories();\n                    this._redraw();\n                }\n            },\n\n            _bindData: function(e) {\n                var chart = this,\n                    options = chart.options,\n                    series = chart._sourceSeries || options.series,\n                    seriesIx,\n                    seriesLength = series.length,\n                    data = chart.dataSource.view(),\n                    grouped = (chart.dataSource.group() || []).length > 0,\n                    processedSeries = [],\n                    seriesVisibility = this._seriesVisibility,\n                    currentSeries,\n                    groupedSeries;\n\n                seriesVisibility.read();\n\n                for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                    currentSeries = series[seriesIx];\n\n                    if (chart._isBindable(currentSeries) && grouped) {\n                        groupedSeries = groupSeries(currentSeries, data);\n                        processedSeries = processedSeries.concat(groupedSeries);\n\n                        seriesVisibility.applyByGroup(groupedSeries, e);\n                    } else {\n                        currentSeries = extend({}, currentSeries);\n                        processedSeries.push(currentSeries);\n\n                        seriesVisibility.applyByIndex(currentSeries, e);\n                    }\n                }\n\n                chart._sourceSeries = series;\n                options.series = processedSeries;\n                this._instance.applySeriesColors();\n\n                chart._bindSeries();\n                chart._bindCategories();\n\n                this._hasData = true;\n            },\n\n            _onDataChanged: function(e) {\n                this._bindData(e);\n\n                this.trigger(DATABOUND);\n                if (this._instance && this._instance.fontLoaded) {\n                    this._redraw();\n                }\n            },\n\n            _bindSeries: function() {\n                var chart = this,\n                    data = chart.dataSource.view(),\n                    series = chart.options.series,\n                    seriesIx,\n                    seriesLength = series.length,\n                    currentSeries,\n                    groupIx,\n                    seriesData;\n\n                for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                    currentSeries = series[seriesIx];\n\n                    if (chart._isBindable(currentSeries)) {\n                        groupIx = currentSeries._groupIx;\n                        seriesData = defined(groupIx) ? (data[groupIx] || {}).items : data;\n\n                        if (currentSeries.autoBind !== false) {\n                            currentSeries.data = seriesData;\n                        }\n                    }\n                }\n            },\n\n            _bindCategories: function() {\n                var chart = this,\n                    data = chart.dataSource.view() || [],\n                    grouped = (chart.dataSource.group() || []).length > 0,\n                    categoriesData = data,\n                    options = chart.options,\n                    definitions = [].concat(options.categoryAxis),\n                    axisIx,\n                    axis;\n\n                if (grouped) {\n                    if (data.length) {\n                        categoriesData = data[0].items;\n                    }\n                }\n\n                for (axisIx = 0; axisIx < definitions.length; axisIx++) {\n                    axis = definitions[axisIx];\n                    if (axis.autoBind !== false) {\n                        chart._bindCategoryAxis(axis, categoriesData, axisIx);\n                    }\n                }\n            },\n\n            _bindCategoryAxis: function(axis, data, axisIx) {\n                var count = (data || []).length,\n                    categoryIx,\n                    category,\n                    row;\n\n                if (axis.field) {\n                    axis.categories = [];\n                    for (categoryIx = 0; categoryIx < count; categoryIx++) {\n                        row = data[categoryIx];\n\n                        category = getField(axis.field, row);\n                        if (categoryIx === 0) {\n                            axis.categories = [category];\n                            axis.dataItems = [row];\n                        } else {\n                            axis.categories.push(category);\n                            axis.dataItems.push(row);\n                        }\n                    }\n                } else if (this._instance) {\n                    this._instance.bindCategoryAxisFromSeries(axis, axisIx);\n                }\n            },\n\n            _isBindable: function(series) {\n                var valueFields = SeriesBinder.current.valueFields(series),\n                    result = true,\n                    field, i;\n\n                for (i = 0; i < valueFields.length; i++) {\n                    field = valueFields[i];\n                    if (field === VALUE) {\n                        field = \"field\";\n                    } else {\n                        field = field + \"Field\";\n                    }\n\n                    if (!defined(series[field])) {\n                        result = false;\n                        break;\n                    }\n                }\n\n                return result;\n            },\n\n            _isRtl: function() {\n                return kendo.support.isRtl(this.element) && this.element.css(\"direction\") === RTL;\n            }\n        });\n\n        var proxyMembers = [\"getAxis\", \"findAxisByName\", \"plotArea\", \"toggleHighlight\", \"showTooltip\",\n            \"hideTooltip\", \"_resize\", \"_redraw\", \"_noTransitionsRedraw\", \"_legendItemHover\", \"_eventCoordinates\"];\n\n        function createProxyMember(name) {\n            Chart.fn[name] = function() {\n                var instance = this._instance;\n                if (instance) {\n                    return instance[name].apply(instance, arguments);\n                }\n            };\n        }\n\n        for (var idx = 0; idx < proxyMembers.length; idx++) {\n            createProxyMember(proxyMembers[idx]);\n        }\n\n        function groupSeries(series, data) {\n            var result = [],\n                nameTemplate,\n                legacyTemplate = series.groupNameTemplate,\n                groupIx,\n                dataLength = data.length,\n                seriesClone,\n                defaultNameTemplate = function (ref) {\n                    var group = ref.group;\n\n                    return (\"\" + (defined(series.name) ? group.value + \": \" + series.name : group.value));\n            };\n\n            if (dataLength === 0) {\n                seriesClone = deepExtend({}, series);\n                seriesClone.visibleInLegend = false;\n                return [seriesClone];\n            }\n\n            if (defined(legacyTemplate)) {\n                kendo.logToConsole(\n                    \"'groupNameTemplate' is obsolete and will be removed in future versions. \" +\n                    \"Specify the group name template as 'series.name'\"\n                );\n\n                if (legacyTemplate) {\n                    nameTemplate = template(legacyTemplate);\n                }\n            } else {\n                nameTemplate = template(series.name || defaultNameTemplate);\n            }\n\n            for (groupIx = 0; groupIx < dataLength; groupIx++) {\n                seriesClone = deepExtend({}, series);\n\n                if (!kendo.isFunction(seriesClone.color)) {\n                    seriesClone.color = undefined$1;\n                }\n\n                seriesClone._groupIx = groupIx;\n                seriesClone._groupValue = data[groupIx].value;\n                result.push(seriesClone);\n\n                if (nameTemplate) {\n                    seriesClone.name = nameTemplate({\n                        series: seriesClone, group: data[groupIx]\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        dataviz.ExportMixin.extend(Chart.fn);\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Chart.fn);\n        }\n\n        dataviz.ui.plugin(Chart);\n\n        var SeriesVisibilityState = Class.extend({\n            init: function() {\n                this.groups = {};\n                this.index = {};\n                this.options = {};\n            },\n\n            applyByGroup: function(series, e) {\n                if ((e && e.action) || this.options.persistSeriesVisibility) {\n                    for (var idx = 0; idx < series.length; idx++) {\n                        if (this.groups[series[idx]._groupValue] === false) {\n                            series[idx].visible = false;\n                        }\n                    }\n                } else {\n                    this.groups = {};\n                }\n            },\n\n            applyByIndex: function(series, e) {\n                if ((e && e.action) || this.options.persistSeriesVisibility) {\n                    if (this.index[series.index] === false) {\n                        series.visible = false;\n                    }\n                } else {\n                    this.index = {};\n                }\n            },\n\n            save: function(series) {\n                if (!series) {\n                    return;\n                }\n\n                if (this.options.persistSeriesVisibility) {\n                    this.options.series[series.index].visible = series.visible;\n                } else {\n                    this.saveState(series);\n                }\n            },\n\n            setOptions: function(options) {\n                this.options = options;\n                this.groups = {};\n                this.index = {};\n            },\n\n            read: function() {\n                var options = this.options;\n                if (options.persistSeriesVisibility) {\n                    var series = options.series;\n                    for (var idx = 0; idx < series.length; idx++) {\n                        this.saveState(series[idx]);\n                    }\n                }\n            },\n\n            saveState: function(series) {\n                if (defined(series._groupValue)) {\n                    this.groups[series._groupValue] = series.visible;\n                } else {\n                    this.index[series.index] = series.visible;\n                }\n            }\n        });\n\n        var geom = kendo.geometry;\n\n        function normalizeStyle(style) {\n            for (var field in style) {\n                if (style[field] === undefined$1) {\n                    style[field] = '';\n                }\n            }\n\n            return style;\n        }\n\n        var Tooltip = Observable.extend({\n            init: function(chartElement, options) {\n                var tooltip = this;\n\n                Observable.fn.init.call(tooltip);\n\n                this.setOptions(options);\n\n                tooltip.chartElement = chartElement;\n\n                tooltip.template = Tooltip.template;\n                if (!tooltip.template) {\n                    tooltip.template = Tooltip.template = function (ref) {\n                            var autoHide = ref.autoHide;\n                            var rtl = ref.rtl;\n                            var font = ref.font;\n                            var border = ref.border;\n                            var opacity = ref.opacity;\n\n                            return \"<div class='k-tooltip \" + (autoHide ? \"k-tooltip-closable\" : \"\") + \" k-chart-tooltip \" + (rtl ? \"k-rtl\" : \"\") + \"' \" +\n                        \"style='display:none; position: absolute; font: \" + font + \";\" +\n                        \"\" + (border ? \"border:\" + border.width + \"px solid;\" : \"\") +\n                        \"opacity: \" + opacity + \";'>\" +\n                        '<div class=\"k-tooltip-content\"></div>' +\n                        \"\" + (autoHide ? '' : '<div class=\"k-tooltip-button\">' + kendo.ui.icon($('<a href=\"#\" title=\"Close\"></a>'), { icon: \"x\" }) + '</div>') +\n                        \"</div>\";\n                    };\n                }\n\n                tooltip.element = $(tooltip.template(tooltip.options));\n\n                tooltip.move = tooltip.move.bind(tooltip);\n                tooltip._mouseleave = tooltip._mouseleave.bind(tooltip);\n\n                var mobileScrollerSelector = kendo.format(\"[{0}='content'],[{0}='scroller']\", kendo.attr(\"role\"));\n                tooltip._mobileScroller = chartElement.closest(mobileScrollerSelector).data(\"kendoMobileScroller\");\n                tooltip.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n                tooltip._closeTooltipHandler = tooltip._closeTooltip.bind(tooltip);\n            },\n\n            destroy: function() {\n                var tooltip = this;\n\n                this._clearShowTimeout();\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n                if (this.element) {\n                    this.element.off(MOUSELEAVE_NS).remove();\n                    this.element = null;\n                }\n            },\n\n            setOptions: function(options) {\n                this.options = deepExtend({}, this.options, options);\n            },\n\n            options: {\n                opacity: 1,\n                animation: {\n                    duration: TOOLTIP_ANIMATION_DURATION\n                },\n                sharedTemplate: function (ref) {\n                        var colspan = ref.colspan;\n                        var categoryText = ref.categoryText;\n                        var points = ref.points;\n                        var content = ref.content;\n                        var colorMarker = ref.colorMarker;\n                        var nameColumn = ref.nameColumn;\n\n                        return \"<table>\" +\n                    \"<th colspan='\" + colspan + \"'>\" + categoryText + \"</th>\" +\n                        sharedTemplateIterator(points, colorMarker, nameColumn, content) +\n                    \"</table>\";\n        },\n                categoryFormat: \"{0:d}\",\n                autoHide: true\n            },\n\n            move: function() {\n                var tooltip = this,\n                    options = tooltip.options,\n                    element = tooltip.element,\n                    offset;\n\n                if (!tooltip.anchor || !tooltip.element) {\n                    return;\n                }\n\n                offset = tooltip._offset();\n                if (!tooltip.visible) {\n                    element.css({ top: offset.top, left: offset.left });\n                }\n\n                tooltip.visible = true;\n                tooltip._ensureElement(document.body);\n                element\n                    .stop(true, true)\n                    .show()\n                    .animate({\n                        left: offset.left,\n                        top: offset.top\n                    }, options.animation.duration);\n            },\n\n            _clearShowTimeout: function() {\n                if (this.showTimeout) {\n                    clearTimeout(this.showTimeout);\n                    this.showTimeout = null;\n                }\n            },\n\n            getAnchor: function(size) {\n                var anchor = this.anchor;\n                var point = anchor.point;\n                var align = anchor.align;\n                var x = point.left;\n                var y = point.top;\n                if (align.horizontal === \"center\") {\n                    x -= size.width / 2;\n                } else if (align.horizontal === \"right\") {\n                    x -= size.width;\n                }\n\n                if (align.vertical === \"center\") {\n                    y -= size.height / 2;\n                } else if (align.vertical === \"bottom\") {\n                    y -= size.height;\n                }\n\n                return {\n                    x: x,\n                    y: y\n                };\n            },\n\n            _offset: function() {\n                var tooltip = this,\n                    size = tooltip._measure(),\n                    anchor = tooltip.getAnchor(size),\n                    top = anchor.y,\n                    left = anchor.x,\n                    zoomLevel = kendo.support.zoomLevel(),\n                    viewport = $(window),\n                    scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0,\n                    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || 0,\n                    movable = (this._mobileScroller || {}).movable;\n\n                if (!movable || movable.scale === 1) {\n                    top += tooltip._fit(top - scrollTop, size.height, outerHeight(viewport) / zoomLevel);\n                    left += tooltip._fit(left - scrollLeft, size.width, outerWidth(viewport) / zoomLevel);\n                } else {\n                    var transform = geom.transform().scale(movable.scale, movable.scale, [movable.x, movable.y]);\n                    var point = new geom.Point(left, top).transform(transform);\n                    left = point.x;\n                    top = point.y;\n                }\n\n                return {\n                    top: top,\n                    left: left\n                };\n            },\n\n            show: function(e) {\n                var tooltip = this;\n\n                this.anchor = e.anchor;\n                this.element.css(normalizeStyle(e.style));\n                this.element.toggleClass(TOOLTIP_INVERSE, !!e.className);\n                this.element.toggleClass(SHARED_TOOLTIP_CLASS, !!e.shared);\n\n                var content = e.shared ? this._sharedContent(e) : this._pointContent(e.point);\n                this.element.find('.k-tooltip-content').html(content);\n\n                if (!tooltip.options.autoHide) {\n                    tooltip.element.off(\"click\" + NS).on(\"click\" + NS, \".k-tooltip-button\", tooltip._closeTooltipHandler);\n                    DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler)\n                        .on(tooltip.downEvent, tooltip._closeTooltipHandler);\n                }\n\n                this._clearShowTimeout();\n                this.showTimeout = setTimeout(this.move, TOOLTIP_SHOW_DELAY);\n            },\n\n            hide: function(forceHide) {\n                var tooltip = this;\n\n                if (!tooltip.options.autoHide && !forceHide) {\n                    return;\n                }\n\n                clearTimeout(tooltip.showTimeout);\n                tooltip._hideElement();\n\n                if (tooltip.visible) {\n                    tooltip.point = null;\n                    tooltip.visible = false;\n                    tooltip.index = null;\n                    DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n                }\n            },\n\n            _closeTooltip: function(e) {\n                var target = $(e.target);\n\n                if (!target.is(\".k-chart-tooltip, .k-tooltip-content\")) {\n                    e.preventDefault();\n                    this.chartElement.data(\"kendoChart\")._instance.hideElements();\n                    this.hide(true);\n                }\n            },\n\n            _sharedContent: function(e) {\n                var points = e.points;\n                var nameColumn = dataviz.grep(points, function(point) {\n                    return defined(point.series.name);\n                }).length;\n\n                var colorMarker = e.series.length > 1;\n                var colspan = 1;\n                if (nameColumn) {\n                    colspan++;\n                }\n                if (colorMarker) {\n                    colspan++;\n                }\n\n                var template = kendo.template(this.options.sharedTemplate);\n                var content = template({\n                    points: points,\n                    category: e.category,\n                    categoryText: e.categoryText,\n                    content: this._pointContent,\n                    colorMarker: colorMarker,\n                    nameColumn: nameColumn,\n                    colspan: colspan\n                });\n\n                return content;\n            },\n\n            _measure: function() {\n                this._ensureElement();\n\n                var size = {\n                    width: outerWidth(this.element),\n                    height: outerHeight(this.element)\n                };\n\n                return size;\n            },\n\n            _ensureElement: function() {\n                if (this.element) {\n                    this.element\n                        .appendTo(document.body)\n                        .on(MOUSELEAVE_NS, this._mouseleave);\n                }\n            },\n\n            _mouseleave: function(e) {\n                var target = e.relatedTarget;\n                var chart = this.chartElement[0];\n                if (target && target !== chart && !$.contains(chart, target)) {\n                    this.trigger(LEAVE);\n                }\n            },\n\n            _hideElement: function() {\n                var tooltip = this;\n                var element = this.element;\n                if (element) {\n                    element.fadeOut({\n                        always: function() {\n                            if (!tooltip.visible) {\n                                element.off(MOUSELEAVE_NS).remove();\n                            }\n                        }\n                    });\n                }\n            },\n\n            _pointContent: function(point) {\n                var tooltip = this,\n                    options = deepExtend({}, tooltip.options, point.options.tooltip),\n                    content, tooltipTemplate;\n\n                if (defined(point.value)) {\n                    content = point.value.toString();\n                }\n\n                if (options.template) {\n                    tooltipTemplate = template(options.template);\n                    content = tooltipTemplate({\n                        value: point.value,\n                        category: point.category,\n                        series: point.series,\n                        dataItem: point.dataItem,\n                        percentage: point.percentage,\n                        runningTotal: point.runningTotal,\n                        total: point.total,\n                        low: point.low,\n                        high: point.high,\n                        xLow: point.xLow,\n                        xHigh: point.xHigh,\n                        yLow: point.yLow,\n                        yHigh: point.yHigh\n                    });\n                } else if (options.format) {\n                    content = point.formatValue(options.format);\n                }\n\n                return content;\n            },\n\n            _fit: function(offset, size, viewPortSize) {\n                var output = 0;\n\n                if (offset + size > viewPortSize) {\n                    output = viewPortSize - (offset + size);\n                }\n\n                if (offset < 0) {\n                    output = -offset;\n                }\n\n                return output;\n            }\n        });\n\n        var CrosshairTooltip = Tooltip.extend({\n            init: function(chartElement, options) {\n                Tooltip.fn.init.call(this, chartElement, options);\n                this.element.addClass(\"k-chart-crosshair-tooltip\");\n            },\n\n            show: function(e) {\n                var element = this.element;\n\n                if (element) {\n                    this.anchor = e.anchor;\n                    this.element.css(e.style);\n                    this.element.html(this.content(e));\n\n                    this.move();\n                }\n            },\n\n            move: function() {\n                var tooltip = this,\n                    element = tooltip.element,\n                    offset = tooltip._offset();\n\n                tooltip._ensureElement();\n                element.css({ top: offset.top, left: offset.left }).show();\n            },\n\n            content: function(e) {\n                var content = e.value,\n                    options = e.crosshair.options.tooltip;\n\n                if (options.template) {\n                    content = template(options.template)({\n                        value: content\n                    });\n                }\n\n                return content;\n            },\n\n            hide: function() {\n                this.element.hide();\n            }\n        });\n\n        var ChartPane = Class.extend({\n            init: function(chart, pane) {\n                this._chart = chart;\n                this._pane = pane;\n                this.visual = pane.visual;\n                this.chartsVisual = pane.chartContainer.visual;\n                this.name = pane.options.name;\n            },\n\n            series: function() {\n                var chart = this._chart;\n                var seriesByPane = chart._plotArea.groupSeriesByPane();\n                var series = seriesByPane[this.name || \"default\"];\n\n                var result = [];\n                if (series) {\n                    for (var idx = 0; idx < series.length; idx++) {\n                        result.push(new ChartSeries(chart, series[idx]));\n                    }\n                }\n\n                return result;\n            }\n        });\n\n        var ChartSeries = Class.extend({\n            init: function(chart, options) {\n                this._chart = chart;\n                this._options = options;\n            },\n\n            points: function(filter) {\n                var points = this._points;\n                if (!points) {\n                    var series = this._seriesOptions();\n                    var plotArea = this._chart._plotArea;\n                    this._points = points = plotArea.pointsBySeriesIndex(series.index);\n                }\n                if (kendo.isFunction(filter)) {\n                    points = this._filterPoints(points, filter);\n                }\n\n\n                return points;\n            },\n\n            data: function(data) {\n                var series = this._seriesOptions();\n                if (data) {\n                    var chart = this._chart;\n                    var plotArea = chart._plotArea;\n\n                    series.data = data;\n\n                    if (series.categoryField) {\n                        var axis = plotArea.seriesCategoryAxis(series);\n                        var options = [].concat(chart.options.categoryAxis);\n\n                        chart._instance.bindCategoryAxisFromSeries(options[axis.axisIndex], axis.axisIndex);\n                    }\n\n                    chart._noTransitionsRedraw();\n                    this._clearFields();\n                }\n\n                return series.data;\n            },\n\n            findPoint: function(filter) {\n                var points = this.points();\n                for (var idx = 0; idx < points.length; idx++) {\n                    if (filter(points[idx])) {\n                        return points[idx];\n                    }\n                }\n            },\n\n            toggleHighlight: function(show, elements) {\n                if (!elements) {\n                    elements = this.points();\n                } else if (kendo.isFunction(elements)) {\n                    elements = this.points(elements);\n                } else {\n                    elements = isArray(elements) ? elements : [elements];\n                }\n\n                this._chart._instance.togglePointsHighlight(show, elements);\n            },\n\n            toggleVisibility: function(visible, filter) {\n                var chart = this._chart;\n                var seriesOptions = this._seriesOptions();\n                var hasFilter = kendo.isFunction(filter);\n                if (!hasFilter) {\n                    seriesOptions.visible = visible;\n                    chart._seriesVisibility.save(seriesOptions);\n                } else {\n                    if (inArray(seriesOptions.type, [PIE, DONUT, FUNNEL])) {\n                        var data = this._filterData(filter);\n                        for (var idx = 0; idx < data.length; idx++) {\n                            data[idx].visible = visible;\n                        }\n                    } else {\n                        seriesOptions.visible = function(data) {\n                            return filter(data.dataItem) ? visible : true;\n                        };\n                    }\n                }\n\n                chart._noTransitionsRedraw();\n\n                this._clearFields();\n            },\n\n            _filterData: function(filter) {\n                var data = this._seriesOptions().data;\n                var length = data.length;\n                var result = [];\n\n                for (var idx = 0; idx < length; idx++) {\n                    if (filter(data[idx])) {\n                        result.push(data[idx]);\n                    }\n                }\n                return result;\n            },\n\n            _filterPoints: function(points, filter) {\n                var result = [];\n                var length = points.length;\n                for (var idx = 0; idx < length; idx++) {\n                    if (filter(points[idx])) {\n                        result.push(points[idx]);\n                    }\n                }\n                return result;\n            },\n\n            _seriesOptions: function() {\n                var series = this._series;\n                if (!series) {\n                    series = this._series = this._chart._seriesOptions(this._options);\n                }\n                return series;\n            },\n\n            _clearFields: function() {\n                delete this._points;\n                delete this._series;\n            }\n        });\n\n        function triggerPaneRender(panes) {\n            for (var idx = 0; idx < panes.length; idx++) {\n                panes[idx].notifyRender();\n            }\n        }\n\n        function sharedTemplateIterator(points, colorMarker, nameColumn, content) {\n            var result = \"\";\n\n            for (var i = 0; i < points.length; i++) {\n                var point = points[i];\n                result += \"<tr>\";\n\n                if (colorMarker) {\n                    result += \"<td><span class='k-chart-shared-tooltip-marker' style='background-color:\" + (encode(point.series.color)) + \"'></span></td>\";\n                }\n\n                if (nameColumn) {\n                    result += \"<td> \" + (point.series.name ? point.series.name + \":\" : \"&nbsp;\") + \"</td>\";\n                }\n\n                result += \"<td>\" + (content(point)) + \"</td>\";\n                result += \"</tr>\";\n            }\n\n            return result;\n        }\n\n        dataviz.Tooltip = Tooltip;\n        dataviz.CrosshairTooltip = CrosshairTooltip;\n        dataviz.ChartInstanceObserver = ChartInstanceObserver;\n        dataviz.ChartPane = ChartPane;\n        dataviz.ChartSeries = ChartSeries;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"dataviz.chart\",\n        name: \"Chart\",\n        category: \"dataviz\",\n        description: \"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.\",\n        depends: [ \"data\", \"userevents\", \"drawing\", \"dataviz.core\", \"dataviz.themes\" ],\n        features: [{\n            id: \"dataviz.chart-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Chart as PDF\",\n            depends: [ \"pdf\" ]\n        }]\n    };\n\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}